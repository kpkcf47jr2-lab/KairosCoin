import{d as i,j as e,m as l}from"./ui-Bym_0wSS.js";import{u as f,aa as m}from"./index-cz92uTWo.js";import"./vendor-CCYniLZC.js";import"./crypto-1JBTrmrY.js";function C(){const{navigate:a,isUnlocked:h}=f(),[t,p]=i.useState(""),[r,o]=i.useState("waiting");i.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("origin")||"";p(c)},[]);const u=()=>{const s=m();if(!s){alert("No hay wallet activa. Crea o importa una wallet primero.");return}if(o("approved"),window.opener)window.opener.postMessage({type:"KAIROS_WALLET_CONNECT",account:s,walletId:"kairos"},t||"*"),setTimeout(()=>window.close(),1e3);else{const d=new URLSearchParams(window.location.search).get("returnUrl");if(d){const x=new URL(d);x.searchParams.set("kairosWallet",s),window.location.href=x.toString()}}},w=()=>{o("denied"),window.opener?(window.opener.postMessage({type:"KAIROS_WALLET_DENIED"},t||"*"),setTimeout(()=>window.close(),500)):a("dashboard")},j=()=>{window.history.replaceState({},"","/"),a("dashboard")};if(!h)return e.jsx("div",{className:"screen-container items-center justify-center px-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-kairos-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"üîê"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Desbloquea tu Wallet"}),e.jsx("p",{className:"text-dark-300 text-sm mb-6",children:"Desbloquea tu Kairos Wallet para conectarte a la aplicaci√≥n."}),e.jsx("button",{onClick:()=>a("unlock"),className:"btn-primary w-full py-3 rounded-xl font-semibold",children:"Desbloquear"})]})});const n=m(),b=n?`${n.slice(0,6)}...${n.slice(-4)}`:"No wallet",N=t?new URL(t).hostname:"Aplicaci√≥n desconocida";return e.jsx("div",{className:"screen-container items-center justify-center px-6",children:e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-sm",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-kairos-500 to-kairos-600 flex items-center justify-center shadow-lg shadow-kairos-500/25",children:e.jsx("span",{className:"text-4xl font-bold text-dark-950",children:"‚óÜ"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Solicitud de Conexi√≥n"})]}),e.jsxs("div",{className:"bg-dark-900/60 border border-white/10 rounded-2xl p-5 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üåê"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:N}),e.jsx("p",{className:"text-dark-400 text-xs truncate max-w-[200px]",children:t})]})]}),e.jsxs("div",{className:"border-t border-white/5 pt-4",children:[e.jsx("p",{className:"text-dark-300 text-xs mb-3",children:"Quiere conectarse con tu wallet:"}),e.jsxs("div",{className:"flex items-center gap-3 bg-dark-800/60 rounded-xl p-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-kairos-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-kairos-400 font-bold text-sm",children:"‚óÜ"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:"Kairos Wallet"}),e.jsx("p",{className:"text-dark-400 text-xs font-mono",children:b})]})]})]}),e.jsxs("div",{className:"border-t border-white/5 mt-4 pt-4",children:[e.jsx("p",{className:"text-dark-400 text-xs",children:"Permisos solicitados:"}),e.jsxs("ul",{className:"mt-2 space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2 text-xs text-dark-300",children:[e.jsx("span",{className:"text-green-400",children:"‚úì"})," Ver direcci√≥n de tu wallet"]}),e.jsxs("li",{className:"flex items-center gap-2 text-xs text-dark-300",children:[e.jsx("span",{className:"text-green-400",children:"‚úì"})," Ver saldos de tokens"]}),e.jsxs("li",{className:"flex items-center gap-2 text-xs text-dark-300",children:[e.jsx("span",{className:"text-red-400",children:"‚úó"})," No puede mover tus fondos"]})]})]})]}),r==="approved"&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center mb-4 p-3 rounded-xl bg-green-500/10 border border-green-500/20",children:[e.jsx("p",{className:"text-green-400 text-sm font-medium",children:"‚úì Conectado exitosamente"}),e.jsx("p",{className:"text-dark-400 text-xs mt-1",children:"Esta ventana se cerrar√° autom√°ticamente..."})]}),r==="denied"&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center mb-4 p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:e.jsx("p",{className:"text-red-400 text-sm font-medium",children:"Conexi√≥n rechazada"})}),r==="waiting"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:u,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-kairos-500 to-kairos-600 text-dark-950 font-bold text-sm hover:opacity-90 transition-all shadow-lg shadow-kairos-500/25",children:"Conectar Wallet"}),e.jsx("button",{onClick:w,className:"w-full py-3 rounded-xl bg-dark-800/60 border border-white/10 text-white/60 font-medium text-sm hover:text-white hover:border-white/20 transition-all",children:"Rechazar"})]}),e.jsx("button",{onClick:j,className:"w-full mt-4 text-center text-xs text-dark-400 hover:text-white transition-colors",children:"Ir al Dashboard ‚Üí"})]})})}export{C as default};
