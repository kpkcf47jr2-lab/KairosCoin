import{d as i,j as e,e as z,_ as S,b as U,O as D,m as I,M as h,k as g,l as B}from"./ui-Bym_0wSS.js";import{u as R,U as u,E as M,C as W}from"./index-Cquho6SP.js";import{formatUnits as j,formatEther as o}from"./crypto-1JBTrmrY.js";import"./vendor-CCYniLZC.js";function _(){const{goBack:b,activeChainId:N}=R(),[f,k]=i.useState({}),[x,d]=i.useState(!0),[m,w]=i.useState(null),n=i.useCallback(async()=>{d(!0);const s={},a=u.map(async t=>{try{const r=await M(t).getFeeData(),l=r.gasPrice?parseFloat(j(r.gasPrice,"gwei")):0,C=r.maxPriorityFeePerGas?parseFloat(j(r.maxPriorityFeePerGas,"gwei")):0,F=r.gasPrice?r.gasPrice*21000n:0n,A=parseFloat(o(F)),E=r.gasPrice?r.gasPrice*65000n:0n,G=parseFloat(o(E)),L=r.gasPrice?r.gasPrice*150000n:0n,T=parseFloat(o(L));s[t]={gasPrice:l.toFixed(2),maxPriorityFee:C.toFixed(2),transferCost:A,tokenCost:G,swapCost:T,level:l<5?"low":l<30?"medium":l<100?"high":"extreme",supportsEIP1559:!!r.maxFeePerGas}}catch{s[t]={gasPrice:"â€”",level:"unknown",error:!0}}});await Promise.allSettled(a),k(s),w(new Date),d(!1)},[]);i.useEffect(()=>{n();const s=setInterval(n,15e3);return()=>clearInterval(s)},[n]);const p=s=>{switch(s){case"low":return"text-green-400";case"medium":return"text-yellow-400";case"high":return"text-orange-400";case"extreme":return"text-red-400";default:return"text-dark-400"}},v=s=>{switch(s){case"low":return"bg-green-500/10 border-green-500/20";case"medium":return"bg-yellow-500/10 border-yellow-500/20";case"high":return"bg-orange-500/10 border-orange-500/20";case"extreme":return"bg-red-500/10 border-red-500/20";default:return"bg-dark-800/50 border-dark-700"}},y=s=>{switch(s){case"low":return e.jsx(B,{className:"text-green-400",size:14});case"medium":return e.jsx(h,{className:"text-yellow-400",size:14});case"high":return e.jsx(g,{className:"text-orange-400",size:14});case"extreme":return e.jsx(g,{className:"text-red-400",size:14});default:return e.jsx(h,{className:"text-dark-400",size:14})}},P=s=>{switch(s){case"low":return"ðŸŸ¢ Bajo";case"medium":return"ðŸŸ¡ Normal";case"high":return"ðŸŸ  Alto";case"extreme":return"ðŸ”´ Muy Alto";default:return"âšª â€”"}};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:b,className:"text-dark-300 hover:text-white",children:e.jsx(z,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Gas Tracker"})]})]}),e.jsx("button",{onClick:n,className:"text-dark-400 hover:text-kairos-400 transition-colors",disabled:x,children:e.jsx(U,{size:18,className:x?"animate-spin":""})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[m&&e.jsxs("div",{className:"flex items-center gap-1 text-dark-500 text-xs",children:[e.jsx(D,{size:10}),e.jsxs("span",{children:["Actualizado: ",m.toLocaleTimeString()]}),e.jsx("span",{className:"ml-auto text-dark-600",children:"Auto-refresh: 15s"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["low","medium","high","extreme"].map(s=>e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${p(s)} bg-dark-800`,children:P(s)},s))}),u.map(s=>{const a=W[s],t=f[s],c=s===N;return e.jsxs(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-xl p-4 border transition-all ${c?"border-kairos-500/50 bg-kairos-500/5":v(t?.level)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:a.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold text-sm",children:a.shortName}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:a.name})]}),c&&e.jsx("span",{className:"px-1.5 py-0.5 bg-kairos-500/20 text-kairos-400 text-[9px] font-bold rounded",children:"ACTIVA"})]}),e.jsxs("div",{className:"text-right flex items-center gap-2",children:[t&&!t.error&&y(t.level),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold text-lg ${p(t?.level)}`,children:t?.gasPrice||"â€”"}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:"Gwei"})]})]})]}),t&&!t.error&&e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-dark-900/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-dark-400 text-[9px] mb-0.5",children:"Enviar"}),e.jsx("p",{className:"text-white text-xs font-semibold",children:t.transferCost<1e-4?"<0.0001":t.transferCost.toFixed(4)}),e.jsx("p",{className:"text-dark-500 text-[9px]",children:a.nativeCurrency.symbol})]}),e.jsxs("div",{className:"bg-dark-900/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-dark-400 text-[9px] mb-0.5",children:"Token TX"}),e.jsx("p",{className:"text-white text-xs font-semibold",children:t.tokenCost<1e-4?"<0.0001":t.tokenCost.toFixed(4)}),e.jsx("p",{className:"text-dark-500 text-[9px]",children:a.nativeCurrency.symbol})]}),e.jsxs("div",{className:"bg-dark-900/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-dark-400 text-[9px] mb-0.5",children:"Swap"}),e.jsx("p",{className:"text-white text-xs font-semibold",children:t.swapCost<1e-4?"<0.0001":t.swapCost.toFixed(4)}),e.jsx("p",{className:"text-dark-500 text-[9px]",children:a.nativeCurrency.symbol})]})]}),t?.supportsEIP1559&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-dark-500 text-[10px]",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"EIP-1559 â€¢ Priority: ",t.maxPriorityFee," Gwei"]})]},s)}),e.jsxs("div",{className:"bg-dark-800/30 rounded-xl p-4 border border-dark-700/50",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-2",children:"ðŸ’¡ Tips para Ahorrar Gas"}),e.jsxs("ul",{className:"space-y-1 text-dark-400 text-xs",children:[e.jsx("li",{children:"â€¢ BSC, Polygon y Arbitrum tienen gas ultra-bajo (<1 Gwei)"}),e.jsx("li",{children:"â€¢ Las TX son mÃ¡s baratas en fines de semana"}),e.jsx("li",{children:'â€¢ Usa "EconÃ³mico" en gas preset para TX no urgentes'}),e.jsx("li",{children:"â€¢ Los batch de aprobaciones ahorran hasta 40% de gas"})]})]})]})]})}export{_ as default};
