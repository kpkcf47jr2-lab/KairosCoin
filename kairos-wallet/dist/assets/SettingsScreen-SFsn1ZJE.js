import{d as a,a5 as Is,w as Ds,S as se,i as Ms,a2 as Vs,a6 as je,L as as,n as ls,O as qs,a7 as ns,a8 as Gs,G as cs,a9 as Us,aa as Hs,_ as is,a1 as Js,I as Ys,ab as Xs,p as Qs,j as e,e as Zs,ac as et,m as d,C as st,h as ke,ad as tt,P as rs,A as we,T as E,E as os,f as ds,ae as xs,af as us,ag as ms}from"./ui-Bym_0wSS.js";import{b as at,u as lt,c as nt,i as ct,d as it,e as rt,h as Ne,C as ot,A as ps,s as dt,j as hs,k as xt,r as ut,l as mt,m as pt,n as ht,o as ve,f as te,p as gs,S as Ce,q as bs,t as ae,v as gt,w as bt,x as ft,y as yt,z as jt}from"./index-D681O2Ot.js";import"./vendor-CCYniLZC.js";import"./crypto-1JBTrmrY.js";const le="https://kairos-api-u6k5.onrender.com";async function kt(t,c,r){if(!t||!c||!r)throw new Error("Faltan datos para crear el backup");const i=await Ct(c,r),o=await fetch(`${le}/api/wallet/backup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:t,encryptedVault:i,timestamp:Date.now(),version:1})}),g=await o.json();if(!o.ok)throw new Error(g.error||"Error al crear backup");return g}async function wt(t,c){if(!t||!c)throw new Error("Faltan datos para restaurar");const r=await fetch(`${le}/api/wallet/backup?address=${t}`),i=await r.json();if(!r.ok)throw new Error(i.error||"Backup no encontrado");if(!i.encryptedVault)throw new Error("No hay backup disponible");return{vault:await St(i.encryptedVault,c),timestamp:i.timestamp,version:i.version}}async function Nt(t){try{const r=await(await fetch(`${le}/api/wallet/backup/check?address=${t}`)).json();return r.exists?{exists:!0,timestamp:r.timestamp}:{exists:!1}}catch{return{exists:!1}}}async function vt(t,c){const r=await fetch(`${le}/api/wallet/backup`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:t,backupPassword:c})}),i=await r.json();if(!r.ok)throw new Error(i.error||"Error al eliminar backup");return i}async function fs(t,c){const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(t),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:c,iterations:6e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function Ct(t,c){const r=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(16)),o=crypto.getRandomValues(new Uint8Array(12)),g=await fs(c,i),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},g,r.encode(typeof t=="string"?t:JSON.stringify(t))),p=new Uint8Array(i.length+o.length+n.byteLength);return p.set(i,0),p.set(o,i.length),p.set(new Uint8Array(n),i.length+o.length),btoa(String.fromCharCode(...p))}async function St(t,c){const r=Uint8Array.from(atob(t),p=>p.charCodeAt(0)),i=r.slice(0,16),o=r.slice(16,28),g=r.slice(28),n=await fs(c,i);try{const p=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},n,g);return new TextDecoder().decode(p)}catch{throw new Error("ContraseÃ±a de backup incorrecta")}}function Tt(){const{t}=at(),{activeAddress:c,activeChainId:r,goBack:i,navigate:o,lock:g,showToast:n,getAllAccounts:p,setActiveAddress:ys,vault:ne}=lt(),[Se,js]=a.useState(!1),[ks,Ae]=a.useState(null),[ws,Ee]=a.useState(!1),[ce,Pe]=a.useState(""),[P,Le]=a.useState(null),[Te,L]=a.useState(""),[ie,ze]=a.useState(!1),[Oe,Ns]=a.useState(nt()),[Re,$e]=a.useState(ct()),[re,vs]=a.useState(it()),[Cs,T]=a.useState(!1),[oe,z]=a.useState(""),[de,xe]=a.useState(null),[Be,j]=a.useState(""),[ue,me]=a.useState(!1),[Ss,O]=a.useState(!1),[R,We]=a.useState(""),[_e,pe]=a.useState(""),[Fe,Ke]=a.useState(!1),[As,$]=a.useState(!1),[B,Ie]=a.useState(1),[Es,W]=a.useState(!1),[N,De]=a.useState(""),[Me,Ve]=a.useState(""),[_,qe]=a.useState(""),[Ge,Ue]=a.useState(""),[He,Je]=a.useState(!1),[Ye,F]=a.useState(null),[v,Xe]=a.useState(""),[Ps,C]=a.useState(!1),[K,I]=a.useState(""),[k,D]=a.useState(""),[M,V]=a.useState(""),[Qe,b]=a.useState(""),[Ze,q]=a.useState(!1),[Ls,G]=a.useState(!1),[he,ge]=a.useState("backup"),[h,be]=a.useState(""),[U,Ts]=a.useState(""),[H,w]=a.useState(!1),[J,m]=a.useState(""),[Y,f]=a.useState(""),[fe,X]=a.useState(null),[zs,S]=a.useState(!1),[u,Q]=a.useState(rt()),[y,es]=a.useState(Ne()),Z=p(),ee=ot[r],Os=async s=>{await navigator.clipboard.writeText(s),Ae(s),n(t("common.copied"),"success"),setTimeout(()=>Ae(null),2e3)},Rs=async()=>{O(!0),We(""),pe("")},ss=async()=>{if(R){Ke(!0),pe("");try{const s=await bt(R,`Wallet ${Z.length+1}`);n(`Nueva wallet creada: ${te(s.address)}`,"success"),O(!1)}catch(s){pe(s.message||"ContraseÃ±a incorrecta")}Ke(!1)}},$s=()=>{$(!0),Ie(1)},Bs=()=>{B===1?Ie(2):(ft(),o("welcome"),n("Wallet eliminada","info"),$(!1))},Ws=()=>{window.open(`${ee.blockExplorerUrl}/address/${c}`,"_blank")},_s=async()=>{L("");try{const s=await gs(ce),x=[...s.accounts||[],...s.importedAccounts||[]].find(A=>A.address.toLowerCase()===c?.toLowerCase());if(!x)throw new Error("Cuenta no encontrada");Le(x.privateKey)}catch(s){L(s.message||"ContraseÃ±a incorrecta")}},ye=()=>{Ee(!1),Pe(""),Le(null),L(""),ze(!1)},ts=async()=>{if(!(!_||!N)){Je(!0),Ue("");try{if(!yt(N))throw new Error("DirecciÃ³n invÃ¡lida");const s=await jt(_,N,Me||void 0);n(`Watch-only aÃ±adida: ${te(s.address)}`,"success"),W(!1),De(""),Ve(""),qe("")}catch(s){Ue(s.message)}Je(!1)}},Fs=async()=>{P&&(await navigator.clipboard.writeText(P),n("Clave privada copiada","success"))},Ks=[{title:t("settings.accounts"),items:[{icon:Is,label:t("settings.accounts"),desc:`${Z.length} wallet${Z.length!==1?"s":""}`,action:()=>js(!Se),color:"text-blue-400"},{icon:Ds,label:t("settings.explorer"),desc:ee.shortName+"Scan",action:Ws,color:"text-green-400"}]},{title:t("settings.security"),items:[{icon:se,label:t("settings.security"),desc:t("settings.encryption"),color:"text-purple-400"},{icon:Ms,label:t("settings.export_key"),desc:t("settings.requires_password"),action:()=>Ee(!0),color:"text-orange-400"},{icon:Vs,label:t("settings.backup_seed","Frase Semilla"),desc:t("settings.backup_seed_desc","Ver tu frase de recuperaciÃ³n"),action:()=>T(!0),color:"text-yellow-400"},{icon:je,label:"Backup en la Nube",desc:"Respalda tu wallet encriptada",action:async()=>{G(!0),ge("backup"),be(""),m(""),f("");try{const s=await Nt(c);X(s)}catch{X({exists:!1})}},color:"text-sky-400"},{icon:as,label:"Cambiar ContraseÃ±a",desc:"Actualiza tu contraseÃ±a del vault",action:()=>C(!0),color:"text-pink-400"},{icon:se,label:t("settings.autolock"),desc:hs().find(s=>s.value===Oe)?.label||"5 minutos",action:()=>{const s=hs(),l=s.findIndex(A=>A.value===Oe),x=s[(l+1)%s.length];dt(x.value),Ns(x.value),n(`Auto-lock: ${x.label}`,"info")},color:"text-cyan-400"},...xt()?[{icon:se,label:t("settings.biometric"),desc:Re?t("settings.biometric_on","Activada"):t("settings.biometric_off","Desactivada"),action:async()=>{if(Re)ut(),$e(!1),n("BiometrÃ­a desactivada","info");else try{await mt(),$e(!0),n("BiometrÃ­a activada","success")}catch(s){n("Error: "+s.message,"error")}},color:"text-green-400"}]:[]]},{title:"Notificaciones",items:[{icon:ls,label:y.permission==="granted"?"Push Activadas":"Activar Push",desc:y.permission==="granted"?"Recibe alertas de txs, precios y seguridad":y.permission==="denied"?"Bloqueadas â€” habilita en ajustes del navegador":"Toca para activar notificaciones push",action:async()=>{if(y.permission==="granted")S(!0);else if(y.permission!=="denied"){const s=await pt();es(Ne()),n(s?"Push activadas âœ…":"Permiso denegado",s?"success":"error")}else n("Notificaciones bloqueadas. Habilita en ajustes del navegador.","error")},color:y.permission==="granted"?"text-green-400":"text-kairos-400"},...y.permission==="granted"?[{icon:se,label:"Configurar CategorÃ­as",desc:"Elige quÃ© notificaciones recibir",action:()=>S(!0),color:"text-indigo-400"}]:[]]},{title:t("settings.general","General"),items:[{icon:qs,label:"TX Pendientes",desc:"Acelerar o cancelar transacciones",action:()=>o("pending"),color:"text-yellow-400"},{icon:ns,label:"Watch-Only",desc:"Importar direcciÃ³n de solo lectura",action:()=>W(!0),color:"text-teal-400"},{icon:Gs,label:t("settings.walletconnect"),desc:t("settings.connect_dapps"),action:()=>o("walletconnect"),color:"text-blue-400"},{icon:cs,label:t("settings.network"),desc:`${ee.icon} ${ee.name}`,action:()=>o("networks"),color:"text-cyan-400"},{icon:Us,label:t("settings.approvals","Aprobaciones"),desc:t("settings.approvals_desc","Gestionar permisos de tokens"),action:()=>o("approvals"),color:"text-orange-400"},{icon:Hs,label:"Staking Hub",desc:"Lido, PancakeSwap, GMX â€” gana yield",action:()=>o("staking"),color:"text-green-400"},{icon:is,label:"Gas Tracker",desc:"Precios de gas en todas las redes",action:()=>o("gas"),color:"text-amber-400"},{icon:Js,label:"AuditorÃ­a de Token",desc:"Analiza tokens por scams/honeypots",action:()=>o("tokenaudit"),color:"text-red-400"},{icon:is,label:"RPC Health",desc:"Estado de nodos RPC + latencia",action:()=>o("rpchealth"),color:"text-cyan-400"},{icon:cs,label:t("settings.language"),desc:ve().find(s=>s.code===re)?.flag+" "+ve().find(s=>s.code===re)?.name,action:()=>{const s=ve(),l=s.findIndex(A=>A.code===re),x=s[(l+1)%s.length];ht(x.code),vs(x.code),n(`${x.flag} ${x.name}`,"info")},color:"text-pink-400"},{icon:Ys,label:t("settings.about"),desc:`v${ps} â€” Kairos 777 Inc.`,color:"text-kairos-400"}]},{title:t("settings.danger","Peligro"),items:[{icon:Xs,label:t("settings.lock"),desc:t("settings.lock_desc"),action:g,color:"text-yellow-400"},{icon:Qs,label:t("settings.delete"),desc:t("settings.delete_desc"),action:$s,color:"text-red-400",danger:!0}]}];return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:i,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(Zs,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:t("settings.title")})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 -mx-1 px-1",children:[Ks.map(s=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-dark-400 uppercase tracking-wider mb-2 px-1",children:s.title}),e.jsx("div",{className:"glass-card overflow-hidden",children:s.items.map((l,x)=>e.jsxs("button",{onClick:l.action,className:`w-full flex items-center gap-3 p-4 hover:bg-white/5 transition-all text-left ${x>0?"border-t border-white/5":""}`,children:[e.jsx("div",{className:`w-9 h-9 rounded-xl ${l.danger?"bg-red-500/10":"bg-white/5"} flex items-center justify-center`,children:e.jsx(l.icon,{size:16,className:l.color})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:`text-sm font-medium ${l.danger?"text-red-400":""}`,children:l.label}),l.desc&&e.jsx("p",{className:"text-dark-400 text-xs",children:l.desc})]}),e.jsx(et,{size:16,className:"text-dark-500"})]},l.label))})]},s.title)),Se&&e.jsxs(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"glass-card-strong p-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Mis Wallets"}),e.jsxs("div",{className:"space-y-2",children:[Z.map(s=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-all cursor-pointer ${s.address===c?"bg-kairos-500/10 border border-kairos-500/20":"hover:bg-white/5"}`,onClick:()=>ys(s.address),children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-kairos-400 to-kairos-600 flex items-center justify-center text-xs font-bold text-dark-950",children:s.name?.charAt(0)||"W"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.name}),s.isWatchOnly&&e.jsx("span",{className:"text-[8px] bg-teal-500/15 text-teal-400 px-1.5 py-0.5 rounded font-bold",children:"ðŸ‘ WATCH"}),s.isImported&&e.jsx("span",{className:"text-[8px] bg-purple-500/15 text-purple-400 px-1.5 py-0.5 rounded font-bold",children:"IMPORTADA"})]}),e.jsx("p",{className:"text-dark-400 text-xs font-mono",children:te(s.address,6)})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),Os(s.address)},className:"text-dark-400",children:ks===s.address?e.jsx(st,{size:14,className:"text-green-400"}):e.jsx(ke,{size:14})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),F(s.address),Xe(s.name||"")},className:"text-dark-400 hover:text-dark-200 p-1",children:e.jsx(tt,{size:14})}),s.address===c&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-kairos-400"})]},s.address)),e.jsxs("button",{onClick:Rs,className:"w-full flex items-center gap-2 p-3 rounded-xl border border-dashed border-white/10 text-dark-400 hover:text-white hover:border-kairos-500/30 transition-all",children:[e.jsx(rs,{size:16}),e.jsx("span",{className:"text-sm",children:"Agregar Wallet"})]})]})]}),e.jsx(we,{children:Ye&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-6",onClick:()=>F(null),children:e.jsxs(d.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:s=>s.stopPropagation(),className:"glass-card-strong p-5 w-full max-w-sm",children:[e.jsx("h3",{className:"text-base font-bold mb-3",children:"Renombrar Cuenta"}),e.jsx("input",{value:v,onChange:s=>Xe(s.target.value),placeholder:"Nombre de la cuenta",className:"glass-input mb-3 text-sm",autoFocus:!0,maxLength:30}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(null),className:"glass-button flex-1 py-2.5 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:()=>{if(!ne||!v.trim())return;const s=ne.accounts||[],l=ne.importedAccounts||[];for(const x of[...s,...l])if(x.address.toLowerCase()===Ye.toLowerCase()){x.name=v.trim();break}n(`Renombrado a "${v.trim()}"`,"success"),F(null)},disabled:!v.trim(),className:"kairos-button flex-1 py-2.5 text-sm disabled:opacity-40",children:"Guardar"})]})]})})}),e.jsx(we,{children:ws&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-6",onClick:ye,children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card-strong p-6 w-full max-w-sm",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:"Exportar Clave Privada"}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:te(c)}),P?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2 border border-red-500/30",children:[e.jsx(E,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-red-300 font-medium",children:"NO compartas esta clave. Cualquiera con ella puede robar todos tus fondos."})]}),e.jsxs("div",{className:"bg-dark-900/80 rounded-xl p-3 mb-4 relative",children:[e.jsx("p",{className:"font-mono text-xs break-all select-all",style:{filter:ie?"none":"blur(5px)"},children:P}),e.jsx("button",{onClick:()=>ze(!ie),className:"absolute top-2 right-2 text-dark-400",children:ie?e.jsx(os,{size:14}):e.jsx(ds,{size:14})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ye,className:"glass-button flex-1 py-3 text-center text-sm",children:"Cerrar"}),e.jsxs("button",{onClick:Fs,className:"kairos-button flex-1 py-3 text-sm flex items-center justify-center gap-1",children:[e.jsx(ke,{size:14})," Copiar"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2",children:[e.jsx(E,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-dark-300",children:"Nunca compartas tu clave privada. Cualquiera con ella tiene control total de tus fondos."})]}),e.jsx("input",{type:"password",value:ce,onChange:s=>{Pe(s.target.value),L("")},placeholder:"Ingresa tu contraseÃ±a",className:"glass-input mb-3 text-sm",autoFocus:!0}),Te&&e.jsx("p",{className:"text-red-400 text-xs mb-3",children:Te}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ye,className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:_s,disabled:!ce,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:"Desbloquear"})]})]})]})})}),e.jsxs("div",{className:"text-center pb-4",children:[e.jsx("img",{src:"/icons/logo-128.png",alt:"Kairos",className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsxs("p",{className:"text-dark-500 text-[10px]",children:["Kairos Wallet v",ps,e.jsx("br",{}),"Â© 2026 Kairos 777 Inc. Todos los derechos reservados."]})]})]}),e.jsxs(we,{children:[Cs&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-6",onClick:()=>{T(!1),z(""),xe(null),j(""),me(!1)},children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card-strong p-6 w-full max-w-sm",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:t("settings.backup_seed","Frase Semilla")}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:t("settings.backup_seed_modal_desc","Tu frase de recuperaciÃ³n de 12 palabras")}),de?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2 border border-red-500/30",children:[e.jsx(E,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-red-300 font-medium",children:t("settings.seed_danger","NO compartas estas palabras. EscrÃ­belas en papel y guÃ¡rdalas en un lugar seguro.")})]}),e.jsxs("div",{className:"bg-dark-900/80 rounded-xl p-4 mb-4 relative",children:[e.jsx("div",{className:`grid grid-cols-3 gap-2 ${ue?"":"blur-sm"}`,children:de.split(" ").map((s,l)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] text-dark-500 w-4 text-right",children:l+1}),e.jsx("span",{className:"text-xs font-mono text-white",children:s})]},l))}),e.jsx("button",{onClick:()=>me(!ue),className:"absolute top-2 right-2 text-dark-400 p-1",children:ue?e.jsx(os,{size:14}):e.jsx(ds,{size:14})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{T(!1),z(""),xe(null),me(!1)},className:"glass-button flex-1 py-3 text-center text-sm",children:t("common.close")}),e.jsxs("button",{onClick:async()=>{await navigator.clipboard.writeText(de),n(t("common.copied"),"success")},className:"kairos-button flex-1 py-3 text-sm flex items-center justify-center gap-1",children:[e.jsx(ke,{size:14})," ",t("common.copy")]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2",children:[e.jsx(E,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-dark-300",children:t("settings.seed_warning","Nunca compartas tu frase semilla. Cualquiera con ella tiene control total de tus fondos.")})]}),e.jsx("input",{type:"password",value:oe,onChange:s=>{z(s.target.value),j("")},placeholder:t("unlock.password"),className:"glass-input mb-3 text-sm",autoFocus:!0}),Be&&e.jsx("p",{className:"text-red-400 text-xs mb-3",children:Be}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{T(!1),z(""),j("")},className:"glass-button flex-1 py-3 text-center text-sm",children:t("common.cancel")}),e.jsx("button",{onClick:async()=>{j("");try{const s=await gs(oe);s.mnemonic?xe(s.mnemonic):j(t("settings.no_seed","Wallet importada sin frase semilla"))}catch{j(t("unlock.wrong_password"))}},disabled:!oe,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:t("unlock.unlock")})]})]})]})}),Ss&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>O(!1),children:e.jsxs(d.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(rs,{size:18,className:"text-kairos-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Nueva Wallet"})]}),e.jsx("p",{className:"text-dark-400 text-sm mb-4",children:"Ingresa tu contraseÃ±a para crear una nueva wallet:"}),e.jsx("input",{type:"password",value:R,onChange:s=>We(s.target.value),onKeyDown:s=>s.key==="Enter"&&ss(),placeholder:"ContraseÃ±a",className:"glass-input w-full py-3 mb-2",autoFocus:!0}),_e&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:_e}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>O(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:ss,disabled:!R||Fe,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:Fe?"Creando...":"Crear"})]})]})}),As&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>$(!1),children:e.jsxs(d.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(E,{size:20,className:"text-red-400"}),e.jsx("h3",{className:"font-bold text-red-400",children:B===1?"âš ï¸ PELIGRO":"Â¿ESTÃS SEGURO?"})]}),e.jsx("p",{className:"text-dark-300 text-sm mb-6",children:B===1?"Esto eliminarÃ¡ tu wallet de este dispositivo permanentemente. Â¿Tienes tu frase semilla guardada?":"Â¿ESTÃS COMPLETAMENTE SEGURO? No hay vuelta atrÃ¡s. Tu wallet serÃ¡ eliminada permanentemente."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:Bs,className:"flex-1 py-3 text-sm font-semibold rounded-xl bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",children:B===1?"Continuar":"SÃ­, eliminar"})]})]})}),Es&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>W(!1),children:e.jsxs(d.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ns,{size:18,className:"text-teal-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Importar Watch-Only"})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:"Solo lectura â€” puedes ver balances e historial pero no enviar transacciones."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:N,onChange:s=>De(s.target.value),placeholder:"0x... direcciÃ³n",className:"glass-input w-full text-sm font-mono",autoFocus:!0}),e.jsx("input",{type:"text",value:Me,onChange:s=>Ve(s.target.value),placeholder:"Nombre (opcional)",className:"glass-input w-full text-sm"}),e.jsx("input",{type:"password",value:_,onChange:s=>qe(s.target.value),onKeyDown:s=>s.key==="Enter"&&ts(),placeholder:"ContraseÃ±a",className:"glass-input w-full text-sm"})]}),Ge&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:Ge}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>W(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:ts,disabled:!_||!N||He,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:He?"Importando...":"Importar"})]})]})}),Ls&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>G(!1),children:e.jsxs(d.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl max-h-[85vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(je,{size:18,className:"text-sky-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Backup en la Nube"})]}),e.jsxs("div",{className:"flex gap-1 mb-4 bg-white/5 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>{ge("backup"),m(""),f("")},className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-medium transition-all ${he==="backup"?"bg-sky-500/20 text-sky-400":"text-dark-400 hover:text-white"}`,children:[e.jsx(xs,{size:14})," Respaldar"]}),e.jsxs("button",{onClick:()=>{ge("restore"),m(""),f("")},className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-medium transition-all ${he==="restore"?"bg-green-500/20 text-green-400":"text-dark-400 hover:text-white"}`,children:[e.jsx(us,{size:14})," Restaurar"]})]}),he==="backup"?e.jsxs(e.Fragment,{children:[fe?.exists&&e.jsxs("div",{className:"glass-card p-3 mb-3 flex items-start gap-2 border border-sky-500/20",children:[e.jsx(je,{size:14,className:"text-sky-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-[11px]",children:[e.jsx("p",{className:"text-sky-300 font-medium",children:"Backup existente"}),e.jsxs("p",{className:"text-dark-400",children:["Ãšltimo: ",new Date(fe.timestamp).toLocaleDateString()]})]})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-3",children:"Tu vault se encriptarÃ¡ con doble capa (AES-256-GCM) antes de subir al servidor. Solo tÃº podrÃ¡s desencriptarlo con tu contraseÃ±a de backup."}),e.jsx("input",{type:"password",value:h,onChange:s=>{be(s.target.value),m("")},placeholder:"ContraseÃ±a de backup (mÃ­n. 8 chars)",className:"glass-input w-full text-sm mb-3",autoFocus:!0}),J&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:J}),Y&&e.jsx("p",{className:"text-green-400 text-xs mb-2",children:Y}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>G(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(h.length<8){m("MÃ­nimo 8 caracteres");return}w(!0),m(""),f("");try{const s=localStorage.getItem(Ce.ENCRYPTED_VAULT);if(!s)throw new Error("No hay vault local");await kt(c,s,h),f("âœ… Backup creado exitosamente"),X({exists:!0,timestamp:new Date().toISOString()}),n("Backup en la nube creado","success")}catch(s){m(s.message||"Error al crear backup")}w(!1)},disabled:!h||H,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40 flex items-center justify-center gap-1.5",children:H?e.jsxs(e.Fragment,{children:[e.jsx(ms,{size:14,className:"animate-spin"})," Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{size:14})," Respaldar"]})})]}),fe?.exists&&e.jsx("button",{onClick:async()=>{if(confirm("Â¿Eliminar el backup de la nube?")){w(!0);try{await vt(c,h),X({exists:!1}),n("Backup eliminado","info")}catch(s){m(s.message)}w(!1)}},className:"w-full mt-3 py-2 text-xs text-red-400 hover:text-red-300 transition-colors",children:"Eliminar backup de la nube"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-dark-400 text-xs mb-3",children:"Restaura tu wallet desde un backup en la nube. Necesitas la direcciÃ³n y la contraseÃ±a de backup que usaste."}),e.jsx("input",{type:"text",value:U,onChange:s=>{Ts(s.target.value),m("")},placeholder:"0x... direcciÃ³n de la wallet",className:"glass-input w-full text-sm font-mono mb-2"}),e.jsx("input",{type:"password",value:h,onChange:s=>{be(s.target.value),m("")},placeholder:"ContraseÃ±a de backup",className:"glass-input w-full text-sm mb-3"}),J&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:J}),Y&&e.jsx("p",{className:"text-green-400 text-xs mb-2",children:Y}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>G(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(!U||!h){m("Completa todos los campos");return}w(!0),m(""),f("");try{const s=await wt(U,h);localStorage.setItem(Ce.ENCRYPTED_VAULT,s.vault),localStorage.setItem(Ce.HAS_WALLET,"true"),f("âœ… Wallet restaurada. Recarga la app."),n("Wallet restaurada desde la nube","success")}catch(s){m(s.message||"Error al restaurar")}w(!1)},disabled:!U||!h||H,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40 flex items-center justify-center gap-1.5",children:H?e.jsxs(e.Fragment,{children:[e.jsx(ms,{size:14,className:"animate-spin"})," Restaurando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(us,{size:14})," Restaurar"]})})]})]})]})}),Ps&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>C(!1),children:e.jsxs(d.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(as,{size:18,className:"text-pink-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Cambiar ContraseÃ±a"})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:"La nueva contraseÃ±a protegerÃ¡ tu vault. MÃ­nimo 8 caracteres."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"password",value:K,onChange:s=>I(s.target.value),placeholder:"ContraseÃ±a actual",className:"glass-input w-full text-sm",autoFocus:!0}),e.jsx("input",{type:"password",value:k,onChange:s=>D(s.target.value),placeholder:"Nueva contraseÃ±a (mÃ­n. 8 chars)",className:"glass-input w-full text-sm"}),e.jsx("input",{type:"password",value:M,onChange:s=>V(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(async()=>{if(k!==M){b("Las contraseÃ±as no coinciden");return}q(!0),b("");try{await bs(K,k),n("âœ… ContraseÃ±a cambiada exitosamente","success"),C(!1),I(""),D(""),V("")}catch(l){b(l.message)}q(!1)})()},placeholder:"Confirmar nueva contraseÃ±a",className:"glass-input w-full text-sm"})]}),Qe&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:Qe}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>{C(!1),I(""),D(""),V(""),b("")},className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(k!==M){b("Las contraseÃ±as no coinciden");return}q(!0),b("");try{await bs(K,k),n("âœ… ContraseÃ±a cambiada exitosamente","success"),C(!1),I(""),D(""),V("")}catch(s){b(s.message)}q(!1)},disabled:!K||!k||!M||Ze,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:Ze?"Cambiando...":"Cambiar"})]})]})}),zs&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>S(!1),children:e.jsxs(d.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl max-h-[85vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ls,{size:18,className:"text-kairos-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Notificaciones Push"})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:"Elige quÃ© notificaciones deseas recibir. Los cambios se guardan automÃ¡ticamente."}),e.jsx("div",{className:"space-y-1",children:[{key:"transactions",label:"Transacciones",desc:"EnvÃ­os y recibos confirmados",emoji:"ðŸ’¸"},{key:"priceAlerts",label:"Alertas de Precio",desc:"Cuando se activan tus alertas",emoji:"ðŸ“ˆ"},{key:"security",label:"Seguridad",desc:"Aprobaciones y actividad sospechosa",emoji:"ðŸ›¡ï¸"},{key:"staking",label:"Staking & Vault",desc:"Rewards y yield acumulado",emoji:"ðŸŒ¾"},{key:"system",label:"Sistema",desc:"Actualizaciones y mantenimiento",emoji:"âš™ï¸"},{key:"marketing",label:"Promociones",desc:"Ofertas y novedades de Kairos",emoji:"ðŸŽ"}].map(s=>e.jsxs("button",{onClick:()=>{const l=!u.categories[s.key],x=ae({categories:{[s.key]:l}});Q(x)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all text-left",children:[e.jsx("span",{className:"text-lg",children:s.emoji}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:s.label}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:s.desc})]}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-all flex items-center px-0.5 ${u.categories[s.key]?"bg-kairos-500":"bg-dark-700"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-all ${u.categories[s.key]?"translate-x-4":"translate-x-0"}`})})]},s.key))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/5",children:e.jsxs("button",{onClick:()=>{const s=ae({quiet:{enabled:!u.quiet.enabled}});Q(s)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all text-left",children:[e.jsx("span",{className:"text-lg",children:"ðŸŒ™"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"Horas Silenciosas"}),e.jsxs("p",{className:"text-dark-500 text-[10px]",children:[u.quiet.start," â€” ",u.quiet.end]})]}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-all flex items-center px-0.5 ${u.quiet.enabled?"bg-kairos-500":"bg-dark-700"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-all ${u.quiet.enabled?"translate-x-4":"translate-x-0"}`})})]})}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("button",{onClick:()=>{const s=ae({sound:!u.sound});Q(s)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all text-left",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”Š"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-white",children:"Sonido"})}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-all flex items-center px-0.5 ${u.sound?"bg-kairos-500":"bg-dark-700"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-all ${u.sound?"translate-x-4":"translate-x-0"}`})})]}),e.jsxs("button",{onClick:()=>{const s=ae({vibrate:!u.vibrate});Q(s)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all text-left",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“³"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-white",children:"VibraciÃ³n"})}),e.jsx("div",{className:`w-10 h-6 rounded-full transition-all flex items-center px-0.5 ${u.vibrate?"bg-kairos-500":"bg-dark-700"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-all ${u.vibrate?"translate-x-4":"translate-x-0"}`})})]})]}),e.jsx("button",{onClick:async()=>{await gt(),es(Ne()),S(!1),n("Push desactivadas","info")},className:"w-full mt-4 py-2.5 rounded-xl border border-red-500/20 text-red-400 text-sm font-medium hover:bg-red-500/5 transition-all",children:"Desactivar todas las notificaciones"}),e.jsx("button",{onClick:()=>S(!1),className:"w-full mt-2 py-2.5 kairos-button text-sm",children:"Listo"})]})})]})]})}export{Tt as default};
