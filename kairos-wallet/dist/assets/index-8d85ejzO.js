var Yx=Object.defineProperty;var qx=(t,a,s)=>a in t?Yx(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var Vs=(t,a,s)=>qx(t,typeof a!="symbol"?a+"":a,s);import{g as ja,R as xe,b as C,S as ke,G as ze,Z as Le,j as e,m as O,P as Ve,K as Jx,A as le,d as ue,T as ce,E as tt,e as He,C as Se,f as We,L as ot,B as Ts,h as Na,F as Zx,D as Mt,X as Te,M as a0,i as $e,k as Rt,l as Je,n as er,o as st,p as x0,q as b0,s as Me,t as Bt,u as Ge,v as K0,W as Fs,w as r0,x as ks,U as n0,I as Vt,y as tr,z as fs,H as Xe,J as sr,N as ar,O as Sa,Q as ht,V as xr,Y as rr,_ as bt,$ as A0,a0 as Pa,a1 as Ta,a2 as Oe,a3 as nr,a4 as Hs,a5 as G0,a6 as o0,a7 as or,a8 as Ds,a9 as g0,aa as ir,ab as cr,ac as Ia,ad as W0,ae as V0,af as je,ag as lr,ah as Cs,ai as _e,aj as dr,ak as mr,al as ur,am as Er,an as Xs,ao as pr,ap as hr,aq as fr,ar as Bs,as as Qs,at as Cr,au as Br,av as At,aw as br,ax as ws,ay as Ar,az as H0,aA as X0,aB as gr,aC as Fr,aD as kr,aE as Dr,aF as Q0,aG as wr,aH as vr}from"./ui-D_mGHRN3.js";import{r as yr}from"./vendor-DJzltLpW.js";import{getAddress as F0,randomBytes as jr,Mnemonic as Ra,Wallet as Pe,HDNodeWallet as Nr,JsonRpcProvider as rt,FallbackProvider as Sr,Contract as oe,MaxUint256 as vs,formatUnits as he,formatEther as De,parseEther as Dt,parseUnits as Ie,getBytes as Y0,isHexString as Pr,isAddress as Tr,ZeroAddress as i0}from"./crypto-1JBTrmrY.js";import{b as Ir,i as Rr,G as Lr,z as Is}from"./walletconnect-ClP3lF-f.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))x(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&x(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function x(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}})();var ms={},q0;function Or(){if(q0)return ms;q0=1;var t=yr();return ms.createRoot=t.createRoot,ms.hydrateRoot=t.hydrateRoot,ms}var Mr=Or();const zr=ja(Mr),J0=t=>{let a;const s=new Set,x=(i,c)=>{const n=typeof i=="function"?i(a):i;if(!Object.is(n,a)){const d=a;a=c??(typeof n!="object"||n===null)?n:Object.assign({},a,n),s.forEach(p=>p(a,d))}},r=()=>a,m={setState:x,getState:r,getInitialState:()=>o,subscribe:i=>(s.add(i),()=>s.delete(i))},o=a=t(x,r,m);return m},_r=(t=>t?J0(t):J0),$r=t=>t;function Ur(t,a=$r){const s=xe.useSyncExternalStore(t.subscribe,xe.useCallback(()=>a(t.getState()),[t,a]),xe.useCallback(()=>a(t.getInitialState()),[t,a]));return xe.useDebugValue(s),s}const Z0=t=>{const a=_r(t),s=x=>Ur(a,x);return Object.assign(s,a),s},Kr=(t=>t?Z0(t):Z0),q={56:{id:56,name:"BNB Smart Chain",shortName:"BSC",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:["https://bsc-dataseed1.binance.org","https://bsc-dataseed2.binance.org","https://bsc-dataseed3.binance.org","https://bsc-dataseed4.binance.org"],blockExplorerUrl:"https://bscscan.com",blockExplorerApiUrl:"https://api.bscscan.com/api",blockExplorerApiKey:"YourApiKeyToken",color:"#F0B90B",icon:"‚õìÔ∏è",isDefault:!0,dexRouter:"0x10ED43C718714eb63d5aA57B78B54704E256024E",wrappedNative:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c"},1:{id:1,name:"Ethereum",shortName:"ETH",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://eth.llamarpc.com","https://rpc.ankr.com/eth","https://ethereum.publicnode.com"],blockExplorerUrl:"https://etherscan.io",blockExplorerApiUrl:"https://api.etherscan.io/api",blockExplorerApiKey:"YourApiKeyToken",color:"#627EEA",icon:"üíé",dexRouter:"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",wrappedNative:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"},137:{id:137,name:"Polygon",shortName:"MATIC",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:["https://polygon-rpc.com","https://rpc.ankr.com/polygon","https://polygon.llamarpc.com"],blockExplorerUrl:"https://polygonscan.com",blockExplorerApiUrl:"https://api.polygonscan.com/api",blockExplorerApiKey:"YourApiKeyToken",color:"#8247E5",icon:"üü£",dexRouter:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",wrappedNative:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270"},42161:{id:42161,name:"Arbitrum One",shortName:"ARB",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://arb1.arbitrum.io/rpc","https://rpc.ankr.com/arbitrum","https://arbitrum.llamarpc.com"],blockExplorerUrl:"https://arbiscan.io",blockExplorerApiUrl:"https://api.arbiscan.io/api",blockExplorerApiKey:"YourApiKeyToken",color:"#28A0F0",icon:"üîµ",dexRouter:"0x1b02dA8Cb0d097eB8D57A175b88c7D8b47997506",wrappedNative:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1"},43114:{id:43114,name:"Avalanche",shortName:"AVAX",nativeCurrency:{name:"AVAX",symbol:"AVAX",decimals:18},rpcUrls:["https://api.avax.network/ext/bc/C/rpc","https://rpc.ankr.com/avalanche","https://avalanche.public-rpc.com"],blockExplorerUrl:"https://snowtrace.io",blockExplorerApiUrl:"https://api.snowscan.xyz/api",blockExplorerApiKey:"YourApiKeyToken",color:"#E84142",icon:"üî∫",dexRouter:"0x60aE616a2155Ee3d9A68541Ba4544862310933d4",wrappedNative:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7"},8453:{id:8453,name:"Base",shortName:"BASE",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.base.org","https://base.llamarpc.com"],blockExplorerUrl:"https://basescan.org",blockExplorerApiUrl:"https://api.basescan.org/api",blockExplorerApiKey:"YourApiKeyToken",color:"#0052FF",icon:"üî∑",dexRouter:"0x327Df1E6de05895d2ab08513aaDD9313Fe505d86",wrappedNative:"0x4200000000000000000000000000000000000006"}},Gr=56,at=[56,1,137,42161,43114,8453],it=["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function totalSupply() view returns (uint256)","function balanceOf(address) view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function transferFrom(address from, address to, uint256 amount) returns (bool)","event Transfer(address indexed from, address indexed to, uint256 value)","event Approval(address indexed owner, address indexed spender, uint256 value)"],Ze={address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",name:"KairosCoin",symbol:"KAIROS",decimals:18,chainId:56,logoURI:"/icons/kairos-token-128.png",isNative:!1,isStablecoin:!0},Rs={56:[Ze,{address:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",name:"BUSD",symbol:"BUSD",decimals:18,chainId:56},{address:"0x55d398326f99059fF775485246999027B3197955",name:"Tether USD",symbol:"USDT",decimals:18,chainId:56},{address:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",name:"USD Coin",symbol:"USDC",decimals:18,chainId:56},{address:"0x2170Ed0880ac9A755fd29B2688956BD959F933F8",name:"Ethereum Token",symbol:"ETH",decimals:18,chainId:56},{address:"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c",name:"BTCB Token",symbol:"BTCB",decimals:18,chainId:56}],1:[{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",name:"Tether USD",symbol:"USDT",decimals:6,chainId:1},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",name:"USD Coin",symbol:"USDC",decimals:6,chainId:1},{address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",name:"Dai",symbol:"DAI",decimals:18,chainId:1}],137:[{address:"0x9151B8C90B2F8a8DF82426E7E65d00563A75a6C9",name:"KairosCoin",symbol:"KAIROS",decimals:18,chainId:137,logoURI:"/icons/kairos-token-128.png",isStablecoin:!0},{address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",name:"Tether USD",symbol:"USDT",decimals:6,chainId:137},{address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",name:"USD Coin",symbol:"USDC",decimals:6,chainId:137}],42161:[{address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",name:"KairosCoin",symbol:"KAIROS",decimals:18,chainId:42161,logoURI:"/icons/kairos-token-128.png",isStablecoin:!0},{address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",name:"Tether USD",symbol:"USDT",decimals:6,chainId:42161},{address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",name:"USD Coin",symbol:"USDC",decimals:6,chainId:42161}],43114:[{address:"0x9702230A8Ea53601f5cD2dc00fDBc13d4dF4A8c7",name:"Tether USD",symbol:"USDT",decimals:6,chainId:43114},{address:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",name:"USD Coin",symbol:"USDC",decimals:6,chainId:43114}],8453:[{address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",name:"KairosCoin",symbol:"KAIROS",decimals:18,chainId:8453,logoURI:"/icons/kairos-token-128.png",isStablecoin:!0},{address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",name:"USD Coin",symbol:"USDC",decimals:6,chainId:8453}]},Wr="m/44'/60'/0'/0",k0="AES-GCM",Vr=6e5,Wt=32,c0=16,Ee={ENCRYPTED_VAULT:"kairos_vault",SETTINGS:"kairos_settings",TOKENS:"kairos_tokens",CONTACTS:"kairos_contacts",TX_HISTORY:"kairos_tx_history",ACTIVE_CHAIN:"kairos_active_chain",ACTIVE_WALLET:"kairos_active_wallet",HAS_WALLET:"kairos_has_wallet",THEME:"kairos_theme"},Hr={slow:{label:"Econ√≥mico",multiplier:.8,icon:"üê¢",waitTime:"~5 min"},standard:{label:"Est√°ndar",multiplier:1,icon:"üöó",waitTime:"~1 min"},fast:{label:"R√°pido",multiplier:1.3,icon:"üöÄ",waitTime:"~15 seg"},instant:{label:"Instant√°neo",multiplier:1.8,icon:"‚ö°",waitTime:"~5 seg"}},ea="1.0.0",se=Kr((t,a)=>({isUnlocked:!1,vault:null,activeAddress:localStorage.getItem(Ee.ACTIVE_WALLET)||null,activeChainId:parseInt(localStorage.getItem(Ee.ACTIVE_CHAIN))||Gr,balances:{},tokenPrices:{},nativePrice:0,isLoadingBalances:!1,currentScreen:"loading",navigationStack:[],toastMessage:null,isBottomSheetOpen:!1,bottomSheetContent:null,tokenDetailData:null,txDetailData:null,pendingTransactions:[],recentTransactions:JSON.parse(localStorage.getItem("kairos_recent_tx")||"[]"),setUnlocked:(s,x)=>t({isUnlocked:!0,vault:s,activeAddress:s.accounts[0]?.address||s.importedAccounts[0]?.address,currentScreen:"dashboard"}),lock:()=>t({isUnlocked:!1,vault:null,currentScreen:"unlock"}),setActiveAddress:s=>{localStorage.setItem(Ee.ACTIVE_WALLET,s),t({activeAddress:s})},setActiveChain:s=>{localStorage.setItem(Ee.ACTIVE_CHAIN,s.toString()),t({activeChainId:s,balances:{},isLoadingBalances:!0})},setBalances:s=>t({balances:s,isLoadingBalances:!1}),setTokenPrices:s=>t({tokenPrices:s}),setNativePrice:s=>t({nativePrice:s}),navigate:s=>t(x=>{if(x.currentScreen===s)return{};const r=[...x.navigationStack,x.currentScreen];return r.length>20&&r.splice(0,r.length-20),{navigationStack:r,currentScreen:s}}),goBack:()=>t(s=>{const x=[...s.navigationStack];return{currentScreen:x.pop()||"dashboard",navigationStack:x}}),showToast:(s,x="info")=>{t({toastMessage:{message:s,type:x,id:Date.now()}}),setTimeout(()=>t({toastMessage:null}),3e3)},openBottomSheet:s=>t({isBottomSheetOpen:!0,bottomSheetContent:s}),closeBottomSheet:()=>t({isBottomSheetOpen:!1,bottomSheetContent:null}),setTokenDetailData:s=>t({tokenDetailData:s}),setTxDetailData:s=>t({txDetailData:s}),addPendingTx:s=>t(x=>({pendingTransactions:[...x.pendingTransactions,s]})),resolvePendingTx:(s,x)=>t(r=>{const u=[{...r.pendingTransactions.find(m=>m.hash===s),status:x},...r.recentTransactions].slice(0,50);return localStorage.setItem("kairos_recent_tx",JSON.stringify(u)),{pendingTransactions:r.pendingTransactions.filter(m=>m.hash!==s),recentTransactions:u}}),getActiveAccount:()=>{const{vault:s,activeAddress:x}=a();if(!s)return null;const r=[...s.accounts||[],...s.importedAccounts||[],...s.watchOnlyAccounts||[]];return r.find(l=>l.address.toLowerCase()===x?.toLowerCase())||r[0]},getAllAccounts:()=>{const{vault:s}=a();return s?[...s.accounts||[],...s.importedAccounts||[],...s.watchOnlyAccounts||[]]:[]},getTotalPortfolioValue:()=>{const{balances:s,tokenPrices:x,nativePrice:r}=a();let l=0;if(s.native&&(l+=parseFloat(s.native.balance||0)*r),s.tokens)for(const u of s.tokens){if(!u.hasBalance)continue;const o=x[u.address.toLowerCase()]?.usd||0;l+=parseFloat(u.balance)*o}return l}}));async function La(t,a){const s=new TextEncoder,x=await crypto.subtle.importKey("raw",s.encode(t),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:Vr,hash:"SHA-256"},x,{name:k0,length:256},!1,["encrypt","decrypt"])}async function wt(t,a){const s=new TextEncoder,x=crypto.getRandomValues(new Uint8Array(Wt)),r=crypto.getRandomValues(new Uint8Array(c0)),l=await La(a,x),u=await crypto.subtle.encrypt({name:k0,iv:r},l,s.encode(t)),m=new Uint8Array(x.length+r.length+u.byteLength);return m.set(x),m.set(r,x.length),m.set(new Uint8Array(u),x.length+r.length),btoa(String.fromCharCode(...m))}async function Xr(t,a){const s=Uint8Array.from(atob(t),o=>o.charCodeAt(0)),x=s.slice(0,Wt),r=s.slice(Wt,Wt+c0),l=s.slice(Wt+c0),u=await La(a,x),m=await crypto.subtle.decrypt({name:k0,iv:r},u,l);return new TextDecoder().decode(m)}function Oa(t=128){const a=jr(t/8);return Ra.fromEntropy(a).phrase}function Ma(t){try{return Ra.fromPhrase(t.trim().toLowerCase()),!0}catch{return!1}}function D0(t,a=0){const s=`${Wr}/${a}`,x=Nr.fromPhrase(t.trim().toLowerCase(),void 0,s);return{address:x.address,privateKey:x.privateKey,publicKey:x.publicKey,path:s,index:a}}function w0(t){const a=t.startsWith("0x")?t:"0x"+t,s=new Pe(a);return{address:s.address,privateKey:a,publicKey:s.signingKey.publicKey,path:null,index:null}}async function v0(t,a,s="Wallet Principal"){const x=D0(t,0),r={version:1,createdAt:Date.now(),mnemonic:t,accounts:[{name:s,address:x.address,privateKey:x.privateKey,path:x.path,index:0,createdAt:Date.now()}],importedAccounts:[]},l=await wt(JSON.stringify(r),a);return localStorage.setItem(Ee.ENCRYPTED_VAULT,l),localStorage.setItem(Ee.HAS_WALLET,"true"),localStorage.setItem(Ee.ACTIVE_WALLET,x.address),{address:x.address,name:s}}async function ve(t){const a=localStorage.getItem(Ee.ENCRYPTED_VAULT);if(!a)throw new Error("No wallet found");try{const s=await Xr(a,t);return JSON.parse(s)}catch{throw new Error("Contrase√±a incorrecta")}}async function za(t,a){const s=await ve(t),x=s.accounts.length,r=D0(s.mnemonic,x);s.accounts.push({name:a||`Wallet ${x+1}`,address:r.address,privateKey:r.privateKey,path:r.path,index:x,createdAt:Date.now()});const l=await wt(JSON.stringify(s),t);return localStorage.setItem(Ee.ENCRYPTED_VAULT,l),{address:r.address,name:a}}async function Qr(t,a,s){const x=await ve(t),r=w0(a);if([...x.accounts.map(m=>m.address.toLowerCase()),...x.importedAccounts.map(m=>m.address.toLowerCase())].includes(r.address.toLowerCase()))throw new Error("Esta wallet ya existe");x.importedAccounts.push({name:s||`Importada ${x.importedAccounts.length+1}`,address:r.address,privateKey:r.privateKey,path:null,index:null,isImported:!0,createdAt:Date.now()});const u=await wt(JSON.stringify(x),t);return localStorage.setItem(Ee.ENCRYPTED_VAULT,u),{address:r.address,name:s}}async function _a(t,a,s){const x=F0(a),r=await ve(t);if([...r.accounts.map(m=>m.address.toLowerCase()),...(r.importedAccounts||[]).map(m=>m.address.toLowerCase()),...(r.watchOnlyAccounts||[]).map(m=>m.address.toLowerCase())].includes(x.toLowerCase()))throw new Error("Esta direcci√≥n ya existe");r.watchOnlyAccounts||(r.watchOnlyAccounts=[]),r.watchOnlyAccounts.push({name:s||`Watch ${r.watchOnlyAccounts.length+1}`,address:x,privateKey:null,path:null,index:null,isWatchOnly:!0,createdAt:Date.now()});const u=await wt(JSON.stringify(r),t);return localStorage.setItem(Ee.ENCRYPTED_VAULT,u),{address:x,name:s,isWatchOnly:!0}}async function Yr(t,a){const s=await ve(t);if(!s.watchOnlyAccounts)return;s.watchOnlyAccounts=s.watchOnlyAccounts.filter(r=>r.address.toLowerCase()!==a.toLowerCase());const x=await wt(JSON.stringify(s),t);localStorage.setItem(Ee.ENCRYPTED_VAULT,x)}function $a(t,a){return new Pe(t,a)}function Ua(){return localStorage.getItem(Ee.HAS_WALLET)==="true"}function qr(){return localStorage.getItem(Ee.ACTIVE_WALLET)}function Jr(t){localStorage.setItem(Ee.ACTIVE_WALLET,t)}async function l0(t,a){if(!a||a.length<8)throw new Error("La nueva contrase√±a debe tener al menos 8 caracteres");const s=await ve(t),x=await wt(JSON.stringify(s),a);return localStorage.setItem(Ee.ENCRYPTED_VAULT,x),!0}function y0(){Object.values(Ee).forEach(t=>localStorage.removeItem(t))}function ge(t,a=6){return t?`${t.slice(0,a+2)}...${t.slice(-a)}`:""}function et(t){try{return F0(t),!0}catch{return!1}}const Ka=Object.freeze(Object.defineProperty({__proto__:null,addAccount:za,changePassword:l0,createVault:v0,deriveWallet:D0,formatAddress:ge,generateMnemonic:Oa,getActiveWallet:qr,getSigner:$a,hasWallet:Ua,importAccount:Qr,importFromPrivateKey:w0,importWatchOnly:_a,isValidAddress:et,removeWatchOnly:Yr,resetWallet:y0,setActiveWallet:Jr,unlockVault:ve,validateMnemonic:Ma},Symbol.toStringTag,{value:"Module"})),Ga=Ee.SETTINGS,Zr=300*1e3;let d0=null,ft=null;function j0(){try{const t=localStorage.getItem(Ga);return t?JSON.parse(t):{}}catch{return{}}}function N0(t){const a=j0();localStorage.setItem(Ga,JSON.stringify({...a,...t}))}function S0(){return j0().autoLockTimeout??Zr}function en(t){N0({autoLockTimeout:t}),ys()}function ta(){return[{label:"1 minuto",value:6e4},{label:"5 minutos",value:3e5},{label:"15 minutos",value:9e5},{label:"30 minutos",value:18e5},{label:"1 hora",value:36e5},{label:"Nunca",value:0}]}function tn(t){ft=t,ys(),["mousedown","keydown","touchstart","scroll","mousemove"].forEach(s=>{document.addEventListener(s,ys,{passive:!0})}),document.addEventListener("visibilitychange",Wa)}function sa(){clearTimeout(d0),ft=null,["mousedown","keydown","touchstart","scroll","mousemove"].forEach(a=>{document.removeEventListener(a,ys)}),document.removeEventListener("visibilitychange",Wa)}function ys(){clearTimeout(d0);const t=S0();t>0&&ft&&(d0=setTimeout(()=>{ft&&ft()},t))}let us=null;function Wa(){if(document.hidden)us=Date.now();else if(us){const t=Date.now()-us,a=S0();a>0&&t>=a&&ft&&ft(),us=null}}const P0="kairos_biometric_credential";function Va(){return!!(window.PublicKeyCredential&&navigator.credentials)}function sn(){return!!localStorage.getItem(P0)}async function an(){if(!Va())throw new Error("Biometr√≠a no disponible");const t=crypto.getRandomValues(new Uint8Array(32)),a=crypto.getRandomValues(new Uint8Array(16)),s=await navigator.credentials.create({publicKey:{challenge:t,rp:{name:"Kairos Wallet",id:window.location.hostname},user:{id:a,name:"kairos-user",displayName:"Kairos Wallet User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},timeout:6e4}});if(!s)throw new Error("Registro cancelado");const x=btoa(String.fromCharCode(...new Uint8Array(s.rawId)));return localStorage.setItem(P0,x),N0({biometricEnabled:!0}),!0}function xn(){localStorage.removeItem(P0),N0({biometricEnabled:!1})}function rn(){return j0().biometricEnabled===!0&&sn()}const Ha="kairos_language",Xt={es:{"app.name":"Kairos Wallet","common.loading":"Cargando...","common.cancel":"Cancelar","common.confirm":"Confirmar","common.save":"Guardar","common.delete":"Eliminar","common.copy":"Copiar","common.copied":"Copiado","common.search":"Buscar...","common.back":"Volver","common.next":"Siguiente","common.done":"Listo","common.error":"Error","common.success":"√âxito","common.close":"Cerrar","common.retry":"Reintentar","welcome.title":"Bienvenido a Kairos Wallet","welcome.subtitle":"La wallet descentralizada de nueva generaci√≥n. Tus claves, tus criptos, tu libertad.","welcome.create":"Crear Wallet","welcome.import":"Importar Wallet","welcome.feat_security":"Seguridad militar AES-256-GCM","welcome.feat_multichain":"Multi-chain: BSC, ETH, Polygon y m√°s","welcome.feat_fast":"Transacciones ultra-r√°pidas","dashboard.portfolio":"Portafolio","dashboard.send":"Enviar","dashboard.receive":"Recibir","dashboard.swap":"Swap","dashboard.contacts":"Contactos","dashboard.history":"Historial","dashboard.tokens":"Tokens","dashboard.manage":"Gestionar","dashboard.no_tokens":"No hay tokens todav√≠a","dashboard.no_tokens_desc":"Recibe tokens o agrega tokens personalizados","send.title":"Enviar","send.recipient":"Direcci√≥n del destinatario","send.amount":"Cantidad","send.token":"Token","send.gas":"Gas estimado","send.confirm_send":"Confirmar y Enviar","send.sending":"Enviando...","send.sent":"¬°Transacci√≥n Enviada!","send.max":"MAX","send.invalid_address":"Direcci√≥n inv√°lida","send.insufficient":"Saldo insuficiente","send.confirm_title":"Confirmar Env√≠o","send.irreversible":"Verifica la direcci√≥n del destinatario. Las transacciones en blockchain son irreversibles.","receive.title":"Recibir","receive.scan_qr":"Escanea este c√≥digo QR","receive.copy_address":"Copiar direcci√≥n","receive.address_copied":"Direcci√≥n copiada","swap.title":"Swap","swap.sell":"Vendes","swap.buy":"Recibes","swap.balance":"Saldo","swap.quoting":"Cotizando...","swap.select_tokens":"Selecciona los tokens","swap.enter_amount":"Ingresa un monto","swap.insufficient":"Saldo insuficiente","swap.no_liquidity":"No hay liquidez para este par","swap.rate":"Tasa","swap.impact":"Impacto","swap.min_received":"M√≠nimo recibido","swap.slippage":"Slippage","swap.route":"Ruta","swap.confirm":"Confirmar Swap","swap.swapping":"Ejecutando swap...","swap.success":"¬°Swap exitoso!","swap.error":"Error en el swap","swap.high_impact":"Alto impacto de precio. Podr√≠as perder valor significativo.","contacts.title":"Contactos","contacts.new":"Nuevo contacto","contacts.edit":"Editar contacto","contacts.search":"Buscar por nombre o direcci√≥n...","contacts.empty":"Sin contactos a√∫n","contacts.empty_desc":"Agrega direcciones frecuentes","contacts.add":"Agregar contacto","contacts.name":"Nombre","contacts.address":"Direcci√≥n","contacts.notes":"Notas (opcional)","contacts.delete_confirm":"¬øEliminar contacto?","contacts.added":"Contacto agregado","contacts.updated":"Contacto actualizado","contacts.deleted":"Contacto eliminado","settings.title":"Configuraci√≥n","settings.accounts":"Mis Wallets","settings.explorer":"Ver en Block Explorer","settings.security":"Seguridad","settings.encryption":"AES-256-GCM + PBKDF2 600K","settings.export_key":"Exportar Clave Privada","settings.requires_password":"Requiere contrase√±a","settings.autolock":"Auto-Lock","settings.biometric":"Biometr√≠a","settings.biometric_on":"Activada","settings.biometric_off":"Desactivada","settings.general":"General","settings.danger":"Peligro","settings.walletconnect":"WalletConnect","settings.connect_dapps":"Conectar dApps","settings.network":"Red Predeterminada","settings.language":"Idioma","settings.about":"Acerca de Kairos Wallet","settings.lock":"Bloquear Wallet","settings.lock_desc":"Cierra la sesi√≥n actual","settings.delete":"Eliminar Wallet","settings.delete_desc":"Requiere frase semilla para restaurar","settings.delete_confirm":"‚ö†Ô∏è PELIGRO: Esto eliminar√° tu wallet permanentemente.","token.balance":"Tu saldo","token.stats":"Estad√≠sticas","token.min":"M√≠nimo","token.max":"M√°ximo","history.title":"Historial","history.empty":"Sin transacciones","history.empty_desc":"Tus transacciones aparecer√°n aqu√≠","unlock.title":"Desbloquear Kairos","unlock.password":"Contrase√±a","unlock.wrong_password":"Contrase√±a incorrecta","unlock.unlock":"Desbloquear","unlock.enter_password":"Ingresa tu contrase√±a para desbloquear","unlock.decrypting":"Descifrando...","create.title":"Crear Wallet","create.set_password":"Establece una contrase√±a segura","create.seed_phrase":"Frase semilla","create.save_seed":"Guarda tu frase semilla en un lugar seguro","create.confirm_seed":"Confirma tu frase semilla","wc.title":"WalletConnect","wc.connect_dapp":"Conectar dApp","wc.paste_uri":"Pega el URI de WalletConnect","wc.connect":"Conectar","wc.active_sessions":"Sesiones activas","wc.no_connections":"Sin conexiones","wc.session_proposal":"Solicitud de conexi√≥n","wc.approve":"Aprobar","wc.reject":"Rechazar","wc.connected":"dApp conectada","wc.disconnected":"dApp desconectada","nft.title":"NFTs","nft.searching":"Buscando tus NFTs...","nft.wait":"Esto puede tomar unos segundos","nft.empty":"No se encontraron NFTs","nft.empty_desc":"Tus NFTs ERC-721 aparecer√°n aqu√≠","nft.contract":"Contrato","nft.network":"Red","nft.attributes":"Atributos","dapps.title":"Explorar dApps","dapps.search":"Buscar dApps...","dapps.favorites":"Favoritos","dapps.all":"Todos","dapps.showing":"Mostrando dApps compatibles con","dapps.no_favorites":"Sin favoritos a√∫n","dapps.no_favorites_desc":"Marca dApps con ‚òÖ para acceder r√°pido","dapps.not_found":"No se encontraron dApps","dapps.not_found_desc":"Prueba con otra categor√≠a","dapps.install":"Instalar Kairos Wallet","dapps.install_desc":"Acceso directo desde tu pantalla de inicio","action.send":"Enviar","action.receive":"Recibir","action.swap":"Swap","action.dapps":"dApps","action.nfts":"NFTs","action.contacts":"Contactos","action.buy":"Comprar","action.history":"Historial","action.settings":"Ajustes"},en:{"app.name":"Kairos Wallet","common.loading":"Loading...","common.cancel":"Cancel","common.confirm":"Confirm","common.save":"Save","common.delete":"Delete","common.copy":"Copy","common.copied":"Copied","common.search":"Search...","common.back":"Back","common.next":"Next","common.done":"Done","common.error":"Error","common.success":"Success","common.close":"Close","common.retry":"Retry","welcome.title":"Welcome to Kairos Wallet","welcome.subtitle":"The next-generation decentralized wallet. Your keys, your crypto, your freedom.","welcome.create":"Create Wallet","welcome.import":"Import Wallet","welcome.feat_security":"Military-grade AES-256-GCM security","welcome.feat_multichain":"Multi-chain: BSC, ETH, Polygon & more","welcome.feat_fast":"Ultra-fast transactions","dashboard.portfolio":"Portfolio","dashboard.send":"Send","dashboard.receive":"Receive","dashboard.swap":"Swap","dashboard.contacts":"Contacts","dashboard.history":"History","dashboard.tokens":"Tokens","dashboard.manage":"Manage","dashboard.no_tokens":"No tokens yet","dashboard.no_tokens_desc":"Receive tokens or add custom tokens","send.title":"Send","send.recipient":"Recipient address","send.amount":"Amount","send.token":"Token","send.gas":"Estimated gas","send.confirm_send":"Confirm & Send","send.sending":"Sending...","send.sent":"Transaction Sent!","send.max":"MAX","send.invalid_address":"Invalid address","send.insufficient":"Insufficient balance","send.confirm_title":"Confirm Send","send.irreversible":"Verify the recipient address. Blockchain transactions are irreversible.","receive.title":"Receive","receive.scan_qr":"Scan this QR code","receive.copy_address":"Copy address","receive.address_copied":"Address copied","swap.title":"Swap","swap.sell":"You sell","swap.buy":"You receive","swap.balance":"Balance","swap.quoting":"Getting quote...","swap.select_tokens":"Select tokens","swap.enter_amount":"Enter an amount","swap.insufficient":"Insufficient balance","swap.no_liquidity":"No liquidity for this pair","swap.rate":"Rate","swap.impact":"Price Impact","swap.min_received":"Minimum received","swap.slippage":"Slippage","swap.route":"Route","swap.confirm":"Confirm Swap","swap.swapping":"Executing swap...","swap.success":"Swap successful!","swap.error":"Swap error","swap.high_impact":"High price impact. You may lose significant value.","contacts.title":"Contacts","contacts.new":"New contact","contacts.edit":"Edit contact","contacts.search":"Search by name or address...","contacts.empty":"No contacts yet","contacts.empty_desc":"Add frequent addresses","contacts.add":"Add contact","contacts.name":"Name","contacts.address":"Address","contacts.notes":"Notes (optional)","contacts.delete_confirm":"Delete contact?","contacts.added":"Contact added","contacts.updated":"Contact updated","contacts.deleted":"Contact deleted","settings.title":"Settings","settings.accounts":"My Wallets","settings.explorer":"View on Block Explorer","settings.security":"Security","settings.encryption":"AES-256-GCM + PBKDF2 600K","settings.export_key":"Export Private Key","settings.requires_password":"Requires password","settings.autolock":"Auto-Lock","settings.biometric":"Biometrics","settings.biometric_on":"Enabled","settings.biometric_off":"Disabled","settings.general":"General","settings.danger":"Danger","settings.walletconnect":"WalletConnect","settings.connect_dapps":"Connect dApps","settings.network":"Default Network","settings.language":"Language","settings.about":"About Kairos Wallet","settings.lock":"Lock Wallet","settings.lock_desc":"Close current session","settings.delete":"Delete Wallet","settings.delete_desc":"Requires seed phrase to restore","settings.delete_confirm":"‚ö†Ô∏è DANGER: This will permanently delete your wallet.","token.balance":"Your balance","token.stats":"Statistics","token.min":"Minimum","token.max":"Maximum","history.title":"History","history.empty":"No transactions","history.empty_desc":"Your transactions will appear here","unlock.title":"Unlock Kairos","unlock.password":"Password","unlock.wrong_password":"Wrong password","unlock.unlock":"Unlock","unlock.enter_password":"Enter your password to unlock","unlock.decrypting":"Decrypting...","create.title":"Create Wallet","create.set_password":"Set a strong password","create.seed_phrase":"Seed phrase","create.save_seed":"Save your seed phrase in a safe place","create.confirm_seed":"Confirm your seed phrase","wc.title":"WalletConnect","wc.connect_dapp":"Connect dApp","wc.paste_uri":"Paste WalletConnect URI","wc.connect":"Connect","wc.active_sessions":"Active sessions","wc.no_connections":"No connections","wc.session_proposal":"Connection request","wc.approve":"Approve","wc.reject":"Reject","wc.connected":"dApp connected","wc.disconnected":"dApp disconnected","nft.title":"NFTs","nft.searching":"Searching for your NFTs...","nft.wait":"This may take a few seconds","nft.empty":"No NFTs found","nft.empty_desc":"Your ERC-721 NFTs will appear here","nft.contract":"Contract","nft.network":"Network","nft.attributes":"Attributes","dapps.title":"Explore dApps","dapps.search":"Search dApps...","dapps.favorites":"Favorites","dapps.all":"All","dapps.showing":"Showing dApps compatible with","dapps.no_favorites":"No favorites yet","dapps.no_favorites_desc":"Mark dApps with ‚òÖ for quick access","dapps.not_found":"No dApps found","dapps.not_found_desc":"Try another category","dapps.install":"Install Kairos Wallet","dapps.install_desc":"Quick access from your home screen","action.send":"Send","action.receive":"Receive","action.swap":"Swap","action.dapps":"dApps","action.nfts":"NFTs","action.contacts":"Contacts","action.buy":"Buy","action.history":"History","action.settings":"Settings"}};let St=null;function js(){if(St)return St;const t=localStorage.getItem(Ha);if(t&&Xt[t])return St=t,t;const a=navigator.language?.split("-")[0]||"es";return St=Xt[a]?a:"es",St}function Xa(t){Xt[t]&&(St=t,localStorage.setItem(Ha,t),window.dispatchEvent(new CustomEvent("kairos:language-changed",{detail:t})))}function nn(t,a){const s=js();return Xt[s]?.[t]||Xt.es?.[t]||a||t}function Ys(){return[{code:"es",name:"Espa√±ol",flag:"üá™üá∏"},{code:"en",name:"English",flag:"üá∫üá∏"}]}function ct(){const[t,a]=C.useState(js);return C.useEffect(()=>{const x=r=>a(r.detail||js());return window.addEventListener("kairos:language-changed",x),()=>window.removeEventListener("kairos:language-changed",x)},[]),{t:C.useCallback((x,r)=>nn(x,r),[t]),lang:t,setLang:Xa}}function on(){const t=se(x=>x.navigate),{t:a}=ct(),s=[{icon:ke,text:a("welcome.feat_security","Seguridad militar AES-256-GCM"),color:"text-green-400"},{icon:ze,text:a("welcome.feat_multichain","Multi-chain: BSC, ETH, Polygon y m√°s"),color:"text-blue-400"},{icon:Le,text:a("welcome.feat_fast","Transacciones ultra-r√°pidas"),color:"text-yellow-400"}];return e.jsxs("div",{className:"screen-container px-6 py-8",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsxs(O.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:20},className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 w-28 h-28 rounded-full bg-kairos-500/20 blur-xl"}),e.jsx("img",{src:"/icons/logo-128.png",alt:"Kairos Wallet",className:"w-28 h-28 relative z-10"})]}),e.jsxs(O.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-4xl font-bold mb-2",children:[e.jsx("span",{className:"kairos-text",children:"Kairos"})," ",e.jsx("span",{className:"text-white",children:"Wallet"})]}),e.jsx(O.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-dark-300 text-center text-sm mb-10 max-w-xs",children:a("welcome.subtitle","La wallet descentralizada de nueva generaci√≥n. Tus claves, tus criptos, tu libertad.")}),e.jsx(O.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"space-y-3 mb-10 w-full max-w-xs",children:s.map((x,r)=>e.jsxs(O.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5+r*.1},className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center flex-shrink-0",children:e.jsx(x.icon,{size:16,className:x.color})}),e.jsx("span",{className:"text-sm text-dark-200",children:x.text})]},x.text))})]}),e.jsxs(O.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},className:"space-y-3 pb-4",children:[e.jsxs("button",{onClick:()=>t("create"),className:"kairos-button w-full flex items-center justify-center gap-2 py-4 text-base",children:[e.jsx(Ve,{size:20}),a("welcome.create")]}),e.jsxs("button",{onClick:()=>t("import"),className:"glass-button w-full flex items-center justify-center gap-2 py-4 text-base text-white",children:[e.jsx(Jx,{size:20}),a("welcome.import")]})]}),e.jsx("p",{className:"text-center text-dark-500 text-xs mt-3",children:"Kairos Wallet v1.0.0 ‚Äî Powered by Kairos 777 Inc."})]})}const cn="modulepreload",ln=function(t){return"/"+t},aa={},T0=function(a,s,x){let r=Promise.resolve();if(s&&s.length>0){let u=function(i){return Promise.all(i.map(c=>Promise.resolve(c).then(n=>({status:"fulfilled",value:n}),n=>({status:"rejected",reason:n}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),o=m?.nonce||m?.getAttribute("nonce");r=u(s.map(i=>{if(i=ln(i),i in aa)return;aa[i]=!0;const c=i.endsWith(".css"),n=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${n}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":cn,c||(d.as="script"),d.crossOrigin="",d.href=i,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((p,f)=>{d.addEventListener("load",p),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return r.then(u=>{for(const m of u||[])m.status==="rejected"&&l(m.reason);return a().catch(l)})},xa=["generate","backup","verify","password"];function dn(){const{navigate:t,setUnlocked:a,showToast:s}=se(),[x,r]=C.useState(0),[l]=C.useState(()=>Oa(128)),[u,m]=C.useState(!1),[o,i]=C.useState(!1),[c,n]=C.useState({}),[d,p]=C.useState(""),[f,E]=C.useState(""),[h,g]=C.useState(!1),[D,b]=C.useState(!1),[A,B]=C.useState(!1),F=C.useMemo(()=>l.split(" "),[l]),k=C.useMemo(()=>{const y=[];for(;y.length<3;){const P=Math.floor(Math.random()*12);y.includes(P)||y.push(P)}return y.sort((P,R)=>P-R)},[]),w=C.useCallback(async()=>{await navigator.clipboard.writeText(l),i(!0),s("Frase semilla copiada","success"),setTimeout(()=>i(!1),3e3)},[l]),N=k.every(y=>c[y]?.toLowerCase().trim()===F[y]),v=async()=>{if(d.length<8)return s("M√≠nimo 8 caracteres","error");if(d!==f)return s("Las contrase√±as no coinciden","error");b(!0);try{await v0(l,d);const{unlockVault:y}=await T0(async()=>{const{unlockVault:R}=await Promise.resolve().then(()=>Ka);return{unlockVault:R}},void 0),P=await y(d);a(P,d),s("¬°Wallet creada exitosamente! üéâ","success")}catch(y){s("Error al crear wallet: "+y.message,"error")}b(!1)},j=C.useMemo(()=>{if(d.length===0)return{score:0,label:"",color:""};let y=0;return d.length>=8&&y++,d.length>=12&&y++,/[A-Z]/.test(d)&&y++,/[0-9]/.test(d)&&y++,/[^A-Za-z0-9]/.test(d)&&y++,{score:y,...[{label:"Muy d√©bil",color:"bg-red-500"},{label:"D√©bil",color:"bg-orange-500"},{label:"Aceptable",color:"bg-yellow-500"},{label:"Fuerte",color:"bg-green-500"},{label:"Muy fuerte",color:"bg-emerald-400"}][Math.min(y,4)]}},[d]);return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>x>0?r(y=>y-1):t("welcome"),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Crear Wallet"}),e.jsxs("p",{className:"text-dark-400 text-xs",children:["Paso ",x+1," de ",xa.length]})]})]}),e.jsx("div",{className:"flex gap-1.5 mb-6",children:xa.map((y,P)=>e.jsx("div",{className:"flex-1 h-1 rounded-full overflow-hidden bg-white/10",children:e.jsx(O.div,{className:"h-full bg-kairos-400",initial:{width:"0%"},animate:{width:P<=x?"100%":"0%"},transition:{duration:.3}})},P))}),e.jsxs(ue,{mode:"wait",children:[x===0&&e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"glass-card p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ce,{size:18,className:"text-kairos-400"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Frase Semilla de Recuperaci√≥n"})]}),e.jsxs("p",{className:"text-dark-300 text-xs leading-relaxed",children:["Estas 12 palabras son la ",e.jsx("strong",{className:"text-white",children:"√öNICA forma"})," de recuperar tu wallet. Escr√≠belas en papel y gu√°rdalas en un lugar seguro.",e.jsx("strong",{className:"text-red-400",children:" NUNCA las compartas con nadie."})]})]}),e.jsxs("div",{className:"glass-card p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Tu frase semilla"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m(!u),className:"flex items-center gap-1 text-xs text-kairos-400",children:[u?e.jsx(tt,{size:14}):e.jsx(He,{size:14}),u?"Ocultar":"Revelar"]}),e.jsxs("button",{onClick:w,className:"flex items-center gap-1 text-xs text-kairos-400",children:[o?e.jsx(Se,{size:14}):e.jsx(We,{size:14}),o?"Copiado":"Copiar"]})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:F.map((y,P)=>e.jsxs("div",{className:"seed-word",children:[e.jsxs("span",{className:"text-dark-400 text-xs w-5",children:[P+1,"."]}),e.jsx("span",{className:u?"text-white":"blur-sm select-none",children:y})]},P))})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:y=>B(y.target.checked),className:"w-4 h-4 rounded accent-kairos-500"}),e.jsx("span",{className:"text-xs text-dark-300",children:"He guardado mi frase semilla en un lugar seguro"})]}),e.jsx("button",{onClick:()=>r(1),disabled:!A,className:"kairos-button w-full py-4 disabled:opacity-40 disabled:cursor-not-allowed",children:"Continuar"})]})]},"generate"),x===1&&e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mb-6",children:e.jsx(ke,{size:40,className:"text-red-400"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"‚ö†Ô∏è Recordatorio Importante"}),e.jsxs("p",{className:"text-dark-300 text-sm mb-2 max-w-xs",children:["Si pierdes tu frase semilla, perder√°s acceso a tu wallet y todos tus fondos ",e.jsx("strong",{className:"text-white",children:"para siempre"}),"."]}),e.jsx("p",{className:"text-dark-400 text-xs mb-8 max-w-xs",children:"Kairos Wallet no almacena tu frase semilla. Solo t√∫ tienes acceso."}),e.jsx("button",{onClick:()=>r(2),className:"kairos-button w-full max-w-xs py-4",children:"Entendido, verificar ahora"})]},"backup"),x===2&&e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Verifica tu frase semilla"}),e.jsx("p",{className:"text-dark-400 text-xs mb-6",children:"Ingresa las palabras en las posiciones indicadas"}),e.jsx("div",{className:"space-y-4 mb-8",children:k.map(y=>e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-dark-400 mb-1 block",children:["Palabra #",y+1]}),e.jsx("input",{type:"text",value:c[y]||"",onChange:P=>n(R=>({...R,[y]:P.target.value})),placeholder:`Ingresa la palabra #${y+1}`,className:"glass-input font-mono",autoComplete:"off",autoCorrect:"off",spellCheck:"false"})]},y))}),e.jsx("div",{className:"mt-auto",children:e.jsx("button",{onClick:()=>r(3),disabled:!N,className:"kairos-button w-full py-4 disabled:opacity-40 disabled:cursor-not-allowed",children:N?"‚úì Verificado ‚Äî Continuar":"Verifica las palabras"})})]},"verify"),x===3&&e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-kairos-500/10 flex items-center justify-center mb-4 mx-auto",children:e.jsx(ot,{size:28,className:"text-kairos-400"})}),e.jsx("h3",{className:"font-bold text-center mb-1",children:"Protege tu Wallet"}),e.jsx("p",{className:"text-dark-400 text-xs text-center mb-6",children:"Esta contrase√±a encripta tu wallet en este dispositivo"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1 block",children:"Contrase√±a"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",value:d,onChange:y=>p(y.target.value),placeholder:"M√≠nimo 8 caracteres",className:"glass-input pr-10"}),e.jsx("button",{onClick:()=>g(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:h?e.jsx(tt,{size:16}):e.jsx(He,{size:16})})]}),d.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"flex gap-1",children:[0,1,2,3,4].map(y=>e.jsx("div",{className:`h-1 flex-1 rounded-full ${y<j.score?j.color:"bg-white/10"}`},y))}),e.jsx("p",{className:"text-xs mt-1 text-dark-400",children:j.label})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1 block",children:"Confirmar contrase√±a"}),e.jsx("input",{type:h?"text":"password",value:f,onChange:y=>E(y.target.value),placeholder:"Repite la contrase√±a",className:"glass-input"}),f&&d!==f&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Las contrase√±as no coinciden"})]})]}),e.jsx("div",{className:"mt-auto",children:e.jsx("button",{onClick:v,disabled:D||d.length<8||d!==f,className:"kairos-button w-full py-4 disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:D?e.jsxs(e.Fragment,{children:[e.jsx(O.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-dark-900 border-t-transparent rounded-full"}),"Creando wallet..."]}):"Crear Wallet"})})]},"password")]})]})}function mn(){const{navigate:t,setUnlocked:a,showToast:s}=se(),[x,r]=C.useState(null),[l,u]=C.useState(""),[m,o]=C.useState(""),[i,c]=C.useState(""),[n,d]=C.useState(""),[p,f]=C.useState(!1),[E,h]=C.useState(!1),[g,D]=C.useState(!1),b=async()=>{const B=l.trim().toLowerCase().replace(/\s+/g," ");if(!Ma(B))return s("Frase semilla inv√°lida","error");if(i.length<8)return s("M√≠nimo 8 caracteres","error");if(i!==n)return s("Las contrase√±as no coinciden","error");D(!0);try{await v0(B,i);const{unlockVault:F}=await T0(async()=>{const{unlockVault:w}=await Promise.resolve().then(()=>Ka);return{unlockVault:w}},void 0),k=await F(i);a(k,i),s("¬°Wallet importada exitosamente! üéâ","success")}catch(F){s("Error: "+F.message,"error")}D(!1)},A=async()=>{if(i.length<8)return s("M√≠nimo 8 caracteres","error");if(i!==n)return s("Las contrase√±as no coinciden","error");D(!0);try{const B=w0(m.trim()),F={version:1,createdAt:Date.now(),mnemonic:null,accounts:[],importedAccounts:[{name:"Wallet Importada",address:B.address,privateKey:B.privateKey,path:null,index:null,isImported:!0,createdAt:Date.now()}]},k=await wt(JSON.stringify(F),i);localStorage.setItem(Ee.ENCRYPTED_VAULT,k),localStorage.setItem(Ee.HAS_WALLET,"true"),localStorage.setItem(Ee.ACTIVE_WALLET,B.address),a(F,i),s("¬°Wallet importada exitosamente! üéâ","success")}catch{s("Clave privada inv√°lida","error")}D(!1)};return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>x?r(null):t("welcome"),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:"Importar Wallet"})]}),x?e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1 block",children:x==="seed"?"Frase Semilla":"Clave Privada"}),e.jsxs("div",{className:"relative",children:[x==="seed"?e.jsx("textarea",{value:l,onChange:B=>u(B.target.value),placeholder:"Ingresa tus 12 o 24 palabras separadas por espacios",className:"glass-input font-mono text-sm h-28 resize-none pr-10",autoComplete:"off",autoCorrect:"off",spellCheck:"false",style:{WebkitTextSecurity:E?"none":"disc"}}):e.jsx("input",{type:E?"text":"password",value:m,onChange:B=>o(B.target.value),placeholder:"0x...",className:"glass-input font-mono text-sm pr-10",autoComplete:"off"}),e.jsx("button",{onClick:()=>h(!E),className:"absolute right-3 top-3 text-dark-400",children:E?e.jsx(tt,{size:16}):e.jsx(He,{size:16})})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1 block",children:"Nueva contrase√±a"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",value:i,onChange:B=>c(B.target.value),placeholder:"M√≠nimo 8 caracteres",className:"glass-input pr-10"}),e.jsx("button",{onClick:()=>f(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:p?e.jsx(tt,{size:16}):e.jsx(He,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1 block",children:"Confirmar contrase√±a"}),e.jsx("input",{type:p?"text":"password",value:n,onChange:B=>d(B.target.value),placeholder:"Repite la contrase√±a",className:"glass-input"})]})]}),e.jsx("div",{className:"mt-auto",children:e.jsx("button",{onClick:x==="seed"?b:A,disabled:g||i.length<8||i!==n,className:"kairos-button w-full py-4 disabled:opacity-40 flex items-center justify-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(O.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-dark-900 border-t-transparent rounded-full"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{size:18}),"Importar y Encriptar"]})})})]}):e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex-1 flex flex-col gap-4",children:[e.jsx("p",{className:"text-dark-300 text-sm mb-4",children:"¬øC√≥mo deseas importar tu wallet?"}),e.jsx("button",{onClick:()=>r("seed"),className:"glass-card p-5 text-left hover:border-kairos-500/30 transition-all",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-kairos-500/10 flex items-center justify-center",children:e.jsx(Ts,{size:20,className:"text-kairos-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Frase Semilla"}),e.jsx("p",{className:"text-dark-400 text-xs",children:"12 o 24 palabras de recuperaci√≥n"})]})]})}),e.jsx("button",{onClick:()=>r("key"),className:"glass-card p-5 text-left hover:border-kairos-500/30 transition-all",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center",children:e.jsx(Na,{size:20,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Clave Privada"}),e.jsx("p",{className:"text-dark-400 text-xs",children:"Clave hexadecimal de tu wallet"})]})]})})]})]})}function un(){const{setUnlocked:t,navigate:a,showToast:s}=se(),{t:x}=ct(),[r,l]=C.useState(""),[u,m]=C.useState(!1),[o,i]=C.useState(!1),[c,n]=C.useState(0),[d,p]=C.useState(!1),[f,E]=C.useState(0),[h,g]=C.useState(!1),[D,b]=C.useState(1),A=Date.now()<f,B=async()=>{if(!(!r||A)){i(!0);try{const N=await ve(r);t(N,r)}catch{const v=c+1;if(n(v),p(!0),setTimeout(()=>p(!1),500),s(x("unlock.wrong_password"),"error"),v>=5){const j=Math.min(30,5*Math.pow(2,v-5));E(Date.now()+j*1e3),setTimeout(()=>E(0),j*1e3)}}i(!1)}},F=()=>{g(!0),b(1)},k=()=>{D===1?b(2):(y0(),a("welcome"),s("Wallet eliminada","info"),g(!1))},w=N=>{N.key==="Enter"&&B()};return e.jsxs("div",{className:"screen-container items-center justify-center px-6",children:[e.jsxs(O.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-sm text-center",children:[e.jsx(O.div,{animate:d?{x:[-10,10,-10,10,0]}:{},transition:{duration:.4},className:"mb-8",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full bg-kairos-500/20 blur-xl mx-auto"}),e.jsx("img",{src:"/icons/logo-128.png",alt:"Kairos",className:"w-20 h-20 mx-auto relative"})]})}),e.jsxs("h1",{className:"text-2xl font-bold mb-1",children:[e.jsx("span",{className:"kairos-text",children:"Kairos"})," Wallet"]}),e.jsx("p",{className:"text-dark-400 text-sm mb-8",children:x("unlock.enter_password","Ingresa tu contrase√±a para desbloquear")}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:u?"text":"password",value:r,onChange:N=>l(N.target.value),onKeyDown:w,placeholder:x("unlock.password"),className:"glass-input text-center pr-10 py-4",autoFocus:!0}),e.jsx("button",{onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:u?e.jsx(tt,{size:16}):e.jsx(He,{size:16})})]}),c>0&&e.jsx("p",{className:"text-red-400 text-xs mb-4",children:A?"Demasiados intentos. Espera unos segundos...":c>=5?`${c} intentos fallidos. ¬øOlvidaste tu contrase√±a?`:`Intento ${c} ‚Äî Contrase√±a incorrecta`}),e.jsxs("button",{onClick:B,disabled:o||!r||A,className:"kairos-button w-full py-4 mb-4 disabled:opacity-40 flex items-center justify-center gap-2",children:[o?e.jsx(O.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-dark-900 border-t-transparent rounded-full"}):e.jsx(Zx,{size:20}),o?x("unlock.decrypting","Descifrando..."):A?"Bloqueado...":x("unlock.unlock")]}),c>=3&&e.jsx("button",{onClick:F,className:"text-red-400/60 text-xs hover:text-red-400 transition-colors",children:"Eliminar wallet y restaurar con frase semilla"})]}),h&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>g(!1),children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:N=>N.stopPropagation(),children:[e.jsx("h3",{className:"font-bold text-red-400 mb-3",children:D===1?"‚ö†Ô∏è ¬øEst√°s seguro?":"‚ö†Ô∏è √öltima confirmaci√≥n"}),e.jsx("p",{className:"text-dark-300 text-sm mb-5",children:D===1?"Esto eliminar√° tu wallet de este dispositivo. Necesitar√°s tu frase semilla para recuperarla.":"¬øEST√ÅS COMPLETAMENTE SEGURO? No hay vuelta atr√°s."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:k,className:"flex-1 py-3 text-sm font-semibold rounded-xl bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",children:D===1?"Continuar":"S√≠, eliminar"})]})]})})]})}const m0="kairos_discovered_tokens",En=300*1e3,qs={};function Tt(t){try{const a=localStorage.getItem(m0);return a?JSON.parse(a)[t]||[]:[]}catch{return[]}}function pn(t,a){try{const s=localStorage.getItem(m0),x=s?JSON.parse(s):{};x[t]=a,localStorage.setItem(m0,JSON.stringify(x))}catch{}}function hn(t){const a=(Rs[t]||[]).map(x=>x.address.toLowerCase()),s=Tt(t).map(x=>x.address.toLowerCase());return new Set([...a,...s])}async function fn(t,a){const s=q[t];if(!s?.blockExplorerApiUrl||!a)return[];const x=`${t}-${a}`,r=Date.now();if(qs[x]&&r-qs[x]<En)return Tt(t);qs[x]=r;try{const l=`${s.blockExplorerApiUrl}?module=account&action=tokentx&address=${a}&startblock=0&endblock=99999999&page=1&offset=100&sort=desc`,m=await(await fetch(l)).json();if(m.status!=="1"||!Array.isArray(m.result))return Tt(t);const o=hn(t),i=new Set,c=[];for(const E of m.result){const h=E.contractAddress?.toLowerCase();if(!h||o.has(h)||i.has(h))continue;i.add(h);const g=E.tokenName||"",D=E.tokenSymbol||"";Cn(g,D)||c.push({address:E.contractAddress,name:E.tokenName||"Unknown",symbol:E.tokenSymbol||"???",decimals:Number(E.tokenDecimal)||18,chainId:t,discovered:!0,discoveredAt:r})}const n=Tt(t),d=new Set(n.map(E=>E.address.toLowerCase())),f=[...n,...c.filter(E=>!d.has(E.address.toLowerCase()))].slice(0,50);return pn(t,f),f}catch(l){return console.error("Token discovery failed:",l),Tt(t)}}function Cn(t,a){const s=`${t} ${a}`.toLowerCase();return[/https?:\/\//,/\.com|\.io|\.org|\.net/,/visit|claim|airdrop/i,/^\$/,/\$\d/,/free|bonus|reward/i,/\.eth$/].some(r=>r.test(s))}const Ht=new Map;function re(t){const a=JSON.parse(localStorage.getItem("kairos_custom_chains")||"{}"),s=q[t]||a[t];if(!s)throw new Error(`Chain ${t} not supported`);const x=`provider_${t}`;if(Ht.has(x))return Ht.get(x);let r;const l=s.rpcUrls||[s.rpcUrl];if(l.length>1){const u=l.map((m,o)=>({provider:new rt(m,t,{staticNetwork:!0,batchMaxCount:10}),priority:o+1,stallTimeout:2e3,weight:1}));r=new Sr(u,t)}else r=new rt(l[0],t,{staticNetwork:!0,batchMaxCount:10});return Ht.set(x,r),r}function ra(t){t?Ht.delete(`provider_${t}`):Ht.clear()}async function Bn(t,a){const x=await re(t).getBalance(a);return De(x)}async function Qa(t,a,s=[]){const x=q[t],r=re(t),l=Rs[t]||[],u=Tt(t),m=new Set,o=[];for(const p of[...l,...u,...s]){const f=p.address.toLowerCase();m.has(f)||(m.add(f),o.push(p))}const i=r.getBalance(a),c=o.map(async p=>{try{const E=await new oe(p.address,it,r).balanceOf(a),h=he(E,p.decimals);return{...p,balance:h,balanceRaw:E.toString(),hasBalance:E>0n}}catch{return{...p,balance:"0",balanceRaw:"0",hasBalance:!1,error:!0}}}),[n,...d]=await Promise.all([i,...c]);return{native:{...x.nativeCurrency,balance:De(n),balanceRaw:n.toString(),hasBalance:n>0n,isNative:!0},tokens:d}}async function bn(t,a){const s=re(t),x=new oe(a,it,s);try{const[r,l,u,m]=await Promise.all([x.name(),x.symbol(),x.decimals(),x.totalSupply()]);return{address:a,name:r,symbol:l,decimals:Number(u),totalSupply:he(m,u),chainId:t}}catch{throw new Error("Token no encontrado o contrato inv√°lido")}}async function Ya(t,a,s,x,r="standard"){const l=re(t),u=new Pe(a,l),m=await l.getFeeData(),o={slow:.8,standard:1,fast:1.3,instant:1.8}[r]||1,i=BigInt(Math.round(o*100)),c={to:s,value:Dt(x.toString())};m.maxFeePerGas?(c.maxFeePerGas=m.maxFeePerGas*i/100n,c.maxPriorityFeePerGas=m.maxPriorityFeePerGas*i/100n):m.gasPrice&&(c.gasPrice=m.gasPrice*i/100n);const n=await u.sendTransaction(c);return{hash:n.hash,from:n.from,to:n.to,value:x,chainId:t,timestamp:Date.now(),status:"pending"}}async function qa(t,a,s,x,r,l,u="standard"){const m=re(t),o=new Pe(a,m),i=new oe(s,it,o),c=Ie(r.toString(),l),n=await i.transfer(x,c);return{hash:n.hash,from:n.from,to:x,value:r,tokenAddress:s,chainId:t,timestamp:Date.now(),status:"pending"}}async function Ja(t,a){const x=await re(t).waitForTransaction(a,1,12e4);return{hash:a,status:x.status===1?"confirmed":"failed",blockNumber:x.blockNumber,gasUsed:x.gasUsed.toString()}}async function An(t,a,s,x){const r=re(t),l=await r.estimateGas({from:a,to:s,value:Dt(x.toString())}),u=await r.getFeeData(),m=u.maxFeePerGas||u.gasPrice||0n,o=l*m;return{gasLimit:l.toString(),gasPrice:he(m,"gwei"),gasCostWei:o.toString(),gasCostFormatted:De(o)}}async function gn(t,a,s,x,r,l){const u=re(t),m=new oe(s,it,u),o=Ie(r.toString(),l),i=await m.transfer.estimateGas(x,o,{from:a}),c=await u.getFeeData(),n=c.maxFeePerGas||c.gasPrice||0n,d=i*n;return{gasLimit:i.toString(),gasPrice:he(n,"gwei"),gasCostWei:d.toString(),gasCostFormatted:De(d)}}async function Fn(t,a,s=1,x=20){const r=q[t];if(!r?.blockExplorerApiUrl)return[];try{const l=r.blockExplorerApiKey?`&apikey=${r.blockExplorerApiKey}`:"",u=`${r.blockExplorerApiUrl}?module=account&action=txlist&address=${a}&startblock=0&endblock=99999999&page=${s}&offset=${x}&sort=desc${l}`,o=await(await fetch(u)).json();return o.status!=="1"?[]:o.result.map(i=>({hash:i.hash,from:i.from,to:i.to,value:De(i.value),gasUsed:i.gasUsed,gasPrice:i.gasPrice,timestamp:Number(i.timeStamp)*1e3,blockNumber:Number(i.blockNumber),status:i.txreceipt_status==="1"?"confirmed":"failed",isIncoming:i.to.toLowerCase()===a.toLowerCase(),chainId:t,nonce:Number(i.nonce)}))}catch(l){return console.error("Failed to fetch tx history:",l),[]}}async function kn(t,a,s=null,x=1,r=20){const l=q[t];if(!l?.blockExplorerApiUrl)return[];try{const u=l.blockExplorerApiKey?`&apikey=${l.blockExplorerApiKey}`:"";let m=`${l.blockExplorerApiUrl}?module=account&action=tokentx&address=${a}&startblock=0&endblock=99999999&page=${x}&offset=${r}&sort=desc${u}`;s&&(m+=`&contractaddress=${s}`);const i=await(await fetch(m)).json();return i.status!=="1"?[]:i.result.map(c=>({hash:c.hash,from:c.from,to:c.to,value:he(c.value,Number(c.tokenDecimal)),tokenName:c.tokenName,tokenSymbol:c.tokenSymbol,tokenAddress:c.contractAddress,tokenDecimal:Number(c.tokenDecimal),timestamp:Number(c.timeStamp)*1e3,blockNumber:Number(c.blockNumber),status:"confirmed",isIncoming:c.to.toLowerCase()===a.toLowerCase(),chainId:t}))}catch(u){return console.error("Failed to fetch token tx history:",u),[]}}async function Dn(t){const s=await re(t).getFeeData(),x=s.maxFeePerGas||s.gasPrice||0n,r=he(x,"gwei");return{standard:parseFloat(r),slow:parseFloat(r)*.8,fast:parseFloat(r)*1.3,instant:parseFloat(r)*1.8}}async function wn(t,a,s){const x=re(t),r=new Pe(a,x),l=await x.getFeeData(),u={to:s.to,value:Dt(s.value?.toString()||"0"),data:s.data||"0x",nonce:s.nonce};l.maxFeePerGas?(u.maxFeePerGas=l.maxFeePerGas*150n/100n,u.maxPriorityFeePerGas=l.maxPriorityFeePerGas*150n/100n):u.gasPrice=l.gasPrice*150n/100n;const m=await r.sendTransaction(u);return{hash:m.hash,nonce:m.nonce,status:"pending"}}async function vn(t,a,s){const x=re(t),r=new Pe(a,x),l=await x.getFeeData(),u={to:r.address,value:0n,nonce:s};l.maxFeePerGas?(u.maxFeePerGas=l.maxFeePerGas*200n/100n,u.maxPriorityFeePerGas=l.maxPriorityFeePerGas*200n/100n):u.gasPrice=l.gasPrice*200n/100n;const m=await r.sendTransaction(u);return{hash:m.hash,nonce:m.nonce,status:"cancelling"}}async function yn(t,a,s,x,r){const l=re(t),u=new Pe(a,l),m={to:s,value:Dt(x.toString())};r.maxFeePerGas?(m.maxFeePerGas=Ie(r.maxFeePerGas.toString(),"gwei"),m.maxPriorityFeePerGas=Ie((r.maxPriorityFeePerGas||r.maxFeePerGas*.1).toString(),"gwei")):r.gasPrice&&(m.gasPrice=Ie(r.gasPrice.toString(),"gwei")),r.gasLimit&&(m.gasLimit=BigInt(r.gasLimit));const o=await u.sendTransaction(m);return{hash:o.hash,from:o.from,to:o.to,value:x,chainId:t,nonce:o.nonce,timestamp:Date.now(),status:"pending"}}const Za=["function allowance(address owner, address spender) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","event Approval(address indexed owner, address indexed spender, uint256 value)"];async function jn(t,a,s){const x=re(t),r=q[t];if(!r)return[];const l={[r.dexRouter]:r.dexName||"DEX Router",...r.wrappedNative?{}:{}},u=[];for(const m of s){const o=new oe(m,[...it,...Za],x);for(const[i,c]of Object.entries(l))if(i)try{const n=await o.allowance(a,i);if(n>0n){const d=await o.decimals().catch(()=>18),p=await o.symbol().catch(()=>"???"),f=n>=vs/2n;u.push({tokenAddress:m,tokenSymbol:p,spender:i,spenderLabel:c,allowance:f?"Unlimited":he(n,d),allowanceRaw:n.toString(),isUnlimited:f})}}catch{}}return u}async function Nn(t,a,s,x){const r=re(t),l=new Pe(a,r),m=await new oe(s,Za,l).approve(x,0n);return await m.wait(),{hash:m.hash,status:"revoked"}}async function Sn(t){try{return await re(1).resolveName(t)}catch{return null}}const ex="https://api.coingecko.com/api/v3";let Js=0;const na=2100;async function tx(t){const s=Date.now()-Js;s<na&&await new Promise(r=>setTimeout(r,na-s)),Js=Date.now();const x=await fetch(t);if(x.status===429){await new Promise(l=>setTimeout(l,5e3)),Js=Date.now();const r=await fetch(t);if(!r.ok)throw new Error("CoinGecko rate limited");return r}if(!x.ok)throw new Error(`CoinGecko error: ${x.status}`);return x}const Pn={56:"binance-smart-chain",1:"ethereum",137:"polygon-pos",42161:"arbitrum-one",43114:"avalanche",8453:"base"},Tn={56:"binancecoin",1:"ethereum",137:"matic-network",42161:"ethereum",43114:"avalanche-2",8453:"ethereum"},Lt=new Map,I0=6e4;async function R0(t){const a=Tn[t];if(!a)return 0;const s=`native_${a}`,x=Lt.get(s);if(x&&Date.now()-x.timestamp<I0)return x.price;try{const l=await(await tx(`${ex}/simple/price?ids=${a}&vs_currencies=usd&include_24hr_change=true`)).json(),u=l[a]?.usd||0,m=l[a]?.usd_24h_change||0;return Lt.set(s,{price:u,change24h:m,timestamp:Date.now()}),u}catch{return x?.price||0}}async function sx(t,a){if(!a.length)return{};const s=Pn[t];if(!s)return{};const x=a.join(",").toLowerCase(),r=`tokens_${t}_${x}`,l=Lt.get(r);if(l&&Date.now()-l.timestamp<I0)return l.prices;try{const m=await(await tx(`${ex}/simple/token_price/${s}?contract_addresses=${x}&vs_currencies=usd&include_24hr_change=true`)).json(),o={};for(const[i,c]of Object.entries(m))o[i.toLowerCase()]={usd:c.usd||0,change24h:c.usd_24h_change||0};return Lt.set(r,{prices:o,timestamp:Date.now()}),o}catch{return l?.prices||{}}}const oa="0x14D41707269c7D8b8DFa5095b38824a46dA05da3",In="0x10ED43C718714eb63d5aA57B78B54704E256024E",ia="0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",Rn="0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",Ln="0x55d398326f99059fF775485246999027B3197955";async function On(){const t="kairos_price",a=Lt.get(t);if(a&&Date.now()-a.timestamp<I0)return a;try{const{ethers:s}=await T0(async()=>{const{ethers:i}=await import("./crypto-1JBTrmrY.js");return{ethers:i}},[]),x=new s.JsonRpcProvider("https://bsc-dataseed1.binance.org",56,{staticNetwork:!0}),r=["function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)"],l=new s.Contract(In,r,x),u=s.parseUnits("1",18);let m=0;try{const i=await l.getAmountsOut(u,[oa,ia,Ln]);m=parseFloat(s.formatUnits(i[2],18))}catch{try{const i=await l.getAmountsOut(u,[oa,ia,Rn]);m=parseFloat(s.formatUnits(i[2],18))}catch{m=0}}const o={usd:m,change24h:0,timestamp:Date.now()};return Lt.set(t,o),o}catch(s){return console.error("Failed to get KAIROS price:",s),a||{usd:0,change24h:0}}}function we(t){return t==null||isNaN(t)?"$0.00":t>=1e9?`$${(t/1e9).toFixed(2)}B`:t>=1e6?`$${(t/1e6).toFixed(2)}M`:t>=1e3?`$${(t/1e3).toFixed(2)}K`:t>=1?`$${t.toFixed(2)}`:t>=.01?`$${t.toFixed(2)}`:t>0?`$${t.toFixed(6)}`:"$0.00"}function nt(t,a=4){const s=parseFloat(t);return isNaN(s)||s===0?"0":s>=1e9?`${(s/1e9).toFixed(2)}B`:s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(2)}K`:s>=1?s.toFixed(a):s>=1e-4?s.toFixed(6):s.toExponential(2)}function Mn(t){return t==null||isNaN(t)?"0.00%":`${t>=0?"+":""}${t.toFixed(2)}%`}const zn="https://raw.githubusercontent.com/nicholasVsternique/bsc-token-icons/refs/heads/main/tokens",_n={56:"smartchain",1:"ethereum",137:"polygon",42161:"arbitrum",43114:"avalanchec",8453:"base"},$n={56:"https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png",1:"https://assets.coingecko.com/coins/images/279/small/ethereum.png",137:"https://assets.coingecko.com/coins/images/4713/small/polygon.png",42161:"https://assets.coingecko.com/coins/images/279/small/ethereum.png",43114:"https://assets.coingecko.com/coins/images/12559/small/Avalanche_Circle_RedWhite_Trans_BG.png",8453:"https://assets.coingecko.com/coins/images/279/small/ethereum.png"},Un={56:"https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png",1:"https://assets.coingecko.com/coins/images/279/small/ethereum.png",137:"https://assets.coingecko.com/coins/images/4713/small/polygon.png",42161:"https://cryptologos.cc/logos/arbitrum-arb-logo.png?v=040",43114:"https://assets.coingecko.com/coins/images/12559/small/Avalanche_Circle_RedWhite_Trans_BG.png",8453:"https://assets.coingecko.com/asset_platforms/images/131/small/base.jpeg"},Zs={"0xe9e7cea3dedca5984780bafc599bd69add087d56":"https://assets.coingecko.com/coins/images/9576/small/BUSD.png","0x55d398326f99059ff775485246999027b3197955":"https://assets.coingecko.com/coins/images/325/small/Tether.png","0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d":"https://assets.coingecko.com/coins/images/6319/small/usdc.png","0x2170ed0880ac9a755fd29b2688956bd959f933f8":"https://assets.coingecko.com/coins/images/279/small/ethereum.png","0x7130d2a12b9bcbfae4f2634d864a1ee1ce3ead9c":"https://assets.coingecko.com/coins/images/1/small/bitcoin.png","0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c":"https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png","0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82":"https://assets.coingecko.com/coins/images/12632/small/pancakeswap-cake-logo_%281%29.png","0x1d2f0da169ceb9fc7b3144628db156f3f6c60dbe":"https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png","0xdac17f958d2ee523a2206206994597c13d831ec7":"https://assets.coingecko.com/coins/images/325/small/Tether.png","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48":"https://assets.coingecko.com/coins/images/6319/small/usdc.png","0x6b175474e89094c44da98b954eedeac495271d0f":"https://assets.coingecko.com/coins/images/9956/small/Badge_Dai.png","0x2260fac5e5542a773aa44fbcfedf7c193bc2c599":"https://assets.coingecko.com/coins/images/7598/small/wrapped_bitcoin_wbtc.png","0x514910771af9ca656af840dff83e8264ecf986ca":"https://assets.coingecko.com/coins/images/877/small/chainlink-new-logo.png","0x1f9840a85d5af5bf1d1762f925bdaddc4201f984":"https://assets.coingecko.com/coins/images/12504/small/uni.jpg","0xc2132d05d31c914a87c6611c10748aeb04b58e8f":"https://assets.coingecko.com/coins/images/325/small/Tether.png","0x2791bca1f2de4661ed88a30c99a7a9449aa84174":"https://assets.coingecko.com/coins/images/6319/small/usdc.png","0x7ceb23fd6bc0add59e62ac25578270cff1b9f619":"https://assets.coingecko.com/coins/images/279/small/ethereum.png","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9":"https://assets.coingecko.com/coins/images/325/small/Tether.png","0xaf88d065e77c8cc2239327c5edb3a432268e5831":"https://assets.coingecko.com/coins/images/6319/small/usdc.png","0x912ce59144191c1204e64559fe8253a0e49e6548":"https://cryptologos.cc/logos/arbitrum-arb-logo.png?v=040","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7":"https://assets.coingecko.com/coins/images/325/small/Tether.png","0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e":"https://assets.coingecko.com/coins/images/6319/small/usdc.png","0x833589fcd6edb6e08f4c7c32d4f71b54bda02913":"https://assets.coingecko.com/coins/images/6319/small/usdc.png"},ax=new Set,Es=new Map;function Kn(t,a){if(!t)return null;if(t.address?.toLowerCase()===Ze.address.toLowerCase())return"/icons/kairos-token-128.png";if(t.logoURI)return t.logoURI;const s=t.address?.toLowerCase();if(!s)return null;if(Es.has(s))return Es.get(s);if(Zs[s])return Es.set(s,Zs[s]),Zs[s];if(_n[a]){const r=`${zn}/${s}/logo.png`;return Es.set(s,r),r}return null}function Gn(t){return $n[t]||null}function xx(t){return Un[t]||null}function Wn(t){ax.add(t)}function Vn(t){return ax.has(t)}function Hn(t){if(!t)return"#666";const a=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#82E0AA","#F8C471","#85C1E9","#E59866","#73C6B6","#F1948A"];let s=0;for(let x=0;x<t.length;x++)s=t.charCodeAt(x)+((s<<5)-s);return a[Math.abs(s)%a.length]}function Ke({token:t,chainId:a,size:s=40,showChainBadge:x=!1}){const[r,l]=C.useState(!1),[u,m]=C.useState(!1);if(!t)return null;const o=q[a],i=t.address?.toLowerCase()===Ze.address.toLowerCase(),c=t.isNative;let n=null;c?n=Gn(a):n=Kn(t,a),n&&Vn(n)&&(n=null);const d=n&&!r,p=c?o?.color||"#666":Hn(t.symbol),f=Math.max(14,s*.35);return e.jsxs("div",{className:"relative flex-shrink-0",style:{width:s,height:s},children:[d?e.jsx("img",{src:n,alt:t.symbol,className:"rounded-full object-cover",style:{width:s,height:s},loading:"lazy",onError:()=>{Wn(n),l(!0)}}):e.jsx("div",{className:"rounded-full flex items-center justify-center font-bold text-white",style:{width:s,height:s,backgroundColor:p+"25",color:p,fontSize:s*.38},children:i?e.jsx("img",{src:"/icons/kairos-token-128.png",alt:"KAIROS",className:"rounded-full",style:{width:s,height:s}}):t.symbol?.charAt(0)||"?"}),x&&!c&&o&&e.jsx("div",{className:"absolute flex items-center justify-center rounded-full border-2 border-dark-950 overflow-hidden",style:{width:f,height:f,bottom:-1,right:-1,backgroundColor:o.color},children:u?e.jsx("span",{className:"text-[6px] font-bold text-white",children:o.shortName?.charAt(0)}):e.jsx("img",{src:xx(a),alt:o.shortName,className:"w-full h-full rounded-full object-cover",onError:()=>m(!0)})})]})}function Ct({chainId:t,size:a=24}){const[s,x]=C.useState(!1),r=q[t],l=xx(t);return r?l&&!s?e.jsx("img",{src:l,alt:r.name,className:"rounded-full object-cover",style:{width:a,height:a},onError:()=>x(!0)}):e.jsx("div",{className:"rounded-full flex items-center justify-center text-white font-bold",style:{width:a,height:a,backgroundColor:r.color,fontSize:a*.45},children:r.shortName?.charAt(0)}):null}let Pt=null;typeof window<"u"&&window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),Pt=t,window.dispatchEvent(new Event("kairos:installable"))});function Xn(){const[t,a]=C.useState(!1),[s,x]=C.useState(!1);C.useEffect(()=>{if(sessionStorage.getItem("kairos_pwa_dismissed")||window.matchMedia("(display-mode: standalone)").matches)return;if(Pt){a(!0);return}const u=()=>a(!0);return window.addEventListener("kairos:installable",u),()=>window.removeEventListener("kairos:installable",u)},[]);const r=async()=>{if(!Pt)return;Pt.prompt();const{outcome:u}=await Pt.userChoice;Pt=null,a(!1),u==="accepted"&&sessionStorage.setItem("kairos_pwa_dismissed","1")},l=()=>{a(!1),x(!0),sessionStorage.setItem("kairos_pwa_dismissed","1")};return!t||s?null:e.jsx(ue,{children:e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"mx-5 mb-3 bg-gradient-to-r from-kairos-500/20 to-kairos-600/10 rounded-2xl p-3 border border-kairos-500/20 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-kairos-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(Mt,{size:18,className:"text-kairos-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold text-white",children:"Instalar Kairos Wallet"}),e.jsx("p",{className:"text-[10px] text-dark-400",children:"Acceso directo desde tu pantalla de inicio"})]}),e.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-kairos-500 text-dark-950 text-xs font-bold rounded-lg flex-shrink-0",children:"Instalar"}),e.jsx("button",{onClick:l,className:"p-1 flex-shrink-0",children:e.jsx(Te,{size:14,className:"text-dark-500"})})]})})}const bs="kairos_portfolio_history",ca=500,la=[{key:"1H",label:"1H",ms:3600*1e3},{key:"1D",label:"1D",ms:1440*60*1e3},{key:"1W",label:"1W",ms:10080*60*1e3},{key:"1M",label:"1M",ms:720*60*60*1e3},{key:"ALL",label:"ALL",ms:1/0}];function Qn(t){if(!(typeof t!="number"||isNaN(t)||t<0))try{const a=localStorage.getItem(bs),s=a?JSON.parse(a):[],x=Date.now(),r=s[s.length-1];r&&x-r.t<300*1e3?s[s.length-1]={t:x,v:t}:s.push({t:x,v:t});const l=s.length>ca?s.slice(s.length-ca):s;localStorage.setItem(bs,JSON.stringify(l))}catch{try{localStorage.removeItem(bs)}catch{}}}function Yn(t,a,s,x=4){if(t.length<2)return{path:"",area:"",min:0,max:0};const r=t.map(f=>f.v),l=Math.min(...r),u=Math.max(...r),m=u-l||1,o=a-x*2,i=s-x*2,c=t.map((f,E)=>({x:x+E/(t.length-1)*o,y:x+i-(f.v-l)/m*i}));let n=`M ${c[0].x} ${c[0].y}`;for(let f=0;f<c.length-1;f++){const E=c[Math.max(0,f-1)],h=c[f],g=c[f+1],D=c[Math.min(c.length-1,f+2)],b=.3,A=h.x+(g.x-E.x)*b,B=h.y+(g.y-E.y)*b,F=g.x-(D.x-h.x)*b,k=g.y-(D.y-h.y)*b;n+=` C ${A} ${B}, ${F} ${k}, ${g.x} ${g.y}`}const d=c[c.length-1],p=n+` L ${d.x} ${s} L ${c[0].x} ${s} Z`;return{path:n,area:p,min:l,max:u}}function qn({portfolioValue:t,hideBalance:a}){const[s,x]=C.useState("1D"),[r,l]=C.useState([]),[u,m]=C.useState(null);C.useEffect(()=>{try{const g=localStorage.getItem(bs);g&&l(JSON.parse(g))}catch{l([])}},[t]);const o=C.useMemo(()=>{const g=la.find(A=>A.key===s);if(!g)return r;const D=g.ms===1/0?0:Date.now()-g.ms,b=r.filter(A=>A.t>=D);if(b.length<2&&t>=0){const A=Date.now();return b.length===0?[{t:A-g.ms*.9,v:t},{t:A,v:t}]:[...b,{t:A,v:t}]}return b},[r,s,t]),i=C.useMemo(()=>{if(o.length<2)return{amount:0,percent:0};const g=o[0].v,D=o[o.length-1].v,b=D-g,A=g>0?(D-g)/g*100:0;return{amount:b,percent:A}},[o]),c=i.amount>=0,n=Math.abs(i.percent)<.01,d=320,p=100,{path:f,area:E}=Yn(o,d,p),h=n?"#6b7280":c?"#22c55e":"#ef4444";return e.jsx("div",{className:"px-5 mb-4",children:e.jsxs("div",{className:"glass-card-strong p-3 overflow-hidden",children:[!a&&e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[n?e.jsx(a0,{size:14,className:"text-dark-400"}):c?e.jsx($e,{size:14,className:"text-green-400"}):e.jsx(Rt,{size:14,className:"text-red-400"}),e.jsxs("span",{className:`text-xs font-medium ${n?"text-dark-400":c?"text-green-400":"text-red-400"}`,children:[c&&!n?"+":"","$",Math.abs(i.amount).toFixed(2)," ","(",c&&!n?"+":"",i.percent.toFixed(2),"%)"]})]}),u&&e.jsxs("span",{className:"text-[10px] text-dark-400 font-mono",children:["$",u.v.toFixed(2)," ¬∑ ",new Date(u.t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"relative w-full",style:{height:p},onMouseLeave:()=>m(null),children:[e.jsxs("svg",{viewBox:`0 0 ${d} ${p}`,className:"w-full h-full",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:h,stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:h,stopOpacity:"0"})]})}),f&&e.jsxs(e.Fragment,{children:[e.jsx(O.path,{d:E,fill:"url(#chartGrad)",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}),e.jsx(O.path,{d:f,fill:"none",stroke:h,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.8,ease:"easeOut"}})]}),[.25,.5,.75].map(g=>e.jsx("line",{x1:"0",y1:p*g,x2:d,y2:p*g,stroke:"rgba(255,255,255,0.03)",strokeWidth:"1"},g))]}),a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center backdrop-blur-md rounded-lg",children:e.jsx("span",{className:"text-dark-500 text-xs",children:"Oculto"})})]}),e.jsx("div",{className:"flex items-center justify-center gap-1 mt-2",children:la.map(g=>e.jsx("button",{onClick:()=>x(g.key),className:`px-3 py-1 rounded-lg text-[10px] font-semibold transition-all ${s===g.key?"bg-kairos-500/20 text-kairos-400":"text-dark-500 hover:text-dark-300 hover:bg-white/5"}`,children:g.label},g.key))})]})})}const Qt="kairos_price_alerts",rx="kairos_triggered_alerts";function gt(){try{return JSON.parse(localStorage.getItem(Qt)||"[]")}catch{return[]}}function u0(){try{return JSON.parse(localStorage.getItem(rx)||"[]")}catch{return[]}}function nx({tokenSymbol:t,tokenAddress:a,chainId:s,condition:x,targetPrice:r,currentPrice:l}){const u=gt(),m={id:`alert_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,tokenSymbol:t,tokenAddress:a,chainId:s,condition:x,targetPrice:parseFloat(r),currentPrice:parseFloat(l),createdAt:Date.now(),active:!0};return u.push(m),localStorage.setItem(Qt,JSON.stringify(u)),m}function Jn(t){const a=gt().filter(s=>s.id!==t);localStorage.setItem(Qt,JSON.stringify(a))}function Zn(t){const a=gt(),s=a.find(x=>x.id===t);s&&(s.active=!s.active),localStorage.setItem(Qt,JSON.stringify(a))}function eo(t){const a=gt(),s=[],x=u0();for(const r of a){if(!r.active)continue;const l=t[r.tokenSymbol.toLowerCase()]||t[r.tokenAddress?.toLowerCase()];if(!l)continue;let u=!1;(r.condition==="above"&&l>=r.targetPrice||r.condition==="below"&&l<=r.targetPrice)&&(u=!0),u&&(r.active=!1,r.triggeredAt=Date.now(),r.triggeredPrice=l,s.push(r),x.unshift(r))}if(s.length>0&&(localStorage.setItem(Qt,JSON.stringify(a)),localStorage.setItem(rx,JSON.stringify(x.slice(0,50))),"Notification"in window&&Notification.permission==="granted"))for(const r of s)new Notification(`üîî Alerta: ${r.tokenSymbol}`,{body:`${r.tokenSymbol} ${r.condition==="above"?"super√≥":"baj√≥ de"} $${r.targetPrice} ‚Üí $${r.triggeredPrice.toFixed(4)}`,icon:"/icons/logo-128.png"});return s}async function to(){return"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":Notification.permission==="granted"}function da(){return gt().filter(t=>t.active).length}const Yt="kairos_notifications",ma={tx_sent:{icon:Me,color:"text-blue-400",bg:"bg-blue-500/10",label:"Env√≠o"},tx_received:{icon:Mt,color:"text-green-400",bg:"bg-green-500/10",label:"Recibido"},tx_failed:{icon:ce,color:"text-red-400",bg:"bg-red-500/10",label:"Fallido"},price_alert:{icon:$e,color:"text-kairos-400",bg:"bg-kairos-500/10",label:"Alerta"},security:{icon:ke,color:"text-amber-400",bg:"bg-amber-500/10",label:"Seguridad"},bridge:{icon:b0,color:"text-indigo-400",bg:"bg-indigo-500/10",label:"Bridge"},system:{icon:Je,color:"text-dark-300",bg:"bg-white/5",label:"Sistema"}};function Ot(){try{return JSON.parse(localStorage.getItem(Yt)||"[]")}catch{return[]}}function so(t){const a=Ot(),s=a.find(x=>x.id===t);s&&(s.read=!0),localStorage.setItem(Yt,JSON.stringify(a))}function ao(){const t=Ot().map(a=>({...a,read:!0}));localStorage.setItem(Yt,JSON.stringify(t))}function xo(t){const a=Ot().filter(s=>s.id!==t);localStorage.setItem(Yt,JSON.stringify(a))}function ro(){localStorage.setItem(Yt,"[]")}function ua(){return Ot().filter(t=>!t.read).length}function no(){const{goBack:t,showToast:a}=se(),[s,x]=C.useState(Ot()),[r,l]=C.useState("all"),u=()=>x(Ot()),m=r==="unread"?s.filter(f=>!f.read):s,o=s.filter(f=>!f.read).length,i=()=>{ao(),u(),a("Todas marcadas como le√≠das","success")},c=()=>{ro(),u(),a("Notificaciones eliminadas","success")},n=f=>{so(f),u()},d=f=>{xo(f),u()},p=f=>{const E=Date.now()-f;return E<6e4?"Ahora":E<36e5?`${Math.floor(E/6e4)}m`:E<864e5?`${Math.floor(E/36e5)}h`:E<6048e5?`${Math.floor(E/864e5)}d`:new Date(f).toLocaleDateString("es-ES",{day:"numeric",month:"short"})};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Notificaciones"}),o>0&&e.jsx("span",{className:"bg-kairos-500 text-dark-950 text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:o})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[o>0&&e.jsx("button",{onClick:i,className:"text-xs text-kairos-400 hover:underline",children:e.jsx(er,{size:14})}),s.length>0&&e.jsx("button",{onClick:c,className:"text-xs text-dark-500 hover:text-red-400",children:e.jsx(st,{size:14})})]})]}),e.jsx("div",{className:"flex gap-1 p-1 mx-4 mt-3 rounded-xl bg-white/5",children:[{key:"all",label:`Todas (${s.length})`},{key:"unread",label:`Sin leer (${o})`}].map(f=>e.jsx("button",{onClick:()=>l(f.key),className:`flex-1 py-2 rounded-lg text-xs font-medium transition-all ${r===f.key?"bg-kairos-500/15 text-kairos-400":"text-dark-400"}`,children:f.label},f.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:m.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(x0,{className:"mx-auto text-dark-600 mb-3",size:40}),e.jsx("p",{className:"text-dark-400 text-sm",children:r==="unread"?"No hay notificaciones sin leer":"No hay notificaciones"})]}):e.jsx(ue,{children:m.map((f,E)=>{const h=ma[f.type]||ma.system,g=h.icon;return e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:E*.02},className:`flex items-start gap-3 p-3 rounded-xl border transition-all ${f.read?"bg-dark-800/30 border-dark-700/30":"bg-dark-800/60 border-dark-700/60"}`,onClick:()=>!f.read&&n(f.id),children:[e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 ${h.bg}`,children:e.jsx(g,{size:16,className:h.color})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`text-sm font-medium ${f.read?"text-dark-300":"text-white"}`,children:f.title}),!f.read&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-kairos-500 flex-shrink-0"})]}),e.jsx("p",{className:"text-dark-500 text-xs mt-0.5 line-clamp-2",children:f.message}),e.jsx("p",{className:"text-dark-600 text-[10px] mt-1",children:p(f.timestamp)})]}),e.jsx("button",{onClick:D=>{D.stopPropagation(),d(f.id)},className:"text-dark-600 hover:text-red-400 flex-shrink-0 mt-1",children:e.jsx(Te,{size:12})})]},f.id)})})})]})}function oo(){const{t}=ct(),{activeAddress:a,activeChainId:s,balances:x,isLoadingBalances:r,nativePrice:l,tokenPrices:u,navigate:m,setBalances:o,setNativePrice:i,setTokenPrices:c,setActiveChain:n,showToast:d,lock:p,getActiveAccount:f,getTotalPortfolioValue:E,setTokenDetailData:h}=se(),[g,D]=C.useState(!1),[b,A]=C.useState(!1),[B,F]=C.useState(!1),[k,w]=C.useState(!1),[N,v]=C.useState(da()),j=q[s];f();const y=E(),P=C.useCallback(async()=>{if(a){w(!0);try{const[T,I]=await Promise.all([Qa(s,a),R0(s)]);o(T),i(I);const S=T.tokens.filter(X=>X.hasBalance),G=S.filter(X=>X.address.toLowerCase()!==Ze.address.toLowerCase()).map(X=>X.address),z=[];G.length>0&&z.push(sx(s,G));const U=S.some(X=>X.address.toLowerCase()===Ze.address.toLowerCase());U&&z.push(On());const Q=await Promise.all(z);let Z={},ee=0;if(G.length>0&&(Z=Q[ee]||{},ee++),U&&Q[ee]){const X=Q[ee];Z[Ze.address.toLowerCase()]={usd:X.usd,change24h:X.change24h||0}}c(Z),fn(s,a).catch(()=>{});try{const X={};I>0&&(X[j.nativeCurrency.symbol.toLowerCase()]=I);for(const[$,Y]of Object.entries(Z))Y.usd&&(X[$]=Y.usd);const J=eo(X);J.length>0&&d(`üîî ${J.length} alerta(s) activada(s)!`,"success"),v(da())}catch{}}catch(T){console.error("Failed to load balances:",T)}w(!1)}},[a,s]);C.useEffect(()=>{P();const T=setInterval(P,3e4);return()=>clearInterval(T)},[P]),C.useEffect(()=>{y>0&&Qn(y)},[y]);const R=async()=>{await navigator.clipboard.writeText(a),D(!0),d(t("receive.address_copied"),"success"),setTimeout(()=>D(!1),2e3)},M=T=>u[T.address?.toLowerCase()]?.usd||0,K=T=>u[T.address?.toLowerCase()]?.change24h||0,H=[...x.native?[{...x.native,price:l}]:[],...x.tokens||[]].filter(T=>T.hasBalance||T.isNative);return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"px-5 pt-4 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{onClick:()=>F(!B),className:"flex items-center gap-2 glass-button py-2 px-3 text-sm",children:[e.jsx(Ct,{chainId:s,size:18}),e.jsx("span",{className:"font-medium",children:j.shortName}),e.jsx(Bt,{size:14,className:`transition-transform ${B?"rotate-180":""}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:P,className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(Ge,{size:16,className:`text-dark-300 ${k?"animate-spin":""}`})}),e.jsxs("button",{onClick:()=>m("notifications"),className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center relative",children:[e.jsx(Je,{size:16,className:"text-dark-300"}),ua()>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-kairos-500 text-dark-950 text-[8px] font-bold w-3.5 h-3.5 rounded-full flex items-center justify-center",children:ua()})]}),e.jsx("button",{onClick:()=>m("settings"),className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(K0,{size:16,className:"text-dark-300"})}),e.jsx("button",{onClick:p,className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(ot,{size:16,className:"text-dark-300"})})]})]}),e.jsx(ue,{children:B&&e.jsx(O.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute left-4 right-4 z-30 glass-card-strong p-2 mt-1",children:at.map(T=>{const I=q[T];return e.jsxs("button",{onClick:()=>{n(T),F(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${T===s?"bg-kairos-500/10 text-kairos-400":"hover:bg-white/5"}`,children:[e.jsx(Ct,{chainId:T,size:24}),e.jsx("span",{className:"font-medium text-sm",children:I.name}),T===s&&e.jsx(Se,{size:16,className:"ml-auto text-kairos-400"})]},T)})})}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 mx-auto mb-4",children:[e.jsx(Fs,{size:14,className:"text-dark-400"}),e.jsx("span",{className:"text-dark-300 text-sm font-mono",children:ge(a)}),g?e.jsx(Se,{size:14,className:"text-green-400"}):e.jsx(We,{size:14,className:"text-dark-400"})]})]}),e.jsxs("div",{className:"px-5 text-center mb-5 cursor-pointer",onClick:()=>m("portfolio"),children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("span",{className:"text-dark-400 text-xs",children:t("dashboard.portfolio")}),e.jsx("button",{onClick:T=>{T.stopPropagation(),A(!b)},children:b?e.jsx(tt,{size:12,className:"text-dark-500"}):e.jsx(He,{size:12,className:"text-dark-500"})})]}),e.jsx("h2",{className:"balance-text text-white",children:b?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢":we(y)}),e.jsx("p",{className:"text-dark-600 text-[10px] mt-0.5",children:"Toca para ver asignaci√≥n"})]}),e.jsx(qn,{portfolioValue:y,hideBalance:b}),e.jsx(Xn,{}),e.jsx("div",{className:"px-5 mb-5",children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{icon:Me,label:t("action.send"),screen:"send",color:"bg-blue-500/10 text-blue-400"},{icon:Mt,label:t("action.receive"),screen:"receive",color:"bg-green-500/10 text-green-400"},{icon:r0,label:t("action.buy","Comprar"),screen:"buy",color:"bg-emerald-500/10 text-emerald-400"},{icon:ks,label:t("action.swap"),screen:"swap",color:"bg-purple-500/10 text-purple-400"},{icon:b0,label:"Bridge",screen:"bridge",color:"bg-indigo-500/10 text-indigo-400"},{icon:n0,label:"Multi-Send",screen:"multisend",color:"bg-cyan-500/10 text-cyan-400"},{icon:ze,label:t("action.dapps"),screen:"dapps",color:"bg-orange-500/10 text-orange-400"},{icon:Vt,label:t("action.nfts"),screen:"nft",color:"bg-pink-500/10 text-pink-400"},{icon:ot,label:"Staking",screen:"staking",color:"bg-teal-500/10 text-teal-400"},{icon:tr,label:"Vault",screen:"vault",color:"bg-emerald-500/10 text-emerald-400"},{icon:fs,label:"Portfolio",screen:"portfolio",color:"bg-violet-500/10 text-violet-400"},{icon:Je,label:"Alertas",screen:"alerts",color:"bg-kairos-500/10 text-kairos-400",badge:N},{icon:ke,label:"Auditor√≠a",screen:"tokenaudit",color:"bg-red-500/10 text-red-400"},{icon:$e,label:"Gas",screen:"gas",color:"bg-amber-500/10 text-amber-400"},{icon:Xe,label:t("action.history"),screen:"history",color:"bg-kairos-500/10 text-kairos-400"},{icon:Ts,label:"Contactos",screen:"contacts",color:"bg-sky-500/10 text-sky-400"},{icon:K0,label:t("action.settings"),screen:"settings",color:"bg-white/5 text-dark-300"}].map(T=>e.jsxs("button",{onClick:()=>m(T.screen),className:"flex flex-col items-center gap-2 py-3 rounded-xl bg-white/[0.03] hover:bg-white/[0.06] transition-all active:scale-95 relative",children:[e.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center ${T.color}`,children:e.jsx(T.icon,{size:16})}),T.badge>0&&e.jsx("span",{className:"absolute top-1 right-1 bg-kairos-500 text-dark-950 text-[8px] font-bold w-4 h-4 rounded-full flex items-center justify-center",children:T.badge}),e.jsx("span",{className:"text-[10px] text-dark-300",children:T.label})]},T.label))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-dark-200",children:t("dashboard.tokens")}),e.jsxs("button",{onClick:()=>m("tokens"),className:"flex items-center gap-1 text-xs text-kairos-400",children:[e.jsx(Ve,{size:14}),t("dashboard.manage")]})]}),r&&!x.native?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(T=>e.jsxs("div",{className:"token-row animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-20 bg-white/5 rounded mb-1"}),e.jsx("div",{className:"h-3 w-16 bg-white/5 rounded"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 w-16 bg-white/5 rounded mb-1"}),e.jsx("div",{className:"h-3 w-12 bg-white/5 rounded"})]})]},T))}):e.jsxs("div",{className:"space-y-1",children:[H.map((T,I)=>{const S=T.isNative?l:M(T),G=T.isNative?0:K(T),z=parseFloat(T.balance)*S,U=(T.isNative,T.symbol),Q=T.address?.toLowerCase()===Ze.address.toLowerCase();return e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:I*.05},className:"token-row cursor-pointer",onClick:()=>{h(T),m("tokenDetail")},children:[e.jsx(Ke,{token:T,chainId:s,size:40,showChainBadge:!T.isNative}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-semibold text-sm truncate",children:U}),Q&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-kairos-500/20 text-kairos-400",children:"STABLE"})]}),e.jsxs("span",{className:"text-dark-400 text-xs",children:[S>0?we(S):"‚Äî",G!==0&&e.jsxs("span",{className:G>0?" text-green-400":" text-red-400",children:[" ",Mn(G)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-sm",children:b?"‚Ä¢‚Ä¢‚Ä¢":nt(T.balance)}),e.jsx("div",{className:"text-dark-400 text-xs",children:b?"‚Ä¢‚Ä¢‚Ä¢":z>0?we(z):"‚Äî"})]})]},T.address||"native")}),H.length===0&&!r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:e.jsx(Fs,{size:24,className:"text-dark-400"})}),e.jsx("p",{className:"text-dark-400 text-sm mb-1",children:t("dashboard.no_tokens")}),e.jsx("p",{className:"text-dark-500 text-xs",children:t("dashboard.no_tokens_desc")})]})]})]})]})}let ps=new Set,e0=0;const io=36e5,t0=new Set(["metamask-wallet.org","metamask-io.org","metamaask.io","metam4sk.io","pancakeswap-v3.com","pancakeswap-finance.com","pancakeswaps.finance","uniswap-v4.org","app-uniswap.org","uniswapp.org","uniswap-exchange.org","airdrop-claim.org","free-tokens.xyz","nft-airdrop.xyz","opensea-io.net","opensea-support.io","openseea.io","trustwallet-app.com","trust-wallet.org","trustwallets.io","binance-dex.com","binance-support.io","binance-wallet.org","coinbase-wallet.org","coinbasepro-login.com","phantom-app.io","phantom-wallet.org","connect-wallet.org","walletconnect-bridge.org","wallet-connect.io","claim-airdrop.org","claim-nft.org","free-mint.xyz","mint-free.xyz","revoke-approve.org","token-approve.com","dapp-approve.org","defi-swap.org","defi-yield.org","staking-rewards.org","etherscan-verify.com","bscscan-verify.com","polygonscan-verify.com"]),co=new Set(["0x0000000000000000000000000000000000000000","0x0000000000000000000000000000000000000001","0x000000000000000000000000000000000000dead"]),lo=new Set([]);async function mo(){if(!(Date.now()-e0<io&&ps.size>0))try{const t=await fetch("https://app.chainpatrol.io/api/v2/asset/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"URL",content:"test.com"})}).catch(()=>null),a=await fetch("https://raw.githubusercontent.com/MetaMask/eth-phishing-detect/master/src/config.json",{signal:AbortSignal.timeout(5e3)}).catch(()=>null);if(a?.ok){const x=(await a.json()).blacklist||[];ps=new Set([...x,...t0]),e0=Date.now();try{localStorage.setItem("kairos_phishing_list",JSON.stringify({domains:x.slice(0,5e3),timestamp:Date.now()}))}catch{}}else try{const s=JSON.parse(localStorage.getItem("kairos_phishing_list")||"{}");s.domains?.length>0&&(ps=new Set([...s.domains,...t0]),e0=Date.now())}catch{}}catch{ps=new Set(t0)}}mo();function uo(t){const a=[];let s="safe";if(t.to){const x=t.to.toLowerCase();co.has(x)&&(a.push("Direcci√≥n de destino sospechosa (burn address)"),s="danger"),lo.has(x)&&(a.push("üö® CONTRATO DRAINER CONOCIDO ‚Äî NO APROBAR"),s="danger"),t.from&&x===t.from.toLowerCase()&&(a.push("Est√°s enviando a tu propia direcci√≥n"),s="warning"),t.to?.length===42&&t.to.startsWith("0x000")}if(t.value){const x=parseFloat(t.value);x>100&&(a.push(`‚ö†Ô∏è Monto alto: ${x} ‚Äî verifica antes de enviar`),s==="safe"&&(s="warning")),x>1e4&&(a.push("üî¥ Monto extremadamente alto ‚Äî triple verificaci√≥n recomendada"),s="danger")}if(t.data&&t.data!=="0x"&&(t.data.length>1e4&&(a.push("Datos de transacci√≥n inusualmente grandes"),s==="safe"&&(s="warning")),t.data.startsWith("0xa22cb465")&&(a.push("‚ö†Ô∏è setApprovalForAll ‚Äî da acceso a TODOS tus NFTs a este contrato"),s="danger")),t.data&&t.data.startsWith("0x095ea7b3")){const x="0x"+t.data.slice(74);try{(x==="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"||BigInt(x)>BigInt("0xffffffffffffffffffffffffffff"))&&(a.push("‚ö†Ô∏è Aprobaci√≥n ILIMITADA ‚Äî el contrato podr√° gastar TODOS tus tokens"),s="danger")}catch{}}return t.to&&t.data&&t.data!=="0x"&&(a.push("Interacci√≥n con contrato inteligente ‚Äî verifica la direcci√≥n"),s==="safe"&&(s="warning")),{level:s,reasons:a}}var As={exports:{}},Eo=As.exports,Ea;function po(){return Ea||(Ea=1,(function(t,a){(function(x,r){t.exports=r()})(typeof self<"u"?self:Eo,function(){return(function(s){var x={};function r(l){if(x[l])return x[l].exports;var u=x[l]={i:l,l:!1,exports:{}};return s[l].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=s,r.c=x,r.d=function(l,u,m){r.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:m})},r.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return r.d(u,"a",u),u},r.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},r.p="",r(r.s=3)})([(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=(function(){function u(m,o){this.width=o,this.height=m.length/o,this.data=m}return u.createEmpty=function(m,o){return new u(new Uint8ClampedArray(m*o),m)},u.prototype.get=function(m,o){return m<0||m>=this.width||o<0||o>=this.height?!1:!!this.data[o*this.width+m]},u.prototype.set=function(m,o,i){this.data[o*this.width+m]=i?1:0},u.prototype.setRegion=function(m,o,i,c,n){for(var d=o;d<o+c;d++)for(var p=m;p<m+i;p++)this.set(p,d,!!n)},u})();x.BitMatrix=l}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(2);function u(o,i){return o^i}x.addOrSubtractGF=u;var m=(function(){function o(i,c,n){this.primitive=i,this.size=c,this.generatorBase=n,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var d=1,p=0;p<this.size;p++)this.expTable[p]=d,d=d*2,d>=this.size&&(d=(d^this.primitive)&this.size-1);for(var p=0;p<this.size-1;p++)this.logTable[this.expTable[p]]=p;this.zero=new l.default(this,Uint8ClampedArray.from([0])),this.one=new l.default(this,Uint8ClampedArray.from([1]))}return o.prototype.multiply=function(i,c){return i===0||c===0?0:this.expTable[(this.logTable[i]+this.logTable[c])%(this.size-1)]},o.prototype.inverse=function(i){if(i===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[i]-1]},o.prototype.buildMonomial=function(i,c){if(i<0)throw new Error("Invalid monomial degree less than 0");if(c===0)return this.zero;var n=new Uint8ClampedArray(i+1);return n[0]=c,new l.default(this,n)},o.prototype.log=function(i){if(i===0)throw new Error("Can't take log(0)");return this.logTable[i]},o.prototype.exp=function(i){return this.expTable[i]},o})();x.default=m}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(1),u=(function(){function m(o,i){if(i.length===0)throw new Error("No coefficients.");this.field=o;var c=i.length;if(c>1&&i[0]===0){for(var n=1;n<c&&i[n]===0;)n++;if(n===c)this.coefficients=o.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(c-n);for(var d=0;d<this.coefficients.length;d++)this.coefficients[d]=i[n+d]}}else this.coefficients=i}return m.prototype.degree=function(){return this.coefficients.length-1},m.prototype.isZero=function(){return this.coefficients[0]===0},m.prototype.getCoefficient=function(o){return this.coefficients[this.coefficients.length-1-o]},m.prototype.addOrSubtract=function(o){var i;if(this.isZero())return o;if(o.isZero())return this;var c=this.coefficients,n=o.coefficients;c.length>n.length&&(i=[n,c],c=i[0],n=i[1]);for(var d=new Uint8ClampedArray(n.length),p=n.length-c.length,f=0;f<p;f++)d[f]=n[f];for(var f=p;f<n.length;f++)d[f]=l.addOrSubtractGF(c[f-p],n[f]);return new m(this.field,d)},m.prototype.multiply=function(o){if(o===0)return this.field.zero;if(o===1)return this;for(var i=this.coefficients.length,c=new Uint8ClampedArray(i),n=0;n<i;n++)c[n]=this.field.multiply(this.coefficients[n],o);return new m(this.field,c)},m.prototype.multiplyPoly=function(o){if(this.isZero()||o.isZero())return this.field.zero;for(var i=this.coefficients,c=i.length,n=o.coefficients,d=n.length,p=new Uint8ClampedArray(c+d-1),f=0;f<c;f++)for(var E=i[f],h=0;h<d;h++)p[f+h]=l.addOrSubtractGF(p[f+h],this.field.multiply(E,n[h]));return new m(this.field,p)},m.prototype.multiplyByMonomial=function(o,i){if(o<0)throw new Error("Invalid degree less than 0");if(i===0)return this.field.zero;for(var c=this.coefficients.length,n=new Uint8ClampedArray(c+o),d=0;d<c;d++)n[d]=this.field.multiply(this.coefficients[d],i);return new m(this.field,n)},m.prototype.evaluateAt=function(o){var i=0;if(o===0)return this.getCoefficient(0);var c=this.coefficients.length;if(o===1)return this.coefficients.forEach(function(d){i=l.addOrSubtractGF(i,d)}),i;i=this.coefficients[0];for(var n=1;n<c;n++)i=l.addOrSubtractGF(this.field.multiply(o,i),this.coefficients[n]);return i},m})();x.default=u}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(4),u=r(5),m=r(11),o=r(12);function i(d){var p=o.locate(d);if(!p)return null;for(var f=0,E=p;f<E.length;f++){var h=E[f],g=m.extract(d,h),D=u.decode(g.matrix);if(D)return{binaryData:D.bytes,data:D.text,chunks:D.chunks,version:D.version,location:{topRightCorner:g.mappingFunction(h.dimension,0),topLeftCorner:g.mappingFunction(0,0),bottomRightCorner:g.mappingFunction(h.dimension,h.dimension),bottomLeftCorner:g.mappingFunction(0,h.dimension),topRightFinderPattern:h.topRight,topLeftFinderPattern:h.topLeft,bottomLeftFinderPattern:h.bottomLeft,bottomRightAlignmentPattern:h.alignmentPattern}}}return null}var c={inversionAttempts:"attemptBoth"};function n(d,p,f,E){E===void 0&&(E={});var h=c;Object.keys(h||{}).forEach(function(k){h[k]=E[k]||h[k]});var g=h.inversionAttempts==="attemptBoth"||h.inversionAttempts==="invertFirst",D=h.inversionAttempts==="onlyInvert"||h.inversionAttempts==="invertFirst",b=l.binarize(d,p,f,g),A=b.binarized,B=b.inverted,F=i(D?B:A);return!F&&(h.inversionAttempts==="attemptBoth"||h.inversionAttempts==="invertFirst")&&(F=i(D?A:B)),F}n.default=n,x.default=n}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(0),u=8,m=24;function o(n,d,p){return n<d?d:n>p?p:n}var i=(function(){function n(d,p){this.width=d,this.data=new Uint8ClampedArray(d*p)}return n.prototype.get=function(d,p){return this.data[p*this.width+d]},n.prototype.set=function(d,p,f){this.data[p*this.width+d]=f},n})();function c(n,d,p,f){if(n.length!==d*p*4)throw new Error("Malformed data passed to binarizer.");for(var E=new i(d,p),h=0;h<d;h++)for(var g=0;g<p;g++){var D=n[(g*d+h)*4+0],b=n[(g*d+h)*4+1],A=n[(g*d+h)*4+2];E.set(h,g,.2126*D+.7152*b+.0722*A)}for(var B=Math.ceil(d/u),F=Math.ceil(p/u),k=new i(B,F),w=0;w<F;w++)for(var N=0;N<B;N++){for(var v=0,j=1/0,y=0,g=0;g<u;g++)for(var h=0;h<u;h++){var P=E.get(N*u+h,w*u+g);v+=P,j=Math.min(j,P),y=Math.max(y,P)}var R=v/Math.pow(u,2);if(y-j<=m&&(R=j/2,w>0&&N>0)){var M=(k.get(N,w-1)+2*k.get(N-1,w)+k.get(N-1,w-1))/4;j<M&&(R=M)}k.set(N,w,R)}var K=l.BitMatrix.createEmpty(d,p),_=null;f&&(_=l.BitMatrix.createEmpty(d,p));for(var w=0;w<F;w++)for(var N=0;N<B;N++){for(var H=o(N,2,B-3),T=o(w,2,F-3),v=0,I=-2;I<=2;I++)for(var S=-2;S<=2;S++)v+=k.get(H+I,T+S);for(var G=v/25,I=0;I<u;I++)for(var S=0;S<u;S++){var h=N*u+I,g=w*u+S,z=E.get(h,g);K.set(h,g,z<=G),f&&_.set(h,g,!(z<=G))}}return f?{binarized:K,inverted:_}:{binarized:K}}x.binarize=c}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(0),u=r(6),m=r(9),o=r(10);function i(A,B){for(var F=A^B,k=0;F;)k++,F&=F-1;return k}function c(A,B){return B<<1|A}var n=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],d=[function(A){return(A.y+A.x)%2===0},function(A){return A.y%2===0},function(A){return A.x%3===0},function(A){return(A.y+A.x)%3===0},function(A){return(Math.floor(A.y/2)+Math.floor(A.x/3))%2===0},function(A){return A.x*A.y%2+A.x*A.y%3===0},function(A){return(A.y*A.x%2+A.y*A.x%3)%2===0},function(A){return((A.y+A.x)%2+A.y*A.x%3)%2===0}];function p(A){var B=17+4*A.versionNumber,F=l.BitMatrix.createEmpty(B,B);F.setRegion(0,0,9,9,!0),F.setRegion(B-8,0,8,9,!0),F.setRegion(0,B-8,9,8,!0);for(var k=0,w=A.alignmentPatternCenters;k<w.length;k++)for(var N=w[k],v=0,j=A.alignmentPatternCenters;v<j.length;v++){var y=j[v];N===6&&y===6||N===6&&y===B-7||N===B-7&&y===6||F.setRegion(N-2,y-2,5,5,!0)}return F.setRegion(6,9,1,B-17,!0),F.setRegion(9,6,B-17,1,!0),A.versionNumber>6&&(F.setRegion(B-11,0,3,6,!0),F.setRegion(0,B-11,6,3,!0)),F}function f(A,B,F){for(var k=d[F.dataMask],w=A.height,N=p(B),v=[],j=0,y=0,P=!0,R=w-1;R>0;R-=2){R===6&&R--;for(var M=0;M<w;M++)for(var K=P?w-1-M:M,_=0;_<2;_++){var H=R-_;if(!N.get(H,K)){y++;var T=A.get(H,K);k({y:K,x:H})&&(T=!T),j=c(T,j),y===8&&(v.push(j),y=0,j=0)}}P=!P}return v}function E(A){var B=A.height,F=Math.floor((B-17)/4);if(F<=6)return o.VERSIONS[F-1];for(var k=0,w=5;w>=0;w--)for(var N=B-9;N>=B-11;N--)k=c(A.get(N,w),k);for(var v=0,N=5;N>=0;N--)for(var w=B-9;w>=B-11;w--)v=c(A.get(N,w),v);for(var j=1/0,y,P=0,R=o.VERSIONS;P<R.length;P++){var M=R[P];if(M.infoBits===k||M.infoBits===v)return M;var K=i(k,M.infoBits);K<j&&(y=M,j=K),K=i(v,M.infoBits),K<j&&(y=M,j=K)}if(j<=3)return y}function h(A){for(var B=0,F=0;F<=8;F++)F!==6&&(B=c(A.get(F,8),B));for(var k=7;k>=0;k--)k!==6&&(B=c(A.get(8,k),B));for(var w=A.height,N=0,k=w-1;k>=w-7;k--)N=c(A.get(8,k),N);for(var F=w-8;F<w;F++)N=c(A.get(F,8),N);for(var v=1/0,j=null,y=0,P=n;y<P.length;y++){var R=P[y],M=R.bits,K=R.formatInfo;if(M===B||M===N)return K;var _=i(B,M);_<v&&(j=K,v=_),B!==N&&(_=i(N,M),_<v&&(j=K,v=_))}return v<=3?j:null}function g(A,B,F){var k=B.errorCorrectionLevels[F],w=[],N=0;if(k.ecBlocks.forEach(function(T){for(var I=0;I<T.numBlocks;I++)w.push({numDataCodewords:T.dataCodewordsPerBlock,codewords:[]}),N+=T.dataCodewordsPerBlock+k.ecCodewordsPerBlock}),A.length<N)return null;A=A.slice(0,N);for(var v=k.ecBlocks[0].dataCodewordsPerBlock,j=0;j<v;j++)for(var y=0,P=w;y<P.length;y++){var R=P[y];R.codewords.push(A.shift())}if(k.ecBlocks.length>1)for(var M=k.ecBlocks[0].numBlocks,K=k.ecBlocks[1].numBlocks,j=0;j<K;j++)w[M+j].codewords.push(A.shift());for(;A.length>0;)for(var _=0,H=w;_<H.length;_++){var R=H[_];R.codewords.push(A.shift())}return w}function D(A){var B=E(A);if(!B)return null;var F=h(A);if(!F)return null;var k=f(A,B,F),w=g(k,B,F.errorCorrectionLevel);if(!w)return null;for(var N=w.reduce(function(_,H){return _+H.numDataCodewords},0),v=new Uint8ClampedArray(N),j=0,y=0,P=w;y<P.length;y++){var R=P[y],M=m.decode(R.codewords,R.codewords.length-R.numDataCodewords);if(!M)return null;for(var K=0;K<R.numDataCodewords;K++)v[j++]=M[K]}try{return u.decode(v,B.versionNumber)}catch{return null}}function b(A){if(A==null)return null;var B=D(A);if(B)return B;for(var F=0;F<A.width;F++)for(var k=F+1;k<A.height;k++)A.get(F,k)!==A.get(k,F)&&(A.set(F,k,!A.get(F,k)),A.set(k,F,!A.get(k,F)));return D(A)}x.decode=b}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(7),u=r(8),m;(function(E){E.Numeric="numeric",E.Alphanumeric="alphanumeric",E.Byte="byte",E.Kanji="kanji",E.ECI="eci"})(m=x.Mode||(x.Mode={}));var o;(function(E){E[E.Terminator=0]="Terminator",E[E.Numeric=1]="Numeric",E[E.Alphanumeric=2]="Alphanumeric",E[E.Byte=4]="Byte",E[E.Kanji=8]="Kanji",E[E.ECI=7]="ECI"})(o||(o={}));function i(E,h){for(var g=[],D="",b=[10,12,14][h],A=E.readBits(b);A>=3;){var B=E.readBits(10);if(B>=1e3)throw new Error("Invalid numeric value above 999");var F=Math.floor(B/100),k=Math.floor(B/10)%10,w=B%10;g.push(48+F,48+k,48+w),D+=F.toString()+k.toString()+w.toString(),A-=3}if(A===2){var B=E.readBits(7);if(B>=100)throw new Error("Invalid numeric value above 99");var F=Math.floor(B/10),k=B%10;g.push(48+F,48+k),D+=F.toString()+k.toString()}else if(A===1){var B=E.readBits(4);if(B>=10)throw new Error("Invalid numeric value above 9");g.push(48+B),D+=B.toString()}return{bytes:g,text:D}}var c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(E,h){for(var g=[],D="",b=[9,11,13][h],A=E.readBits(b);A>=2;){var B=E.readBits(11),F=Math.floor(B/45),k=B%45;g.push(c[F].charCodeAt(0),c[k].charCodeAt(0)),D+=c[F]+c[k],A-=2}if(A===1){var F=E.readBits(6);g.push(c[F].charCodeAt(0)),D+=c[F]}return{bytes:g,text:D}}function d(E,h){for(var g=[],D="",b=[8,16,16][h],A=E.readBits(b),B=0;B<A;B++){var F=E.readBits(8);g.push(F)}try{D+=decodeURIComponent(g.map(function(k){return"%"+("0"+k.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:g,text:D}}function p(E,h){for(var g=[],D="",b=[8,10,12][h],A=E.readBits(b),B=0;B<A;B++){var F=E.readBits(13),k=Math.floor(F/192)<<8|F%192;k<7936?k+=33088:k+=49472,g.push(k>>8,k&255),D+=String.fromCharCode(u.shiftJISTable[k])}return{bytes:g,text:D}}function f(E,h){for(var g,D,b,A,B=new l.BitStream(E),F=h<=9?0:h<=26?1:2,k={text:"",bytes:[],chunks:[],version:h};B.available()>=4;){var w=B.readBits(4);if(w===o.Terminator)return k;if(w===o.ECI)B.readBits(1)===0?k.chunks.push({type:m.ECI,assignmentNumber:B.readBits(7)}):B.readBits(1)===0?k.chunks.push({type:m.ECI,assignmentNumber:B.readBits(14)}):B.readBits(1)===0?k.chunks.push({type:m.ECI,assignmentNumber:B.readBits(21)}):k.chunks.push({type:m.ECI,assignmentNumber:-1});else if(w===o.Numeric){var N=i(B,F);k.text+=N.text,(g=k.bytes).push.apply(g,N.bytes),k.chunks.push({type:m.Numeric,text:N.text})}else if(w===o.Alphanumeric){var v=n(B,F);k.text+=v.text,(D=k.bytes).push.apply(D,v.bytes),k.chunks.push({type:m.Alphanumeric,text:v.text})}else if(w===o.Byte){var j=d(B,F);k.text+=j.text,(b=k.bytes).push.apply(b,j.bytes),k.chunks.push({type:m.Byte,bytes:j.bytes,text:j.text})}else if(w===o.Kanji){var y=p(B,F);k.text+=y.text,(A=k.bytes).push.apply(A,y.bytes),k.chunks.push({type:m.Kanji,bytes:y.bytes,text:y.text})}}if(B.available()===0||B.readBits(B.available())===0)return k}x.decode=f}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=(function(){function u(m){this.byteOffset=0,this.bitOffset=0,this.bytes=m}return u.prototype.readBits=function(m){if(m<1||m>32||m>this.available())throw new Error("Cannot read "+m.toString()+" bits");var o=0;if(this.bitOffset>0){var i=8-this.bitOffset,c=m<i?m:i,n=i-c,d=255>>8-c<<n;o=(this.bytes[this.byteOffset]&d)>>n,m-=c,this.bitOffset+=c,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(m>0){for(;m>=8;)o=o<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,m-=8;if(m>0){var n=8-m,d=255>>n<<n;o=o<<m|(this.bytes[this.byteOffset]&d)>>n,this.bitOffset+=m}}return o},u.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},u})();x.BitStream=l}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0}),x.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(1),u=r(2);function m(n,d,p,f){var E;d.degree()<p.degree()&&(E=[p,d],d=E[0],p=E[1]);for(var h=d,g=p,D=n.zero,b=n.one;g.degree()>=f/2;){var A=h,B=D;if(h=g,D=b,h.isZero())return null;g=A;for(var F=n.zero,k=h.getCoefficient(h.degree()),w=n.inverse(k);g.degree()>=h.degree()&&!g.isZero();){var N=g.degree()-h.degree(),v=n.multiply(g.getCoefficient(g.degree()),w);F=F.addOrSubtract(n.buildMonomial(N,v)),g=g.addOrSubtract(h.multiplyByMonomial(N,v))}if(b=F.multiplyPoly(D).addOrSubtract(B),g.degree()>=h.degree())return null}var j=b.getCoefficient(0);if(j===0)return null;var y=n.inverse(j);return[b.multiply(y),g.multiply(y)]}function o(n,d){var p=d.degree();if(p===1)return[d.getCoefficient(1)];for(var f=new Array(p),E=0,h=1;h<n.size&&E<p;h++)d.evaluateAt(h)===0&&(f[E]=n.inverse(h),E++);return E!==p?null:f}function i(n,d,p){for(var f=p.length,E=new Array(f),h=0;h<f;h++){for(var g=n.inverse(p[h]),D=1,b=0;b<f;b++)h!==b&&(D=n.multiply(D,l.addOrSubtractGF(1,n.multiply(p[b],g))));E[h]=n.multiply(d.evaluateAt(g),n.inverse(D)),n.generatorBase!==0&&(E[h]=n.multiply(E[h],g))}return E}function c(n,d){var p=new Uint8ClampedArray(n.length);p.set(n);for(var f=new l.default(285,256,0),E=new u.default(f,p),h=new Uint8ClampedArray(d),g=!1,D=0;D<d;D++){var b=E.evaluateAt(f.exp(D+f.generatorBase));h[h.length-1-D]=b,b!==0&&(g=!0)}if(!g)return p;var A=new u.default(f,h),B=m(f,f.buildMonomial(d,1),A,d);if(B===null)return null;var F=o(f,B[0]);if(F==null)return null;for(var k=i(f,B[1],F),w=0;w<F.length;w++){var N=p.length-1-f.log(F[w]);if(N<0)return null;p[N]=l.addOrSubtractGF(p[N],k[w])}return p}x.decode=c}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0}),x.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=r(0);function u(c,n,d,p){var f=c.x-n.x+d.x-p.x,E=c.y-n.y+d.y-p.y;if(f===0&&E===0)return{a11:n.x-c.x,a12:n.y-c.y,a13:0,a21:d.x-n.x,a22:d.y-n.y,a23:0,a31:c.x,a32:c.y,a33:1};var h=n.x-d.x,g=p.x-d.x,D=n.y-d.y,b=p.y-d.y,A=h*b-g*D,B=(f*b-g*E)/A,F=(h*E-f*D)/A;return{a11:n.x-c.x+B*n.x,a12:n.y-c.y+B*n.y,a13:B,a21:p.x-c.x+F*p.x,a22:p.y-c.y+F*p.y,a23:F,a31:c.x,a32:c.y,a33:1}}function m(c,n,d,p){var f=u(c,n,d,p);return{a11:f.a22*f.a33-f.a23*f.a32,a12:f.a13*f.a32-f.a12*f.a33,a13:f.a12*f.a23-f.a13*f.a22,a21:f.a23*f.a31-f.a21*f.a33,a22:f.a11*f.a33-f.a13*f.a31,a23:f.a13*f.a21-f.a11*f.a23,a31:f.a21*f.a32-f.a22*f.a31,a32:f.a12*f.a31-f.a11*f.a32,a33:f.a11*f.a22-f.a12*f.a21}}function o(c,n){return{a11:c.a11*n.a11+c.a21*n.a12+c.a31*n.a13,a12:c.a12*n.a11+c.a22*n.a12+c.a32*n.a13,a13:c.a13*n.a11+c.a23*n.a12+c.a33*n.a13,a21:c.a11*n.a21+c.a21*n.a22+c.a31*n.a23,a22:c.a12*n.a21+c.a22*n.a22+c.a32*n.a23,a23:c.a13*n.a21+c.a23*n.a22+c.a33*n.a23,a31:c.a11*n.a31+c.a21*n.a32+c.a31*n.a33,a32:c.a12*n.a31+c.a22*n.a32+c.a32*n.a33,a33:c.a13*n.a31+c.a23*n.a32+c.a33*n.a33}}function i(c,n){for(var d=m({x:3.5,y:3.5},{x:n.dimension-3.5,y:3.5},{x:n.dimension-6.5,y:n.dimension-6.5},{x:3.5,y:n.dimension-3.5}),p=u(n.topLeft,n.topRight,n.alignmentPattern,n.bottomLeft),f=o(p,d),E=l.BitMatrix.createEmpty(n.dimension,n.dimension),h=function(F,k){var w=f.a13*F+f.a23*k+f.a33;return{x:(f.a11*F+f.a21*k+f.a31)/w,y:(f.a12*F+f.a22*k+f.a32)/w}},g=0;g<n.dimension;g++)for(var D=0;D<n.dimension;D++){var b=D+.5,A=g+.5,B=h(b,A);E.set(D,g,c.get(Math.floor(B.x),Math.floor(B.y)))}return{matrix:E,mappingFunction:h}}x.extract=i}),(function(s,x,r){Object.defineProperty(x,"__esModule",{value:!0});var l=4,u=.5,m=1.5,o=function(b,A){return Math.sqrt(Math.pow(A.x-b.x,2)+Math.pow(A.y-b.y,2))};function i(b){return b.reduce(function(A,B){return A+B})}function c(b,A,B){var F,k,w,N,v=o(b,A),j=o(A,B),y=o(b,B),P,R,M;return j>=v&&j>=y?(F=[A,b,B],P=F[0],R=F[1],M=F[2]):y>=j&&y>=v?(k=[b,A,B],P=k[0],R=k[1],M=k[2]):(w=[b,B,A],P=w[0],R=w[1],M=w[2]),(M.x-R.x)*(P.y-R.y)-(M.y-R.y)*(P.x-R.x)<0&&(N=[M,P],P=N[0],M=N[1]),{bottomLeft:P,topLeft:R,topRight:M}}function n(b,A,B,F){var k=(i(p(b,B,F,5))/7+i(p(b,A,F,5))/7+i(p(B,b,F,5))/7+i(p(A,b,F,5))/7)/4;if(k<1)throw new Error("Invalid module size");var w=Math.round(o(b,A)/k),N=Math.round(o(b,B)/k),v=Math.floor((w+N)/2)+7;switch(v%4){case 0:v++;break;case 2:v--;break}return{dimension:v,moduleSize:k}}function d(b,A,B,F){var k=[{x:Math.floor(b.x),y:Math.floor(b.y)}],w=Math.abs(A.y-b.y)>Math.abs(A.x-b.x),N,v,j,y;w?(N=Math.floor(b.y),v=Math.floor(b.x),j=Math.floor(A.y),y=Math.floor(A.x)):(N=Math.floor(b.x),v=Math.floor(b.y),j=Math.floor(A.x),y=Math.floor(A.y));for(var P=Math.abs(j-N),R=Math.abs(y-v),M=Math.floor(-P/2),K=N<j?1:-1,_=v<y?1:-1,H=!0,T=N,I=v;T!==j+K;T+=K){var S=w?I:T,G=w?T:I;if(B.get(S,G)!==H&&(H=!H,k.push({x:S,y:G}),k.length===F+1))break;if(M+=R,M>0){if(I===y)break;I+=_,M-=P}}for(var z=[],U=0;U<F;U++)k[U]&&k[U+1]?z.push(o(k[U],k[U+1])):z.push(0);return z}function p(b,A,B,F){var k,w=A.y-b.y,N=A.x-b.x,v=d(b,A,B,Math.ceil(F/2)),j=d(b,{x:b.x-N,y:b.y-w},B,Math.ceil(F/2)),y=v.shift()+j.shift()-1;return(k=j.concat(y)).concat.apply(k,v)}function f(b,A){var B=i(b)/i(A),F=0;return A.forEach(function(k,w){F+=Math.pow(b[w]-k*B,2)}),{averageSize:B,error:F}}function E(b,A,B){try{var F=p(b,{x:-1,y:b.y},B,A.length),k=p(b,{x:b.x,y:-1},B,A.length),w={x:Math.max(0,b.x-b.y)-1,y:Math.max(0,b.y-b.x)-1},N=p(b,w,B,A.length),v={x:Math.min(B.width,b.x+b.y)+1,y:Math.min(B.height,b.y+b.x)+1},j=p(b,v,B,A.length),y=f(F,A),P=f(k,A),R=f(N,A),M=f(j,A),K=Math.sqrt(y.error*y.error+P.error*P.error+R.error*R.error+M.error*M.error),_=(y.averageSize+P.averageSize+R.averageSize+M.averageSize)/4,H=(Math.pow(y.averageSize-_,2)+Math.pow(P.averageSize-_,2)+Math.pow(R.averageSize-_,2)+Math.pow(M.averageSize-_,2))/_;return K+H}catch{return 1/0}}function h(b,A){for(var B=Math.round(A.x);b.get(B,Math.round(A.y));)B--;for(var F=Math.round(A.x);b.get(F,Math.round(A.y));)F++;for(var k=(B+F)/2,w=Math.round(A.y);b.get(Math.round(k),w);)w--;for(var N=Math.round(A.y);b.get(Math.round(k),N);)N++;var v=(w+N)/2;return{x:k,y:v}}function g(b){for(var A=[],B=[],F=[],k=[],w=function(S){for(var G=0,z=!1,U=[0,0,0,0,0],Q=function(ee){var X=b.get(ee,S);if(X===z)G++;else{U=[U[1],U[2],U[3],U[4],G],G=1,z=X;var J=i(U)/7,$=Math.abs(U[0]-J)<J&&Math.abs(U[1]-J)<J&&Math.abs(U[2]-3*J)<3*J&&Math.abs(U[3]-J)<J&&Math.abs(U[4]-J)<J&&!X,Y=i(U.slice(-3))/3,te=Math.abs(U[2]-Y)<Y&&Math.abs(U[3]-Y)<Y&&Math.abs(U[4]-Y)<Y&&X;if($){var ie=ee-U[3]-U[4],me=ie-U[2],W={startX:me,endX:ie,y:S},ne=B.filter(function(de){return me>=de.bottom.startX&&me<=de.bottom.endX||ie>=de.bottom.startX&&me<=de.bottom.endX||me<=de.bottom.startX&&ie>=de.bottom.endX&&U[2]/(de.bottom.endX-de.bottom.startX)<m&&U[2]/(de.bottom.endX-de.bottom.startX)>u});ne.length>0?ne[0].bottom=W:B.push({top:W,bottom:W})}if(te){var Fe=ee-U[4],be=Fe-U[3],W={startX:be,y:S,endX:Fe},ne=k.filter(function(Ae){return be>=Ae.bottom.startX&&be<=Ae.bottom.endX||Fe>=Ae.bottom.startX&&be<=Ae.bottom.endX||be<=Ae.bottom.startX&&Fe>=Ae.bottom.endX&&U[2]/(Ae.bottom.endX-Ae.bottom.startX)<m&&U[2]/(Ae.bottom.endX-Ae.bottom.startX)>u});ne.length>0?ne[0].bottom=W:k.push({top:W,bottom:W})}}},Z=-1;Z<=b.width;Z++)Q(Z);A.push.apply(A,B.filter(function(ee){return ee.bottom.y!==S&&ee.bottom.y-ee.top.y>=2})),B=B.filter(function(ee){return ee.bottom.y===S}),F.push.apply(F,k.filter(function(ee){return ee.bottom.y!==S})),k=k.filter(function(ee){return ee.bottom.y===S})},N=0;N<=b.height;N++)w(N);A.push.apply(A,B.filter(function(S){return S.bottom.y-S.top.y>=2})),F.push.apply(F,k);var v=A.filter(function(S){return S.bottom.y-S.top.y>=2}).map(function(S){var G=(S.top.startX+S.top.endX+S.bottom.startX+S.bottom.endX)/4,z=(S.top.y+S.bottom.y+1)/2;if(b.get(Math.round(G),Math.round(z))){var U=[S.top.endX-S.top.startX,S.bottom.endX-S.bottom.startX,S.bottom.y-S.top.y+1],Q=i(U)/U.length,Z=E({x:Math.round(G),y:Math.round(z)},[1,1,3,1,1],b);return{score:Z,x:G,y:z,size:Q}}}).filter(function(S){return!!S}).sort(function(S,G){return S.score-G.score}).map(function(S,G,z){if(G>l)return null;var U=z.filter(function(Z,ee){return G!==ee}).map(function(Z){return{x:Z.x,y:Z.y,score:Z.score+Math.pow(Z.size-S.size,2)/S.size,size:Z.size}}).sort(function(Z,ee){return Z.score-ee.score});if(U.length<2)return null;var Q=S.score+U[0].score+U[1].score;return{points:[S].concat(U.slice(0,2)),score:Q}}).filter(function(S){return!!S}).sort(function(S,G){return S.score-G.score});if(v.length===0)return null;var j=c(v[0].points[0],v[0].points[1],v[0].points[2]),y=j.topRight,P=j.topLeft,R=j.bottomLeft,M=D(b,F,y,P,R),K=[];M&&K.push({alignmentPattern:{x:M.alignmentPattern.x,y:M.alignmentPattern.y},bottomLeft:{x:R.x,y:R.y},dimension:M.dimension,topLeft:{x:P.x,y:P.y},topRight:{x:y.x,y:y.y}});var _=h(b,y),H=h(b,P),T=h(b,R),I=D(b,F,_,H,T);return I&&K.push({alignmentPattern:{x:I.alignmentPattern.x,y:I.alignmentPattern.y},bottomLeft:{x:T.x,y:T.y},topLeft:{x:H.x,y:H.y},topRight:{x:_.x,y:_.y},dimension:I.dimension}),K.length===0?null:K}x.locate=g;function D(b,A,B,F,k){var w,N,v;try{w=n(F,B,k,b),N=w.dimension,v=w.moduleSize}catch{return null}var j={x:B.x-F.x+k.x,y:B.y-F.y+k.y},y=(o(F,k)+o(F,B))/2/v,P=1-3/y,R={x:F.x+P*(j.x-F.x),y:F.y+P*(j.y-F.y)},M=A.map(function(_){var H=(_.top.startX+_.top.endX+_.bottom.startX+_.bottom.endX)/4,T=(_.top.y+_.bottom.y+1)/2;if(b.get(Math.floor(H),Math.floor(T))){var I=[_.top.endX-_.top.startX,_.bottom.endX-_.bottom.startX,_.bottom.y-_.top.y+1];i(I)/I.length;var S=E({x:Math.floor(H),y:Math.floor(T)},[1,1,1],b),G=S+o({x:H,y:T},R);return{x:H,y:T,score:G}}}).filter(function(_){return!!_}).sort(function(_,H){return _.score-H.score}),K=y>=15&&M.length?M[0]:R;return{alignmentPattern:K,dimension:N}}})]).default})})(As)),As.exports}var ho=po();const fo=ja(ho);function ox({isOpen:t,onClose:a,onScan:s,title:x="Escanear QR"}){const r=C.useRef(null),l=C.useRef(null),u=C.useRef(null),m=C.useRef(null),[o,i]=C.useState(null),[c,n]=C.useState("environment"),[d,p]=C.useState(!1),[f,E]=C.useState(!1),h=C.useCallback(()=>{m.current&&(cancelAnimationFrame(m.current),m.current=null),u.current&&(u.current.getTracks().forEach(A=>A.stop()),u.current=null)},[]),g=C.useCallback(async()=>{h(),i(null);try{const A=await navigator.mediaDevices.getUserMedia({video:{facingMode:c,width:{ideal:640},height:{ideal:480}}});u.current=A,r.current&&(r.current.srcObject=A,r.current.play());const F=A.getVideoTracks()[0].getCapabilities?.();p(!!F?.torch);const k=()=>{if(!r.current||!l.current)return;const w=r.current,N=l.current;if(w.readyState===w.HAVE_ENOUGH_DATA){N.width=w.videoWidth,N.height=w.videoHeight;const v=N.getContext("2d");v.drawImage(w,0,0,N.width,N.height);const j=v.getImageData(0,0,N.width,N.height),y=fo(j.data,j.width,j.height,{inversionAttempts:"dontInvert"});if(y?.data){s(y.data),h(),a();return}}m.current=requestAnimationFrame(k)};r.current.onloadedmetadata=()=>{m.current=requestAnimationFrame(k)}}catch(A){A.name==="NotAllowedError"?i("Permiso de c√°mara denegado. Habil√≠talo en ajustes del navegador."):A.name==="NotFoundError"?i("No se encontr√≥ c√°mara en este dispositivo."):i("Error al acceder la c√°mara: "+A.message)}},[c,s,a,h]);C.useEffect(()=>(t&&g(),()=>h()),[t,g,h]);const D=()=>{n(A=>A==="environment"?"user":"environment")},b=async()=>{if(!u.current)return;const A=u.current.getVideoTracks()[0];try{await A.applyConstraints({advanced:[{torch:!f}]}),E(!f)}catch{}};return t?e.jsx(ue,{children:e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/80 z-10 absolute top-0 left-0 right-0",children:[e.jsx("button",{onClick:()=>{h(),a()},className:"p-2 rounded-xl bg-white/10",children:e.jsx(Te,{size:20,className:"text-white"})}),e.jsx("h2",{className:"text-white font-semibold text-sm",children:x}),e.jsxs("div",{className:"flex gap-2",children:[d&&e.jsx("button",{onClick:b,className:`p-2 rounded-xl ${f?"bg-kairos-500/30":"bg-white/10"}`,children:e.jsx(Le,{size:18,className:f?"text-kairos-400":"text-white"})}),e.jsx("button",{onClick:D,className:"p-2 rounded-xl bg-white/10",children:e.jsx(sr,{size:18,className:"text-white"})})]})]}),e.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[e.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("canvas",{ref:l,className:"hidden"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsxs("div",{className:"relative w-64 h-64",children:[e.jsx("div",{className:"absolute inset-0 bg-transparent",style:{boxShadow:"0 0 0 9999px rgba(0,0,0,0.5)"}}),e.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-kairos-400 rounded-tl-lg"}),e.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-kairos-400 rounded-tr-lg"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-kairos-400 rounded-bl-lg"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-kairos-400 rounded-br-lg"}),e.jsx(O.div,{animate:{y:[0,248,0]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},className:"absolute left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-kairos-400 to-transparent"})]})]}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ar,{size:48,className:"text-dark-500 mx-auto mb-4"}),e.jsx("p",{className:"text-dark-300 text-sm mb-4",children:o}),e.jsx("button",{onClick:g,className:"kairos-button px-6 py-2 text-sm",children:"Reintentar"})]})})]}),e.jsx("div",{className:"px-4 py-4 bg-black/80 text-center",children:e.jsx("p",{className:"text-dark-400 text-xs",children:"Apunta la c√°mara al c√≥digo QR"})})]})}):null}function Qe(){try{const t=localStorage.getItem(Ee.CONTACTS);return t?JSON.parse(t):[]}catch{return[]}}function Ls(t){localStorage.setItem(Ee.CONTACTS,JSON.stringify(t))}function pa({name:t,address:a,notes:s="",chainId:x=null}){const r=Qe();if(r.some(m=>m.address.toLowerCase()===a.toLowerCase()))throw new Error("Esta direcci√≥n ya existe en tus contactos");const u={id:Date.now().toString(36)+Math.random().toString(36).slice(2,6),name:t.trim(),address:a.trim(),notes:s.trim(),chainId:x,createdAt:Date.now(),lastUsed:null};return r.unshift(u),Ls(r),u}function Co(t,a){const s=Qe(),x=s.findIndex(r=>r.id===t);if(x===-1)throw new Error("Contacto no encontrado");if(a.address&&s.some(l=>l.id!==t&&l.address.toLowerCase()===a.address.toLowerCase()))throw new Error("Esta direcci√≥n ya existe");return s[x]={...s[x],...a},Ls(s),s[x]}function Bo(t){const a=Qe().filter(s=>s.id!==t);Ls(a)}function bo(t){const a=Qe(),s=a.findIndex(x=>x.id===t);s!==-1&&(a[s].lastUsed=Date.now(),Ls(a))}function Ao(t){const a=Qe();if(!t)return a;const s=t.toLowerCase();return a.filter(x=>x.name.toLowerCase().includes(s)||x.address.toLowerCase().includes(s))}function go(t=5){return Qe().filter(a=>a.lastUsed).sort((a,s)=>s.lastUsed-a.lastUsed).slice(0,t)}function Fo(){const{activeAddress:t,activeChainId:a,balances:s,nativePrice:x,tokenPrices:r,navigate:l,goBack:u,showToast:m,getActiveAccount:o,addPendingTx:i,resolvePendingTx:c}=se(),[n,d]=C.useState(""),[p,f]=C.useState(""),[E,h]=C.useState(null),[g,D]=C.useState(!1),[b,A]=C.useState("standard"),[B,F]=C.useState(null),[k,w]=C.useState(!1),[N,v]=C.useState(null),[j,y]=C.useState("form"),[P,R]=C.useState(""),[M,K]=C.useState(""),[_,H]=C.useState(!1),[T,I]=C.useState(""),[S,G]=C.useState(""),[z,U]=C.useState(""),[Q,Z]=C.useState(null),ee=q[a],X=o(),J=X?.isWatchOnly,[$,Y]=C.useState(!1),[te,ie]=C.useState(!1),[me,W]=C.useState(null),[ne,Fe]=C.useState(!1),[be,de]=C.useState([]),ye=C.useMemo(()=>Qe(),[]);C.useMemo(()=>go(3),[]),C.useEffect(()=>{const V=fe=>d(fe.detail);return window.addEventListener("kairos:prefill-address",V),()=>window.removeEventListener("kairos:prefill-address",V)},[]),C.useEffect(()=>{s.native&&!E&&h({...s.native,isNative:!0})},[s.native]);const Ae=C.useMemo(()=>{const V=[];return s.native&&V.push({...s.native,isNative:!0}),s.tokens&&V.push(...s.tokens.filter(fe=>fe.hasBalance)),V},[s]),dt=C.useMemo(()=>E?E.isNative?x:r[E.address?.toLowerCase()]?.usd||0:0,[E,x,r]),vt=parseFloat(p||0)*dt,Ye=me||n,zt=et(Ye)&&parseFloat(p)>0;C.useEffect(()=>{if(!n){W(null);return}n.endsWith(".eth")||n.endsWith(".bnb")?(Fe(!0),Sn(n).then(V=>{W(V||null)}).finally(()=>Fe(!1))):W(null)},[n]),C.useEffect(()=>{const V=me||n;if(!V||!et(V)){de([]);return}const fe=uo({from:t,to:V,value:p});de(fe.reasons)},[n,me,p,t]),C.useEffect(()=>{if(!zt||!E)return;const fe=setTimeout(async()=>{try{if(E.isNative){const Ue=await An(a,t,Ye,p);F(Ue)}else{const Ue=await gn(a,t,E.address,Ye,p,E.decimals);F(Ue)}}catch{}},500);return()=>clearTimeout(fe)},[n,p,E,a]);const _t=async()=>{if(X){K("");try{await ve(P)}catch{K("Contrase√±a incorrecta");return}w(!0);try{let V;const fe=_&&S;E.isNative&&fe?V=await yn(a,X.privateKey,Ye,p,{maxFeePerGas:parseFloat(S),maxPriorityFeePerGas:z?parseFloat(z):void 0,gasLimit:T?parseInt(T):void 0,gasPrice:parseFloat(S)}):E.isNative?V=await Ya(a,X.privateKey,Ye,p,b):V=await qa(a,X.privateKey,E.address,Ye,p,E.decimals,b),i(V),v(V),y("success"),m("Transacci√≥n enviada","success"),Ja(a,V.hash).then(Ue=>{c(V.hash,Ue.status)})}catch(V){m("Error: "+(V.reason||V.message),"error")}w(!1)}},qt=()=>{if(E)if(E.isNative&&B){const V=Math.max(0,parseFloat(E.balance)-parseFloat(B.gasCostFormatted)*1.5);f(V.toFixed(8))}else f(E.balance)};return j==="success"?e.jsx("div",{className:"screen-container items-center justify-center px-6",children:e.jsxs(O.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(Se,{size:40,className:"text-green-400"})}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"¬°Transacci√≥n Enviada!"}),e.jsxs("p",{className:"text-dark-400 text-sm mb-4",children:[p," ",E?.symbol," enviados a"]}),e.jsx("p",{className:"text-dark-300 text-xs font-mono mb-6",children:ge(n,10)}),N&&e.jsxs("a",{href:`${ee.blockExplorerUrl}/tx/${N.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-kairos-400 text-sm underline mb-6 block",children:["Ver en ",ee.shortName,"Scan ‚Üí"]}),e.jsx("button",{onClick:()=>l("dashboard"),className:"kairos-button w-full py-4",children:"Volver al Dashboard"})]})}):j==="confirm"?e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>y("form"),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:"Confirmar Env√≠o"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"glass-card-strong p-5 mb-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-dark-400 text-xs mb-1",children:"Enviando"}),e.jsxs("p",{className:"text-3xl font-bold",children:[p," ",e.jsx("span",{className:"text-kairos-400",children:E?.symbol})]}),dt>0&&e.jsx("p",{className:"text-dark-400 text-sm",children:we(vt)})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"De"}),e.jsx("span",{className:"font-mono text-xs",children:ge(t)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"Para"}),e.jsx("span",{className:"font-mono text-xs",children:ge(n)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"Red"}),e.jsxs("span",{children:[ee.icon," ",ee.name]})]}),B&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"Gas estimado"}),e.jsxs("span",{children:[parseFloat(B.gasCostFormatted).toFixed(6)," ",ee.nativeCurrency.symbol]})]})]})]}),e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-center gap-2",children:[e.jsx(ce,{size:16,className:"text-kairos-400 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-dark-300",children:"Verifica la direcci√≥n del destinatario. Las transacciones en blockchain son irreversibles."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{R(""),K(""),y("password")},disabled:k,className:"kairos-button w-full py-4 flex items-center justify-center gap-2",children:[e.jsx(Me,{size:18}),"Confirmar y Enviar"]}),e.jsx("button",{onClick:()=>y("form"),className:"glass-button w-full py-3 text-center",children:"Cancelar"})]})]}):j==="password"?e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>y("confirm"),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:"Verificar Identidad"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-kairos-500/10 flex items-center justify-center mb-4",children:e.jsx(Me,{size:28,className:"text-kairos-400"})}),e.jsxs("p",{className:"text-dark-300 text-sm text-center mb-6",children:["Ingresa tu contrase√±a para autorizar el env√≠o de ",p," ",E?.symbol]}),e.jsx("input",{type:"password",value:P,onChange:V=>{R(V.target.value),K("")},placeholder:"Contrase√±a",className:"glass-input w-full text-center mb-2",autoFocus:!0,onKeyDown:V=>V.key==="Enter"&&P&&_t()}),M&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:M})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:_t,disabled:!P||k,className:"kairos-button w-full py-4 flex items-center justify-center gap-2 disabled:opacity-40",children:[k?e.jsx(O.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-dark-900 border-t-transparent rounded-full"}):e.jsx(Me,{size:18}),k?"Enviando...":"Enviar Ahora"]}),e.jsx("button",{onClick:()=>y("confirm"),className:"glass-button w-full py-3 text-center",children:"Volver"})]})]}):e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:u,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:"Enviar"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"text-xs text-dark-400",children:"Direcci√≥n del destinatario"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>ie(!0),className:"flex items-center gap-1 text-xs text-kairos-400",children:[e.jsx(Sa,{size:12}),"Escanear"]}),ye.length>0&&e.jsxs("button",{onClick:()=>Y(!$),className:"flex items-center gap-1 text-xs text-kairos-400",children:[e.jsx(Ts,{size:12}),"Contactos"]})]})]}),e.jsx("input",{type:"text",value:n,onChange:V=>d(V.target.value),placeholder:"0x... o nombre.eth",className:`glass-input font-mono text-sm ${n&&!et(n)&&!me&&!n.endsWith(".eth")?"border-red-500/50":""}`}),ne&&e.jsx("p",{className:"text-kairos-400 text-xs mt-1",children:"Resolviendo ENS..."}),me&&e.jsxs("p",{className:"text-green-400 text-xs mt-1",children:["‚úì ",ge(me,8)]}),n&&!et(n)&&!me&&!ne&&!n.endsWith(".eth")&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:"Direcci√≥n inv√°lida"}),be.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:be.map((V,fe)=>e.jsxs("p",{className:"text-orange-400 text-[11px] flex items-center gap-1",children:[e.jsx(ce,{size:10})," ",V]},fe))}),$&&ye.length>0&&e.jsx("div",{className:"mt-2 bg-white/[0.04] rounded-xl border border-white/5 overflow-hidden max-h-40 overflow-y-auto",children:ye.map(V=>e.jsxs("button",{onClick:()=>{d(V.address),Y(!1),bo(V.id)},className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-white/[0.04] transition-colors text-left",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-kairos-500/10 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-[10px] font-bold text-kairos-400",children:V.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-xs text-white font-medium truncate block",children:V.name}),e.jsx("span",{className:"text-[10px] text-dark-500 font-mono",children:ge(V.address,6)})]})]},V.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1 block",children:"Token"}),e.jsxs("button",{onClick:()=>D(!g),className:"glass-input flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:E&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{token:E,chainId:a,size:24}),e.jsx("span",{children:E.symbol}),e.jsxs("span",{className:"text-dark-400 text-xs",children:["Bal: ",nt(E.balance)]})]})}),e.jsx(Bt,{size:16,className:"text-dark-400"})]}),g&&e.jsx("div",{className:"glass-card mt-1 p-2 max-h-40 overflow-y-auto",children:Ae.map(V=>e.jsxs("button",{onClick:()=>{h(V),D(!1)},className:"w-full flex items-center gap-2 p-2 rounded-lg hover:bg-white/5 text-sm",children:[e.jsx(Ke,{token:V,chainId:a,size:24}),e.jsx("span",{className:"font-medium",children:V.symbol}),e.jsx("span",{className:"text-dark-400 text-xs ml-auto",children:nt(V.balance)})]},V.address||"native"))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"text-xs text-dark-400",children:"Cantidad"}),e.jsx("button",{onClick:qt,className:"text-xs text-kairos-400",children:"MAX"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:p,onChange:V=>f(V.target.value),placeholder:"0.00",className:"glass-input text-2xl font-bold pr-20",step:"any"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-dark-400 font-medium",children:E?.symbol||""})]}),vt>0&&e.jsxs("p",{className:"text-dark-400 text-xs mt-1",children:["‚âà ",we(vt)]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"text-xs text-dark-400 flex items-center gap-1",children:[e.jsx(ht,{size:12})," Velocidad de transacci√≥n"]}),e.jsxs("button",{onClick:()=>{H(!_),Q||Dn(a).then(V=>Z(V)).catch(()=>{})},className:"flex items-center gap-1 text-[10px] text-kairos-400",children:[e.jsx(xr,{size:10}),_?"Modo Simple":"Avanzado"]})]}),_?e.jsxs("div",{className:"space-y-2 bg-white/[0.03] rounded-xl p-3 border border-white/5",children:[Q&&e.jsxs("p",{className:"text-[10px] text-dark-400 mb-2",children:["Gas actual: ",e.jsxs("span",{className:"text-kairos-400",children:[Q.standard.toFixed(2)," Gwei"]})," ¬∑ ","R√°pido: ",Q.fast.toFixed(2)," ¬∑ Instant: ",Q.instant.toFixed(2)]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-dark-400 mb-0.5 block",children:"Gas Price / Max Fee (Gwei)"}),e.jsx("input",{type:"number",value:S,onChange:V=>G(V.target.value),placeholder:Q?Q.standard.toFixed(2):"Auto",className:"glass-input text-sm h-9",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-dark-400 mb-0.5 block",children:"Priority Fee (Gwei) ‚Äî EIP-1559"}),e.jsx("input",{type:"number",value:z,onChange:V=>U(V.target.value),placeholder:"1.5",className:"glass-input text-sm h-9",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-dark-400 mb-0.5 block",children:"Gas Limit"}),e.jsx("input",{type:"number",value:T,onChange:V=>I(V.target.value),placeholder:B?.gasLimit||"21000",className:"glass-input text-sm h-9"})]}),e.jsx("p",{className:"text-[9px] text-dark-500",children:'‚ö†Ô∏è Gas incorrecto puede hacer que la TX falle o cueste de m√°s. Usa "Modo Simple" si no est√°s seguro.'})]}):e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Hr).map(([V,fe])=>e.jsxs("button",{onClick:()=>A(V),className:`p-2 rounded-xl text-center transition-all ${b===V?"bg-kairos-500/15 border border-kairos-500/30":"bg-white/5 border border-transparent"}`,children:[e.jsx("span",{className:"text-lg",children:fe.icon}),e.jsx("p",{className:"text-[10px] mt-0.5 text-dark-300",children:fe.label})]},V))})]})]}),J&&e.jsxs("div",{className:"flex items-center gap-2 p-3 mb-2 rounded-xl bg-orange-500/10 border border-orange-500/20",children:[e.jsx(ce,{size:16,className:"text-orange-400 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-orange-400",children:"Cuenta Watch-Only ‚Äî solo lectura, no puedes enviar."})]}),e.jsxs("button",{onClick:()=>y("confirm"),disabled:!zt||!E||parseFloat(p||0)<=0||J,className:"kairos-button w-full py-4 mt-4 disabled:opacity-40 flex items-center justify-center gap-2",children:[e.jsx(Me,{size:18}),J?"Solo Lectura":"Revisar Transacci√≥n"]}),e.jsx(ox,{isOpen:te,onClose:()=>ie(!1),onScan:V=>{const fe=V.match(/^(?:ethereum:)?(0x[a-fA-F0-9]{40})/);fe?(d(fe[1]),m("Direcci√≥n escaneada","success")):d(V)},title:"Escanear direcci√≥n"})]})}var ko=Object.defineProperty,Ns=Object.getOwnPropertySymbols,ix=Object.prototype.hasOwnProperty,cx=Object.prototype.propertyIsEnumerable,ha=(t,a,s)=>a in t?ko(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,E0=(t,a)=>{for(var s in a||(a={}))ix.call(a,s)&&ha(t,s,a[s]);if(Ns)for(var s of Ns(a))cx.call(a,s)&&ha(t,s,a[s]);return t},p0=(t,a)=>{var s={};for(var x in t)ix.call(t,x)&&a.indexOf(x)<0&&(s[x]=t[x]);if(t!=null&&Ns)for(var x of Ns(t))a.indexOf(x)<0&&cx.call(t,x)&&(s[x]=t[x]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ft;(t=>{const a=class ae{constructor(o,i,c,n){if(this.version=o,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],o<ae.MIN_VERSION||o>ae.MAX_VERSION)throw new RangeError("Version value out of range");if(n<-1||n>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let d=[];for(let f=0;f<this.size;f++)d.push(!1);for(let f=0;f<this.size;f++)this.modules.push(d.slice()),this.isFunction.push(d.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(c);if(this.drawCodewords(p),n==-1){let f=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const h=this.getPenaltyScore();h<f&&(n=E,f=h),this.applyMask(E)}}r(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}static encodeText(o,i){const c=t.QrSegment.makeSegments(o);return ae.encodeSegments(c,i)}static encodeBinary(o,i){const c=t.QrSegment.makeBytes(o);return ae.encodeSegments([c],i)}static encodeSegments(o,i,c=1,n=40,d=-1,p=!0){if(!(ae.MIN_VERSION<=c&&c<=n&&n<=ae.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");let f,E;for(f=c;;f++){const b=ae.getNumDataCodewords(f,i)*8,A=u.getTotalBits(o,f);if(A<=b){E=A;break}if(f>=n)throw new RangeError("Data too long")}for(const b of[ae.Ecc.MEDIUM,ae.Ecc.QUARTILE,ae.Ecc.HIGH])p&&E<=ae.getNumDataCodewords(f,b)*8&&(i=b);let h=[];for(const b of o){s(b.mode.modeBits,4,h),s(b.numChars,b.mode.numCharCountBits(f),h);for(const A of b.getData())h.push(A)}r(h.length==E);const g=ae.getNumDataCodewords(f,i)*8;r(h.length<=g),s(0,Math.min(4,g-h.length),h),s(0,(8-h.length%8)%8,h),r(h.length%8==0);for(let b=236;h.length<g;b^=253)s(b,8,h);let D=[];for(;D.length*8<h.length;)D.push(0);return h.forEach((b,A)=>D[A>>>3]|=b<<7-(A&7)),new ae(f,i,D,d)}getModule(o,i){return 0<=o&&o<this.size&&0<=i&&i<this.size&&this.modules[i][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let c=0;c<this.size;c++)this.setFunctionModule(6,c,c%2==0),this.setFunctionModule(c,6,c%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),i=o.length;for(let c=0;c<i;c++)for(let n=0;n<i;n++)c==0&&n==0||c==0&&n==i-1||c==i-1&&n==0||this.drawAlignmentPattern(o[c],o[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const i=this.errorCorrectionLevel.formatBits<<3|o;let c=i;for(let d=0;d<10;d++)c=c<<1^(c>>>9)*1335;const n=(i<<10|c)^21522;r(n>>>15==0);for(let d=0;d<=5;d++)this.setFunctionModule(8,d,x(n,d));this.setFunctionModule(8,7,x(n,6)),this.setFunctionModule(8,8,x(n,7)),this.setFunctionModule(7,8,x(n,8));for(let d=9;d<15;d++)this.setFunctionModule(14-d,8,x(n,d));for(let d=0;d<8;d++)this.setFunctionModule(this.size-1-d,8,x(n,d));for(let d=8;d<15;d++)this.setFunctionModule(8,this.size-15+d,x(n,d));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let c=0;c<12;c++)o=o<<1^(o>>>11)*7973;const i=this.version<<12|o;r(i>>>18==0);for(let c=0;c<18;c++){const n=x(i,c),d=this.size-11+c%3,p=Math.floor(c/3);this.setFunctionModule(d,p,n),this.setFunctionModule(p,d,n)}}drawFinderPattern(o,i){for(let c=-4;c<=4;c++)for(let n=-4;n<=4;n++){const d=Math.max(Math.abs(n),Math.abs(c)),p=o+n,f=i+c;0<=p&&p<this.size&&0<=f&&f<this.size&&this.setFunctionModule(p,f,d!=2&&d!=4)}}drawAlignmentPattern(o,i){for(let c=-2;c<=2;c++)for(let n=-2;n<=2;n++)this.setFunctionModule(o+n,i+c,Math.max(Math.abs(n),Math.abs(c))!=1)}setFunctionModule(o,i,c){this.modules[i][o]=c,this.isFunction[i][o]=!0}addEccAndInterleave(o){const i=this.version,c=this.errorCorrectionLevel;if(o.length!=ae.getNumDataCodewords(i,c))throw new RangeError("Invalid argument");const n=ae.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][i],d=ae.ECC_CODEWORDS_PER_BLOCK[c.ordinal][i],p=Math.floor(ae.getNumRawDataModules(i)/8),f=n-p%n,E=Math.floor(p/n);let h=[];const g=ae.reedSolomonComputeDivisor(d);for(let b=0,A=0;b<n;b++){let B=o.slice(A,A+E-d+(b<f?0:1));A+=B.length;const F=ae.reedSolomonComputeRemainder(B,g);b<f&&B.push(0),h.push(B.concat(F))}let D=[];for(let b=0;b<h[0].length;b++)h.forEach((A,B)=>{(b!=E-d||B>=f)&&D.push(A[b])});return r(D.length==p),D}drawCodewords(o){if(o.length!=Math.floor(ae.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(let n=0;n<this.size;n++)for(let d=0;d<2;d++){const p=c-d,E=(c+1&2)==0?this.size-1-n:n;!this.isFunction[E][p]&&i<o.length*8&&(this.modules[E][p]=x(o[i>>>3],7-(i&7)),i++)}}r(i==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let c=0;c<this.size;c++){let n;switch(o){case 0:n=(c+i)%2==0;break;case 1:n=i%2==0;break;case 2:n=c%3==0;break;case 3:n=(c+i)%3==0;break;case 4:n=(Math.floor(c/3)+Math.floor(i/2))%2==0;break;case 5:n=c*i%2+c*i%3==0;break;case 6:n=(c*i%2+c*i%3)%2==0;break;case 7:n=((c+i)%2+c*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][c]&&n&&(this.modules[i][c]=!this.modules[i][c])}}getPenaltyScore(){let o=0;for(let d=0;d<this.size;d++){let p=!1,f=0,E=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[d][h]==p?(f++,f==5?o+=ae.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,E),p||(o+=this.finderPenaltyCountPatterns(E)*ae.PENALTY_N3),p=this.modules[d][h],f=1);o+=this.finderPenaltyTerminateAndCount(p,f,E)*ae.PENALTY_N3}for(let d=0;d<this.size;d++){let p=!1,f=0,E=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[h][d]==p?(f++,f==5?o+=ae.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,E),p||(o+=this.finderPenaltyCountPatterns(E)*ae.PENALTY_N3),p=this.modules[h][d],f=1);o+=this.finderPenaltyTerminateAndCount(p,f,E)*ae.PENALTY_N3}for(let d=0;d<this.size-1;d++)for(let p=0;p<this.size-1;p++){const f=this.modules[d][p];f==this.modules[d][p+1]&&f==this.modules[d+1][p]&&f==this.modules[d+1][p+1]&&(o+=ae.PENALTY_N2)}let i=0;for(const d of this.modules)i=d.reduce((p,f)=>p+(f?1:0),i);const c=this.size*this.size,n=Math.ceil(Math.abs(i*20-c*10)/c)-1;return r(0<=n&&n<=9),o+=n*ae.PENALTY_N4,r(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let c=[6];for(let n=this.size-7;c.length<o;n-=i)c.splice(1,0,n);return c}}static getNumRawDataModules(o){if(o<ae.MIN_VERSION||o>ae.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*o+128)*o+64;if(o>=2){const c=Math.floor(o/7)+2;i-=(25*c-10)*c-55,o>=7&&(i-=36)}return r(208<=i&&i<=29648),i}static getNumDataCodewords(o,i){return Math.floor(ae.getNumRawDataModules(o)/8)-ae.ECC_CODEWORDS_PER_BLOCK[i.ordinal][o]*ae.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let i=[];for(let n=0;n<o-1;n++)i.push(0);i.push(1);let c=1;for(let n=0;n<o;n++){for(let d=0;d<i.length;d++)i[d]=ae.reedSolomonMultiply(i[d],c),d+1<i.length&&(i[d]^=i[d+1]);c=ae.reedSolomonMultiply(c,2)}return i}static reedSolomonComputeRemainder(o,i){let c=i.map(n=>0);for(const n of o){const d=n^c.shift();c.push(0),i.forEach((p,f)=>c[f]^=ae.reedSolomonMultiply(p,d))}return c}static reedSolomonMultiply(o,i){if(o>>>8||i>>>8)throw new RangeError("Byte out of range");let c=0;for(let n=7;n>=0;n--)c=c<<1^(c>>>7)*285,c^=(i>>>n&1)*o;return r(c>>>8==0),c}finderPenaltyCountPatterns(o){const i=o[1];r(i<=this.size*3);const c=i>0&&o[2]==i&&o[3]==i*3&&o[4]==i&&o[5]==i;return(c&&o[0]>=i*4&&o[6]>=i?1:0)+(c&&o[6]>=i*4&&o[0]>=i?1:0)}finderPenaltyTerminateAndCount(o,i,c){return o&&(this.finderPenaltyAddHistory(i,c),i=0),i+=this.size,this.finderPenaltyAddHistory(i,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(o,i){i[0]==0&&(o+=this.size),i.pop(),i.unshift(o)}};a.MIN_VERSION=1,a.MAX_VERSION=40,a.PENALTY_N1=3,a.PENALTY_N2=3,a.PENALTY_N3=40,a.PENALTY_N4=10,a.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],a.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=a;function s(m,o,i){if(o<0||o>31||m>>>o)throw new RangeError("Value out of range");for(let c=o-1;c>=0;c--)i.push(m>>>c&1)}function x(m,o){return(m>>>o&1)!=0}function r(m){if(!m)throw new Error("Assertion error")}const l=class Be{constructor(o,i,c){if(this.mode=o,this.numChars=i,this.bitData=c,i<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(o){let i=[];for(const c of o)s(c,8,i);return new Be(Be.Mode.BYTE,o.length,i)}static makeNumeric(o){if(!Be.isNumeric(o))throw new RangeError("String contains non-numeric characters");let i=[];for(let c=0;c<o.length;){const n=Math.min(o.length-c,3);s(parseInt(o.substring(c,c+n),10),n*3+1,i),c+=n}return new Be(Be.Mode.NUMERIC,o.length,i)}static makeAlphanumeric(o){if(!Be.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],c;for(c=0;c+2<=o.length;c+=2){let n=Be.ALPHANUMERIC_CHARSET.indexOf(o.charAt(c))*45;n+=Be.ALPHANUMERIC_CHARSET.indexOf(o.charAt(c+1)),s(n,11,i)}return c<o.length&&s(Be.ALPHANUMERIC_CHARSET.indexOf(o.charAt(c)),6,i),new Be(Be.Mode.ALPHANUMERIC,o.length,i)}static makeSegments(o){return o==""?[]:Be.isNumeric(o)?[Be.makeNumeric(o)]:Be.isAlphanumeric(o)?[Be.makeAlphanumeric(o)]:[Be.makeBytes(Be.toUtf8ByteArray(o))]}static makeEci(o){let i=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)s(o,8,i);else if(o<16384)s(2,2,i),s(o,14,i);else if(o<1e6)s(6,3,i),s(o,21,i);else throw new RangeError("ECI assignment value out of range");return new Be(Be.Mode.ECI,0,i)}static isNumeric(o){return Be.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return Be.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,i){let c=0;for(const n of o){const d=n.mode.numCharCountBits(i);if(n.numChars>=1<<d)return 1/0;c+=4+d+n.bitData.length}return c}static toUtf8ByteArray(o){o=encodeURI(o);let i=[];for(let c=0;c<o.length;c++)o.charAt(c)!="%"?i.push(o.charCodeAt(c)):(i.push(parseInt(o.substring(c+1,c+3),16)),c+=2);return i}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let u=l;t.QrSegment=l})(Ft||(Ft={}));(t=>{(a=>{const s=class{constructor(r,l){this.ordinal=r,this.formatBits=l}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),a.Ecc=s})(t.QrCode||(t.QrCode={}))})(Ft||(Ft={}));(t=>{(a=>{const s=class{constructor(r,l){this.modeBits=r,this.numBitsCharCount=l}numCharCountBits(r){return this.numBitsCharCount[Math.floor((r+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),a.Mode=s})(t.QrSegment||(t.QrSegment={}))})(Ft||(Ft={}));var It=Ft;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Do={L:It.QrCode.Ecc.LOW,M:It.QrCode.Ecc.MEDIUM,Q:It.QrCode.Ecc.QUARTILE,H:It.QrCode.Ecc.HIGH},lx=128,dx="L",mx="#FFFFFF",ux="#000000",Ex=!1,px=1,wo=4,vo=0,yo=.1;function hx(t,a=0){const s=[];return t.forEach(function(x,r){let l=null;x.forEach(function(u,m){if(!u&&l!==null){s.push(`M${l+a} ${r+a}h${m-l}v1H${l+a}z`),l=null;return}if(m===x.length-1){if(!u)return;l===null?s.push(`M${m+a},${r+a} h1v1H${m+a}z`):s.push(`M${l+a},${r+a} h${m+1-l}v1H${l+a}z`);return}u&&l===null&&(l=m)})}),s.join("")}function fx(t,a){return t.slice().map((s,x)=>x<a.y||x>=a.y+a.h?s:s.map((r,l)=>l<a.x||l>=a.x+a.w?r:!1))}function jo(t,a,s,x){if(x==null)return null;const r=t.length+s*2,l=Math.floor(a*yo),u=r/a,m=(x.width||l)*u,o=(x.height||l)*u,i=x.x==null?t.length/2-m/2:x.x*u,c=x.y==null?t.length/2-o/2:x.y*u,n=x.opacity==null?1:x.opacity;let d=null;if(x.excavate){let f=Math.floor(i),E=Math.floor(c),h=Math.ceil(m+i-f),g=Math.ceil(o+c-E);d={x:f,y:E,w:h,h:g}}const p=x.crossOrigin;return{x:i,y:c,h:o,w:m,excavation:d,opacity:n,crossOrigin:p}}function No(t,a){return a!=null?Math.max(Math.floor(a),0):t?wo:vo}function Cx({value:t,level:a,minVersion:s,includeMargin:x,marginSize:r,imageSettings:l,size:u,boostLevel:m}){let o=xe.useMemo(()=>{const f=(Array.isArray(t)?t:[t]).reduce((E,h)=>(E.push(...It.QrSegment.makeSegments(h)),E),[]);return It.QrCode.encodeSegments(f,Do[a],s,void 0,void 0,m)},[t,a,s,m]);const{cells:i,margin:c,numCells:n,calculatedImageSettings:d}=xe.useMemo(()=>{let p=o.getModules();const f=No(x,r),E=p.length+f*2,h=jo(p,u,f,l);return{cells:p,margin:f,numCells:E,calculatedImageSettings:h}},[o,u,l,x,r]);return{qrcode:o,margin:c,cells:i,numCells:n,calculatedImageSettings:d}}var So=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Po=xe.forwardRef(function(a,s){const x=a,{value:r,size:l=lx,level:u=dx,bgColor:m=mx,fgColor:o=ux,includeMargin:i=Ex,minVersion:c=px,boostLevel:n,marginSize:d,imageSettings:p}=x,E=p0(x,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:h}=E,g=p0(E,["style"]),D=p?.src,b=xe.useRef(null),A=xe.useRef(null),B=xe.useCallback(R=>{b.current=R,typeof s=="function"?s(R):s&&(s.current=R)},[s]),[F,k]=xe.useState(!1),{margin:w,cells:N,numCells:v,calculatedImageSettings:j}=Cx({value:r,level:u,minVersion:c,boostLevel:n,includeMargin:i,marginSize:d,imageSettings:p,size:l});xe.useEffect(()=>{if(b.current!=null){const R=b.current,M=R.getContext("2d");if(!M)return;let K=N;const _=A.current,H=j!=null&&_!==null&&_.complete&&_.naturalHeight!==0&&_.naturalWidth!==0;H&&j.excavation!=null&&(K=fx(N,j.excavation));const T=window.devicePixelRatio||1;R.height=R.width=l*T;const I=l/v*T;M.scale(I,I),M.fillStyle=m,M.fillRect(0,0,v,v),M.fillStyle=o,So?M.fill(new Path2D(hx(K,w))):N.forEach(function(S,G){S.forEach(function(z,U){z&&M.fillRect(U+w,G+w,1,1)})}),j&&(M.globalAlpha=j.opacity),H&&M.drawImage(_,j.x+w,j.y+w,j.w,j.h)}}),xe.useEffect(()=>{k(!1)},[D]);const y=E0({height:l,width:l},h);let P=null;return D!=null&&(P=xe.createElement("img",{src:D,key:D,style:{display:"none"},onLoad:()=>{k(!0)},ref:A,crossOrigin:j?.crossOrigin})),xe.createElement(xe.Fragment,null,xe.createElement("canvas",E0({style:y,height:l,width:l,ref:B,role:"img"},g)),P)});Po.displayName="QRCodeCanvas";var Bx=xe.forwardRef(function(a,s){const x=a,{value:r,size:l=lx,level:u=dx,bgColor:m=mx,fgColor:o=ux,includeMargin:i=Ex,minVersion:c=px,boostLevel:n,title:d,marginSize:p,imageSettings:f}=x,E=p0(x,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:h,cells:g,numCells:D,calculatedImageSettings:b}=Cx({value:r,level:u,minVersion:c,boostLevel:n,includeMargin:i,marginSize:p,imageSettings:f,size:l});let A=g,B=null;f!=null&&b!=null&&(b.excavation!=null&&(A=fx(g,b.excavation)),B=xe.createElement("image",{href:f.src,height:b.h,width:b.w,x:b.x+h,y:b.y+h,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const F=hx(A,h);return xe.createElement("svg",E0({height:l,width:l,viewBox:`0 0 ${D} ${D}`,ref:s,role:"img"},E),!!d&&xe.createElement("title",null,d),xe.createElement("path",{fill:m,d:`M0,0 h${D}v${D}H0z`,shapeRendering:"crispEdges"}),xe.createElement("path",{fill:o,d:F,shapeRendering:"crispEdges"}),B)});Bx.displayName="QRCodeSVG";function To(){const{activeAddress:t,activeChainId:a,goBack:s,showToast:x}=se(),[r,l]=C.useState(!1),u=q[a],m=async()=>{await navigator.clipboard.writeText(t),l(!0),x("Direcci√≥n copiada al portapapeles","success"),setTimeout(()=>l(!1),3e3)},o=async()=>{if(navigator.share)try{await navigator.share({title:"Mi direcci√≥n Kairos Wallet",text:`Mi direcci√≥n en ${u.name}: ${t}`})}catch{}else m()};return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:"Recibir"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-lg",children:u.icon}),e.jsx("span",{className:"text-sm text-dark-300",children:u.name})]}),e.jsx(O.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"glass-card-strong p-6 mb-6",children:e.jsx("div",{className:"bg-white rounded-2xl p-4",children:e.jsx(Bx,{value:t,size:220,level:"H",includeMargin:!1,imageSettings:{src:"/icons/logo-128.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-dark-400 text-xs mb-2",children:"Tu direcci√≥n"}),e.jsx("p",{className:"font-mono text-sm text-dark-200 break-all max-w-xs px-4",children:t})]}),e.jsxs("div",{className:"flex gap-3 w-full max-w-xs",children:[e.jsxs("button",{onClick:m,className:"kairos-button flex-1 flex items-center justify-center gap-2 py-3",children:[r?e.jsx(Se,{size:16}):e.jsx(We,{size:16}),r?"Copiado":"Copiar"]}),e.jsxs("button",{onClick:o,className:"glass-button flex-1 flex items-center justify-center gap-2 py-3 text-white",children:[e.jsx(rr,{size:16}),"Compartir"]})]}),e.jsxs("p",{className:"text-dark-500 text-[10px] text-center mt-6 max-w-xs",children:["Solo env√≠a tokens de la red ",e.jsx("strong",{className:"text-dark-300",children:u.name})," a esta direcci√≥n. Enviar tokens de otra red puede resultar en p√©rdida de fondos."]})]})]})}function Io(t,a,s){const x=q[a],r=["Hash","Date","Type","From","To","Value","Token","Gas Used","Gas Price (Gwei)","Fee","Status","Block","Chain"],l=t.map(n=>{const d=new Date(n.timestamp||n.timeStamp*1e3),p=n.to?.toLowerCase()===s.toLowerCase(),f=n.gasUsed||n.gas||"",E=n.gasPrice?(parseInt(n.gasPrice)/1e9).toFixed(2):"",h=n.gasUsed&&n.gasPrice?(parseInt(n.gasUsed)*parseInt(n.gasPrice)/1e18).toFixed(8):"";return[n.hash,d.toISOString(),p?"Recibido":"Enviado",n.from,n.to,n.value||"0",n.tokenSymbol||x?.nativeCurrency?.symbol||"",f,E,h,n.status==="0"||n.isError==="1"?"Fallida":"Exitosa",n.blockNumber||"",x?.name||a].map(g=>`"${String(g).replace(/"/g,'""')}"`).join(",")}),u=[r.join(","),...l].join(`
`),m="\uFEFF",o=new Blob([m+u],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(o),c=document.createElement("a");return c.href=i,c.download=`kairos-txs-${x?.shortName||a}-${new Date().toISOString().slice(0,10)}.csv`,c.click(),URL.revokeObjectURL(i),l.length}function Ro(t){const a={version:"1.0",exportedAt:new Date().toISOString(),app:"Kairos Wallet",contacts:t.map(u=>({name:u.name,address:u.address,notes:u.notes||"",chainId:u.chainId||null}))},s=JSON.stringify(a,null,2),x=new Blob([s],{type:"application/json;charset=utf-8;"}),r=URL.createObjectURL(x),l=document.createElement("a");return l.href=r,l.download=`kairos-contacts-${new Date().toISOString().slice(0,10)}.json`,l.click(),URL.revokeObjectURL(r),t.length}function Lo(t){try{const a=JSON.parse(t);if(a.contacts&&Array.isArray(a.contacts))return a.contacts.filter(s=>s.name&&s.address);if(Array.isArray(a))return a.filter(s=>s.name&&s.address);throw new Error("Formato no reconocido")}catch(a){throw new Error("Error al parsear el archivo: "+a.message)}}function Oo(){const{activeAddress:t,activeChainId:a,goBack:s,navigate:x,showToast:r}=se(),l=se(w=>w.setTxDetailData),u=se(w=>w.recentTransactions),m=se(w=>w.pendingTransactions),[o,i]=C.useState([]),[c,n]=C.useState([]),[d,p]=C.useState(!0),[f,E]=C.useState("all"),[h,g]=C.useState(""),[D,b]=C.useState(!1);C.useEffect(()=>{A()},[t,a]);const A=async()=>{p(!0);try{const[w,N]=await Promise.all([Fn(a,t),kn(a,t)]);i(w),n(N)}catch(w){console.error("Failed to load history:",w)}p(!1)},B=C.useMemo(()=>{const w=new Set,N=[];for(const v of m)(v.chainId===a||!v.chainId)&&(w.has(v.hash)||(w.add(v.hash),N.push({...v,isPending:!0,timestamp:v.timestamp||Date.now()})));for(const v of o)w.has(v.hash)||(w.add(v.hash),N.push(v));for(const v of u)(v.chainId===a||!v.chainId)&&!w.has(v.hash)&&(w.add(v.hash),N.push(v));return N.sort((v,j)=>(j.timestamp||0)-(v.timestamp||0)),N},[o,u,m,a]),F=C.useMemo(()=>{const w=f==="tokens"?c:B;if(!h.trim())return w;const N=h.toLowerCase();return w.filter(v=>v.hash?.toLowerCase().includes(N)||v.from?.toLowerCase().includes(N)||v.to?.toLowerCase().includes(N)||v.tokenSymbol?.toLowerCase().includes(N)||v.value?.toString().includes(N))},[B,c,f,h]),k=w=>{if(!w)return"";const N=new Date(w),j=new Date-N;return j<6e4?"Ahora mismo":j<36e5?`Hace ${Math.floor(j/6e4)} min`:j<864e5?`Hace ${Math.floor(j/36e5)}h`:j<6048e5?`Hace ${Math.floor(j/864e5)}d`:N.toLocaleDateString("es-ES",{day:"numeric",month:"short"})};return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold flex-1",children:"Historial"}),e.jsx("button",{onClick:()=>{b(!D),g("")},className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",children:D?e.jsx(Te,{size:16,className:"text-dark-300"}):e.jsx(bt,{size:16,className:"text-dark-300"})}),B.length>0&&e.jsx("button",{onClick:()=>{const w=[...B,...c],N=Io(w,a,t);r(`${N} transacciones exportadas`,"success")},className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",title:"Exportar CSV",children:e.jsx(Mt,{size:16,className:"text-dark-300"})}),e.jsx("button",{onClick:A,className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(Ge,{size:16,className:`text-dark-300 ${d?"animate-spin":""}`})})]}),D&&e.jsx(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-400 pointer-events-none"}),e.jsx("input",{type:"text",value:h,onChange:w=>g(w.target.value),placeholder:"Buscar por hash, direcci√≥n o token...",className:"glass-input pl-10 pr-4 text-sm",autoFocus:!0,style:{color:"#ffffff",WebkitTextFillColor:"#ffffff"}})]})}),e.jsx("div",{className:"flex gap-1 p-1 rounded-xl bg-white/5 mb-4",children:[{key:"all",label:`Todas (${B.length})`},{key:"tokens",label:`Tokens (${c.length})`}].map(w=>e.jsx("button",{onClick:()=>E(w.key),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${f===w.key?"bg-kairos-500/15 text-kairos-400":"text-dark-400"}`,children:w.label},w.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto -mx-1",children:d?e.jsx("div",{className:"space-y-3 px-1",children:[1,2,3,4,5].map(w=>e.jsxs("div",{className:"flex items-center gap-3 p-3 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-24 bg-white/5 rounded mb-1"}),e.jsx("div",{className:"h-3 w-32 bg-white/5 rounded"})]}),e.jsx("div",{className:"h-4 w-16 bg-white/5 rounded"})]},w))}):F.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:e.jsx(A0,{size:24,className:"text-dark-400"})}),e.jsx("p",{className:"text-dark-400 text-sm",children:h?"Sin resultados para esta b√∫squeda":"No hay transacciones todav√≠a"}),e.jsx("p",{className:"text-dark-500 text-xs mt-1",children:h?"Intenta con otro t√©rmino":"Las transacciones aparecer√°n aqu√≠"})]}):e.jsx("div",{className:"space-y-1 px-1",children:F.map((w,N)=>e.jsxs(O.button,{onClick:()=>{l(w),x("txdetail")},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:N*.03},className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all w-full text-left",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${w.isPending?"bg-yellow-500/10":w.isIncoming?"bg-green-500/10":"bg-blue-500/10"}`,children:w.isPending?e.jsx(Ge,{size:18,className:"text-yellow-400 animate-spin"}):w.isIncoming?e.jsx(Pa,{size:18,className:"text-green-400"}):e.jsx(Ta,{size:18,className:"text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-sm",children:w.isPending?"Pendiente":w.isIncoming?"Recibido":"Enviado"}),w.tokenSymbol&&e.jsx("span",{className:"text-dark-400 text-xs",children:w.tokenSymbol}),w.isPending&&e.jsx("span",{className:"text-yellow-400 text-[10px] bg-yellow-500/10 px-1.5 py-0.5 rounded animate-pulse",children:"Pendiente"}),w.status==="failed"&&e.jsx("span",{className:"text-red-400 text-[10px] bg-red-500/10 px-1.5 py-0.5 rounded",children:"Fallida"})]}),e.jsxs("span",{className:"text-dark-400 text-xs",children:[w.isIncoming?"De: ":"Para: ",ge(w.isIncoming?w.from:w.to,4)," ¬∑ ",k(w.timestamp)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`font-semibold text-sm ${w.isIncoming?"text-green-400":"text-white"}`,children:[w.isIncoming?"+":"-",parseFloat(w.value).toFixed(4)]}),e.jsx(Oe,{size:10,className:"text-dark-500 ml-1 inline"})]})]},w.hash+N))})})]})}const Os="https://kairos-api-u6k5.onrender.com";async function Mo(t,a,s){if(!t||!a||!s)throw new Error("Faltan datos para crear el backup");const x=await Uo(a,s),r=await fetch(`${Os}/api/wallet/backup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:t,encryptedVault:x,timestamp:Date.now(),version:1})}),l=await r.json();if(!r.ok)throw new Error(l.error||"Error al crear backup");return l}async function zo(t,a){if(!t||!a)throw new Error("Faltan datos para restaurar");const s=await fetch(`${Os}/api/wallet/backup?address=${t}`),x=await s.json();if(!s.ok)throw new Error(x.error||"Backup no encontrado");if(!x.encryptedVault)throw new Error("No hay backup disponible");return{vault:await Ko(x.encryptedVault,a),timestamp:x.timestamp,version:x.version}}async function _o(t){try{const s=await(await fetch(`${Os}/api/wallet/backup/check?address=${t}`)).json();return s.exists?{exists:!0,timestamp:s.timestamp}:{exists:!1}}catch{return{exists:!1}}}async function $o(t,a){const s=await fetch(`${Os}/api/wallet/backup`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:t,backupPassword:a})}),x=await s.json();if(!s.ok)throw new Error(x.error||"Error al eliminar backup");return x}async function bx(t,a){const s=new TextEncoder,x=await crypto.subtle.importKey("raw",s.encode(t),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:3e5,hash:"SHA-256"},x,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function Uo(t,a){const s=new TextEncoder,x=crypto.getRandomValues(new Uint8Array(16)),r=crypto.getRandomValues(new Uint8Array(12)),l=await bx(a,x),u=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},l,s.encode(typeof t=="string"?t:JSON.stringify(t))),m=new Uint8Array(x.length+r.length+u.byteLength);return m.set(x,0),m.set(r,x.length),m.set(new Uint8Array(u),x.length+r.length),btoa(String.fromCharCode(...m))}async function Ko(t,a){const s=Uint8Array.from(atob(t),m=>m.charCodeAt(0)),x=s.slice(0,16),r=s.slice(16,28),l=s.slice(28),u=await bx(a,x);try{const m=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},u,l);return new TextDecoder().decode(m)}catch{throw new Error("Contrase√±a de backup incorrecta")}}function Go(){const{t}=ct(),{activeAddress:a,activeChainId:s,goBack:x,navigate:r,lock:l,showToast:u,getAllAccounts:m,setActiveAddress:o,vault:i}=se(),[c,n]=C.useState(!1),[d,p]=C.useState(null),[f,E]=C.useState(!1),[h,g]=C.useState(""),[D,b]=C.useState(null),[A,B]=C.useState(""),[F,k]=C.useState(!1),[w,N]=C.useState(S0()),[v,j]=C.useState(rn()),[y,P]=C.useState(js()),[R,M]=C.useState(!1),[K,_]=C.useState(""),[H,T]=C.useState(null),[I,S]=C.useState(""),[G,z]=C.useState(!1),[U,Q]=C.useState(!1),[Z,ee]=C.useState(""),[X,J]=C.useState(""),[$,Y]=C.useState(!1),[te,ie]=C.useState(!1),[me,W]=C.useState(1),[ne,Fe]=C.useState(!1),[be,de]=C.useState(""),[ye,Ae]=C.useState(""),[dt,vt]=C.useState(""),[Ye,zt]=C.useState(""),[_t,qt]=C.useState(!1),[V,fe]=C.useState(null),[Ue,M0]=C.useState(""),[zx,$t]=C.useState(!1),[Jt,Zt]=C.useState(""),[yt,es]=C.useState(""),[ts,ss]=C.useState(""),[z0,mt]=C.useState(""),[_0,as]=C.useState(!1),[_x,xs]=C.useState(!1),[$s,Us]=C.useState("backup"),[qe,Ks]=C.useState(""),[rs,$x]=C.useState(""),[ns,jt]=C.useState(!1),[os,Re]=C.useState(""),[is,ut]=C.useState(""),[Gs,cs]=C.useState(null),ls=m(),ds=q[s],Ux=async L=>{await navigator.clipboard.writeText(L),p(L),u(t("common.copied"),"success"),setTimeout(()=>p(null),2e3)},Kx=async()=>{Q(!0),ee(""),J("")},$0=async()=>{if(Z){Y(!0),J("");try{const L=await za(Z,`Wallet ${ls.length+1}`);u(`Nueva wallet creada: ${ge(L.address)}`,"success"),Q(!1)}catch(L){J(L.message||"Contrase√±a incorrecta")}Y(!1)}},Gx=()=>{ie(!0),W(1)},Wx=()=>{me===1?W(2):(y0(),r("welcome"),u("Wallet eliminada","info"),ie(!1))},Vx=()=>{window.open(`${ds.blockExplorerUrl}/address/${a}`,"_blank")},Hx=async()=>{B("");try{const L=await ve(h),Ne=[...L.accounts||[],...L.importedAccounts||[]].find(Ut=>Ut.address.toLowerCase()===a?.toLowerCase());if(!Ne)throw new Error("Cuenta no encontrada");b(Ne.privateKey)}catch(L){B(L.message||"Contrase√±a incorrecta")}},Ws=()=>{E(!1),g(""),b(null),B(""),k(!1)},U0=async()=>{if(!(!dt||!be)){qt(!0),zt("");try{if(!et(be))throw new Error("Direcci√≥n inv√°lida");const L=await _a(dt,be,ye||void 0);u(`Watch-only a√±adida: ${ge(L.address)}`,"success"),Fe(!1),de(""),Ae(""),vt("")}catch(L){zt(L.message)}qt(!1)}},Xx=async()=>{D&&(await navigator.clipboard.writeText(D),u("Clave privada copiada","success"))},Qx=[{title:t("settings.accounts"),items:[{icon:nr,label:t("settings.accounts"),desc:`${ls.length} wallet${ls.length!==1?"s":""}`,action:()=>n(!c),color:"text-blue-400"},{icon:Oe,label:t("settings.explorer"),desc:ds.shortName+"Scan",action:Vx,color:"text-green-400"}]},{title:t("settings.security"),items:[{icon:ke,label:t("settings.security"),desc:t("settings.encryption"),color:"text-purple-400"},{icon:Na,label:t("settings.export_key"),desc:t("settings.requires_password"),action:()=>E(!0),color:"text-orange-400"},{icon:A0,label:t("settings.backup_seed","Frase Semilla"),desc:t("settings.backup_seed_desc","Ver tu frase de recuperaci√≥n"),action:()=>M(!0),color:"text-yellow-400"},{icon:Hs,label:"Backup en la Nube",desc:"Respalda tu wallet encriptada",action:async()=>{xs(!0),Us("backup"),Ks(""),Re(""),ut("");try{const L=await _o(a);cs(L)}catch{cs({exists:!1})}},color:"text-sky-400"},{icon:ot,label:"Cambiar Contrase√±a",desc:"Actualiza tu contrase√±a del vault",action:()=>$t(!0),color:"text-pink-400"},{icon:ke,label:t("settings.autolock"),desc:ta().find(L=>L.value===w)?.label||"5 minutos",action:()=>{const L=ta(),pe=L.findIndex(Ut=>Ut.value===w),Ne=L[(pe+1)%L.length];en(Ne.value),N(Ne.value),u(`Auto-lock: ${Ne.label}`,"info")},color:"text-cyan-400"},...Va()?[{icon:ke,label:t("settings.biometric"),desc:v?t("settings.biometric_on","Activada"):t("settings.biometric_off","Desactivada"),action:async()=>{if(v)xn(),j(!1),u("Biometr√≠a desactivada","info");else try{await an(),j(!0),u("Biometr√≠a activada","success")}catch(L){u("Error: "+L.message,"error")}},color:"text-green-400"}]:[]]},{title:t("settings.general","General"),items:[{icon:Xe,label:"TX Pendientes",desc:"Acelerar o cancelar transacciones",action:()=>r("pending"),color:"text-yellow-400"},{icon:G0,label:"Watch-Only",desc:"Importar direcci√≥n de solo lectura",action:()=>Fe(!0),color:"text-teal-400"},{icon:o0,label:t("settings.walletconnect"),desc:t("settings.connect_dapps"),action:()=>r("walletconnect"),color:"text-blue-400"},{icon:ze,label:t("settings.network"),desc:`${ds.icon} ${ds.name}`,action:()=>r("networks"),color:"text-cyan-400"},{icon:or,label:t("settings.approvals","Aprobaciones"),desc:t("settings.approvals_desc","Gestionar permisos de tokens"),action:()=>r("approvals"),color:"text-orange-400"},{icon:Ds,label:"Staking Hub",desc:"Lido, PancakeSwap, GMX ‚Äî gana yield",action:()=>r("staking"),color:"text-green-400"},{icon:ht,label:"Gas Tracker",desc:"Precios de gas en todas las redes",action:()=>r("gas"),color:"text-amber-400"},{icon:bt,label:"Auditor√≠a de Token",desc:"Analiza tokens por scams/honeypots",action:()=>r("tokenaudit"),color:"text-red-400"},{icon:ht,label:"RPC Health",desc:"Estado de nodos RPC + latencia",action:()=>r("rpchealth"),color:"text-cyan-400"},{icon:ze,label:t("settings.language"),desc:Ys().find(L=>L.code===y)?.flag+" "+Ys().find(L=>L.code===y)?.name,action:()=>{const L=Ys(),pe=L.findIndex(Ut=>Ut.code===y),Ne=L[(pe+1)%L.length];Xa(Ne.code),P(Ne.code),u(`${Ne.flag} ${Ne.name}`,"info")},color:"text-pink-400"},{icon:g0,label:t("settings.about"),desc:`v${ea} ‚Äî Kairos 777 Inc.`,color:"text-kairos-400"}]},{title:t("settings.danger","Peligro"),items:[{icon:ir,label:t("settings.lock"),desc:t("settings.lock_desc"),action:l,color:"text-yellow-400"},{icon:st,label:t("settings.delete"),desc:t("settings.delete_desc"),action:Gx,color:"text-red-400",danger:!0}]}];return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:x,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:t("settings.title")})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 -mx-1 px-1",children:[Qx.map(L=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-dark-400 uppercase tracking-wider mb-2 px-1",children:L.title}),e.jsx("div",{className:"glass-card overflow-hidden",children:L.items.map((pe,Ne)=>e.jsxs("button",{onClick:pe.action,className:`w-full flex items-center gap-3 p-4 hover:bg-white/5 transition-all text-left ${Ne>0?"border-t border-white/5":""}`,children:[e.jsx("div",{className:`w-9 h-9 rounded-xl ${pe.danger?"bg-red-500/10":"bg-white/5"} flex items-center justify-center`,children:e.jsx(pe.icon,{size:16,className:pe.color})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:`text-sm font-medium ${pe.danger?"text-red-400":""}`,children:pe.label}),pe.desc&&e.jsx("p",{className:"text-dark-400 text-xs",children:pe.desc})]}),e.jsx(cr,{size:16,className:"text-dark-500"})]},pe.label))})]},L.title)),c&&e.jsxs(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"glass-card-strong p-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Mis Wallets"}),e.jsxs("div",{className:"space-y-2",children:[ls.map(L=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-all cursor-pointer ${L.address===a?"bg-kairos-500/10 border border-kairos-500/20":"hover:bg-white/5"}`,onClick:()=>o(L.address),children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-kairos-400 to-kairos-600 flex items-center justify-center text-xs font-bold text-dark-950",children:L.name?.charAt(0)||"W"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:L.name}),L.isWatchOnly&&e.jsx("span",{className:"text-[8px] bg-teal-500/15 text-teal-400 px-1.5 py-0.5 rounded font-bold",children:"üëÅ WATCH"}),L.isImported&&e.jsx("span",{className:"text-[8px] bg-purple-500/15 text-purple-400 px-1.5 py-0.5 rounded font-bold",children:"IMPORTADA"})]}),e.jsx("p",{className:"text-dark-400 text-xs font-mono",children:ge(L.address,6)})]}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ux(L.address)},className:"text-dark-400",children:d===L.address?e.jsx(Se,{size:14,className:"text-green-400"}):e.jsx(We,{size:14})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),fe(L.address),M0(L.name||"")},className:"text-dark-400 hover:text-dark-200 p-1",children:e.jsx(Ia,{size:14})}),L.address===a&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-kairos-400"})]},L.address)),e.jsxs("button",{onClick:Kx,className:"w-full flex items-center gap-2 p-3 rounded-xl border border-dashed border-white/10 text-dark-400 hover:text-white hover:border-kairos-500/30 transition-all",children:[e.jsx(Ve,{size:16}),e.jsx("span",{className:"text-sm",children:"Agregar Wallet"})]})]})]}),e.jsx(ue,{children:V&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-6",onClick:()=>fe(null),children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:L=>L.stopPropagation(),className:"glass-card-strong p-5 w-full max-w-sm",children:[e.jsx("h3",{className:"text-base font-bold mb-3",children:"Renombrar Cuenta"}),e.jsx("input",{value:Ue,onChange:L=>M0(L.target.value),placeholder:"Nombre de la cuenta",className:"glass-input mb-3 text-sm",autoFocus:!0,maxLength:30}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>fe(null),className:"glass-button flex-1 py-2.5 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:()=>{if(!i||!Ue.trim())return;const L=i.accounts||[],pe=i.importedAccounts||[];for(const Ne of[...L,...pe])if(Ne.address.toLowerCase()===V.toLowerCase()){Ne.name=Ue.trim();break}u(`Renombrado a "${Ue.trim()}"`,"success"),fe(null)},disabled:!Ue.trim(),className:"kairos-button flex-1 py-2.5 text-sm disabled:opacity-40",children:"Guardar"})]})]})})}),e.jsx(ue,{children:f&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-6",onClick:Ws,children:e.jsxs(O.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card-strong p-6 w-full max-w-sm",onClick:L=>L.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:"Exportar Clave Privada"}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:ge(a)}),D?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2 border border-red-500/30",children:[e.jsx(ce,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-red-300 font-medium",children:"NO compartas esta clave. Cualquiera con ella puede robar todos tus fondos."})]}),e.jsxs("div",{className:"bg-dark-900/80 rounded-xl p-3 mb-4 relative",children:[e.jsx("p",{className:"font-mono text-xs break-all select-all",style:{filter:F?"none":"blur(5px)"},children:D}),e.jsx("button",{onClick:()=>k(!F),className:"absolute top-2 right-2 text-dark-400",children:F?e.jsx(tt,{size:14}):e.jsx(He,{size:14})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ws,className:"glass-button flex-1 py-3 text-center text-sm",children:"Cerrar"}),e.jsxs("button",{onClick:Xx,className:"kairos-button flex-1 py-3 text-sm flex items-center justify-center gap-1",children:[e.jsx(We,{size:14})," Copiar"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2",children:[e.jsx(ce,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-dark-300",children:"Nunca compartas tu clave privada. Cualquiera con ella tiene control total de tus fondos."})]}),e.jsx("input",{type:"password",value:h,onChange:L=>{g(L.target.value),B("")},placeholder:"Ingresa tu contrase√±a",className:"glass-input mb-3 text-sm",autoFocus:!0}),A&&e.jsx("p",{className:"text-red-400 text-xs mb-3",children:A}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ws,className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:Hx,disabled:!h,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:"Desbloquear"})]})]})]})})}),e.jsxs("div",{className:"text-center pb-4",children:[e.jsx("img",{src:"/icons/logo-128.png",alt:"Kairos",className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsxs("p",{className:"text-dark-500 text-[10px]",children:["Kairos Wallet v",ea,e.jsx("br",{}),"¬© 2026 Kairos 777 Inc. Todos los derechos reservados."]})]})]}),e.jsxs(ue,{children:[R&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-6",onClick:()=>{M(!1),_(""),T(null),S(""),z(!1)},children:e.jsxs(O.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card-strong p-6 w-full max-w-sm",onClick:L=>L.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:t("settings.backup_seed","Frase Semilla")}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:t("settings.backup_seed_modal_desc","Tu frase de recuperaci√≥n de 12 palabras")}),H?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2 border border-red-500/30",children:[e.jsx(ce,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-red-300 font-medium",children:t("settings.seed_danger","NO compartas estas palabras. Escr√≠belas en papel y gu√°rdalas en un lugar seguro.")})]}),e.jsxs("div",{className:"bg-dark-900/80 rounded-xl p-4 mb-4 relative",children:[e.jsx("div",{className:`grid grid-cols-3 gap-2 ${G?"":"blur-sm"}`,children:H.split(" ").map((L,pe)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[10px] text-dark-500 w-4 text-right",children:pe+1}),e.jsx("span",{className:"text-xs font-mono text-white",children:L})]},pe))}),e.jsx("button",{onClick:()=>z(!G),className:"absolute top-2 right-2 text-dark-400 p-1",children:G?e.jsx(tt,{size:14}):e.jsx(He,{size:14})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{M(!1),_(""),T(null),z(!1)},className:"glass-button flex-1 py-3 text-center text-sm",children:t("common.close")}),e.jsxs("button",{onClick:async()=>{await navigator.clipboard.writeText(H),u(t("common.copied"),"success")},className:"kairos-button flex-1 py-3 text-sm flex items-center justify-center gap-1",children:[e.jsx(We,{size:14})," ",t("common.copy")]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2",children:[e.jsx(ce,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[11px] text-dark-300",children:t("settings.seed_warning","Nunca compartas tu frase semilla. Cualquiera con ella tiene control total de tus fondos.")})]}),e.jsx("input",{type:"password",value:K,onChange:L=>{_(L.target.value),S("")},placeholder:t("unlock.password"),className:"glass-input mb-3 text-sm",autoFocus:!0}),I&&e.jsx("p",{className:"text-red-400 text-xs mb-3",children:I}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{M(!1),_(""),S("")},className:"glass-button flex-1 py-3 text-center text-sm",children:t("common.cancel")}),e.jsx("button",{onClick:async()=>{S("");try{const L=await ve(K);L.mnemonic?T(L.mnemonic):S(t("settings.no_seed","Wallet importada sin frase semilla"))}catch{S(t("unlock.wrong_password"))}},disabled:!K,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:t("unlock.unlock")})]})]})]})}),U&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>Q(!1),children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:L=>L.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ve,{size:18,className:"text-kairos-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Nueva Wallet"})]}),e.jsx("p",{className:"text-dark-400 text-sm mb-4",children:"Ingresa tu contrase√±a para crear una nueva wallet:"}),e.jsx("input",{type:"password",value:Z,onChange:L=>ee(L.target.value),onKeyDown:L=>L.key==="Enter"&&$0(),placeholder:"Contrase√±a",className:"glass-input w-full py-3 mb-2",autoFocus:!0}),X&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:X}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>Q(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:$0,disabled:!Z||$,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:$?"Creando...":"Crear"})]})]})}),te&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>ie(!1),children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:L=>L.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ce,{size:20,className:"text-red-400"}),e.jsx("h3",{className:"font-bold text-red-400",children:me===1?"‚ö†Ô∏è PELIGRO":"¬øEST√ÅS SEGURO?"})]}),e.jsx("p",{className:"text-dark-300 text-sm mb-6",children:me===1?"Esto eliminar√° tu wallet de este dispositivo permanentemente. ¬øTienes tu frase semilla guardada?":"¬øEST√ÅS COMPLETAMENTE SEGURO? No hay vuelta atr√°s. Tu wallet ser√° eliminada permanentemente."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:Wx,className:"flex-1 py-3 text-sm font-semibold rounded-xl bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",children:me===1?"Continuar":"S√≠, eliminar"})]})]})}),ne&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>Fe(!1),children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:L=>L.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(G0,{size:18,className:"text-teal-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Importar Watch-Only"})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:"Solo lectura ‚Äî puedes ver balances e historial pero no enviar transacciones."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:be,onChange:L=>de(L.target.value),placeholder:"0x... direcci√≥n",className:"glass-input w-full text-sm font-mono",autoFocus:!0}),e.jsx("input",{type:"text",value:ye,onChange:L=>Ae(L.target.value),placeholder:"Nombre (opcional)",className:"glass-input w-full text-sm"}),e.jsx("input",{type:"password",value:dt,onChange:L=>vt(L.target.value),onKeyDown:L=>L.key==="Enter"&&U0(),placeholder:"Contrase√±a",className:"glass-input w-full text-sm"})]}),Ye&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:Ye}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>Fe(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:U0,disabled:!dt||!be||_t,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:_t?"Importando...":"Importar"})]})]})}),_x&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>xs(!1),children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl max-h-[85vh] overflow-y-auto",onClick:L=>L.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Hs,{size:18,className:"text-sky-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Backup en la Nube"})]}),e.jsxs("div",{className:"flex gap-1 mb-4 bg-white/5 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>{Us("backup"),Re(""),ut("")},className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-medium transition-all ${$s==="backup"?"bg-sky-500/20 text-sky-400":"text-dark-400 hover:text-white"}`,children:[e.jsx(W0,{size:14})," Respaldar"]}),e.jsxs("button",{onClick:()=>{Us("restore"),Re(""),ut("")},className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-medium transition-all ${$s==="restore"?"bg-green-500/20 text-green-400":"text-dark-400 hover:text-white"}`,children:[e.jsx(V0,{size:14})," Restaurar"]})]}),$s==="backup"?e.jsxs(e.Fragment,{children:[Gs?.exists&&e.jsxs("div",{className:"glass-card p-3 mb-3 flex items-start gap-2 border border-sky-500/20",children:[e.jsx(Hs,{size:14,className:"text-sky-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-[11px]",children:[e.jsx("p",{className:"text-sky-300 font-medium",children:"Backup existente"}),e.jsxs("p",{className:"text-dark-400",children:["√öltimo: ",new Date(Gs.timestamp).toLocaleDateString()]})]})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-3",children:"Tu vault se encriptar√° con doble capa (AES-256-GCM) antes de subir al servidor. Solo t√∫ podr√°s desencriptarlo con tu contrase√±a de backup."}),e.jsx("input",{type:"password",value:qe,onChange:L=>{Ks(L.target.value),Re("")},placeholder:"Contrase√±a de backup (m√≠n. 8 chars)",className:"glass-input w-full text-sm mb-3",autoFocus:!0}),os&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:os}),is&&e.jsx("p",{className:"text-green-400 text-xs mb-2",children:is}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>xs(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(qe.length<8){Re("M√≠nimo 8 caracteres");return}jt(!0),Re(""),ut("");try{const L=localStorage.getItem(Ee.ENCRYPTED_VAULT);if(!L)throw new Error("No hay vault local");await Mo(a,L,qe),ut("‚úÖ Backup creado exitosamente"),cs({exists:!0,timestamp:new Date().toISOString()}),u("Backup en la nube creado","success")}catch(L){Re(L.message||"Error al crear backup")}jt(!1)},disabled:!qe||ns,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40 flex items-center justify-center gap-1.5",children:ns?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:14,className:"animate-spin"})," Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W0,{size:14})," Respaldar"]})})]}),Gs?.exists&&e.jsx("button",{onClick:async()=>{if(confirm("¬øEliminar el backup de la nube?")){jt(!0);try{await $o(a,qe),cs({exists:!1}),u("Backup eliminado","info")}catch(L){Re(L.message)}jt(!1)}},className:"w-full mt-3 py-2 text-xs text-red-400 hover:text-red-300 transition-colors",children:"Eliminar backup de la nube"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-dark-400 text-xs mb-3",children:"Restaura tu wallet desde un backup en la nube. Necesitas la direcci√≥n y la contrase√±a de backup que usaste."}),e.jsx("input",{type:"text",value:rs,onChange:L=>{$x(L.target.value),Re("")},placeholder:"0x... direcci√≥n de la wallet",className:"glass-input w-full text-sm font-mono mb-2"}),e.jsx("input",{type:"password",value:qe,onChange:L=>{Ks(L.target.value),Re("")},placeholder:"Contrase√±a de backup",className:"glass-input w-full text-sm mb-3"}),os&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:os}),is&&e.jsx("p",{className:"text-green-400 text-xs mb-2",children:is}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>xs(!1),className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(!rs||!qe){Re("Completa todos los campos");return}jt(!0),Re(""),ut("");try{const L=await zo(rs,qe);localStorage.setItem(Ee.ENCRYPTED_VAULT,L.vault),localStorage.setItem(Ee.HAS_WALLET,"true"),ut("‚úÖ Wallet restaurada. Recarga la app."),u("Wallet restaurada desde la nube","success")}catch(L){Re(L.message||"Error al restaurar")}jt(!1)},disabled:!rs||!qe||ns,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40 flex items-center justify-center gap-1.5",children:ns?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:14,className:"animate-spin"})," Restaurando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V0,{size:14})," Restaurar"]})})]})]})]})}),zx&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center px-6",onClick:()=>$t(!1),children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},className:"glass-card w-full max-w-sm p-6 rounded-2xl",onClick:L=>L.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ot,{size:18,className:"text-pink-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Cambiar Contrase√±a"})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-4",children:"La nueva contrase√±a proteger√° tu vault. M√≠nimo 8 caracteres."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"password",value:Jt,onChange:L=>Zt(L.target.value),placeholder:"Contrase√±a actual",className:"glass-input w-full text-sm",autoFocus:!0}),e.jsx("input",{type:"password",value:yt,onChange:L=>es(L.target.value),placeholder:"Nueva contrase√±a (m√≠n. 8 chars)",className:"glass-input w-full text-sm"}),e.jsx("input",{type:"password",value:ts,onChange:L=>ss(L.target.value),onKeyDown:L=>{L.key==="Enter"&&(async()=>{if(yt!==ts){mt("Las contrase√±as no coinciden");return}as(!0),mt("");try{await l0(Jt,yt),u("‚úÖ Contrase√±a cambiada exitosamente","success"),$t(!1),Zt(""),es(""),ss("")}catch(pe){mt(pe.message)}as(!1)})()},placeholder:"Confirmar nueva contrase√±a",className:"glass-input w-full text-sm"})]}),z0&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:z0}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>{$t(!1),Zt(""),es(""),ss(""),mt("")},className:"glass-button flex-1 py-3 text-center text-sm",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{if(yt!==ts){mt("Las contrase√±as no coinciden");return}as(!0),mt("");try{await l0(Jt,yt),u("‚úÖ Contrase√±a cambiada exitosamente","success"),$t(!1),Zt(""),es(""),ss("")}catch(L){mt(L.message)}as(!1)},disabled:!Jt||!yt||!ts||_0,className:"kairos-button flex-1 py-3 text-sm disabled:opacity-40",children:_0?"Cambiando...":"Cambiar"})]})]})})]})]})}function Wo(){const{activeChainId:t,goBack:a,showToast:s}=se(),[x,r]=C.useState(""),[l,u]=C.useState(null),[m,o]=C.useState(!1),i=()=>{try{const h=localStorage.getItem(Ee.TOKENS);return h?JSON.parse(h):{}}catch{return{}}},[c,n]=C.useState(()=>i()[t]||[]),d=Rs[t]||[],p=async()=>{const h=x.trim();if(h&&et(h)){o(!0);try{const g=await bn(t,h);u(g)}catch{s("Token no encontrado en esta red","error"),u(null)}o(!1)}},f=()=>{if(l){const h=[...c,l];n(h);const g=i();g[t]=h,localStorage.setItem(Ee.TOKENS,JSON.stringify(g)),s(`${l.symbol} agregado`,"success"),u(null),r("")}},E=d.filter(h=>!x||h.symbol.toLowerCase().includes(x.toLowerCase())||h.name.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:a,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold",children:"Gestionar Tokens"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-400 pointer-events-none"}),e.jsx("input",{type:"text",value:x,onChange:h=>r(h.target.value),onKeyDown:h=>h.key==="Enter"&&p(),placeholder:"Buscar por nombre o pegar direcci√≥n del contrato",className:"glass-input pl-9 text-sm",style:{color:"#ffffff",WebkitTextFillColor:"#ffffff"}})]}),l&&e.jsx(O.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"glass-card-strong p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:l.symbol}),e.jsx("p",{className:"text-dark-400 text-xs",children:l.name}),e.jsxs("p",{className:"text-dark-500 text-[10px] font-mono mt-1",children:["Decimals: ",l.decimals," ¬∑ Supply: ",parseFloat(l.totalSupply).toLocaleString()]})]}),e.jsxs("button",{onClick:f,className:"kairos-button py-2 px-4 text-sm",children:[e.jsx(Ve,{size:14,className:"mr-1 inline"})," Agregar"]})]})}),m&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(O.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-2 border-kairos-400 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-dark-400 text-xs mt-2",children:"Buscando token..."})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-1",children:[e.jsx("p",{className:"text-xs text-dark-400 mb-2",children:"Tokens populares en esta red"}),E.map(h=>{const g=h.address.toLowerCase()===Ze.address.toLowerCase();return e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-all",children:[e.jsx(Ke,{token:h,chainId:t,size:36}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-sm",children:h.symbol}),g&&e.jsx("span",{className:"ml-1 text-[8px] bg-kairos-500/20 text-kairos-400 px-1.5 py-0.5 rounded font-bold",children:"STABLE"}),e.jsx("p",{className:"text-dark-400 text-xs",children:h.name})]}),e.jsx(Se,{size:16,className:"text-green-400"})]},h.address)}),c.map(h=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-kairos-500/5",children:[e.jsx(Ke,{token:h,chainId:t,size:36}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-sm",children:h.symbol}),e.jsx("span",{className:"ml-1 text-[8px] bg-blue-500/20 text-blue-400 px-1.5 py-0.5 rounded font-bold",children:"CUSTOM"}),e.jsx("p",{className:"text-dark-400 text-xs",children:h.name})]}),e.jsx(Se,{size:16,className:"text-kairos-400"})]},h.address))]}),e.jsxs("div",{className:"glass-card p-3 mt-4 flex items-start gap-2",children:[e.jsx(ce,{size:14,className:"text-kairos-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-[10px] text-dark-400",children:"Cualquier persona puede crear un token con cualquier nombre. Siempre verifica la direcci√≥n del contrato antes de interactuar con un token desconocido."})]})]})}const Ax=["function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)","function getAmountsIn(uint amountOut, address[] calldata path) external view returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactETHForTokensSupportingFeeOnTransferTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable","function swapExactTokensForETHSupportingFeeOnTransferTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external","function swapExactTokensForTokensSupportingFeeOnTransferTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external","function factory() external view returns (address)","function WETH() external view returns (address)"],L0={56:"PancakeSwap",1:"Uniswap",137:"QuickSwap",42161:"SushiSwap",43114:"Trader Joe",8453:"BaseSwap"};function Vo(t){const a=q[t];if(!a?.dexRouter)throw new Error("No DEX disponible en esta red");const s=re(t);return new oe(a.dexRouter,Ax,s)}async function Ho(t,a,s,x,r,l){const u=q[t],m=Vo(t),o=u.wrappedNative,i=a==="native",c=s==="native",n=i?o:a,d=c?o:s;if(n.toLowerCase()===d.toLowerCase())throw new Error("No puedes intercambiar el mismo token");const p=Ie(x.toString(),r),f=[[n,d],...n.toLowerCase()!==o.toLowerCase()&&d.toLowerCase()!==o.toLowerCase()?[[n,o,d]]:[]];let E=0n,h=null;for(const w of f)try{const N=await m.getAmountsOut(p,w),v=N[N.length-1];v>E&&(E=v,h=w)}catch{}if(!h||E===0n)throw new Error("No hay liquidez para este par. Prueba otro token o cantidad.");const g=he(E,l),D=parseFloat(x),A=parseFloat(g)/D;let B=0;try{const w=Ie("1",r),N=await m.getAmountsOut(w,h);B=parseFloat(he(N[N.length-1],l))}catch{}const F=B>0?Math.abs((A-B)/B)*100:0,k=h.map(w=>w.toLowerCase()===o.toLowerCase()?u.nativeCurrency.symbol:w);return{amountOut:g,amountOutRaw:E.toString(),path:h,priceImpact:F.toFixed(2),effectivePrice:A,route:k,dex:L0[t]||"DEX"}}async function fa(t,a,s,x,r,l){const u=re(t),m=new Pe(a,u),o=new oe(s,it,m),i=Ie(r.toString(),l);if(await o.allowance(m.address,x)>=i)return null;const n=await o.approve(x,vs);return await n.wait(),{hash:n.hash,type:"approve"}}async function Xo({chainId:t,privateKey:a,tokenIn:s,tokenOut:x,amountIn:r,amountOutMin:l,decimalsIn:u,decimalsOut:m,path:o,slippage:i=.5,useFeeOnTransfer:c=!1}){const n=q[t],d=re(t),p=new Pe(a,d),f=new oe(n.dexRouter,Ax,p),E=Ie(r.toString(),u),h=Ie(l.toString(),m),g=BigInt(Math.floor((100-i)*100)),D=h*g/10000n,b=Math.floor(Date.now()/1e3)+1200,A=s==="native",B=x==="native";let F;return A?c?F=await f.swapExactETHForTokensSupportingFeeOnTransferTokens(D,o,p.address,b,{value:E}):F=await f.swapExactETHForTokens(D,o,p.address,b,{value:E}):B?(await fa(t,a,s,n.dexRouter,r,u),c?F=await f.swapExactTokensForETHSupportingFeeOnTransferTokens(E,D,o,p.address,b):F=await f.swapExactTokensForETH(E,D,o,p.address,b)):(await fa(t,a,s,n.dexRouter,r,u),c?F=await f.swapExactTokensForTokensSupportingFeeOnTransferTokens(E,D,o,p.address,b):F=await f.swapExactTokensForTokens(E,D,o,p.address,b)),{hash:F.hash,from:p.address,type:"swap",tokenIn:s,tokenOut:x,amountIn:r,amountOutMin:he(D,m),dex:L0[t],chainId:t,timestamp:Date.now(),status:"pending"}}function Qo(t,a){const s=[];if(a?.native&&s.push({...a.native,id:"native",isNative:!0}),a?.tokens)for(const x of a.tokens)s.push({...x,id:x.address});return s}const Yo=["function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)","function factory() external view returns (address)","function WETH() external view returns (address)"],qo={56:[{name:"PancakeSwap V2",router:"0x10ED43C718714eb63d5aA57B78B54704E256024E",color:"#1FC7D4"},{name:"BiSwap",router:"0x3a6d8cA21D1CF76F653A67577FA0D27453350dD8",color:"#FF6B35"},{name:"ApeSwap",router:"0xcF0feBd3f17CEf5b47b0cD257aCf6025c5BFf3b7",color:"#A16552"},{name:"MDEX",router:"0x7DAe51BD3E3376B8c7c4900E9107f12Be3AF1bA8",color:"#4A90E2"}],1:[{name:"Uniswap V2",router:"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",color:"#FF007A"},{name:"SushiSwap",router:"0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9F",color:"#FA52A0"}],137:[{name:"QuickSwap",router:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",color:"#418ACA"},{name:"SushiSwap",router:"0x1b02dA8Cb0d097eB8D57A175b88c7D8b47997506",color:"#FA52A0"}],42161:[{name:"SushiSwap",router:"0x1b02dA8Cb0d097eB8D57A175b88c7D8b47997506",color:"#FA52A0"},{name:"Camelot",router:"0xc873fEcbd354f5A56E00E710B90EF4201db2448d",color:"#FFAF1D"}],43114:[{name:"Trader Joe",router:"0x60aE616a2155Ee3d9A68541Ba4544862310933d4",color:"#E84142"},{name:"Pangolin",router:"0xE54Ca86531e17Ef3616d22Ca28b0D458b6C89106",color:"#FC4C00"}],8453:[{name:"BaseSwap",router:"0x327Df1E6de05895d2ab08513aaDD9313Fe505d86",color:"#0052FF"},{name:"Aerodrome",router:"0xcF77a3Ba9A5CA399B7c97c74d54e5b1Beb874E43",color:"#0000FF"}]};async function Jo(t,a,s,x,r,l){const u=q[t],m=qo[t]||[];if(m.length===0)throw new Error("No DEXs configurados para esta red");const o=u.wrappedNative,i=a==="native",c=s==="native",n=i?o:a,d=c?o:s;if(n.toLowerCase()===d.toLowerCase())throw new Error("No puedes intercambiar el mismo token");const p=Ie(x.toString(),r),f=re(t),E=m.map(async D=>{try{const b=new oe(D.router,Yo,f),A=[[n,d],...n.toLowerCase()!==o.toLowerCase()&&d.toLowerCase()!==o.toLowerCase()?[[n,o,d]]:[]];let B=0n,F=null;for(const N of A)try{const v=await b.getAmountsOut(p,N),j=v[v.length-1];j>B&&(B=j,F=N)}catch{}if(!F||B===0n)return null;const k=he(B,l);let w=0;try{const N=Ie("1",r),v=await b.getAmountsOut(N,F),j=parseFloat(he(v[v.length-1],l)),y=parseFloat(k)/parseFloat(x);w=j>0?Math.abs((y-j)/j)*100:0}catch{}return{dex:D.name,dexColor:D.color,router:D.router,amountOut:k,amountOutRaw:B.toString(),path:F,priceImpact:w.toFixed(2),route:F.map(N=>N.toLowerCase()===o.toLowerCase()?u.nativeCurrency.symbol:N)}}catch{return null}}),g=(await Promise.allSettled(E)).filter(D=>D.status==="fulfilled"&&D.value).map(D=>D.value).sort((D,b)=>parseFloat(b.amountOut)-parseFloat(D.amountOut));if(g.length===0)throw new Error("No hay liquidez en ning√∫n DEX para este par.");if(g.length>1){const D=parseFloat(g[0].amountOut),b=parseFloat(g[g.length-1].amountOut);g[0].isBest=!0,g[0].savingsPercent=b>0?((D-b)/b*100).toFixed(2):"0"}else g[0].isBest=!0,g[0].savingsPercent="0";return g}function Zo(){const{activeAddress:t,activeChainId:a,balances:s,navigate:x,goBack:r,showToast:l,setBalances:u}=se(),m=q[a],o=L0[a]||"DEX",[i,c]=C.useState(null),[n,d]=C.useState(null),[p,f]=C.useState(""),[E,h]=C.useState(null),[g,D]=C.useState(!1),[b,A]=C.useState(""),B=C.useRef(null),[F,k]=C.useState(.5),[w,N]=C.useState(!1),[v,j]=C.useState(""),[y,P]=C.useState(null),[R,M]=C.useState("idle"),[K,_]=C.useState(""),[H,T]=C.useState(""),[I,S]=C.useState(""),[G,z]=C.useState(""),[U,Q]=C.useState([]),Z=Qo(a,s);C.useEffect(()=>{Z.length>0&&!i&&(c(Z[0]),Z.length>1&&d(Z[1]))},[Z.length]);const ee=C.useCallback(async()=>{if(!i||!n||!p||parseFloat(p)<=0){h(null),A("");return}const W=parseFloat(i.balance||"0");if(parseFloat(p)>W){A("Saldo insuficiente"),h(null);return}D(!0),A("");try{const ne=i.isNative?"native":i.address,Fe=n.isNative?"native":n.address,be=await Ho(a,ne,Fe,p,i.decimals||18,n.decimals||18);h(be),A("");try{const de=i.isNative?"native":i.address,ye=n.isNative?"native":n.address,Ae=await Jo(a,de,ye,p,i.decimals||18,n.decimals||18);Q(Ae)}catch{Q([])}}catch(ne){h(null),A(ne.message||"Error obteniendo cotizaci√≥n")}finally{D(!1)}},[i,n,p,a]);C.useEffect(()=>(clearTimeout(B.current),p&&parseFloat(p)>0&&i&&n?B.current=setTimeout(ee,600):(h(null),A("")),()=>clearTimeout(B.current)),[p,i?.id,n?.id,ee]);const X=()=>{const W=i;c(n),d(W),f(""),h(null)},J=()=>{if(!i)return;let W=parseFloat(i.balance||"0");i.isNative&&(W=Math.max(0,W-.005)),f(W>0?W.toString():"")},$=W=>{y==="from"?(n&&W.id===n.id&&d(i),c(W)):(i&&W.id===i.id&&c(n),d(W)),P(null),h(null),f("")},Y=()=>{!E||b||(M("password"),_(""),T(""))},te=async()=>{T("");try{const W=await ve(K),Fe=[...W.accounts||[],...W.importedAccounts||[]].find(Ae=>Ae.address.toLowerCase()===t.toLowerCase());if(!Fe)throw new Error("Cuenta no encontrada");M("swapping");const be=i.isNative?"native":i.address,de=n.isNative?"native":n.address,ye=await Xo({chainId:a,privateKey:Fe.privateKey,tokenIn:be,tokenOut:de,amountIn:p,amountOutMin:E.amountOut,decimalsIn:i.decimals||18,decimalsOut:n.decimals||18,path:E.path,slippage:F,useFeeOnTransfer:!1});S(ye.hash),M("success"),_("");try{const Ae=await Qa(a,t);u(Ae)}catch{}}catch(W){W.message==="Contrase√±a incorrecta"?(T("Contrase√±a incorrecta"),M("password")):(z(W.message||"Error ejecutando swap"),M("error"),_(""))}},ie=W=>{const ne=parseFloat(W);return ne<1?"text-green-400":ne<3?"text-yellow-400":ne<5?"text-orange-400":"text-red-400"},me=E&&!b&&!g&&parseFloat(p)>0;return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:r,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-bold text-white",children:"Swap"}),e.jsxs("p",{className:"text-[10px] text-dark-400 flex items-center gap-1 justify-center",children:[e.jsx(Le,{size:10,className:"text-kairos-400"}),o," en ",m.shortName]})]}),e.jsx("button",{onClick:()=>N(!0),className:"p-2 -mr-2 rounded-xl hover:bg-white/5",children:e.jsx(lr,{size:20,className:"text-dark-300"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5",children:[e.jsxs("div",{className:"bg-white/[0.03] rounded-2xl p-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Vendes"}),i&&e.jsxs("button",{onClick:J,className:"text-[10px] text-kairos-400 font-medium",children:["Saldo: ",nt(i.balance||"0")," ‚Äî MAX"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:p,onChange:W=>f(W.target.value),placeholder:"0.0",className:"flex-1 bg-transparent text-2xl font-bold text-white placeholder-dark-600 outline-none min-w-0",inputMode:"decimal"}),e.jsxs("button",{onClick:()=>P("from"),className:"flex items-center gap-2 bg-white/[0.06] hover:bg-white/[0.1] rounded-xl px-3 py-2 transition-colors shrink-0",children:[i?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{token:i,chainId:a,size:24}),e.jsx("span",{className:"font-semibold text-sm",children:i.symbol})]}):e.jsx("span",{className:"text-sm text-dark-300",children:"Elegir"}),e.jsx(Bt,{size:14,className:"text-dark-400"})]})]})]}),e.jsx("div",{className:"flex justify-center -my-3 relative z-10",children:e.jsx("button",{onClick:X,className:"w-10 h-10 rounded-xl bg-dark-800 border border-white/10 flex items-center justify-center hover:bg-dark-700 active:scale-90 transition-all",children:e.jsx(Cs,{size:16,className:"text-kairos-400"})})}),e.jsxs("div",{className:"bg-white/[0.03] rounded-2xl p-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Recibes"}),n&&e.jsxs("span",{className:"text-[10px] text-dark-500",children:["Saldo: ",nt(n.balance||"0")]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{size:20,className:"text-kairos-400 animate-spin"}),e.jsx("span",{className:"text-dark-400 text-sm",children:"Cotizando..."})]}):E?e.jsx("span",{className:"text-2xl font-bold text-white",children:parseFloat(E.amountOut).toFixed(6)}):e.jsx("span",{className:"text-2xl font-bold text-dark-600",children:"0.0"})}),e.jsxs("button",{onClick:()=>P("to"),className:"flex items-center gap-2 bg-white/[0.06] hover:bg-white/[0.1] rounded-xl px-3 py-2 transition-colors shrink-0",children:[n?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{token:n,chainId:a,size:24}),e.jsx("span",{className:"font-semibold text-sm",children:n.symbol})]}):e.jsx("span",{className:"text-sm text-dark-300",children:"Elegir"}),e.jsx(Bt,{size:14,className:"text-dark-400"})]})]})]}),e.jsx(ue,{children:E&&e.jsxs(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:[e.jsxs("div",{className:"mt-4 bg-white/[0.02] rounded-xl p-3 space-y-2 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Tasa"}),e.jsxs("span",{className:"text-xs text-dark-200",children:["1 ",i?.symbol," ‚âà ",E.effectivePrice.toFixed(6)," ",n?.symbol]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-dark-400 flex items-center gap-1",children:["Impacto",parseFloat(E.priceImpact)>3&&e.jsx(ce,{size:10,className:"text-orange-400"})]}),e.jsxs("span",{className:`text-xs font-medium ${ie(E.priceImpact)}`,children:[E.priceImpact,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"M√≠nimo recibido"}),e.jsxs("span",{className:"text-xs text-dark-200",children:[(parseFloat(E.amountOut)*(1-F/100)).toFixed(6)," ",n?.symbol]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Slippage"}),e.jsxs("button",{onClick:()=>N(!0),className:"text-xs text-kairos-400",children:[F,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Ruta"}),e.jsx("span",{className:"text-xs text-dark-300",children:E.route.map((W,ne)=>e.jsxs("span",{children:[W.length>10?W.slice(0,6)+"...":W,ne<E.route.length-1?" ‚Üí ":""]},ne))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"DEX"}),e.jsxs("span",{className:"text-xs text-dark-200 flex items-center gap-1",children:[e.jsx(Le,{size:10,className:"text-kairos-400"}),E.dex]})]})]}),U.length>1&&e.jsxs("div",{className:"mt-3 bg-white/[0.02] rounded-xl p-3 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(Le,{size:10,className:"text-kairos-400"}),e.jsx("span",{className:"text-[10px] text-kairos-400 font-bold",children:"COMPARACI√ìN MULTI-DEX"}),U[0]?.savingsPercent&&parseFloat(U[0].savingsPercent)>0&&e.jsxs("span",{className:"ml-auto text-[10px] text-green-400 font-bold",children:["Ahorro: +",U[0].savingsPercent,"%"]})]}),e.jsx("div",{className:"space-y-1.5",children:U.slice(0,4).map((W,ne)=>e.jsxs("div",{className:`flex items-center justify-between py-1.5 px-2 rounded-lg text-xs ${W.isBest?"bg-green-500/10 border border-green-500/20":"bg-dark-800/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:W.dexColor||"#666"}}),e.jsx("span",{className:W.isBest?"text-green-400 font-semibold":"text-dark-300",children:W.dex}),W.isBest&&e.jsx("span",{className:"text-[9px] bg-green-500/20 text-green-400 px-1 rounded",children:"MEJOR"})]}),e.jsx("span",{className:W.isBest?"text-green-400 font-bold":"text-dark-400",children:parseFloat(W.amountOut).toFixed(6)})]},ne))})]})]})}),b&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 px-3 py-2 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsx(ce,{size:14,className:"text-red-400 shrink-0"}),e.jsx("span",{className:"text-xs text-red-300",children:b})]}),E&&parseFloat(E.priceImpact)>5&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 px-3 py-2 rounded-xl bg-orange-500/10 border border-orange-500/20",children:[e.jsx(ce,{size:14,className:"text-orange-400 shrink-0"}),e.jsxs("span",{className:"text-xs text-orange-300",children:["Alto impacto de precio (",E.priceImpact,"%). Podr√≠as perder valor significativo."]})]})]}),e.jsx("div",{className:"px-5 pb-6 pt-3",children:e.jsx("button",{onClick:Y,disabled:!me,className:`w-full py-4 rounded-2xl font-bold text-sm flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${me?"bg-gradient-to-r from-kairos-500 to-kairos-400 text-dark-950 shadow-lg shadow-kairos-500/20":"bg-white/[0.06] text-dark-500 cursor-not-allowed"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:16,className:"animate-spin"}),"Cotizando..."]}):!i||!n?"Selecciona los tokens":!p||parseFloat(p)<=0?"Ingresa un monto":b||(me?e.jsxs(e.Fragment,{children:[e.jsx(Cs,{size:16}),"Swap ",i.symbol," ‚Üí ",n.symbol]}):"Swap")})}),e.jsx(ue,{children:y&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("h2",{className:"font-bold text-white",children:y==="from"?"Token a vender":"Token a recibir"}),e.jsx("button",{onClick:()=>P(null),className:"p-2 rounded-xl hover:bg-white/5",children:e.jsx(Te,{size:20,className:"text-dark-300"})})]}),e.jsx("div",{className:"px-5 overflow-y-auto",style:{maxHeight:"calc(100vh - 80px)"},children:Z.length===0?e.jsx("div",{className:"text-center py-12 text-dark-400 text-sm",children:"No hay tokens disponibles. Agrega tokens primero."}):e.jsx("div",{className:"space-y-1",children:Z.map(W=>{const ne=y==="from"&&i?.id===W.id||y==="to"&&n?.id===W.id;return e.jsxs("button",{onClick:()=>$(W),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-colors ${ne?"bg-kairos-500/10 border border-kairos-500/30":"hover:bg-white/[0.04] border border-transparent"}`,children:[e.jsx(Ke,{token:W,chainId:a,size:36}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-semibold text-sm text-white",children:W.symbol}),e.jsx("div",{className:"text-xs text-dark-400",children:W.name})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-medium text-dark-200",children:nt(W.balance||"0")})}),ne&&e.jsx(_e,{size:16,className:"text-kairos-400 shrink-0"})]},W.id)})})})]})}),e.jsx(ue,{children:w&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("h2",{className:"font-bold text-white",children:"Configuraci√≥n de Slippage"}),e.jsx("button",{onClick:()=>N(!1),className:"p-2 rounded-xl hover:bg-white/5",children:e.jsx(Te,{size:20,className:"text-dark-300"})})]}),e.jsxs("div",{className:"px-5",children:[e.jsx("p",{className:"text-xs text-dark-400 mb-4",children:"El slippage es la diferencia m√°xima aceptable entre el precio esperado y el precio real de ejecuci√≥n."}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[.1,.5,1].map(W=>e.jsxs("button",{onClick:()=>{k(W),j("")},className:`py-3 rounded-xl text-sm font-medium transition-all ${F===W&&!v?"bg-kairos-500/20 text-kairos-400 border border-kairos-500/30":"bg-white/[0.04] text-dark-300 border border-transparent hover:bg-white/[0.08]"}`,children:[W,"%"]},W))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:v,onChange:W=>{j(W.target.value);const ne=parseFloat(W.target.value);ne>0&&ne<=50&&k(ne)},placeholder:"Personalizado",className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50",inputMode:"decimal"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-dark-400 text-sm",children:"%"})]}),F>5&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 px-3 py-2 rounded-xl bg-orange-500/10 border border-orange-500/20",children:[e.jsx(ce,{size:14,className:"text-orange-400 shrink-0"}),e.jsx("span",{className:"text-xs text-orange-300",children:"Slippage alto. Tu transacci√≥n podr√≠a ser frontrunned."})]}),e.jsx("button",{onClick:()=>N(!1),className:"w-full mt-6 py-3 rounded-xl bg-kairos-500 text-dark-950 font-bold text-sm",children:"Guardar"})]})]})}),e.jsx(ue,{children:R!=="idle"&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl flex items-center justify-center px-5",children:e.jsxs(O.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-sm bg-dark-800 rounded-2xl p-6 border border-white/10",children:[["password","error","success"].includes(R)&&e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:()=>{M("idle"),_(""),z("")},className:"p-1 rounded-lg hover:bg-white/5",children:e.jsx(Te,{size:16,className:"text-dark-400"})})}),R==="password"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-kairos-500/10 flex items-center justify-center mx-auto mb-3",children:e.jsx(Cs,{size:24,className:"text-kairos-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:"Confirmar Swap"}),e.jsxs("p",{className:"text-xs text-dark-400 mt-1",children:[parseFloat(p).toFixed(6)," ",i?.symbol," ‚Üí ",parseFloat(E?.amountOut||0).toFixed(6)," ",n?.symbol]})]}),e.jsx("input",{type:"password",value:K,onChange:W=>{_(W.target.value),T("")},onKeyDown:W=>W.key==="Enter"&&K&&te(),placeholder:"Contrase√±a de la wallet",className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50 mb-2",autoFocus:!0}),H&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:H}),e.jsx("button",{onClick:te,disabled:!K,className:`w-full py-3 rounded-xl font-bold text-sm mt-2 transition-all ${K?"bg-gradient-to-r from-kairos-500 to-kairos-400 text-dark-950":"bg-white/[0.06] text-dark-500 cursor-not-allowed"}`,children:"Confirmar Swap"})]}),(R==="approving"||R==="swapping")&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(O.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 rounded-full bg-kairos-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(je,{size:28,className:"text-kairos-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:R==="approving"?"Aprobando token...":"Ejecutando swap..."}),e.jsx("p",{className:"text-xs text-dark-400 mt-2",children:R==="approving"?"Autorizando al router para usar tus tokens":`Intercambiando en ${o}`}),e.jsx("p",{className:"text-[10px] text-dark-500 mt-4",children:"No cierres esta ventana"})]}),R==="success"&&e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(_e,{size:28,className:"text-green-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:"¬°Swap exitoso!"}),e.jsxs("p",{className:"text-xs text-dark-400 mt-2 mb-4",children:[parseFloat(p).toFixed(6)," ",i?.symbol," ‚Üí ",parseFloat(E?.amountOut||0).toFixed(6)," ",n?.symbol]}),I&&e.jsx("a",{href:`${m.blockExplorerUrl}/tx/${I}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-kairos-400 mb-4",children:"Ver en explorador ‚Üó"}),e.jsx("button",{onClick:()=>{M("idle"),f(""),h(null)},className:"w-full py-3 rounded-xl bg-kairos-500 text-dark-950 font-bold text-sm",children:"Listo"})]}),R==="error"&&e.jsxs("div",{className:"text-center py-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(ce,{size:28,className:"text-red-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:"Error en el swap"}),e.jsx("p",{className:"text-xs text-red-300 mt-2 mb-4 break-words max-h-24 overflow-y-auto",children:G}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{M("idle"),z("")},className:"flex-1 py-3 rounded-xl bg-white/[0.06] text-dark-300 font-medium text-sm",children:"Cancelar"}),e.jsx("button",{onClick:()=>{M("password"),z(""),_("")},className:"flex-1 py-3 rounded-xl bg-kairos-500 text-dark-950 font-bold text-sm",children:"Reintentar"})]})]})]})})})]})}function ei(){const{goBack:t,navigate:a,showToast:s}=se(),[x,r]=C.useState(Qe()),[l,u]=C.useState(""),[m,o]=C.useState(null),[i,c]=C.useState(null),[n,d]=C.useState(null),[p,f]=C.useState({name:"",address:"",notes:""}),[E,h]=C.useState(""),g=C.useMemo(()=>l?Ao(l):x,[x,l]),D=()=>r(Qe()),b=y=>{navigator.clipboard.writeText(y.address),o(y.id),setTimeout(()=>o(null),2e3)},A=()=>{f({name:"",address:"",notes:""}),h(""),c("add")},B=y=>{d(y),f({name:y.name,address:y.address,notes:y.notes||""}),h(""),c("edit")},F=y=>{d(y),c("delete")},k=()=>{if(h(""),!p.name.trim()){h("Ingresa un nombre");return}if(!et(p.address)){h("Direcci√≥n inv√°lida");return}try{i==="add"?(pa(p),s("Contacto agregado","success")):(Co(n.id,p),s("Contacto actualizado","success")),D(),c(null)}catch(y){h(y.message)}},w=()=>{Bo(n.id),s("Contacto eliminado","success"),D(),c(null)},N=y=>{a("send"),setTimeout(()=>{const P=new CustomEvent("kairos:prefill-address",{detail:y.address});window.dispatchEvent(P)},300)},v=()=>{const y=Ro(x);s(`${y} contactos exportados`,"success")},j=()=>{const y=document.createElement("input");y.type="file",y.accept=".json",y.onchange=async P=>{const R=P.target.files?.[0];if(R)try{const M=await R.text(),K=Lo(M);let _=0;for(const H of K)try{pa(H),_++}catch{}D(),s(`${_} contactos importados`,"success")}catch(M){s(M.message,"error")}},y.click()};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:t,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsx("h1",{className:"font-bold text-white",children:"Contactos"}),e.jsxs("div",{className:"flex items-center gap-1",children:[x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:v,className:"p-2 rounded-xl hover:bg-white/5",title:"Exportar",children:e.jsx(Mt,{size:16,className:"text-dark-400"})}),e.jsx("button",{onClick:j,className:"p-2 rounded-xl hover:bg-white/5",title:"Importar",children:e.jsx(dr,{size:16,className:"text-dark-400"})})]}),e.jsx("button",{onClick:A,className:"p-2 -mr-2 rounded-xl hover:bg-white/5",children:e.jsx(Ve,{size:20,className:"text-kairos-400"})})]})]}),e.jsx("div",{className:"px-5 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-500"}),e.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),placeholder:"Buscar por nombre o direcci√≥n...",className:"w-full bg-white/[0.04] rounded-xl pl-10 pr-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:g.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:e.jsx(Ts,{size:24,className:"text-dark-400"})}),e.jsx("p",{className:"text-dark-400 text-sm mb-1",children:l?"No se encontraron contactos":"Sin contactos a√∫n"}),e.jsx("p",{className:"text-dark-500 text-xs mb-4",children:l?"Intenta con otra b√∫squeda":"Agrega direcciones frecuentes"}),!l&&e.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-kairos-500/10 text-kairos-400 text-sm",children:[e.jsx(Ve,{size:14}),"Agregar contacto"]})]}):e.jsx("div",{className:"space-y-2",children:g.map((y,P)=>e.jsx(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:P*.03},className:"bg-white/[0.03] rounded-xl p-3 border border-white/5 hover:border-white/10 transition-colors group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-kairos-500/20 to-purple-500/20 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-sm font-bold text-kairos-400",children:y.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold text-sm text-white truncate",children:y.name})}),e.jsx("span",{className:"text-xs text-dark-400 font-mono",children:ge(y.address,8)}),y.notes&&e.jsx("p",{className:"text-[10px] text-dark-500 mt-1 truncate",children:y.notes})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>b(y),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Copiar direcci√≥n",children:m===y.id?e.jsx(Se,{size:14,className:"text-green-400"}):e.jsx(We,{size:14,className:"text-dark-400"})}),e.jsx("button",{onClick:()=>N(y),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Enviar",children:e.jsx(Me,{size:14,className:"text-blue-400"})}),e.jsx("button",{onClick:()=>B(y),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Editar",children:e.jsx(mr,{size:14,className:"text-dark-400"})}),e.jsx("button",{onClick:()=>F(y),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Eliminar",children:e.jsx(st,{size:14,className:"text-red-400/60"})})]})]})},y.id))})}),e.jsx(ue,{children:(i==="add"||i==="edit")&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("h2",{className:"font-bold text-white",children:i==="add"?"Nuevo contacto":"Editar contacto"}),e.jsx("button",{onClick:()=>c(null),className:"p-2 rounded-xl hover:bg-white/5",children:e.jsx(Te,{size:20,className:"text-dark-300"})})]}),e.jsxs("div",{className:"px-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1.5 block",children:"Nombre"}),e.jsx("input",{type:"text",value:p.name,onChange:y=>f({...p,name:y.target.value}),placeholder:"ej: Binance, Amigo, Exchange",className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1.5 block",children:"Direcci√≥n"}),e.jsx("input",{type:"text",value:p.address,onChange:y=>f({...p,address:y.target.value}),placeholder:"0x...",className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50 font-mono text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1.5 block",children:"Notas (opcional)"}),e.jsx("textarea",{value:p.notes,onChange:y=>f({...p,notes:y.target.value}),placeholder:"Notas adicionales...",rows:2,className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50 resize-none"})]}),E&&e.jsx("p",{className:"text-red-400 text-xs",children:E}),e.jsx("button",{onClick:k,className:"w-full py-3 rounded-xl bg-gradient-to-r from-kairos-500 to-kairos-400 text-dark-950 font-bold text-sm",children:i==="add"?"Agregar":"Guardar"})]})]})}),e.jsx(ue,{children:i==="delete"&&n&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/80 backdrop-blur-xl flex items-center justify-center px-5",children:e.jsxs(O.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-sm bg-dark-800 rounded-2xl p-6 border border-white/10",children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/10 flex items-center justify-center mx-auto mb-3",children:e.jsx(st,{size:24,className:"text-red-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:"¬øEliminar contacto?"}),e.jsxs("p",{className:"text-xs text-dark-400 mt-1",children:['Se eliminar√° "',n.name,'" permanentemente.']})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(null),className:"flex-1 py-3 rounded-xl bg-white/[0.06] text-dark-300 font-medium text-sm",children:"Cancelar"}),e.jsx("button",{onClick:w,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold text-sm",children:"Eliminar"})]})]})})})]})}const gx="https://api.coingecko.com/api/v3",ti={56:"binance-smart-chain",1:"ethereum",137:"polygon-pos",42161:"arbitrum-one",43114:"avalanche",8453:"base"},si={56:"binancecoin",1:"ethereum",137:"matic-network",42161:"ethereum",43114:"avalanche-2",8453:"ethereum"},Ss={},Fx=300*1e3;async function ai(t,a=7){const s=si[t];if(!s)return null;const x=`native_${t}_${a}`,r=Ss[x];if(r&&Date.now()-r.timestamp<Fx)return r.data;try{const l=await fetch(`${gx}/coins/${s}/market_chart?vs_currency=usd&days=${a}`,{headers:{Accept:"application/json"}});if(!l.ok)throw new Error("API error");const m=(await l.json()).prices||[],o=m.length>1?(m[m.length-1][1]-m[0][1])/m[0][1]*100:0,i={prices:m,change24h:o};return Ss[x]={data:i,timestamp:Date.now()},i}catch{return null}}async function xi(t,a,s=7){const x=ti[t];if(!x||!a)return null;const r=`${a.toLowerCase()}_${t}_${s}`,l=Ss[r];if(l&&Date.now()-l.timestamp<Fx)return l.data;try{const u=await fetch(`${gx}/coins/${x}/contract/${a}/market_chart/?vs_currency=usd&days=${s}`,{headers:{Accept:"application/json"}});if(!u.ok)throw new Error("API error");const o=(await u.json()).prices||[],i=o.length>1?(o[o.length-1][1]-o[0][1])/o[0][1]*100:0,c={prices:o,change24h:i};return Ss[r]={data:c,timestamp:Date.now()},c}catch{return null}}function ri(t,a=50){if(!t||t.length<2)return null;const s=Math.max(1,Math.floor(t.length/a)),x=[];for(let m=0;m<t.length;m+=s)x.push(t[m][1]);x[x.length-1]!==t[t.length-1][1]&&x.push(t[t.length-1][1]);const r=Math.min(...x),l=Math.max(...x),u=l-r||1;return{points:x.map(m=>(m-r)/u),min:r,max:l,current:x[x.length-1],values:x}}function ni({points:t,width:a=340,height:s=180,color:x,negative:r}){if(!t||t.length<2)return null;const l=r?"#ef4444":x,u=`chart_${Math.random().toString(36).slice(2,8)}`,m=a/(t.length-1),o=4,i=s-o*2,c=t.map((p,f)=>({x:f*m,y:o+i*(1-p)}));let n=`M ${c[0].x} ${c[0].y}`;for(let p=1;p<c.length;p++){const f=c[p-1],E=c[p],h=(f.x+E.x)/2;n+=` Q ${h} ${f.y} ${E.x} ${E.y}`}const d=n+` L ${c[c.length-1].x} ${s} L 0 ${s} Z`;return e.jsxs("svg",{width:"100%",viewBox:`0 0 ${a} ${s}`,preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:u,x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:l,stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:l,stopOpacity:"0"})]})}),e.jsx("path",{d,fill:`url(#${u})`}),e.jsx("path",{d:n,fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}const oi=[{label:"24H",days:1},{label:"7D",days:7},{label:"30D",days:30},{label:"1A",days:365}];function ii(){const{activeChainId:t,navigate:a,goBack:s,nativePrice:x,tokenPrices:r,tokenDetailData:l,showToast:u}=se(),m=q[t],[o,i]=C.useState(l||null),[c,n]=C.useState(7),[d,p]=C.useState(null),[f,E]=C.useState(null),[h,g]=C.useState(!0);if(C.useEffect(()=>{l&&!o&&i(l)},[l]),C.useEffect(()=>{if(!o)return;(async()=>{g(!0);try{let N;if(o.isNative?N=await ai(t,c):N=await xi(t,o.address,c),N){p(N);const v=ri(N.prices,80);E(v)}}catch{}g(!1)})()},[o,c,t]),!o)return e.jsx("div",{className:"screen-container items-center justify-center",children:e.jsx("p",{className:"text-dark-400",children:"Cargando..."})});const D=o.isNative?x:r[o.address?.toLowerCase()]?.usd||0,A=parseFloat(o.balance||"0")*D,B=d?.change24h||0,F=B<0,k=o.address?.toLowerCase()===Ze.address.toLowerCase();return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:s,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{token:o,chainId:t,size:28}),e.jsx("span",{className:"font-bold text-white",children:o.symbol}),k&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-kairos-500/20 text-kairos-400",children:"STABLE"})]}),e.jsx("a",{href:o.isNative?m.blockExplorerUrl:`${m.blockExplorerUrl}/token/${o.address}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 -mr-2 rounded-xl hover:bg-white/5",children:e.jsx(Oe,{size:18,className:"text-dark-400"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"px-5 mb-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:D>0?we(D):"‚Äî"}),B!==0&&e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${F?"text-red-400":"text-green-400"}`,children:[F?e.jsx(Rt,{size:14}):e.jsx($e,{size:14}),e.jsxs("span",{className:"text-sm font-medium",children:[F?"":"+",B.toFixed(2),"%"]}),e.jsxs("span",{className:"text-xs text-dark-500",children:["(",c===1?"24h":c===7?"7d":c===30?"30d":"1a",")"]})]})]}),e.jsx("div",{className:"px-5 mb-4",children:e.jsx("div",{className:"h-44 bg-white/[0.02] rounded-2xl overflow-hidden flex items-end border border-white/5",children:h?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(O.div,{animate:{opacity:[.3,1,.3]},transition:{duration:1.5,repeat:1/0},className:"text-dark-500 text-sm",children:"Cargando gr√°fica..."})}):f?e.jsx(ni,{points:f.points,color:"#d4a017",negative:F,height:176}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("p",{className:"text-dark-500 text-xs",children:"Sin datos de precio"})})})}),e.jsx("div",{className:"px-5 mb-6",children:e.jsx("div",{className:"flex gap-2",children:oi.map(w=>e.jsx("button",{onClick:()=>n(w.days),className:`flex-1 py-2 rounded-xl text-xs font-medium transition-all ${c===w.days?"bg-kairos-500/20 text-kairos-400 border border-kairos-500/30":"bg-white/[0.04] text-dark-400 border border-transparent"}`,children:w.label},w.days))})}),e.jsxs("div",{className:"px-5 mb-6",children:[e.jsx("h3",{className:"text-xs text-dark-400 mb-2 uppercase tracking-wider",children:"Tu saldo"}),e.jsx("div",{className:"bg-white/[0.03] rounded-xl p-4 border border-white/5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xl font-bold text-white",children:[nt(o.balance||"0")," ",e.jsx("span",{className:"text-dark-400",children:o.symbol})]}),e.jsx("p",{className:"text-sm text-dark-400",children:A>0?we(A):"‚Äî"})]}),e.jsx(Ke,{token:o,chainId:t,size:48})]})})]}),f&&e.jsxs("div",{className:"px-5 mb-6",children:[e.jsx("h3",{className:"text-xs text-dark-400 mb-2 uppercase tracking-wider",children:"Estad√≠sticas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-white/[0.03] rounded-xl p-3 border border-white/5",children:[e.jsx("p",{className:"text-[10px] text-dark-500 mb-1",children:"M√≠nimo"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:we(f.min)})]}),e.jsxs("div",{className:"bg-white/[0.03] rounded-xl p-3 border border-white/5",children:[e.jsx("p",{className:"text-[10px] text-dark-500 mb-1",children:"M√°ximo"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:we(f.max)})]})]})]}),e.jsx("div",{className:"px-5 mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{try{nx({symbol:o.symbol,targetPrice:D,condition:"above",tokenAddress:o.address||null,chainId:t}),u(`üîî Alerta creada para ${o.symbol}`,"success")}catch(w){u(w.message||"Error creando alerta","error")}},className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl bg-kairos-500/10 text-kairos-400 text-xs font-medium border border-kairos-500/20",children:[e.jsx(Je,{size:14})," Crear Alerta"]}),!o.isNative&&e.jsxs("button",{onClick:()=>a("tokenaudit"),className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl bg-red-500/10 text-red-400 text-xs font-medium border border-red-500/20",children:[e.jsx(ke,{size:14})," Auditar Token"]})]})}),e.jsx("div",{className:"px-5 mb-8",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>a("send"),className:"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl bg-blue-500/10 text-blue-400 text-sm font-medium",children:[e.jsx(Me,{size:16}),"Enviar"]}),e.jsxs("button",{onClick:()=>a("receive"),className:"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl bg-green-500/10 text-green-400 text-sm font-medium",children:[e.jsx(Mt,{size:16}),"Recibir"]}),e.jsxs("button",{onClick:()=>a("swap"),className:"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl bg-purple-500/10 text-purple-400 text-sm font-medium",children:[e.jsx(ks,{size:16}),"Swap"]})]})})]})]})}const ci="2b0ddf4a2e6e6a53f52d2bcb9a0c2e0f";let Et=null,Ca=null,h0=null,f0=null,C0=null;async function lt(){if(Et)return Et;try{return Ca=new Ir({projectId:ci}),Et=await Rr.init({core:Ca,metadata:{name:"Kairos Wallet",description:"Billetera DeFi multi-chain",url:"https://kairos-wallet.netlify.app",icons:["https://kairos-wallet.netlify.app/icons/logo-192.png"]}}),Et.on("session_proposal",t=>{h0&&h0(t)}),Et.on("session_request",t=>{f0&&f0(t)}),Et.on("session_delete",t=>{C0&&C0(t)}),Et}catch(t){throw console.error("WalletConnect init error:",t),t}}function li({onProposal:t,onRequest:a,onDelete:s}){h0=t,f0=a,C0=s}async function di(t){await(await lt()).pair({uri:t})}async function mi(t,a,s){const x=await lt(),r=s.map(c=>`eip155:${c}`),l=s.map(c=>`eip155:${c}:${a}`),u=["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","eth_signTypedData_v4"],m=["chainChanged","accountsChanged"],o=Lr({proposal:t.params,supportedNamespaces:{eip155:{chains:r,methods:u,events:m,accounts:l}}});return await x.approveSession({id:t.id,namespaces:o})}async function ui(t){await(await lt()).rejectSession({id:t,reason:Is("USER_REJECTED")})}async function Ei(t,a){const s=await lt(),{topic:x,id:r,params:l}=t,{request:u,chainId:m}=l,o=parseInt(m.split(":")[1]),i=re(o),c=new Pe(a,i);let n;try{switch(u.method){case"personal_sign":{const d=u.params[0];n=await c.signMessage(Pr(d)?Y0(d):d);break}case"eth_sign":{const d=u.params[1];n=await c.signMessage(Y0(d));break}case"eth_signTypedData":case"eth_signTypedData_v4":{const d=JSON.parse(u.params[1]),{domain:p,types:f,message:E}=d,h={...f};delete h.EIP712Domain,n=await c.signTypedData(p,h,E);break}case"eth_sendTransaction":{const d=u.params[0];n=(await c.sendTransaction({to:d.to,value:d.value||"0x0",data:d.data||"0x",gasLimit:d.gas||d.gasLimit})).hash;break}case"eth_signTransaction":{const d=u.params[0];n=await c.signTransaction({to:d.to,value:d.value||"0x0",data:d.data||"0x",gasLimit:d.gas||d.gasLimit});break}default:throw new Error(`M√©todo no soportado: ${u.method}`)}return await s.respondSessionRequest({topic:x,response:{id:r,jsonrpc:"2.0",result:n}}),{success:!0,result:n}}catch(d){return await s.respondSessionRequest({topic:x,response:{id:r,jsonrpc:"2.0",error:Is("USER_REJECTED")}}),{success:!1,error:d.message}}}async function pi(t,a){await(await lt()).respondSessionRequest({topic:t,response:{id:a,jsonrpc:"2.0",error:Is("USER_REJECTED")}})}async function hi(){const t=await lt();return Object.values(t.getActiveSessions())}async function fi(t){await(await lt()).disconnectSession({topic:t,reason:Is("USER_DISCONNECTED")})}function Ci(){const{activeAddress:t,activeChainId:a,goBack:s,showToast:x,navigate:r}=se(),[l,u]=C.useState([]),[m,o]=C.useState(""),[i,c]=C.useState(!1),[n,d]=C.useState(!1),[p,f]=C.useState(""),[E,h]=C.useState(!1),[g,D]=C.useState(null),[b,A]=C.useState(null),[B,F]=C.useState(""),[k,w]=C.useState(""),[N,v]=C.useState(!1);C.useEffect(()=>{(async()=>{try{li({onProposal:I=>D(I),onRequest:I=>A(I),onDelete:()=>j()}),await lt(),d(!0),j()}catch(I){f(I.message||"Error inicializando WalletConnect")}})()},[]);const j=async()=>{try{const T=await hi();u(T)}catch{}},y=async()=>{if(m.trim()){c(!0);try{await di(m.trim()),o(""),x("Conectando con dApp...","info")}catch(T){x("Error: "+(T.message||"URI inv√°lido"),"error")}c(!1)}},P=async()=>{if(g){v(!0);try{await mi(g,t,at),x("dApp conectada","success"),D(null),j()}catch(T){x("Error: "+T.message,"error")}v(!1)}},R=async()=>{if(g){try{await ui(g.id)}catch{}D(null)}},M=async()=>{if(!(!b||!B)){w(""),v(!0);try{const T=await ve(B),S=[...T.accounts||[],...T.importedAccounts||[]].find(z=>z.address.toLowerCase()===t.toLowerCase());if(!S)throw new Error("Cuenta no encontrada");const G=await Ei(b,S.privateKey);G.success?x("Solicitud aprobada","success"):x("Error: "+G.error,"error"),A(null),F("")}catch(T){T.message==="Contrase√±a incorrecta"?w("Contrase√±a incorrecta"):(x("Error: "+T.message,"error"),A(null),F(""))}v(!1)}},K=async()=>{if(b){try{await pi(b.topic,b.id)}catch{}A(null),F("")}},_=async T=>{try{await fi(T),x("dApp desconectada","success"),j()}catch{x("Error desconectando","error")}},H=T=>{if(!T)return"";const I=T.params?.request?.method||"";return{personal_sign:"Firmar mensaje",eth_sign:"Firmar mensaje",eth_signTypedData:"Firmar datos tipados",eth_signTypedData_v4:"Firmar datos tipados (v4)",eth_sendTransaction:"Enviar transacci√≥n",eth_signTransaction:"Firmar transacci√≥n"}[I]||I};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:s,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsx("h1",{className:"font-bold text-white",children:"WalletConnect"}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[p&&e.jsxs("div",{className:"mb-4 flex items-center gap-2 px-3 py-2 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsx(ce,{size:14,className:"text-red-400 shrink-0"}),e.jsx("span",{className:"text-xs text-red-300",children:p})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(o0,{size:16,className:"text-kairos-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Conectar dApp"})]}),e.jsx("p",{className:"text-xs text-dark-400 mb-3",children:"Pega el URI de WalletConnect de cualquier dApp (OpenSea, Uniswap, Aave, etc.)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:T=>o(T.target.value),placeholder:"wc:...",className:"flex-1 bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50 font-mono text-xs min-w-0",disabled:!n}),e.jsx("button",{onClick:()=>h(!0),className:"px-3 py-3 rounded-xl bg-white/[0.06] hover:bg-white/10 transition-colors shrink-0",children:e.jsx(Sa,{size:16,className:"text-kairos-400"})}),e.jsx("button",{onClick:y,disabled:!m.trim()||i||!n,className:`px-4 py-3 rounded-xl font-bold text-sm shrink-0 transition-all ${m.trim()&&n?"bg-kairos-500 text-dark-950":"bg-white/[0.06] text-dark-500 cursor-not-allowed"}`,children:i?e.jsx(je,{size:16,className:"animate-spin"}):"Conectar"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ze,{size:16,className:"text-kairos-400"}),e.jsxs("span",{className:"text-sm font-semibold text-white",children:["Sesiones activas (",l.length,")"]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:e.jsx(ur,{size:24,className:"text-dark-400"})}),e.jsx("p",{className:"text-dark-400 text-sm mb-1",children:"Sin conexiones"}),e.jsx("p",{className:"text-dark-500 text-xs",children:"Conecta una dApp usando el URI de arriba"})]}):e.jsx("div",{className:"space-y-2",children:l.map(T=>{const I=T.peer?.metadata||{};return e.jsx("div",{className:"bg-white/[0.03] rounded-xl p-3 border border-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[I.icons?.[0]?e.jsx("img",{src:I.icons[0],alt:"",className:"w-10 h-10 rounded-xl bg-white/5",onError:S=>{S.target.style.display="none"}}):e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(ze,{size:20,className:"text-dark-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm text-white truncate",children:I.name||"dApp"}),e.jsx("p",{className:"text-[10px] text-dark-500 truncate",children:I.url||""})]}),e.jsx("button",{onClick:()=>_(T.topic),className:"p-2 rounded-lg hover:bg-red-500/10 transition-colors",title:"Desconectar",children:e.jsx(Er,{size:16,className:"text-red-400"})})]})},T.topic)})})]}),e.jsxs("div",{className:"mt-6 flex items-start gap-2 px-3 py-2 rounded-xl bg-kairos-500/5 border border-kairos-500/10",children:[e.jsx(ke,{size:14,className:"text-kairos-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-[10px] text-dark-400",children:"Siempre verifica la URL y nombre de la dApp antes de aprobar. Kairos Wallet te pedir√° contrase√±a para cada firma."})]})]}),e.jsx(ue,{children:g&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl flex items-center justify-center px-5",children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm bg-dark-800 rounded-2xl p-6 border border-white/10",children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-kairos-500/10 flex items-center justify-center mx-auto mb-3",children:e.jsx(o0,{size:24,className:"text-kairos-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:"Solicitud de conexi√≥n"}),e.jsxs("p",{className:"text-xs text-dark-400 mt-1",children:[g.params?.proposer?.metadata?.name||"dApp"," quiere conectarse"]}),e.jsx("p",{className:"text-[10px] text-dark-500 mt-1",children:g.params?.proposer?.metadata?.url||""})]}),e.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-white/[0.03] border border-white/5",children:[e.jsx("p",{className:"text-[10px] text-dark-400 mb-2",children:"Permisos solicitados:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{className:"text-xs text-dark-300 flex items-center gap-1",children:[e.jsx(_e,{size:10,className:"text-green-400"})," Ver tu direcci√≥n"]}),e.jsxs("li",{className:"text-xs text-dark-300 flex items-center gap-1",children:[e.jsx(_e,{size:10,className:"text-green-400"})," Solicitar firmas"]}),e.jsxs("li",{className:"text-xs text-dark-300 flex items-center gap-1",children:[e.jsx(_e,{size:10,className:"text-green-400"})," Enviar transacciones"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:R,className:"flex-1 py-3 rounded-xl bg-white/[0.06] text-dark-300 font-medium text-sm",children:"Rechazar"}),e.jsx("button",{onClick:P,disabled:N,className:"flex-1 py-3 rounded-xl bg-kairos-500 text-dark-950 font-bold text-sm flex items-center justify-center",children:N?e.jsx(je,{size:16,className:"animate-spin"}):"Aprobar"})]})]})})}),e.jsx(ue,{children:b&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl flex items-center justify-center px-5",children:e.jsxs(O.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm bg-dark-800 rounded-2xl p-6 border border-white/10",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-orange-500/10 flex items-center justify-center mx-auto mb-3",children:e.jsx(ot,{size:24,className:"text-orange-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:H(b)}),e.jsx("p",{className:"text-xs text-dark-400 mt-1",children:"Confirma con tu contrase√±a para aprobar"})]}),e.jsx("input",{type:"password",value:B,onChange:T=>{F(T.target.value),w("")},onKeyDown:T=>T.key==="Enter"&&B&&M(),placeholder:"Contrase√±a de la wallet",className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50 mb-2",autoFocus:!0}),k&&e.jsx("p",{className:"text-red-400 text-xs mb-2",children:k}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:K,className:"flex-1 py-3 rounded-xl bg-white/[0.06] text-dark-300 font-medium text-sm",children:"Rechazar"}),e.jsx("button",{onClick:M,disabled:!B||N,className:`flex-1 py-3 rounded-xl font-bold text-sm flex items-center justify-center ${B?"bg-kairos-500 text-dark-950":"bg-white/[0.06] text-dark-500 cursor-not-allowed"}`,children:N?e.jsx(je,{size:16,className:"animate-spin"}):"Aprobar"})]})]})})}),e.jsx(ox,{isOpen:E,onClose:()=>h(!1),onScan:T=>{T.startsWith("wc:")?(o(T),x("URI de WalletConnect escaneado","success"),setTimeout(()=>y(),300)):x("QR no es un URI de WalletConnect","error")},title:"Escanear WalletConnect QR"})]})}const kx=["function tokenURI(uint256 tokenId) view returns (string)","function ownerOf(uint256 tokenId) view returns (address)","function name() view returns (string)","function symbol() view returns (string)","function balanceOf(address owner) view returns (uint256)","function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],Dx=["function uri(uint256 id) view returns (string)","function balanceOf(address account, uint256 id) view returns (uint256)","function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],Kt="CMXM58DR5E27T339UMDJAHPSZZA59S5Q1C",Ba={56:Kt,1:Kt,137:Kt,42161:Kt,8453:Kt},B0={},Bi=120*1e3;async function bi(t,a){const s=`${t}_${a.toLowerCase()}`,x=B0[s];if(x&&Date.now()-x.timestamp<Bi)return x.data;const r=q[t];if(!r?.blockExplorerApiUrl)return[];const l=[];try{const m=`${r.blockExplorerApiUrl}?module=account&action=tokennfttx&address=${a}&startblock=0&endblock=99999999&sort=desc&apikey=${Ba[t]||""}`,i=await(await fetch(m)).json();if(i.status==="1"&&i.result){const c=new Map;for(const d of i.result){const p=`${d.contractAddress}_${d.tokenID}`;d.to.toLowerCase()===a.toLowerCase()?c.has(p)||c.set(p,{contractAddress:d.contractAddress,tokenId:d.tokenID,name:d.tokenName||"NFT",symbol:d.tokenSymbol||"NFT",blockNumber:parseInt(d.blockNumber)}):c.delete(p)}const n=Array.from(c.values()).slice(0,20);for(const d of n)try{const p=await Ai(t,d.contractAddress,d.tokenId);l.push({...d,image:p?.image||null,nftName:p?.name||`${d.name} #${d.tokenId}`,description:p?.description||"",attributes:p?.attributes||[]})}catch{l.push({...d,image:null,nftName:`${d.name} #${d.tokenId}`,description:"",attributes:[]})}}}catch(m){console.error("Error fetching NFTs:",m)}try{const m=`${r.blockExplorerApiUrl}?module=account&action=token1155tx&address=${a}&startblock=0&endblock=99999999&sort=desc&apikey=${Ba[t]||""}`,i=await(await fetch(m)).json();if(i.status==="1"&&i.result){const c=new Map;for(const d of i.result){const p=`${d.contractAddress}_${d.tokenID}`;d.to.toLowerCase()===a.toLowerCase()?c.has(p)||c.set(p,{contractAddress:d.contractAddress,tokenId:d.tokenID,name:d.tokenName||"ERC-1155",symbol:d.tokenSymbol||"ERC-1155",blockNumber:parseInt(d.blockNumber),tokenType:"ERC-1155",tokenValue:d.tokenValue||"1"}):c.delete(p)}const n=Array.from(c.values()).slice(0,15);for(const d of n)try{const p=re(t),E=await new oe(d.contractAddress,Dx,p).balanceOf(a,d.tokenId);if(E===0n)continue;const h=await gi(t,d.contractAddress,d.tokenId);l.push({...d,balance:E.toString(),image:h?.image||null,nftName:h?.name||`${d.name} #${d.tokenId}`,description:h?.description||"",attributes:h?.attributes||[]})}catch{l.push({...d,balance:d.tokenValue,image:null,nftName:`${d.name} #${d.tokenId}`,description:"",attributes:[]})}}}catch(m){console.error("Error fetching ERC-1155 NFTs:",m)}const u=l;return B0[s]={data:u,timestamp:Date.now()},u}async function Ai(t,a,s){try{const x=re(t);let l=await new oe(a,kx,x).tokenURI(s);return await wx(l)}catch{return null}}async function gi(t,a,s){try{const x=re(t);let l=await new oe(a,Dx,x).uri(s);return l=l.replace("{id}",BigInt(s).toString(16).padStart(64,"0")),await wx(l)}catch{return null}}async function wx(t){if(!t)return null;try{if(t.startsWith("ipfs://")&&(t=t.replace("ipfs://","https://ipfs.io/ipfs/")),t.startsWith("data:application/json;base64,")){const x=atob(t.split(",")[1]);return JSON.parse(x)}if(t.startsWith("data:application/json")){const x=t.split(",").slice(1).join(",");return JSON.parse(decodeURIComponent(x))}const s=await(await fetch(t,{signal:AbortSignal.timeout(1e4)})).json();return s.image?.startsWith("ipfs://")&&(s.image=s.image.replace("ipfs://","https://ipfs.io/ipfs/")),s}catch{return null}}async function Fi(t,a,s,x,r){const l=re(t),u=new Pe(a,l),m=new oe(s,kx,u);try{return{hash:(await m["safeTransferFrom(address,address,uint256)"](u.address,r,x)).hash,status:"pending"}}catch{return{hash:(await m.transferFrom(u.address,r,x)).hash,status:"pending"}}}function ki(t,a){const s=`${t}_${a.toLowerCase()}`;delete B0[s]}function Di(){const{activeAddress:t,activeChainId:a,goBack:s}=se(),x=q[a],[r,l]=C.useState([]),[u,m]=C.useState(!0),[o,i]=C.useState(null),c=async()=>{m(!0);try{const d=await bi(a,t);l(d)}catch{}m(!1)};C.useEffect(()=>{c()},[a,t]);const n=()=>{ki(a,t),c()};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:s,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsx("h1",{className:"font-bold text-white",children:"NFTs"}),e.jsx("button",{onClick:n,className:"p-2 -mr-2 rounded-xl hover:bg-white/5",children:e.jsx(Ge,{size:18,className:`text-dark-300 ${u?"animate-spin":""}`})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[u&&r.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(je,{size:32,className:"text-kairos-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"Buscando tus NFTs..."}),e.jsx("p",{className:"text-dark-500 text-[10px] mt-1",children:"Esto puede tomar unos segundos"})]}),!u&&r.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:e.jsx(Vt,{size:24,className:"text-dark-400"})}),e.jsx("p",{className:"text-dark-400 text-sm mb-1",children:"No se encontraron NFTs"}),e.jsxs("p",{className:"text-dark-500 text-xs",children:["Tus NFTs ERC-721 en ",x.shortName," aparecer√°n aqu√≠"]})]}),r.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-dark-400 mb-3",children:[r.length," NFT",r.length!==1?"s":""," en ",x.shortName]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.map((d,p)=>e.jsxs(O.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:p*.05},onClick:()=>i(d),className:"bg-white/[0.03] rounded-2xl overflow-hidden border border-white/5 hover:border-kairos-500/30 transition-colors text-left",children:[e.jsxs("div",{className:"aspect-square bg-white/[0.02] relative overflow-hidden",children:[d.image?e.jsx("img",{src:d.image,alt:d.nftName,className:"w-full h-full object-cover",loading:"lazy",onError:f=>{f.target.style.display="none",f.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`absolute inset-0 items-center justify-center bg-gradient-to-br from-kairos-500/10 to-purple-500/10 ${d.image?"hidden":"flex"}`,children:e.jsx(Vt,{size:32,className:"text-dark-500"})})]}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("p",{className:"text-xs font-semibold text-white truncate",children:d.nftName}),e.jsx("p",{className:"text-[10px] text-dark-500 truncate",children:d.name})]})]},`${d.contractAddress}_${d.tokenId}`))})]})]}),e.jsx(ue,{children:o&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:()=>i(null),className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsx("h2",{className:"font-bold text-white text-sm truncate max-w-[200px]",children:o.nftName}),e.jsx("a",{href:`${x.blockExplorerUrl}/token/${o.contractAddress}?a=${o.tokenId}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 -mr-2 rounded-xl hover:bg-white/5",children:e.jsx(Oe,{size:18,className:"text-dark-400"})})]}),e.jsxs("div",{className:"px-5 pb-8",children:[e.jsx("div",{className:"rounded-2xl overflow-hidden bg-white/[0.02] mb-4 border border-white/5",children:o.image?e.jsx("img",{src:o.image,alt:o.nftName,className:"w-full object-contain max-h-80"}):e.jsx("div",{className:"aspect-square flex items-center justify-center bg-gradient-to-br from-kairos-500/10 to-purple-500/10",children:e.jsx(Vt,{size:64,className:"text-dark-500"})})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:o.nftName}),e.jsxs("p",{className:"text-xs text-dark-400 mb-3",children:[o.name," (",o.symbol,")"]}),o.description&&e.jsx("p",{className:"text-xs text-dark-300 mb-4 leading-relaxed",children:o.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white/[0.03] rounded-xl p-3 border border-white/5",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Contrato"}),e.jsx("span",{className:"text-xs text-dark-200 font-mono",children:ge(o.contractAddress,6)})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white/[0.03] rounded-xl p-3 border border-white/5",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Token ID"}),e.jsxs("span",{className:"text-xs text-dark-200",children:["#",o.tokenId]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white/[0.03] rounded-xl p-3 border border-white/5",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"Red"}),e.jsxs("span",{className:"text-xs text-dark-200",children:[x.icon," ",x.name]})]})]}),o.attributes?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-xs text-dark-400 uppercase tracking-wider mb-2",children:"Atributos"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:o.attributes.map((d,p)=>e.jsxs("div",{className:"bg-white/[0.03] rounded-xl p-2.5 border border-white/5 text-center",children:[e.jsx("p",{className:"text-[10px] text-dark-500 uppercase",children:d.trait_type}),e.jsx("p",{className:"text-xs font-semibold text-white truncate",children:d.value})]},p))})]}),e.jsx(wi,{nft:o,chainId:a,chain:x,onSuccess:()=>{i(null),n()}})]})]})})]})}function wi({nft:t,chainId:a,chain:s,onSuccess:x}){const{vault:r,showToast:l}=se(),[u,m]=C.useState(!1),[o,i]=C.useState(""),[c,n]=C.useState(!1),[d,p]=C.useState(null),[f,E]=C.useState(""),h=C.useCallback(async()=>{if(E(""),!o||!Tr(o)){E("Direcci√≥n inv√°lida");return}n(!0);try{const g=await $a(r,a),D=await Fi(a,g.privateKey,t.contractAddress,t.tokenId,o);p(D.hash),l("NFT enviado exitosamente","success")}catch(g){E(g.reason||g.message||"Error al enviar NFT"),l("Error al enviar NFT","error")}finally{n(!1)}},[o,r,a,t,l]);return d?e.jsxs("div",{className:"rounded-2xl bg-green-500/5 border border-green-500/10 p-4 text-center",children:[e.jsx(Se,{size:28,className:"text-green-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-bold text-white mb-1",children:"¬°NFT Enviado!"}),e.jsxs("a",{href:`${s.blockExplorerUrl}/tx/${d}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-kairos-400 hover:underline",children:["Ver en Explorer ",e.jsx(Oe,{size:10})]}),e.jsx("button",{onClick:x,className:"block w-full mt-3 py-2.5 rounded-xl text-sm font-bold text-white bg-kairos-500 hover:bg-kairos-600 transition-colors",children:"Cerrar"})]}):u?e.jsxs("div",{className:"rounded-2xl bg-white/[0.02] border border-white/5 p-4 space-y-3",children:[e.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2",children:[e.jsx(Me,{size:14,className:"text-kairos-400"}),"Enviar ",t.nftName]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-dark-400 uppercase tracking-wider mb-1 block",children:"Direcci√≥n destino"}),e.jsx("input",{type:"text",value:o,onChange:g=>i(g.target.value),placeholder:"0x...",className:"w-full px-3 py-2.5 rounded-xl text-sm font-mono bg-white/[0.04] border border-white/[0.08] outline-none focus:border-kairos-500/30 text-white placeholder:text-dark-500"})]}),f&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-red-500/5 border border-red-500/10",children:[e.jsx(ce,{size:12,className:"text-red-400"}),e.jsx("span",{className:"text-xs text-red-400",children:f})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-2.5 rounded-xl text-sm font-bold text-dark-400 bg-white/[0.04] hover:bg-white/[0.06] transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:h,disabled:c,className:"flex-1 py-2.5 rounded-xl text-sm font-bold text-white flex items-center justify-center gap-2 transition-all hover:opacity-90 disabled:opacity-50",style:{background:"linear-gradient(135deg, #3B82F6, #2563EB)"},children:[c?e.jsx(je,{size:14,className:"animate-spin"}):e.jsx(Me,{size:14}),c?"Enviando...":"Enviar"]})]})]}):e.jsxs("button",{onClick:()=>m(!0),className:"w-full py-3 rounded-xl text-sm font-bold text-white flex items-center justify-center gap-2 transition-all hover:opacity-90",style:{background:"linear-gradient(135deg, #3B82F6, #2563EB)"},children:[e.jsx(Me,{size:16}),"Enviar NFT"]})}const vi=[{id:"all",label:"Todos",icon:pr},{id:"defi",label:"DeFi",icon:$e},{id:"dex",label:"DEX",icon:hr},{id:"nft",label:"NFT",icon:Vt},{id:"earn",label:"Earn",icon:Ds},{id:"gaming",label:"Gaming",icon:fr}],yi=[{name:"PancakeSwap",url:"https://pancakeswap.finance",icon:"ü•û",category:"dex",chains:[56,1,42161,8453],description:"DEX l√≠der en BSC. Swap, staking y farming."},{name:"Uniswap",url:"https://app.uniswap.org",icon:"ü¶Ñ",category:"dex",chains:[1,137,42161,8453],description:"El DEX m√°s popular en Ethereum."},{name:"SushiSwap",url:"https://www.sushi.com/swap",icon:"üç£",category:"dex",chains:[1,137,42161,43114],description:"Multi-chain DEX con farming."},{name:"1inch",url:"https://app.1inch.io",icon:"üê¥",category:"dex",chains:[1,56,137,42161,43114,8453],description:"Agregador DEX ‚Äî mejores precios."},{name:"Trader Joe",url:"https://traderjoexyz.com",icon:"üèîÔ∏è",category:"dex",chains:[43114,42161,56],description:"DEX principal de Avalanche."},{name:"Aerodrome",url:"https://aerodrome.finance",icon:"‚úàÔ∏è",category:"dex",chains:[8453],description:"DEX principal de Base."},{name:"Aave",url:"https://app.aave.com",icon:"üëª",category:"defi",chains:[1,137,42161,43114,8453],description:"Pr√©stamos y dep√≥sitos DeFi."},{name:"Compound",url:"https://app.compound.finance",icon:"üè¶",category:"defi",chains:[1,137,42161,8453],description:"Protocolo de pr√©stamos descentralizado."},{name:"Venus",url:"https://app.venus.io",icon:"üíõ",category:"defi",chains:[56],description:"Pr√©stamos y staking en BSC."},{name:"Lido",url:"https://lido.fi",icon:"üåä",category:"defi",chains:[1,137],description:"Liquid staking de ETH."},{name:"Beefy Finance",url:"https://app.beefy.com",icon:"üêÆ",category:"earn",chains:[56,137,42161,43114,8453],description:"Auto-compounder multi-chain."},{name:"Stargate",url:"https://stargate.finance",icon:"üåâ",category:"defi",chains:[1,56,137,42161,43114,8453],description:"Bridge cross-chain nativo."},{name:"OpenSea",url:"https://opensea.io",icon:"üåä",category:"nft",chains:[1,137,42161,43114,8453,56],description:"Marketplace NFT m√°s grande."},{name:"Blur",url:"https://blur.io",icon:"üü£",category:"nft",chains:[1],description:"Trading de NFTs para pros."},{name:"Element",url:"https://element.market",icon:"‚ö°",category:"nft",chains:[56,137,43114],description:"Marketplace NFT multi-chain."},{name:"Axie Infinity",url:"https://app.axieinfinity.com",icon:"üéÆ",category:"gaming",chains:[1],description:"Juego P2E de batallas."},{name:"The Sandbox",url:"https://www.sandbox.game",icon:"üèñÔ∏è",category:"gaming",chains:[1,137],description:"Metaverso y gaming P2E."},{name:"Gala Games",url:"https://app.gala.games",icon:"üé≤",category:"gaming",chains:[1],description:"Plataforma de juegos blockchain."},{name:"Pendle",url:"https://app.pendle.finance",icon:"üîÆ",category:"earn",chains:[1,42161],description:"Trading de yield tokenizado."},{name:"Convex Finance",url:"https://www.convexfinance.com",icon:"üéØ",category:"earn",chains:[1],description:"Boost para Curve LP."},{name:"Yearn Finance",url:"https://yearn.fi",icon:"üíé",category:"earn",chains:[1,137,42161],description:"Vaults automatizados de yield."}],vx="kairos_favorite_dapps";function yx(){try{return JSON.parse(localStorage.getItem(vx)||"[]")}catch{return[]}}function ji(t){const a=yx(),s=a.indexOf(t);return s>=0?a.splice(s,1):a.push(t),localStorage.setItem(vx,JSON.stringify(a)),[...a]}function Ni(){const{activeChainId:t,goBack:a,showToast:s}=se(),x=q[t],[r,l]=C.useState(""),[u,m]=C.useState("all"),[o,i]=C.useState(yx),[c,n]=C.useState(null),d=C.useMemo(()=>{let E=yi;if(u==="favorites"?E=E.filter(h=>o.includes(h.url)):u!=="all"&&(E=E.filter(h=>h.category===u)),E=E.filter(h=>h.chains.includes(t)),r.trim()){const h=r.toLowerCase();E=E.filter(g=>g.name.toLowerCase().includes(h)||g.description.toLowerCase().includes(h)||g.category.toLowerCase().includes(h))}return E.sort((h,g)=>{const D=o.includes(h.url)?0:1,b=o.includes(g.url)?0:1;return D-b}),E},[u,r,t,o]),p=E=>{window.open(E.url,"_blank","noopener,noreferrer")},f=E=>{const h=ji(E);i(h)};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:a,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsx("h1",{className:"font-bold text-white",children:"Explorar dApps"}),e.jsx("div",{className:"w-9"})]}),e.jsx("div",{className:"px-5 mb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(bt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-500"}),e.jsx("input",{type:"text",value:r,onChange:E=>l(E.target.value),placeholder:"Buscar dApps...",className:"input-field pl-9 pr-9 text-sm h-10"}),r&&e.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(Te,{size:14,className:"text-dark-500"})})]})}),e.jsx("div",{className:"px-5 mb-4 overflow-x-auto scrollbar-hide",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m("favorites"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${u==="favorites"?"bg-kairos-500/20 text-kairos-400 border border-kairos-500/30":"bg-white/[0.03] text-dark-400 border border-white/5"}`,children:[e.jsx(Xs,{size:12}),"Favoritos",o.length>0&&e.jsx("span",{className:"bg-kairos-500/30 text-kairos-300 text-[10px] px-1.5 rounded-full",children:o.length})]}),vi.map(E=>e.jsxs("button",{onClick:()=>m(E.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors ${u===E.id?"bg-kairos-500/20 text-kairos-400 border border-kairos-500/30":"bg-white/[0.03] text-dark-400 border border-white/5"}`,children:[e.jsx(E.icon,{size:12}),E.label]},E.id))]})}),e.jsx("div",{className:"px-5 mb-3",children:e.jsxs("p",{className:"text-[10px] text-dark-500",children:["Mostrando dApps compatibles con ",x.icon," ",x.shortName]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:d.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:e.jsx(ze,{size:24,className:"text-dark-400"})}),e.jsx("p",{className:"text-dark-400 text-sm mb-1",children:u==="favorites"?"Sin favoritos a√∫n":"No se encontraron dApps"}),e.jsx("p",{className:"text-dark-500 text-xs",children:u==="favorites"?"Marca dApps con ‚òÖ para acceder r√°pido":"Prueba con otra categor√≠a o busca algo diferente"})]}):e.jsx("div",{className:"space-y-2",children:d.map((E,h)=>{const g=o.includes(E.url);return e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:h*.03},className:"flex items-center gap-3 bg-white/[0.03] rounded-xl p-3 border border-white/5 hover:border-kairos-500/20 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/[0.05] flex items-center justify-center text-xl flex-shrink-0",children:E.icon}),e.jsxs("button",{onClick:()=>p(E),className:"flex-1 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:E.name}),g&&e.jsx(Xs,{size:10,className:"text-kairos-400 fill-kairos-400 flex-shrink-0"})]}),e.jsx("p",{className:"text-[10px] text-dark-400 truncate",children:E.description})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>f(E.url),className:"p-2 rounded-lg hover:bg-white/5",children:e.jsx(Xs,{size:14,className:g?"text-kairos-400 fill-kairos-400":"text-dark-500"})}),e.jsx("button",{onClick:()=>p(E),className:"p-2 rounded-lg hover:bg-white/5",children:e.jsx(Oe,{size:14,className:"text-dark-400"})})]})]},E.url)})})})]})}const Gt="https://kairos-api-u6k5.onrender.com",Si=[25,50,100,250,500,1e3],Pi=[25,50,100,250,500],Nt=10,hs=25e3;function Ti(){const{activeAddress:t,activeChainId:a,goBack:s,showToast:x}=se(),r=q[a],[l,u]=C.useState("buy"),[m,o]=C.useState(""),[i,c]=C.useState(!1),[n,d]=C.useState(""),[p,f]=C.useState("standard"),[E,h]=C.useState(null),[g,D]=C.useState(!1),[b,A]=C.useState(!1),[B,F]=C.useState(null),[k,w]=C.useState([]),[N,v]=C.useState(!1),j=C.useCallback(async()=>{if(t){h("loading");try{const I=await fetch(`${Gt}/api/redeem/account-status?wallet=${t}`),S=await I.json();if(!I.ok){h({onboarded:!1});return}h(S)}catch{h({onboarded:!1})}}},[t]);C.useEffect(()=>{l==="sell"&&t&&j()},[l,t,j]);const y=C.useCallback(async()=>{if(!t){x("Conecta tu wallet primero","error");return}D(!0);try{const I=await fetch(`${Gt}/api/redeem/onboard`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:t,returnUrl:`${window.location.origin}/#/buy?onboard=complete`,refreshUrl:`${window.location.origin}/#/buy?onboard=refresh`})}),S=await I.json();if(!I.ok)throw new Error(S.error||"Error al crear cuenta");S.onboardingUrl?(window.open(S.onboardingUrl,"_blank","noopener,noreferrer"),x("Completa tu verificaci√≥n en Stripe","info")):S.alreadyActive&&(x("Tu cuenta ya est√° activa","success"),j())}catch(I){x(I.message,"error")}finally{D(!1)}},[t,x,j]),P=C.useCallback(async()=>{const I=parseFloat(m);if(!I||I<10){x("M√≠nimo $10 USD","error");return}if(I>5e4){x("M√°ximo $50,000 USD","error");return}if(!t){x("Conecta tu wallet primero","error");return}c(!0);try{const S=await fetch(`${Gt}/api/stripe/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:t,amount:I,currency:"usd"})}),G=await S.json();if(!S.ok)throw new Error(G.error||G.message||"Error al crear checkout");if(G.checkoutUrl)window.open(G.checkoutUrl,"_blank","noopener,noreferrer"),x("Redirigiendo a Stripe...","info");else throw new Error("No se recibi√≥ URL de checkout")}catch(S){x(S.message,"error")}finally{c(!1)}},[m,t,x]),R=C.useCallback(async()=>{const I=parseFloat(n);if(!I||I<Nt){x(`M√≠nimo $${Nt} USD`,"error");return}if(I>hs){x(`M√°ximo $${hs.toLocaleString()} USD`,"error");return}if(!t){x("Conecta tu wallet primero","error");return}A(!0),F(null);try{const S=await fetch(`${Gt}/api/redeem/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:t,amount:I,payoutMethod:p})}),G=await S.json();if(!S.ok)throw new Error(G.error||"Error al redimir");F({success:!0,id:G.redemptionId,status:G.status,arrival:G.arrival,method:G.payoutMethod,net:G.net,fee:G.fee}),d(""),x("KAIROS quemados. Pago en camino.","success")}catch(S){F({success:!1,error:S.message}),x(S.message,"error")}finally{A(!1)}},[n,p,t,x]),M=C.useCallback(async()=>{if(t)try{const I=await fetch(`${Gt}/api/redeem/history?wallet=${t}`),S=await I.json();I.ok&&S.redemptions&&w(S.redemptions)}catch{}},[t]);C.useEffect(()=>{N&&t&&M()},[N,t,M]);const K=parseFloat(n)||0,_=p==="instant"?Math.max(K*.01,.5):0,H=Math.max(K-_,0),T=E&&E!=="loading"&&E.payoutsEnabled;return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 px-5 py-4",children:[e.jsx("button",{onClick:s,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsx("h1",{className:"font-bold text-white",children:l==="buy"?"Comprar KAIROS":"Vender KAIROS"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[e.jsxs("div",{className:"flex gap-1 p-1 rounded-xl bg-white/5 mb-4",children:[e.jsxs("button",{onClick:()=>{u("buy"),F(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-1.5 ${l==="buy"?"bg-green-500/15 text-green-400":"text-dark-400"}`,children:[e.jsx(r0,{size:14})," Comprar"]}),e.jsxs("button",{onClick:()=>{u("sell"),F(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-1.5 ${l==="sell"?"bg-orange-500/15 text-orange-400":"text-dark-400"}`,children:[e.jsx(Bs,{size:14})," Vender"]})]}),l==="buy"&&e.jsxs(e.Fragment,{children:[e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-[#635BFF]/15 to-[#7A73FF]/5 rounded-2xl p-5 mb-5 border-2 border-[#635BFF]/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#635BFF]/20 flex items-center justify-center",children:e.jsx(Le,{size:20,className:"text-[#635BFF]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"Pagar con Tarjeta"}),e.jsx("span",{className:"text-[8px] px-2 py-0.5 rounded-full bg-green-500/20 text-green-400 font-bold",children:"ACTIVO"})]}),e.jsx("p",{className:"text-[10px] text-dark-400",children:"Visa, Mastercard, Amex ‚Ä¢ Apple Pay ‚Ä¢ Google Pay"})]})]}),e.jsx("p",{className:"text-[11px] text-dark-400 mb-4 leading-relaxed",children:"Paga con tarjeta de cr√©dito/d√©bito. KAIROS se acu√±a autom√°ticamente 1:1 con USD y se env√≠a directo a tu wallet."}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:Si.map(I=>e.jsxs("button",{onClick:()=>o(String(I)),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${m===String(I)?"bg-[#635BFF]/30 text-[#A5A0FF] border border-[#635BFF]/40":"bg-white/[0.04] text-dark-400 border border-white/5 hover:border-[#635BFF]/20"}`,children:["$",I]},I))}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-500 font-medium",children:"$"}),e.jsx("input",{type:"number",value:m,onChange:I=>o(I.target.value),placeholder:"Monto en USD",min:"10",max:"50000",className:"w-full bg-white/[0.06] border border-white/10 rounded-xl pl-7 pr-4 py-3 text-white text-sm placeholder:text-dark-500 focus:outline-none focus:border-[#635BFF]/50 transition-colors"}),m&&e.jsxs("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-dark-400",children:["= ",parseFloat(m||0).toLocaleString()," KAIROS"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-3 py-2 rounded-lg bg-white/[0.03] border border-white/5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{className:"text-[10px] text-dark-400 truncate",children:t?`Recibir en: ${t.slice(0,8)}...${t.slice(-6)}`:"Conecta tu wallet"})]}),e.jsx("button",{onClick:P,disabled:i||!m||parseFloat(m)<10,className:"w-full py-3.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-40 disabled:cursor-not-allowed bg-gradient-to-r from-[#635BFF] to-[#7A73FF] text-white hover:shadow-lg hover:shadow-[#635BFF]/20",children:i?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:16,className:"animate-spin"})," Creando sesi√≥n de pago..."]}):e.jsxs(e.Fragment,{children:[e.jsx(r0,{size:16})," Comprar ",m?`$${parseFloat(m).toLocaleString()} en `:"","KAIROS"]})}),e.jsx("p",{className:"text-[9px] text-dark-500 text-center mt-2",children:"üîí Pago seguro con Stripe ‚Ä¢ 1 KAIROS = 1 USD ‚Ä¢ M√≠n $10 ‚Äî M√°x $50,000"})]}),e.jsxs("div",{className:"rounded-2xl bg-white/[0.02] border border-white/5 p-4 mb-5",children:[e.jsx("p",{className:"text-xs font-semibold text-white mb-3",children:"¬øC√≥mo funciona?"}),e.jsx("div",{className:"space-y-3",children:[{step:"1",text:"Ingresa el monto en USD que deseas comprar"},{step:"2",text:"Paga de forma segura con Stripe (tarjeta, Apple Pay, etc.)"},{step:"3",text:"KAIROS se acu√±a autom√°ticamente y se env√≠a a tu wallet"}].map(({step:I,text:S})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#635BFF]/15 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-[10px] font-bold text-[#A5A0FF]",children:I})}),e.jsx("p",{className:"text-[11px] text-dark-400",children:S})]},I))})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-3 py-2.5 rounded-xl bg-kairos-500/5 border border-kairos-500/10",children:[e.jsx("span",{className:"text-sm",children:"üí°"}),e.jsxs("p",{className:"text-[10px] text-dark-400",children:[e.jsx("strong",{className:"text-kairos-400",children:"Tip:"})," Despu√©s de comprar KAIROS, ve a ",e.jsx("strong",{className:"text-white",children:"Swap"})," para intercambiarlos por BTC, ETH, BNB u otros tokens."]})]})]}),l==="sell"&&e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-orange-500/10 to-orange-600/5 rounded-2xl p-4 mb-5 border border-orange-500/10",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qs,{size:20,className:"text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white mb-1",children:"Redimir KAIROS por USD"}),e.jsx("p",{className:"text-[11px] text-dark-400 leading-relaxed",children:"Quema tus KAIROS y recibe USD directamente en tu cuenta bancaria o tarjeta de d√©bito. 1 KAIROS = 1 USD."})]})]})}),E==="loading"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[e.jsx(je,{size:16,className:"animate-spin text-dark-400"}),e.jsx("span",{className:"text-xs text-dark-400",children:"Verificando cuenta..."})]}),E&&E!=="loading"&&!E.payoutsEnabled&&e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white/[0.03] rounded-2xl p-5 mb-5 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/10 flex items-center justify-center",children:e.jsx(Qs,{size:20,className:"text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Configura tu cuenta de pago"}),e.jsx("p",{className:"text-[10px] text-dark-400",children:"Solo toma ~2 minutos"})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:["Vincula tu cuenta bancaria o tarjeta de d√©bito","Verifica tu identidad (requerido por regulaciones)","Listo ‚Äî recibe pagos directos en USD"].map((I,S)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-orange-500/10 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-[9px] font-bold text-orange-400",children:S+1})}),e.jsx("p",{className:"text-[11px] text-dark-400",children:I})]},S))}),e.jsx("button",{onClick:y,disabled:g,className:"w-full py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-40 bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:shadow-lg hover:shadow-orange-500/20",children:g?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:16,className:"animate-spin"})," Creando cuenta..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{size:16})," Configurar cuenta de pago"]})}),E.onboarded&&!E.payoutsEnabled&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 px-3 py-2 rounded-lg bg-yellow-500/10 border border-yellow-500/10",children:[e.jsx(Xe,{size:12,className:"text-yellow-400 shrink-0"}),e.jsxs("p",{className:"text-[10px] text-yellow-400",children:["Tu cuenta existe pero a√∫n no est√° verificada."," ",e.jsx("button",{onClick:y,className:"underline font-semibold",children:"Completar verificaci√≥n"})]})]}),e.jsx("div",{className:"flex items-center justify-center mt-3",children:e.jsxs("button",{onClick:j,className:"text-[10px] text-dark-500 flex items-center gap-1 hover:text-dark-300",children:[e.jsx(Ge,{size:10})," Verificar estado"]})})]}),T&&!B&&e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-orange-500/10 to-orange-600/5 rounded-2xl p-5 mb-5 border-2 border-orange-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/15 flex items-center justify-center",children:e.jsx(Bs,{size:20,className:"text-orange-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"Redimir KAIROS"}),e.jsx("span",{className:"text-[8px] px-2 py-0.5 rounded-full bg-green-500/20 text-green-400 font-bold",children:"VERIFICADO"})]}),e.jsx("p",{className:"text-[10px] text-dark-400",children:"Cuenta conectada ‚Ä¢ Recibe USD en tu banco"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:Pi.map(I=>e.jsxs("button",{onClick:()=>d(String(I)),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${n===String(I)?"bg-orange-500/30 text-orange-300 border border-orange-500/40":"bg-white/[0.04] text-dark-400 border border-white/5 hover:border-orange-500/20"}`,children:["$",I]},I))}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-500 font-medium",children:"$"}),e.jsx("input",{type:"number",value:n,onChange:I=>d(I.target.value),placeholder:"Cantidad de KAIROS a redimir",min:Nt,max:hs,className:"w-full bg-white/[0.06] border border-white/10 rounded-xl pl-7 pr-4 py-3 text-white text-sm placeholder:text-dark-500 focus:outline-none focus:border-orange-500/50 transition-colors"}),n&&e.jsxs("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-dark-400",children:[parseFloat(n||0).toLocaleString()," KAIROS"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-[10px] text-dark-400 mb-2 font-medium",children:"M√©todo de pago:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>f("standard"),className:`flex-1 py-2.5 px-3 rounded-xl text-left border transition-all ${p==="standard"?"border-orange-500/30 bg-orange-500/10":"border-white/5 bg-white/[0.02]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx(Qs,{size:12,className:p==="standard"?"text-orange-400":"text-dark-500"}),e.jsx("span",{className:`text-xs font-semibold ${p==="standard"?"text-white":"text-dark-400"}`,children:"Est√°ndar"})]}),e.jsx("p",{className:"text-[9px] text-dark-500",children:"1-2 d√≠as h√°biles ‚Ä¢ Sin comisi√≥n"})]}),e.jsxs("button",{onClick:()=>f("instant"),className:`flex-1 py-2.5 px-3 rounded-xl text-left border transition-all ${p==="instant"?"border-orange-500/30 bg-orange-500/10":"border-white/5 bg-white/[0.02]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx(Le,{size:12,className:p==="instant"?"text-orange-400":"text-dark-500"}),e.jsx("span",{className:`text-xs font-semibold ${p==="instant"?"text-white":"text-dark-400"}`,children:"Instant√°neo"})]}),e.jsx("p",{className:"text-[9px] text-dark-500",children:"~30 seg a tarjeta ‚Ä¢ 1% + $0.50"})]})]})]}),K>=Nt&&e.jsxs("div",{className:"bg-white/[0.03] rounded-xl p-3 mb-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[10px] text-dark-400",children:"KAIROS a quemar"}),e.jsxs("span",{className:"text-[10px] text-white font-medium",children:[K.toLocaleString()," KAIROS"]})]}),p==="instant"&&e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[10px] text-dark-400",children:"Comisi√≥n instant√°nea"}),e.jsxs("span",{className:"text-[10px] text-orange-400",children:["-$",_.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1 border-t border-white/5",children:[e.jsx("span",{className:"text-[10px] text-dark-400 font-semibold",children:"Recibes"}),e.jsxs("span",{className:"text-sm text-green-400 font-bold",children:["$",H.toFixed(2)," USD"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-3 py-2 rounded-lg bg-white/[0.03] border border-white/5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{className:"text-[10px] text-dark-400 truncate",children:t?`Quemando desde: ${t.slice(0,8)}...${t.slice(-6)}`:"Conecta tu wallet"})]}),e.jsx("button",{onClick:R,disabled:b||!n||K<Nt,className:"w-full py-3.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-40 disabled:cursor-not-allowed bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:shadow-lg hover:shadow-orange-500/20",children:b?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:16,className:"animate-spin"})," Procesando redenci√≥n..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bs,{size:16})," Redimir ",n?`${parseFloat(n).toLocaleString()} KAIROS`:"KAIROS"]})}),e.jsxs("p",{className:"text-[9px] text-dark-500 text-center mt-2",children:["üî• KAIROS se queman permanentemente ‚Ä¢ 1 KAIROS = 1 USD ‚Ä¢ M√≠n $",Nt," ‚Äî M√°x $",hs.toLocaleString()]})]}),e.jsx(ue,{children:B&&e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`rounded-2xl p-5 mb-5 border-2 ${B.success?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[B.success?e.jsx(Cr,{size:24,className:"text-green-400"}):e.jsx(Br,{size:24,className:"text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-bold ${B.success?"text-green-400":"text-red-400"}`,children:B.success?"¬°Redenci√≥n exitosa!":"Error en la redenci√≥n"}),e.jsx("p",{className:"text-[10px] text-dark-400",children:B.success?`ID: ${B.id?.slice(0,12)}...`:B.error})]})]}),B.success&&e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-dark-400",children:"Estado"}),e.jsx("span",{className:"text-[10px] text-green-400 font-medium",children:B.status})]}),B.net&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-dark-400",children:"Recibes"}),e.jsxs("span",{className:"text-[10px] text-white font-medium",children:["$",B.net," USD"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-dark-400",children:"M√©todo"}),e.jsx("span",{className:"text-[10px] text-white font-medium",children:B.method==="instant"?"‚ö° Instant√°neo":"üè¶ Est√°ndar"})]}),B.arrival&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-dark-400",children:"Llegada estimada"}),e.jsx("span",{className:"text-[10px] text-white font-medium",children:new Date(B.arrival*1e3).toLocaleDateString()})]})]}),e.jsx("button",{onClick:()=>F(null),className:"w-full py-2.5 rounded-xl text-sm font-medium bg-white/[0.05] text-white hover:bg-white/[0.08] transition-colors",children:B.success?"Redimir m√°s":"Intentar de nuevo"})]})}),T&&!B&&e.jsxs("div",{className:"rounded-2xl bg-white/[0.02] border border-white/5 p-4 mb-5",children:[e.jsx("p",{className:"text-xs font-semibold text-white mb-3",children:"¬øC√≥mo funciona la redenci√≥n?"}),e.jsx("div",{className:"space-y-3",children:[{step:"1",text:"Ingresa la cantidad de KAIROS que deseas redimir"},{step:"2",text:"Elige pago est√°ndar (gratis) o instant√°neo (1% + $0.50)"},{step:"3",text:"Tus KAIROS se queman y USD se env√≠a a tu cuenta bancaria"}].map(({step:I,text:S})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500/15 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-[10px] font-bold text-orange-400",children:I})}),e.jsx("p",{className:"text-[11px] text-dark-400",children:S})]},I))})]}),T&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>v(!N),className:"text-[11px] text-dark-400 hover:text-white transition-colors flex items-center gap-1",children:[e.jsx(Xe,{size:12})," ",N?"Ocultar":"Ver"," historial de redenciones"]}),e.jsx(ue,{children:N&&e.jsx(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 space-y-2 overflow-hidden",children:k.length===0?e.jsx("p",{className:"text-[10px] text-dark-500 text-center py-3",children:"No tienes redenciones a√∫n"}):k.map(I=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-xl bg-white/[0.02] border border-white/5",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-[11px] text-white font-medium",children:["$",I.amount," USD"]}),e.jsxs("p",{className:"text-[9px] text-dark-500",children:[new Date(I.created_at).toLocaleDateString()," ‚Ä¢ ",I.payout_method==="instant"?"‚ö°":"üè¶"]})]}),e.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full font-semibold ${I.status==="COMPLETED"||I.status==="PAYOUT_SENT"?"bg-green-500/15 text-green-400":I.status==="PAYOUT_FAILED"||I.status==="BURN_FAILED"?"bg-red-500/15 text-red-400":"bg-yellow-500/15 text-yellow-400"}`,children:I.status})]},I.id))})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-3 py-2 rounded-xl bg-green-500/5 border border-green-500/10",children:[e.jsx(ke,{size:12,className:"text-green-400 shrink-0"}),e.jsx("p",{className:"text-[10px] text-dark-400",children:l==="buy"?"Pago procesado por Stripe. Kairos Wallet nunca accede a tu informaci√≥n bancaria ni datos de tarjeta.":"Pagos procesados por Stripe Connect. Tu informaci√≥n bancaria se maneja de forma segura por Stripe."})]}),e.jsxs("p",{className:"text-[10px] text-dark-500",children:[l==="buy"?"Recibiendo":"Redimiendo desde"," ",r?.icon," ",r?.name]})]})]})}const jx="https://li.quest/v1",Ps="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",Ii=[56,1,137,42161,8453];async function Ri({fromChainId:t,toChainId:a,fromToken:s=Ps,toToken:x=Ps,fromAmount:r,fromAddress:l,slippage:u=.03}){const m=new URLSearchParams({fromChain:t.toString(),toChain:a.toString(),fromToken:s,toToken:x,fromAmount:r,fromAddress:l,toAddress:l,slippage:u.toString()}),o=await fetch(`${jx}/quote?${m}`);if(!o.ok){const c=await o.text();throw new Error(`Bridge quote failed: ${c}`)}const i=await o.json();return{raw:i,bridge:i.tool||"unknown",fromAmount:i.estimate.fromAmount,toAmount:i.estimate.toAmount,toAmountMin:i.estimate.toAmountMin,gasCostUSD:i.estimate.gasCosts?.reduce((c,n)=>c+parseFloat(n.amountUSD||0),0).toFixed(2),feeCostUSD:i.estimate.feeCosts?.reduce((c,n)=>c+parseFloat(n.amountUSD||0),0).toFixed(2),executionDuration:i.estimate.executionDuration||60,transactionRequest:i.transactionRequest}}async function Li(t,a){const s=t.transactionRequest;if(!s)throw new Error("No transaction request in quote");const x=await a.sendTransaction({to:s.to,data:s.data,value:s.value,gasLimit:s.gasLimit||5e5,gasPrice:s.gasPrice}),r=await x.wait();return{hash:x.hash,blockNumber:r.blockNumber,gasUsed:r.gasUsed.toString(),status:r.status===1?"success":"failed"}}async function Oi(t,a,s){try{const x=new URLSearchParams({txHash:t,fromChain:a.toString(),toChain:s.toString()}),r=await fetch(`${jx}/status?${x}`);if(!r.ok)return{status:"PENDING"};const l=await r.json();return{status:l.status||"PENDING",substatus:l.substatus,receiving:l.receiving,sending:l.sending}}catch{return{status:"PENDING"}}}function ba(t,a=18){const s=he(t,a),x=parseFloat(s);return x===0?"0":x<1e-6?"<0.000001":x<1?x.toFixed(6):x<1e3?x.toFixed(4):x.toLocaleString(void 0,{maximumFractionDigits:2})}const Ce={FORM:"form",QUOTE:"quote",CONFIRM:"confirm",PASSWORD:"password",BRIDGING:"bridging",MONITORING:"monitoring",SUCCESS:"success",ERROR:"error"};function Mi(){ct();const{activeAddress:t,activeChainId:a,navigate:s,showToast:x,getActiveAccount:r}=se(),[l,u]=C.useState(a),[m,o]=C.useState(a===56?8453:56),[i,c]=C.useState(""),[n,d]=C.useState("0"),[p,f]=C.useState(0),[E,h]=C.useState(""),[g,D]=C.useState(null),[b,A]=C.useState(!1),[B,F]=C.useState(null),[k,w]=C.useState(Ce.FORM),[N,v]=C.useState(!1),[j,y]=C.useState(!1),[P,R]=C.useState(null),[M,K]=C.useState(null),[_,H]=C.useState(null),[T,I]=C.useState(null),S=q[l],G=q[m];C.useEffect(()=>{if(!t||!l)return;const X=q[l];if(!X)return;new rt(X.rpcUrls[0]).getBalance(t).then($=>{d(De($))}).catch(()=>d("0")),R0(l).then($=>{f($)}).catch(()=>{})},[t,l]);const z=C.useCallback(()=>{u(m),o(l),D(null),F(null)},[l,m]),U=C.useCallback(async()=>{if(!i||parseFloat(i)<=0){x("Ingresa una cantidad v√°lida","error");return}A(!0),F(null),D(null);try{const X=Dt(i).toString(),J=await Ri({fromChainId:l,toChainId:m,fromToken:Ps,toToken:Ps,fromAmount:X,fromAddress:t});D(J),w(Ce.QUOTE)}catch(X){console.error("[Bridge] Quote error:",X),F(X.message||"No se pudo obtener cotizaci√≥n")}finally{A(!1)}},[i,l,m,t]),Q=C.useCallback(async()=>{if(!E){x("Ingresa tu contrase√±a","error");return}w(Ce.BRIDGING),H(null);try{await ve(E);const X=r();if(!X?.privateKey)throw new Error("Account not found");const J=new rt(S.rpcUrls[0]),$=new Pe(X.privateKey,J),Y=await Li(g,$);if(R(Y.hash),Y.status==="success")w(Ce.MONITORING),Z(Y.hash);else throw new Error("Transaction failed on source chain")}catch(X){console.error("[Bridge] Execute error:",X),H(X.message||"Bridge failed"),w(Ce.ERROR)}},[E,g,t,S]),Z=C.useCallback(async X=>{const J=new rt(G.rpcUrls[0]),$=await J.getBalance(t);for(let Y=0;Y<120;Y++){await new Promise(te=>setTimeout(te,5e3));try{const te=await J.getBalance(t);if(te>$){const ie=te-$;I(De(ie)),w(Ce.SUCCESS);return}}catch{}try{const te=await Oi(X,l,m);if(K(te.status),te.status==="DONE"){const me=await J.getBalance(t)-$;I(De(me)),w(Ce.SUCCESS);return}if(te.status==="FAILED"){H("Bridge transfer failed"),w(Ce.ERROR);return}}catch{}}x("Bridge en proceso ‚Äî puede tardar m√°s","warning"),w(Ce.SUCCESS)},[t,G,l,m]),ee=({isOpen:X,onClose:J,onSelect:$,excludeChainId:Y})=>X?e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/70 flex items-end justify-center",onClick:J,children:e.jsxs(O.div,{initial:{y:300},animate:{y:0},exit:{y:300},className:"w-full max-w-md bg-dark-800 rounded-t-3xl p-6",onClick:te=>te.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Seleccionar Red"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-auto",children:Ii.filter(te=>te!==Y).map(te=>{const ie=q[te];return e.jsxs("button",{onClick:()=>{$(te),J()},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-dark-700 transition-colors",children:[e.jsx(Ct,{chainId:te,size:32}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-white font-medium",children:ie.name}),e.jsx("div",{className:"text-dark-400 text-xs",children:ie.nativeCurrency.symbol})]})]},te)})})]})}):null;return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>s("dashboard"),className:"icon-btn",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ks,{className:"w-5 h-5 text-kairos-400"}),"Bridge"]}),e.jsx("p",{className:"text-dark-400 text-xs",children:"Mueve tokens entre cadenas"})]})]}),(k===Ce.FORM||k===Ce.QUOTE)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"card-dark p-4",children:[e.jsx("div",{className:"text-dark-400 text-xs mb-2",children:"Desde"}),e.jsxs("button",{onClick:()=>v(!0),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-dark-700 hover:bg-dark-600 transition-colors",children:[e.jsx(Ct,{chainId:l,size:28}),e.jsx("span",{className:"text-white font-medium flex-1 text-left",children:S?.name}),e.jsx(Bt,{className:"w-4 h-4 text-dark-400"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:i,onChange:X=>{c(X.target.value),D(null),F(null)},placeholder:"0.0",className:"flex-1 bg-transparent text-2xl text-white font-bold outline-none placeholder-dark-600"}),e.jsx("span",{className:"text-dark-300 font-medium",children:S?.nativeCurrency?.symbol})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-dark-400 text-xs",children:["‚âà ",we(parseFloat(i||0)*p)]}),e.jsxs("button",{onClick:()=>{const X=Math.max(0,parseFloat(n)-.002);c(X.toFixed(6)),D(null)},className:"text-kairos-400 text-xs font-medium hover:text-kairos-300",children:["MAX: ",parseFloat(n).toFixed(4)," ",S?.nativeCurrency?.symbol]})]})]})]}),e.jsx("div",{className:"flex justify-center -my-1 relative z-10",children:e.jsx("button",{onClick:z,className:`w-10 h-10 rounded-full bg-kairos-500 flex items-center justify-center
                         hover:bg-kairos-400 transition-colors shadow-lg shadow-kairos-500/30`,children:e.jsx(Cs,{className:"w-5 h-5 text-black"})})}),e.jsxs("div",{className:"card-dark p-4",children:[e.jsx("div",{className:"text-dark-400 text-xs mb-2",children:"Hacia"}),e.jsxs("button",{onClick:()=>y(!0),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-dark-700 hover:bg-dark-600 transition-colors",children:[e.jsx(Ct,{chainId:m,size:28}),e.jsx("span",{className:"text-white font-medium flex-1 text-left",children:G?.name}),e.jsx(Bt,{className:"w-4 h-4 text-dark-400"})]}),g&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"text-2xl text-white font-bold",children:["~",ba(g.toAmount)," ",G?.nativeCurrency?.symbol]}),e.jsxs("div",{className:"text-dark-400 text-xs",children:["Min: ",ba(g.toAmountMin)," ",G?.nativeCurrency?.symbol]})]})]}),g&&e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"card-dark p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-dark-400",children:"Bridge"}),e.jsx("span",{className:"text-white font-medium capitalize",children:g.bridge})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-dark-400",children:"Gas estimado"}),e.jsxs("span",{className:"text-white",children:["$",g.gasCostUSD]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-dark-400",children:"Fee del bridge"}),e.jsxs("span",{className:"text-white",children:["$",g.feeCostUSD]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-dark-400 flex items-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"})," Tiempo estimado"]}),e.jsxs("span",{className:"text-white",children:[g.executionDuration,"s"]})]})]}),B&&e.jsx("div",{className:"card-dark p-3 border border-red-500/30",children:e.jsxs("p",{className:"text-red-400 text-sm flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),B]})}),g?e.jsx("button",{onClick:()=>w(Ce.PASSWORD),className:"btn-primary w-full py-4 text-lg",children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"Bridge ",i," ",S?.nativeCurrency?.symbol]})}):e.jsx("button",{onClick:U,disabled:b||!i||parseFloat(i)<=0,className:"btn-primary w-full py-4 text-lg disabled:opacity-50",children:b?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(At,{className:"w-5 h-5 animate-spin"}),"Obteniendo cotizaci√≥n..."]}):"Obtener Cotizaci√≥n"})]}),k===Ce.PASSWORD&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{className:"card-dark p-6 text-center",children:[e.jsx(ke,{className:"w-12 h-12 text-kairos-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:"Confirmar Bridge"}),e.jsxs("p",{className:"text-dark-300 text-sm mb-4",children:[i," ",S?.nativeCurrency?.symbol," (",S?.name,") ‚Üí ",G?.name]}),e.jsx("input",{type:"password",value:E,onChange:X=>h(X.target.value),placeholder:"Contrase√±a de tu wallet",className:"input-dark w-full text-center",autoFocus:!0,onKeyDown:X=>X.key==="Enter"&&Q()})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{w(Ce.QUOTE),h("")},className:"flex-1 btn-secondary py-3",children:"Cancelar"}),e.jsx("button",{onClick:Q,disabled:!E,className:"flex-1 btn-primary py-3 disabled:opacity-50",children:"Confirmar"})]})]}),(k===Ce.BRIDGING||k===Ce.MONITORING)&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-12 space-y-6",children:[e.jsx(O.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(ks,{className:"w-16 h-16 text-kairos-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:k===Ce.BRIDGING?"Enviando transacci√≥n...":"Bridge en progreso..."}),e.jsx("p",{className:"text-dark-300 text-sm",children:k===Ce.MONITORING?`Esperando confirmaci√≥n en ${G?.name}...`:`Confirmando en ${S?.name}...`}),M&&e.jsxs("p",{className:"text-kairos-400 text-xs mt-2",children:["Status: ",M]})]}),P&&e.jsxs("a",{href:`${S?.blockExplorerUrl}/tx/${P}`,target:"_blank",rel:"noopener noreferrer",className:"text-kairos-400 text-sm flex items-center gap-1 hover:text-kairos-300",children:["Ver en explorador ",e.jsx(Oe,{className:"w-3 h-3"})]})]}),k===Ce.SUCCESS&&e.jsxs(O.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-12 space-y-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500/10 flex items-center justify-center",children:e.jsx(Se,{className:"w-10 h-10 text-green-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:"¬°Bridge Exitoso!"}),e.jsx("p",{className:"text-dark-300 text-sm",children:T?`Recibido: ${parseFloat(T).toFixed(6)} ${G?.nativeCurrency?.symbol}`:`Transferencia completada a ${G?.name}`})]}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx("button",{onClick:()=>{w(Ce.FORM),c(""),D(null),R(null),h("")},className:"flex-1 btn-secondary py-3",children:"Otro Bridge"}),e.jsx("button",{onClick:()=>s("dashboard"),className:"flex-1 btn-primary py-3",children:"Dashboard"})]})]}),k===Ce.ERROR&&e.jsxs(O.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-12 space-y-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center",children:e.jsx(ce,{className:"w-10 h-10 text-red-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:"Error"}),e.jsx("p",{className:"text-dark-300 text-sm max-w-xs",children:_})]}),e.jsx("button",{onClick:()=>{w(Ce.FORM),H(null),h("")},className:"btn-primary py-3 px-8",children:"Reintentar"})]}),e.jsxs(ue,{children:[e.jsx(ee,{isOpen:N,onClose:()=>v(!1),onSelect:X=>{u(X),D(null)},excludeChainId:m}),e.jsx(ee,{isOpen:j,onClose:()=>y(!1),onSelect:X=>{o(X),D(null)},excludeChainId:l})]})]})}const Nx="kairos_custom_chains";function zi(){try{return JSON.parse(localStorage.getItem(Nx)||"{}")}catch{return{}}}function Aa(t){localStorage.setItem(Nx,JSON.stringify(t))}function _i(){const{t}=ct(),{activeChainId:a,setActiveChain:s,navigate:x,showToast:r}=se(),[l,u]=C.useState(zi()),[m,o]=C.useState(!1),[i,c]=C.useState(null),[n,d]=C.useState({name:"",chainId:"",rpcUrl:"",symbol:"",blockExplorer:""}),[p,f]=C.useState(!1),[E,h]=C.useState(null),[g,D]=C.useState(!1);Object.entries(l).forEach(([v,j])=>{});const b=()=>{d({name:"",chainId:"",rpcUrl:"",symbol:"",blockExplorer:""}),h(null),f(!1)},A=C.useCallback(async()=>{if(n.rpcUrl){f(!0),h(null);try{const v=new rt(n.rpcUrl),j=await Promise.race([v.getNetwork(),new Promise((y,P)=>setTimeout(()=>P(new Error("timeout")),5e3))]);n.chainId||d(y=>({...y,chainId:j.chainId.toString()})),h("ok")}catch{h("error")}finally{f(!1)}}},[n.rpcUrl,n.chainId]),B=async()=>{if(!n.name||!n.chainId||!n.rpcUrl||!n.symbol){r("Completa todos los campos requeridos","error");return}const v=parseInt(n.chainId);if(q[v]&&!i){r(`La red ${q[v].name} ya existe como red predeterminada`,"error");return}D(!0);try{const j={name:n.name,chainId:v,rpcUrls:[n.rpcUrl],blockExplorerUrl:n.blockExplorer||"",blockExplorerApiUrl:"",icon:"üåê",nativeCurrency:{name:n.symbol,symbol:n.symbol,decimals:18},isCustom:!0},y={...l,[v]:j};Aa(y),u(y),ra(v),r(`Red ${n.name} guardada`,"success"),o(!1),c(null),b()}catch{r("Error al guardar red","error")}finally{D(!1)}},F=v=>{if(a===v){r("No puedes eliminar la red activa","error");return}const j={...l};delete j[v],Aa(j),u(j),ra(v),r("Red eliminada","success")},k=v=>{const j=l[v];j&&(d({name:j.name,chainId:v.toString(),rpcUrl:j.rpcUrls?.[0]||"",symbol:j.nativeCurrency?.symbol||"",blockExplorer:j.blockExplorerUrl||""}),c(v),o(!0))},w=Object.keys(q).map(Number),N=Object.keys(l).map(Number);return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 px-5 py-4",children:[e.jsx("button",{onClick:()=>x("settings"),className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("h1",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(ze,{size:18,className:"text-kairos-400"}),t("networks.title","Redes")]})}),e.jsx("button",{onClick:()=>{b(),c(null),o(!0)},className:"p-2 rounded-xl bg-kairos-500/10 hover:bg-kairos-500/20",children:e.jsx(Ve,{size:16,className:"text-kairos-400"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[e.jsx("p",{className:"text-dark-500 text-xs font-medium mb-2 uppercase tracking-wider",children:"Redes Predeterminadas"}),e.jsx("div",{className:"space-y-1 mb-6",children:w.map(v=>{const j=q[v],y=a===v;return e.jsxs("button",{onClick:()=>s(v),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-colors
                  ${y?"bg-kairos-500/10 border border-kairos-500/20":"hover:bg-white/[0.03]"}`,children:[e.jsx("span",{className:"text-xl",children:j.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-white text-sm font-medium",children:j.name}),e.jsxs("p",{className:"text-dark-500 text-[10px]",children:["Chain ID: ",v]})]}),y&&e.jsx(Se,{size:16,className:"text-kairos-400"})]},v)})}),N.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-dark-500 text-xs font-medium mb-2 uppercase tracking-wider",children:"Redes Personalizadas"}),e.jsx("div",{className:"space-y-1 mb-6",children:N.map(v=>{const j=l[v],y=a===v;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors
                      ${y?"bg-kairos-500/10 border border-kairos-500/20":"bg-white/[0.02]"}`,children:[e.jsxs("button",{onClick:()=>s(v),className:"flex-1 flex items-center gap-3 text-left",children:[e.jsx(ze,{size:20,className:"text-dark-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:j.name}),e.jsxs("p",{className:"text-dark-500 text-[10px]",children:[j.nativeCurrency?.symbol," ¬∑ Chain ID: ",v]})]})]}),e.jsx("button",{onClick:()=>k(v),className:"p-1.5 rounded-lg hover:bg-white/5",children:e.jsx(Ia,{size:14,className:"text-dark-400"})}),e.jsx("button",{onClick:()=>F(v),className:"p-1.5 rounded-lg hover:bg-red-500/10",children:e.jsx(st,{size:14,className:"text-red-400"})})]},v)})})]})]}),e.jsx(ue,{children:m&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/70 flex items-end justify-center",onClick:()=>o(!1),children:e.jsxs(O.div,{initial:{y:400},animate:{y:0},exit:{y:400},onClick:v=>v.stopPropagation(),className:"w-full max-w-md bg-dark-900 rounded-t-3xl p-6 max-h-[85vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:i?"Editar Red":"Agregar Red"}),e.jsx("button",{onClick:()=>{o(!1),b()},className:"p-1",children:e.jsx(Te,{size:20,className:"text-dark-400"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-dark-400 text-xs mb-1 block",children:"Nombre de la Red *"}),e.jsx("input",{value:n.name,onChange:v=>d(j=>({...j,name:v.target.value})),placeholder:"e.g. Sepolia Testnet",className:"input-dark w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-dark-400 text-xs mb-1 block",children:"RPC URL *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:n.rpcUrl,onChange:v=>{d(j=>({...j,rpcUrl:v.target.value})),h(null)},placeholder:"https://rpc.example.com",className:"input-dark flex-1"}),e.jsx("button",{onClick:A,disabled:!n.rpcUrl||p,className:"px-3 rounded-xl bg-dark-700 hover:bg-dark-600 text-xs text-dark-300 disabled:opacity-50",children:p?e.jsx(At,{size:14,className:"animate-spin"}):e.jsx(br,{size:14})})]}),E==="ok"&&e.jsxs("p",{className:"text-green-400 text-[10px] mt-1 flex items-center gap-1",children:[e.jsx(Se,{size:10})," Conexi√≥n exitosa"]}),E==="error"&&e.jsxs("p",{className:"text-red-400 text-[10px] mt-1 flex items-center gap-1",children:[e.jsx(ce,{size:10})," No se pudo conectar"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-dark-400 text-xs mb-1 block",children:"Chain ID *"}),e.jsx("input",{value:n.chainId,onChange:v=>d(j=>({...j,chainId:v.target.value.replace(/\D/g,"")})),placeholder:"e.g. 11155111",className:"input-dark w-full",disabled:!!i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-dark-400 text-xs mb-1 block",children:"S√≠mbolo de Moneda *"}),e.jsx("input",{value:n.symbol,onChange:v=>d(j=>({...j,symbol:v.target.value.toUpperCase()})),placeholder:"e.g. ETH",className:"input-dark w-full",maxLength:10})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-dark-400 text-xs mb-1 block",children:"Block Explorer URL (opcional)"}),e.jsx("input",{value:n.blockExplorer,onChange:v=>d(j=>({...j,blockExplorer:v.target.value})),placeholder:"https://sepolia.etherscan.io",className:"input-dark w-full"})]}),e.jsx("button",{onClick:B,disabled:g||!n.name||!n.chainId||!n.rpcUrl||!n.symbol,className:"btn-primary w-full py-3 mt-2 disabled:opacity-50",children:g?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(At,{size:16,className:"animate-spin"})," Guardando..."]}):i?"Guardar Cambios":"Agregar Red"})]})]})})})]})}function Ms({isOpen:t,onConfirm:a,onCancel:s,title:x,subtitle:r,details:l,confirmLabel:u,loading:m=!1}){const{t:o}=ct(),[i,c]=C.useState(""),[n,d]=C.useState(""),[p,f]=C.useState(!1),[E,h]=C.useState(!1),g=C.useRef(null);C.useEffect(()=>{t&&(c(""),d(""),f(!1),setTimeout(()=>g.current?.focus(),100))},[t]);const D=async()=>{if(!i){d(o("error.enterPassword","Ingresa tu contrase√±a"));return}h(!0),d("");try{await ve(i),a(i)}catch{d(o("error.wrongPassword","Contrase√±a incorrecta"))}finally{h(!1)}};return t?e.jsx(ue,{children:e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",onClick:s,children:e.jsxs(O.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:b=>b.stopPropagation(),className:"w-full max-w-sm bg-dark-900 rounded-2xl border border-white/5 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5 text-kairos-400"}),e.jsx("h3",{className:"text-white font-bold",children:x||o("confirm.title","Confirmar Acci√≥n")})]}),e.jsx("button",{onClick:s,className:"p-1 rounded-lg hover:bg-white/5",children:e.jsx(Te,{className:"w-4 h-4 text-dark-400"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[r&&e.jsx("p",{className:"text-dark-300 text-sm text-center",children:r}),l&&e.jsx("div",{className:"bg-dark-800 rounded-xl p-3 text-sm",children:l}),e.jsxs("div",{children:[e.jsx("label",{className:"text-dark-400 text-xs mb-1 block",children:o("confirm.password","Contrase√±a de tu wallet")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:g,type:p?"text":"password",value:i,onChange:b=>{c(b.target.value),d("")},onKeyDown:b=>b.key==="Enter"&&!E&&!m&&D(),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"input-dark w-full pr-10",autoComplete:"current-password"}),e.jsx("button",{onClick:()=>f(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400 hover:text-dark-300",children:p?e.jsx(tt,{className:"w-4 h-4"}):e.jsx(He,{className:"w-4 h-4"})})]}),n&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:n})]})]}),e.jsxs("div",{className:"flex gap-3 p-4 border-t border-white/5",children:[e.jsx("button",{onClick:s,className:"flex-1 btn-secondary py-2.5",disabled:E||m,children:o("action.cancel","Cancelar")}),e.jsx("button",{onClick:D,disabled:!i||E||m,className:"flex-1 btn-primary py-2.5 disabled:opacity-50",children:E||m?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),E?"Verificando...":"Procesando..."]}):u||o("action.confirm","Confirmar")})]})]})})}):null}function $i(){const{t}=ct(),{activeAddress:a,activeChainId:s,navigate:x,showToast:r,getActiveAccount:l,balances:u}=se(),[m,o]=C.useState([]),[i,c]=C.useState(!0),[n,d]=C.useState(null),[p,f]=C.useState(!1),[E,h]=C.useState(null),g=q[s],D=C.useCallback(async()=>{c(!0);try{const B=(u.tokens||[]).filter(k=>k.address&&parseFloat(k.balance)>0).map(k=>k.address);if(B.length===0){o([]),c(!1);return}const F=await jn(s,a,B);o(F)}catch(B){console.error("[Approvals] Fetch error:",B),r("Error cargando approvals","error")}finally{c(!1)}},[s,a,u]);C.useEffect(()=>{D()},[D]);const b=B=>{h(B),f(!0)},A=async B=>{if(f(!1),!!E){d(E.tokenAddress+E.spender);try{const F=l();if(!F?.privateKey)throw new Error("Account not found");await Nn(s,F.privateKey,E.tokenAddress,E.spender),r(`Revocado ${E.tokenSymbol}`,"success"),o(k=>k.filter(w=>!(w.tokenAddress===E.tokenAddress&&w.spender===E.spender)))}catch(F){r(F.message||"Error al revocar","error")}finally{d(null),h(null)}}};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 px-5 py-4",children:[e.jsx("button",{onClick:()=>x("settings"),className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(le,{size:20,className:"text-dark-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(ke,{size:18,className:"text-kairos-400"}),t("approvals.title","Aprobaciones de Tokens")]}),e.jsx("p",{className:"text-dark-400 text-xs",children:g?.name})]}),e.jsx("button",{onClick:D,className:"p-2 rounded-xl hover:bg-white/5",disabled:i,children:e.jsx(Ge,{size:16,className:`text-dark-400 ${i?"animate-spin":""}`})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:[e.jsxs("div",{className:"bg-orange-500/5 border border-orange-500/10 rounded-xl p-3 mb-4 flex items-start gap-2",children:[e.jsx(ce,{size:14,className:"text-orange-400 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[11px] text-dark-300 leading-relaxed",children:t("approvals.warning","Las aprobaciones permiten que contratos gasten tus tokens. Revoca las que ya no necesites para proteger tus fondos.")})]}),i&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(At,{className:"w-8 h-8 text-kairos-400 animate-spin mb-3"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"Escaneando aprobaciones..."})]}),!i&&m.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(_e,{className:"w-12 h-12 text-green-400 mb-3"}),e.jsx("p",{className:"text-white font-medium mb-1",children:"¬°Todo limpio!"}),e.jsxs("p",{className:"text-dark-400 text-sm text-center",children:["No hay aprobaciones activas en ",g?.name]})]}),e.jsx("div",{className:"space-y-2",children:m.map((B,F)=>{const k=n===B.tokenAddress+B.spender;return e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:F*.05},className:"bg-white/[0.03] rounded-xl p-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium text-sm",children:B.tokenSymbol}),e.jsxs("span",{className:"text-dark-500 text-xs ml-2",children:["‚Üí ",B.spenderLabel]})]}),e.jsxs("button",{onClick:()=>b(B),disabled:k,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 
                             text-xs font-medium hover:bg-red-500/20 transition-colors disabled:opacity-50`,children:[k?e.jsx(At,{size:12,className:"animate-spin"}):e.jsx(st,{size:12}),"Revocar"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-dark-400",children:B.isUnlimited?e.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[e.jsx(ce,{size:10})," Ilimitado"]}):`${B.allowance} ${B.tokenSymbol}`}),e.jsxs("a",{href:`${g?.blockExplorerUrl}/address/${B.spender}`,target:"_blank",rel:"noopener noreferrer",className:"text-dark-500 hover:text-dark-300 flex items-center gap-1",children:[B.spender.slice(0,6),"...",B.spender.slice(-4),e.jsx(Oe,{size:10})]})]})]},`${B.tokenAddress}-${B.spender}`)})})]}),e.jsx(Ms,{isOpen:p,onConfirm:A,onCancel:()=>{f(!1),h(null)},title:"Revocar Aprobaci√≥n",subtitle:E?`Revocar ${E.tokenSymbol} ‚Üí ${E.spenderLabel}`:"",confirmLabel:"Revocar"})]})}function Ui(){const{activeChainId:t,pendingTransactions:a,goBack:s,showToast:x,getActiveAccount:r,resolvePendingTx:l,addPendingTx:u}=se(),m=q[t],o=r(),[i,c]=C.useState(null),[n,d]=C.useState(null),[p,f]=C.useState(null),[E,h]=C.useState(!1),[g,D]=C.useState(null),[b,A]=C.useState({});C.useEffect(()=>{if(a.length===0)return;const v=async()=>{for(const y of a)if(y.chainId===t)try{const R=await re(y.chainId).getTransactionReceipt(y.hash);R&&(A(M=>({...M,[y.hash]:R.status===1?"confirmed":"failed"})),l(y.hash,R.status===1?"confirmed":"failed"))}catch{}};v();const j=setInterval(v,1e4);return()=>clearInterval(j)},[a,t]);const B=a.filter(v=>v.chainId===t),F=(v,j)=>{f(v),d(j),h(!0)},k=async v=>{if(!(!p||!n||!o)){h(!1),D(p.hash);try{await ve(v);let j;n==="speedup"?(j=await wn(t,o.privateKey,p),x("TX acelerada enviada","success"),u({...p,hash:j.hash,timestamp:Date.now(),status:"pending",isSpeedUp:!0,originalHash:p.hash})):(j=await vn(t,o.privateKey,p.nonce),x("Cancelaci√≥n enviada","success"),u({hash:j.hash,from:o.address,to:o.address,value:"0",chainId:t,timestamp:Date.now(),status:"cancelling",isCancellation:!0,originalHash:p.hash})),Ja(t,j.hash).then(y=>{l(j.hash,y.status),l(p.hash,n==="cancel"?"cancelled":y.status)})}catch(j){x("Error: "+(j.reason||j.message),"error")}D(null),f(null),d(null)}},w=v=>{switch(b[v.hash]||v.status){case"confirmed":return e.jsx("span",{className:"text-[10px] bg-green-500/15 text-green-400 px-2 py-0.5 rounded-full",children:"Confirmada"});case"failed":return e.jsx("span",{className:"text-[10px] bg-red-500/15 text-red-400 px-2 py-0.5 rounded-full",children:"Fallida"});case"cancelling":return e.jsx("span",{className:"text-[10px] bg-orange-500/15 text-orange-400 px-2 py-0.5 rounded-full",children:"Cancelando..."});default:return e.jsxs("span",{className:"text-[10px] bg-yellow-500/15 text-yellow-400 px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(At,{size:8,className:"animate-spin"})," Pendiente"]})}},N=v=>{const j=Date.now()-v;return j<6e4?"Hace segundos":j<36e5?`Hace ${Math.floor(j/6e4)} min`:`Hace ${Math.floor(j/36e5)}h`};return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsx("h2",{className:"text-lg font-bold flex-1",children:"Transacciones Pendientes"}),e.jsx("div",{className:"px-2 py-1 rounded-lg bg-yellow-500/15 text-yellow-400 text-xs font-bold",children:B.length})]}),e.jsxs("div",{className:"glass-card p-3 mb-4 flex items-start gap-2",children:[e.jsx(ce,{size:16,className:"text-kairos-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-dark-200 font-medium",children:"Acciones reales en cadena"}),e.jsx("p",{className:"text-[10px] text-dark-400 mt-0.5",children:"Acelerar re-env√≠a la TX con m√°s gas. Cancelar env√≠a 0 a tu propia direcci√≥n con el mismo nonce. Ambas cuestan gas real."})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:B.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(Se,{size:24,className:"text-green-400"})}),e.jsx("p",{className:"text-dark-300 text-sm",children:"No hay transacciones pendientes"}),e.jsx("p",{className:"text-dark-500 text-xs mt-1",children:"Todas las transacciones est√°n confirmadas"})]}):B.map((v,j)=>{const y=i===v.hash,P=g===v.hash,R=!b[v.hash]&&v.status==="pending";return e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:j*.05},className:"glass-card overflow-hidden",children:[e.jsxs("button",{onClick:()=>c(y?null:v.hash),className:"w-full flex items-center gap-3 p-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${v.isCancellation?"bg-red-500/10":v.isSpeedUp?"bg-yellow-500/10":"bg-blue-500/10"}`,children:P?e.jsx(At,{size:18,className:"text-kairos-400 animate-spin"}):v.isCancellation?e.jsx(ws,{size:18,className:"text-red-400"}):v.isSpeedUp?e.jsx(Le,{size:18,className:"text-yellow-400"}):e.jsx(Xe,{size:18,className:"text-blue-400"})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:v.isCancellation?"Cancelaci√≥n":v.isSpeedUp?"Acelerada":`Env√≠o ‚Üí ${ge(v.to,4)}`}),w(v)]}),e.jsxs("span",{className:"text-dark-500 text-xs",children:[v.value," ",m.nativeCurrency.symbol," ¬∑ ",N(v.timestamp)]})]}),y?e.jsx(Ar,{size:16,className:"text-dark-400"}):e.jsx(Bt,{size:16,className:"text-dark-400"})]}),e.jsx(ue,{children:y&&e.jsx(O.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-white/5",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"Hash"}),e.jsxs("a",{href:`${m.blockExplorerUrl}/tx/${v.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-kairos-400 font-mono flex items-center gap-1",children:[ge(v.hash,6),e.jsx(Oe,{size:10})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"De"}),e.jsx("span",{className:"font-mono text-dark-200",children:ge(v.from,6)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"Para"}),e.jsx("span",{className:"font-mono text-dark-200",children:ge(v.to,6)})]}),v.nonce!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400",children:"Nonce"}),e.jsx("span",{className:"text-dark-200",children:v.nonce})]})]}),R&&!v.isCancellation&&!v.isSpeedUp&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs("button",{onClick:()=>F(v,"speedup"),disabled:P,className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl bg-yellow-500/10 border border-yellow-500/20 text-yellow-400 text-xs font-medium disabled:opacity-40",children:[e.jsx(Le,{size:14}),"Acelerar (+30% gas)"]}),e.jsxs("button",{onClick:()=>F(v,"cancel"),disabled:P,className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-xs font-medium disabled:opacity-40",children:[e.jsx(ws,{size:14}),"Cancelar"]})]})]})})})]},v.hash)})}),e.jsx(Ms,{isOpen:E,onConfirm:k,onCancel:()=>{h(!1),f(null),d(null)},title:n==="speedup"?"Acelerar Transacci√≥n":"Cancelar Transacci√≥n",message:n==="speedup"?"Esto re-enviar√° la transacci√≥n con 30% m√°s gas. Cuesta gas real.":"Esto enviar√° una transacci√≥n vac√≠a con el mismo nonce para reemplazarla. Cuesta gas real.",confirmText:n==="speedup"?"Acelerar":"Cancelar TX"})]})}const Ki={1:[{id:"lido-eth",name:"Lido",description:"Liquid staking for ETH ‚Äî get stETH while earning ~3.5% APR",logo:"üîµ",color:"#00A3FF",type:"liquid",asset:"ETH",reward:"stETH",aprRange:"3.0% ‚Äì 4.0%",minStake:"0.001",contract:"0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",website:"https://lido.fi"},{id:"rocketpool-eth",name:"Rocket Pool",description:"Decentralized ETH staking ‚Äî receive rETH",logo:"üöÄ",color:"#FF6B35",type:"liquid",asset:"ETH",reward:"rETH",aprRange:"3.0% ‚Äì 3.8%",minStake:"0.01",contract:"0xae78736Cd615f374D3085123A210448E74Fc6393",depositContract:"0xDD9bc35aE942dF0cD11BbB945349b2d1d6A45659",website:"https://rocketpool.net"}],56:[{id:"pancake-cake",name:"PancakeSwap",description:"Stake CAKE for auto-compounding yield",logo:"ü•û",color:"#1FC7D4",type:"staking",asset:"CAKE",reward:"CAKE",aprRange:"5.0% ‚Äì 15.0%",minStake:"0.1",contract:"0x45c54210128a065de780C4B0Df3d16664f7f859e",tokenAddress:"0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82",website:"https://pancakeswap.finance/pools"},{id:"bnb-liquid",name:"Ankr BNB",description:"Liquid BNB staking ‚Äî earn aBNBc while staking",logo:"‚ö°",color:"#4A90E2",type:"liquid",asset:"BNB",reward:"aBNBc",aprRange:"2.5% ‚Äì 4.0%",minStake:"0.5",contract:"0x52F24a5e03aee338Da5fd9Df68D2b6FAe1178827",website:"https://www.ankr.com/staking/stake/bnb/"}],137:[{id:"lido-matic",name:"Lido",description:"Liquid staking for MATIC ‚Äî receive stMATIC",logo:"üîµ",color:"#00A3FF",type:"liquid",asset:"MATIC",reward:"stMATIC",aprRange:"4.0% ‚Äì 5.5%",minStake:"1",contract:"0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599",website:"https://polygon.lido.fi/"}],42161:[{id:"gmx-arb",name:"GMX",description:"Stake GMX for ETH + esGMX rewards",logo:"üü¢",color:"#4CC9F0",type:"staking",asset:"GMX",reward:"ETH + esGMX",aprRange:"8.0% ‚Äì 20.0%",minStake:"0.01",contract:"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1",tokenAddress:"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a",website:"https://app.gmx.io/#/earn"}],43114:[{id:"benqi-avax",name:"BENQI",description:"Liquid AVAX staking ‚Äî receive sAVAX",logo:"‚ùÑÔ∏è",color:"#E84142",type:"liquid",asset:"AVAX",reward:"sAVAX",aprRange:"5.0% ‚Äì 7.0%",minStake:"0.5",contract:"0x2b2C81e08f1Af8835a78Bb2A90AE924ACE0eA4bE",website:"https://staking.benqi.fi/"}]},Sx=["function submit(address _referral) external payable returns (uint256)","function balanceOf(address) view returns (uint256)","function getPooledEthByShares(uint256 _sharesAmount) view returns (uint256)","function getTotalPooledEther() view returns (uint256)","function getTotalShares() view returns (uint256)"],Gi=["function deposit(uint256 _amount, uint256 _lockDuration) external","function withdrawByAmount(uint256 _amount) external","function userInfo(address) view returns (uint256 shares, uint256 lastDepositedTime, uint256 cakeAtLastUserAction, uint256 lastUserActionTime, uint256 lockStartTime, uint256 lockEndTime, uint256 userBoostedShare, bool locked, uint256 lockedAmount)"],Wi=["function stakeBNB() external payable","function balanceOf(address) view returns (uint256)"];function Vi(t){return Ki[t]||[]}async function Hi(t,a){const s=re(1),x=new Pe(t,s),r=new oe("0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",Sx,x),l=Dt(a.toString());return{hash:(await r.submit(i0,{value:l})).hash,type:"stake",protocol:"Lido",amount:a,asset:"ETH",reward:"stETH",chainId:1,timestamp:Date.now(),status:"pending"}}async function Xi(t){try{const a=re(1),x=await new oe("0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",Sx,a).balanceOf(t);return De(x)}catch{return"0"}}async function Qi(t){const a=[];try{const s=await Xi(t);parseFloat(s)>0&&a.push({protocol:"Lido",asset:"ETH",reward:"stETH",staked:s,chainId:1,logo:"üîµ",color:"#00A3FF"})}catch{}try{const s=await qi(t);parseFloat(s)>0&&a.push({protocol:"PancakeSwap",asset:"CAKE",reward:"CAKE",staked:s,chainId:56,logo:"ü•û",color:"#1FC7D4"})}catch{}try{const s=await Ji(t);parseFloat(s)>0&&a.push({protocol:"Ankr BNB",asset:"BNB",reward:"aBNBc",staked:s,chainId:56,logo:"‚ö°",color:"#4A90E2"})}catch{}return a}async function Yi(){try{return(await(await fetch("https://eth-api.lido.fi/v1/protocol/steth/apr/sma")).json()).data?.smaApr?.toFixed(2)||"3.5"}catch{return"3.5"}}async function qi(t){try{const a=re(56),x=await new oe("0x45c54210128a065de780C4B0Df3d16664f7f859e",Gi,a).userInfo(t);return De(x.lockedAmount||x.shares||0n)}catch{return"0"}}async function Ji(t){try{const a=re(56),x=await new oe("0x52F24a5e03aee338Da5fd9Df68D2b6FAe1178827",Wi,a).balanceOf(t);return De(x)}catch{return"0"}}function Zi(){const{goBack:t,activeChainId:a,showToast:s,getActiveAccount:x,addPendingTx:r}=se(),l=x(),[u,m]=C.useState([]),[o,i]=C.useState([]),[c,n]=C.useState(null),[d,p]=C.useState(""),[f,E]=C.useState("0"),[h,g]=C.useState("3.5"),[D,b]=C.useState(!1),[A,B]=C.useState(!1),[F,k]=C.useState(!0),w=q[a];C.useEffect(()=>{const P=Vi(a);m(P),l?.address&&Qi(l.address).then(i).catch(()=>{}).finally(()=>k(!1)),Yi().then(g)},[a,l?.address]);const N=async P=>{if(n(P),p(""),P.asset===w?.nativeCurrency?.symbol||P.asset==="ETH"||P.asset==="BNB"||P.asset==="AVAX"||P.asset==="MATIC")try{const R=await Bn(a,l.address);E(R)}catch{E("0")}},v=()=>{if(!d||parseFloat(d)<=0){s("Ingresa una cantidad v√°lida","error");return}if(parseFloat(d)>parseFloat(f)){s("Balance insuficiente","error");return}B(!0)},j=async P=>{B(!1),b(!0);try{const R=await ve(P),M=[...R.accounts,...R.importedAccounts].find(_=>_.address.toLowerCase()===l.address.toLowerCase());if(!M?.privateKey)throw new Error("No se encontr√≥ la clave privada");let K;if(c.id==="lido-eth")K=await Hi(M.privateKey,d);else{window.open(c.website,"_blank"),b(!1);return}r(K),s(`‚ö° Staking de ${d} ${c.asset} iniciado`,"success"),p(""),n(null)}catch(R){s(R.message||"Error al hacer staking","error")}finally{b(!1)}},y=l&&!l.privateKey;return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Staking Hub"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[o.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-dark-300 mb-3 flex items-center gap-2",children:[e.jsx(ot,{size:14})," TUS POSICIONES"]}),o.map((P,R)=>e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 mb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:P.logo}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:P.protocol}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[P.reward," en ",q[P.chainId]?.shortName]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-bold",children:parseFloat(P.staked).toFixed(6)}),e.jsx("p",{className:"text-dark-400 text-xs",children:P.reward})]})]})},R))]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-dark-300 mb-3 flex items-center gap-2",children:[e.jsx($e,{size:14})," PROTOCOLOS EN ",w?.shortName||"RED"]}),u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ds,{className:"mx-auto text-dark-500 mb-3",size:40}),e.jsx("p",{className:"text-dark-400",children:"No hay protocolos de staking en esta red"}),e.jsx("p",{className:"text-dark-500 text-sm mt-1",children:"Cambia a Ethereum o BSC para m√°s opciones"})]}):e.jsx("div",{className:"space-y-3",children:u.map(P=>e.jsxs(O.button,{whileTap:{scale:.98},onClick:()=>N(P),className:`w-full bg-dark-800/50 rounded-xl p-4 border transition-all text-left ${c?.id===P.id?"border-kairos-500 bg-kairos-500/5":"border-dark-700 hover:border-dark-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:P.logo}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-white font-semibold",children:P.name}),P.type==="liquid"&&e.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500/20 text-blue-400 text-[10px] font-bold rounded",children:"L√çQUIDO"})]}),e.jsx("p",{className:"text-dark-400 text-xs mt-0.5",children:P.description})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-3",children:[e.jsx("p",{className:"text-green-400 font-bold text-sm",children:P.id==="lido-eth"?`${h}%`:P.aprRange}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:"APR"})]})]}),e.jsx(ue,{children:c?.id===P.id&&e.jsx(O.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-700 space-y-3",onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-lg text-dark-300 text-xs flex items-center gap-1",children:[e.jsx(ke,{size:10})," M√≠n: ",P.minStake," ",P.asset]}),e.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-lg text-dark-300 text-xs flex items-center gap-1",children:[e.jsx(Le,{size:10})," Recibe: ",P.reward]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:d,onChange:R=>p(R.target.value),placeholder:`Cantidad de ${P.asset}`,className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-white placeholder-dark-400 focus:border-kairos-500 focus:outline-none"}),e.jsx("button",{onClick:()=>p(f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-kairos-400 text-xs font-bold",children:"MAX"})]}),e.jsxs("p",{className:"text-dark-500 text-xs",children:["Balance: ",parseFloat(f).toFixed(6)," ",P.asset]}),P.id==="lido-eth"?e.jsx("button",{onClick:v,disabled:D||y||!d||parseFloat(d)<=0,className:"w-full py-3 rounded-xl font-bold text-sm transition-all bg-gradient-to-r from-kairos-500 to-kairos-600 text-dark-950 hover:shadow-lg disabled:opacity-50 disabled:shadow-none",children:D?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(O.span,{animate:{rotate:360},transition:{repeat:1/0,duration:1},children:"‚è≥"}),"Procesando..."]}):y?"üîí Cuenta de solo lectura":`Stake ${d||"0"} ${P.asset}`}):e.jsxs("a",{href:P.website,target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 rounded-xl font-bold text-sm transition-all bg-dark-700 text-white hover:bg-dark-600 flex items-center justify-center gap-2",children:[e.jsx(Oe,{size:14})," Abrir en ",P.name]})]})})})]},P.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-dark-300 mb-3",children:"‚ö° TODAS LAS OPORTUNIDADES"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{chain:"ETH",name:"Lido",apr:`${h}%`,logo:"üîµ"},{chain:"BSC",name:"PancakeSwap",apr:"5-15%",logo:"ü•û"},{chain:"ARB",name:"GMX",apr:"8-20%",logo:"üü¢"},{chain:"AVAX",name:"BENQI",apr:"5-7%",logo:"‚ùÑÔ∏è"}].map((P,R)=>e.jsxs("div",{className:"bg-dark-800/30 rounded-lg p-3 border border-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{children:P.logo}),e.jsx("span",{className:"text-white text-xs font-semibold",children:P.name})]}),e.jsxs("p",{className:"text-green-400 text-xs font-bold",children:[P.apr," APR"]}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:P.chain})]},R))})]})]}),A&&e.jsx(Ms,{title:"Confirmar Staking",message:`Stake ${d} ${c?.asset} en ${c?.name}`,onConfirm:j,onCancel:()=>B(!1)})]})}const Px=["function supply(address asset, uint256 amount, address onBehalfOf, uint16 referralCode)","function withdraw(address asset, uint256 amount, address to) returns (uint256)","function getUserAccountData(address user) view returns (uint256 totalCollateralBase, uint256 totalDebtBase, uint256 availableBorrowsBase, uint256 currentLiquidationThreshold, uint256 ltv, uint256 healthFactor)"],Tx=["function getReserveData(address asset) view returns (tuple(uint256 unbacked, uint256 accruedToTreasuryScaled, uint256 totalAToken, uint256 totalStableDebt, uint256 totalVariableDebt, uint256 liquidityRate, uint256 variableBorrowRate, uint256 stableBorrowRate, uint256 averageStableBorrowRate, uint256 liquidityIndex, uint256 variableBorrowIndex, uint40 lastUpdateTimestamp))","function getUserReserveData(address asset, address user) view returns (uint256 currentATokenBalance, uint256 currentStableDebt, uint256 currentVariableDebt, uint256 principalStableDebt, uint256 scaledVariableDebt, uint256 stableBorrowRate, uint256 liquidityRate, uint40 stableRateLastUpdated, bool usageAsCollateralEnabled)"],zs=["function mint(uint256 mintAmount) returns (uint256)","function redeem(uint256 redeemTokens) returns (uint256)","function redeemUnderlying(uint256 redeemAmount) returns (uint256)","function balanceOf(address owner) view returns (uint256)","function balanceOfUnderlying(address owner) returns (uint256)","function supplyRatePerBlock() view returns (uint256)","function exchangeRateStored() view returns (uint256)"],gs=["function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function balanceOf(address account) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)"],_s={aave:{1:{pool:"0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2",dataProvider:"0x7B4EB56E7CD4b454BA8ff71E4518426c86AF5bBb"},137:{pool:"0x794a61358D6845594F94dc1DB02A252b5b4814aD",dataProvider:"0x69FA688f1Dc47d4B5d8029D5a35FB7a548310654"},42161:{pool:"0x794a61358D6845594F94dc1DB02A252b5b4814aD",dataProvider:"0x69FA688f1Dc47d4B5d8029D5a35FB7a548310654"},8453:{pool:"0xA238Dd80C259a72e81d7e4664a9801593F98d1c5",dataProvider:"0x2d8A3C5677189723C4cB8873CfC9C8976FDF38Ac"}},venus:{56:{comptroller:"0xfD36E2c2a6789Db23113685031d7F16329158384"}}},ec={56:[{symbol:"USDT",name:"Tether USD",address:"0x55d398326f99059fF775485246999027B3197955",decimals:18,icon:"üíµ",protocol:"venus",vToken:"0xfD5840Cd36d94D7229439859C0112a4185BC0255"},{symbol:"USDC",name:"USD Coin",address:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",decimals:18,icon:"ü™ô",protocol:"venus",vToken:"0xecA88125a5ADbe82614ffC12D0DB554E2e2867C8"},{symbol:"BNB",name:"BNB",address:"0x0000000000000000000000000000000000000000",decimals:18,icon:"‚õìÔ∏è",protocol:"venus",vToken:"0xA07c5b74C9B40447a954e1466938b865b6BBea36",isNative:!0},{symbol:"BTCB",name:"Bitcoin BEP2",address:"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c",decimals:18,icon:"‚Çø",protocol:"venus",vToken:"0x882C173bC7Ff3b7786CA16dfeD3DFFfb9Ee7847B"},{symbol:"ETH",name:"Ethereum",address:"0x2170Ed0880ac9A755fd29B2688956BD959F933F8",decimals:18,icon:"üíé",protocol:"venus",vToken:"0xf508fCD89b8bd15579dc79A6827cB4686A3592c8"},{symbol:"KAIROS",name:"KairosCoin",address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],1:[{symbol:"USDT",name:"Tether USD",address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",decimals:8,icon:"‚Çø",protocol:"aave"},{symbol:"DAI",name:"Dai",address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",decimals:18,icon:"üü°",protocol:"aave"}],137:[{symbol:"USDT",name:"Tether USD",address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6",decimals:8,icon:"‚Çø",protocol:"aave"},{symbol:"POL",name:"POL",address:"0x0000000000000000000000000000000000001010",decimals:18,icon:"üü£",protocol:"aave",wrappedAddress:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270"},{symbol:"KAIROS",name:"KairosCoin",address:"0x9151B8C90B2F8a8DF82426E7E65d00563A75a6C9",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],42161:[{symbol:"USDT",name:"Tether USD",address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",decimals:8,icon:"‚Çø",protocol:"aave"},{symbol:"ARB",name:"Arbitrum",address:"0x912CE59144191C1204E64559FE8253a0e49E6548",decimals:18,icon:"üîµ",protocol:"aave"},{symbol:"KAIROS",name:"KairosCoin",address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],8453:[{symbol:"USDC",name:"USD Coin",address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0x4200000000000000000000000000000000000006",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"KAIROS",name:"KairosCoin",address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],43114:[{symbol:"USDT",name:"Tether USD",address:"0x9702230A8Ea53601f5cD2dc00fDBc13d4dF4A8c7",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WAVAX",name:"Wrapped AVAX",address:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",decimals:18,icon:"üî∫",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x50b7545627a5162F82A992c33b87aDc75187B218",decimals:8,icon:"‚Çø",protocol:"aave"}]};function kt(t){const a=q[t];if(!a)throw new Error(`Chain ${t} not supported`);return new rt(a.rpcUrls[0])}function Ix(t,a){return new Pe(a,kt(t))}const Rx="kairos_vault_positions";function Lx(){try{return JSON.parse(localStorage.getItem(Rx)||"{}")}catch{return{}}}function pt(t,a,s,x){const r=Lx(),l=`${t.toLowerCase()}_${a}_${s}`;r[l]={...x,updatedAt:Date.now()},localStorage.setItem(Rx,JSON.stringify(r))}function xt(t,a,s){return Lx()[`${t.toLowerCase()}_${a}_${s}`]||null}function O0(t){return ec[t]||[]}async function tc(t,a){try{if(a.protocol==="kairos")return{apy:a.apy||5,protocol:"Kairos Treasury"};if(a.protocol==="aave"){const s=_s.aave[t];if(!s)return{apy:0,protocol:"Aave V3"};const x=kt(t),r=new oe(s.dataProvider,Tx,x);try{const l=await r.getReserveData(a.address),m=Number(l.liquidityRate||l[5])/1e27*100;return{apy:Math.round(m*100)/100,protocol:"Aave V3"}}catch{return{apy:{USDT:4.2,USDC:4.5,WETH:1.8,WBTC:.3,DAI:4,POL:2.5,ARB:1.2,WAVAX:2}[a.symbol]||2,protocol:"Aave V3"}}}if(a.protocol==="venus"&&a.vToken){const s=kt(t),x=new oe(a.vToken,zs,s);try{const r=await x.supplyRatePerBlock(),l=28800n*365n,u=Number(r)*Number(l)/1e18*100;return{apy:Math.round(u*100)/100,protocol:"Venus"}}catch{return{apy:{USDT:3.8,USDC:4.1,BNB:1.5,BTCB:.5,ETH:1.3}[a.symbol]||2,protocol:"Venus"}}}return{apy:0,protocol:"Unknown"}}catch(s){return console.error("APY fetch error:",s),{apy:0,protocol:a.protocol}}}async function sc(t){const a=O0(t),s={},x=a.map(async r=>{const{apy:l,protocol:u}=await tc(t,r);s[r.symbol]={apy:l,protocol:u}});return await Promise.allSettled(x),s}async function ac(t,a,s){const x=kt(t);if(s.isNative||s.address==="0x0000000000000000000000000000000000000000"){const u=await x.getBalance(a);return De(u)}const l=await new oe(s.address,gs,x).balanceOf(a);return he(l,s.decimals)}async function xc(t,a,s){try{if(s.protocol==="kairos"){const x=xt(a,t,s.symbol);if(!x||!x.deposited||x.deposited<=0)return{deposited:0,earned:0};const r=(Date.now()-x.depositedAt)/1e3,u=(s.apy||5)/100/(365.25*24*3600),m=x.deposited*u*r;return{deposited:x.deposited,earned:Math.round(m*1e6)/1e6,depositedAt:x.depositedAt,protocol:"Kairos Treasury"}}if(s.protocol==="venus"&&s.vToken){const x=kt(t),r=new oe(s.vToken,zs,x),l=await r.balanceOf(a);if(l===0n)return{deposited:0,earned:0};const u=await r.exchangeRateStored(),m=l*u/Dt("1"),o=Number(he(m,s.decimals)),i=xt(a,t,s.symbol),c=i?Math.max(0,o-i.deposited):0;return{deposited:o,earned:c,protocol:"Venus"}}if(s.protocol==="aave"){const x=_s.aave[t];if(!x)return{deposited:0,earned:0};const r=kt(t),l=new oe(x.dataProvider,Tx,r),u=s.wrappedAddress||s.address,m=await l.getUserReserveData(u,a),o=Number(he(m[0],s.decimals));if(o<=0)return{deposited:0,earned:0};const i=xt(a,t,s.symbol),c=i?Math.max(0,o-i.deposited):0;return{deposited:o,earned:c,protocol:"Aave V3"}}return{deposited:0,earned:0}}catch(x){console.error("Position fetch error:",x);const r=xt(a,t,s.symbol);if(r&&r.deposited>0){const l=(Date.now()-(r.depositedAt||Date.now()))/1e3,u=(s.apy||3)/100,m=r.deposited*(u/(365.25*24*3600))*l;return{deposited:r.deposited,earned:Math.round(m*1e6)/1e6,protocol:s.protocol}}return{deposited:0,earned:0}}}async function rc(t,a){const s=O0(t),x=[],r=s.map(async l=>{const u=await xc(t,a,l);u.deposited>0&&x.push({...l,...u})});return await Promise.allSettled(r),x}async function nc(t,a,s,x){const r=Ix(t,a),l=r.address,u=Ie(x.toString(),s.decimals);if(s.protocol==="kairos"){const m=xt(l,t,s.symbol),o=m?.deposited||0,c=await new oe(s.address,gs,r).approve(l,u);return await c.wait(),pt(l,t,s.symbol,{deposited:o+parseFloat(x),depositedAt:m?.depositedAt||Date.now()}),{success:!0,hash:c.hash,protocol:"Kairos Treasury"}}if(s.protocol==="venus"&&s.vToken){const m=new oe(s.vToken,zs,r);if(s.isNative){const i=await(await m.mint(u,{value:u})).wait();return pt(l,t,s.symbol,{deposited:parseFloat(x),depositedAt:Date.now()}),{success:!0,hash:i.hash,protocol:"Venus"}}else{const o=new oe(s.address,gs,r);await o.allowance(l,s.vToken)<u&&await(await o.approve(s.vToken,vs)).wait();const n=await(await m.mint(u)).wait();return pt(l,t,s.symbol,{deposited:parseFloat(x),depositedAt:Date.now()}),{success:!0,hash:n.hash,protocol:"Venus"}}}if(s.protocol==="aave"){const m=_s.aave[t];if(!m)throw new Error("Aave not available on this chain");const o=new oe(m.pool,Px,r),i=s.wrappedAddress||s.address,c=new oe(i,gs,r);await c.allowance(l,m.pool)<u&&await(await c.approve(m.pool,vs)).wait();const p=await(await o.supply(i,u,l,0)).wait();return pt(l,t,s.symbol,{deposited:parseFloat(x),depositedAt:Date.now()}),{success:!0,hash:p.hash,protocol:"Aave V3"}}throw new Error("Protocol not supported")}async function oc(t,a,s,x){const r=Ix(t,a),l=r.address,u=Ie(x.toString(),s.decimals);if(s.protocol==="kairos"){const m=xt(l,t,s.symbol);if(!m||m.deposited<parseFloat(x))throw new Error("Saldo insuficiente en vault");const o=m.deposited-parseFloat(x);return pt(l,t,s.symbol,{deposited:o>1e-4?o:0,depositedAt:o>0?m.depositedAt:0}),{success:!0,hash:"0x_kairos_local_withdraw",protocol:"Kairos Treasury"}}if(s.protocol==="venus"&&s.vToken){const i=await(await new oe(s.vToken,zs,r).redeemUnderlying(u)).wait(),c=xt(l,t,s.symbol);if(c){const n=Math.max(0,c.deposited-parseFloat(x));pt(l,t,s.symbol,{...c,deposited:n})}return{success:!0,hash:i.hash,protocol:"Venus"}}if(s.protocol==="aave"){const m=_s.aave[t];if(!m)throw new Error("Aave not available on this chain");const o=new oe(m.pool,Px,r),i=s.wrappedAddress||s.address,n=await(await o.withdraw(i,u,l)).wait(),d=xt(l,t,s.symbol);if(d){const p=Math.max(0,d.deposited-parseFloat(x));pt(l,t,s.symbol,{...d,deposited:p})}return{success:!0,hash:n.hash,protocol:"Aave V3"}}throw new Error("Protocol not supported")}async function ic(t,a,s="deposit"){try{const r=await kt(t).getFeeData(),l=r.maxFeePerGas||r.gasPrice||0n,m={kairos:60000n,venus:250000n,aave:300000n}[a.protocol]||200000n,o=m*l;return{gasLimit:m.toString(),gasCostWei:o.toString(),gasCostFormatted:De(o)}}catch{return{gasLimit:"200000",gasCostWei:"0",gasCostFormatted:"0.0"}}}function cc(){const{activeAddress:t,activeChainId:a,goBack:s,showToast:x}=se(),r=q[a],[l,u]=C.useState("deposit"),[m,o]=C.useState([]),[i,c]=C.useState({}),[n,d]=C.useState([]),[p,f]=C.useState({}),[E,h]=C.useState(!0),[g,D]=C.useState(!1),[b,A]=C.useState(null),[B,F]=C.useState("deposit"),[k,w]=C.useState(""),[N,v]=C.useState(""),[j,y]=C.useState(null),[P,R]=C.useState(!1),[M,K]=C.useState(""),[_,H]=C.useState(""),[T,I]=C.useState(0),[S,G]=C.useState(0),z=C.useCallback(async()=>{const $=O0(a);o($);try{const[Y,te]=await Promise.all([sc(a),rc(a,t)]);c(Y),d(te);const ie={USDT:1,USDC:1,DAI:1,ETH:2800,WETH:2800,BTC:95e3,BTCB:95e3,WBTC:95e3,BNB:650,POL:.45,ARB:1.1,WAVAX:35,KAIROS:1};let me=0,W=0;te.forEach(de=>{const ye=ie[de.symbol]||0;me+=de.deposited*ye,W+=de.earned*ye}),I(me),G(W);const ne=$.map(async de=>{try{const ye=await ac(a,t,de);return[de.symbol,ye]}catch{return[de.symbol,"0"]}}),Fe=await Promise.all(ne),be={};Fe.forEach(([de,ye])=>{be[de]=ye}),f(be)}catch(Y){console.error("Vault load error:",Y)}h(!1),D(!1)},[a,t]);C.useEffect(()=>{h(!0),z()},[z]);const U=()=>{D(!0),z()},Q=async($,Y)=>{A($),F(Y),w(""),v(""),K(""),H(""),y(null);try{const te=await ic(a,$,Y);y(te)}catch{}},Z=()=>{A(null),w(""),v(""),K(""),H("")},ee=()=>{if(B==="deposit")w(p[b?.symbol]||"0");else{const $=n.find(Y=>Y.symbol===b?.symbol);w($?$.deposited.toString():"0")}},X=async()=>{if(!k||parseFloat(k)<=0){K("Ingresa un monto v√°lido");return}if(!N){K("Ingresa tu contrase√±a");return}R(!0),K(""),H("");try{const $=await ve(N),te=[...$.accounts||[],...$.importedAccounts||[]].find(me=>me.address.toLowerCase()===t.toLowerCase());if(!te)throw new Error("Cuenta no encontrada");let ie;B==="deposit"?ie=await nc(a,te.privateKey,b,k):ie=await oc(a,te.privateKey,b,k),H(B==="deposit"?`‚úÖ ${k} ${b.symbol} depositados en ${ie.protocol}`:`‚úÖ ${k} ${b.symbol} retirados de ${ie.protocol}`),x(_||"Transacci√≥n exitosa","success"),setTimeout(()=>{z(),Z()},2e3)}catch($){K($.message||"Error en la transacci√≥n")}R(!1)},J=$=>$>=1e6?`$${($/1e6).toFixed(2)}M`:$>=1e3?`$${($/1e3).toFixed(2)}K`:`$${$.toFixed(2)}`;return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Yield Vault"}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[r?.icon," ",r?.shortName," ¬∑ Gana intereses on-chain"]})]}),e.jsx("button",{onClick:U,className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(Ge,{size:16,className:`text-dark-300 ${g?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(Bs,{size:14,className:"text-kairos-400"}),e.jsx("span",{className:"text-dark-400 text-xs",children:"Depositado"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:J(T)})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx($e,{size:14,className:"text-green-400"}),e.jsx("span",{className:"text-dark-400 text-xs",children:"Ganancias"})]}),e.jsxs("p",{className:"text-lg font-bold text-green-400",children:["+",J(S)]})]})]}),e.jsx("div",{className:"flex gap-1 p-1 rounded-xl bg-white/5 mb-4",children:[{key:"deposit",label:"Depositar",icon:H0},{key:"positions",label:"Mis Posiciones",icon:Fs}].map($=>e.jsxs("button",{onClick:()=>u($.key),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-lg text-xs font-medium transition-all ${l===$.key?"bg-kairos-500/15 text-kairos-400":"text-dark-400 hover:text-white"}`,children:[e.jsx($.icon,{size:14}),$.label]},$.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto -mx-1 px-1",children:E?e.jsx("div",{className:"space-y-3",children:[1,2,3,4].map($=>e.jsx("div",{className:"glass-card p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-20 bg-white/5 rounded mb-1"}),e.jsx("div",{className:"h-3 w-28 bg-white/5 rounded"})]}),e.jsx("div",{className:"h-6 w-16 bg-white/5 rounded"})]})},$))}):l==="deposit"?e.jsxs("div",{className:"space-y-2",children:[m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{size:32,className:"text-dark-500 mx-auto mb-3"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"No hay vaults disponibles en esta red"})]}):m.map($=>{const Y=i[$.symbol],te=p[$.symbol]||"0",ie=parseFloat(te)>1e-4;return e.jsxs(O.button,{onClick:()=>ie?Q($,"deposit"):null,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`w-full glass-card p-4 flex items-center gap-3 text-left transition-all ${ie?"hover:bg-white/[0.06] cursor-pointer":"opacity-50"}`,children:[e.jsx("div",{className:"w-11 h-11 rounded-full bg-white/5 flex items-center justify-center text-xl",children:$.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:$.symbol}),Y&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold ${Y.apy>=3?"bg-green-500/15 text-green-400":Y.apy>=1?"bg-yellow-500/15 text-yellow-400":"bg-dark-700 text-dark-300"}`,children:[Y.apy.toFixed(1),"% APY"]})]}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[Y?.protocol||$.protocol," ¬∑ Bal: ",parseFloat(te).toFixed(4)]})]}),ie&&e.jsxs("div",{className:"flex items-center gap-1 text-kairos-400",children:[e.jsx(Le,{size:14}),e.jsx("span",{className:"text-xs font-medium",children:"Depositar"})]})]},$.symbol)}),e.jsxs("div",{className:"glass-card p-3 mt-4 flex items-start gap-2",children:[e.jsx(g0,{size:14,className:"text-dark-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-dark-400 text-[11px]",children:"Los fondos se depositan directamente en protocolos DeFi auditados (Aave V3, Venus). KAIROS genera yield del 5% APY desde el treasury de Kairos 777. Los intereses se acumulan en tiempo real."})]})]}):e.jsx("div",{className:"space-y-2",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fs,{size:32,className:"text-dark-500 mx-auto mb-3"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"No tienes posiciones activas"}),e.jsx("p",{className:"text-dark-500 text-xs mt-1",children:"Deposita tokens para empezar a ganar"}),e.jsx("button",{onClick:()=>u("deposit"),className:"kairos-button mt-4 px-6 py-2.5 text-sm",children:"Ver Vaults"})]}):n.map($=>e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-xl",children:$.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:$.symbol}),e.jsxs("span",{className:"text-[10px] bg-green-500/15 text-green-400 px-1.5 py-0.5 rounded-full font-bold",children:[(i[$.symbol]?.apy||0).toFixed(1),"% APY"]})]}),e.jsx("p",{className:"text-dark-400 text-xs",children:$.protocol})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"bg-white/[0.03] rounded-lg p-2.5",children:[e.jsx("p",{className:"text-dark-400 text-[10px] mb-0.5",children:"Depositado"}),e.jsxs("p",{className:"text-white text-sm font-semibold",children:[$.deposited.toFixed(4)," ",e.jsx("span",{className:"text-dark-400 text-xs",children:$.symbol})]})]}),e.jsxs("div",{className:"bg-white/[0.03] rounded-lg p-2.5",children:[e.jsx("p",{className:"text-dark-400 text-[10px] mb-0.5",children:"Ganado"}),e.jsxs("p",{className:"text-green-400 text-sm font-semibold",children:["+",$.earned.toFixed(6)," ",e.jsx("span",{className:"text-dark-400 text-xs",children:$.symbol})]})]})]}),e.jsxs("button",{onClick:()=>Q($,"withdraw"),className:"w-full py-2.5 rounded-xl border border-white/10 text-sm font-medium text-white hover:bg-white/5 transition-all flex items-center justify-center gap-1.5",children:[e.jsx(X0,{size:14}),"Retirar"]})]},$.symbol))})}),e.jsx(ue,{children:b&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-end justify-center",onClick:Z,children:e.jsxs(O.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},onClick:$=>$.stopPropagation(),className:"w-full max-w-lg glass-card-strong rounded-t-3xl p-6 pb-10 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-xl",children:b.icon}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-white",children:[B==="deposit"?"Depositar":"Retirar"," ",b.symbol]}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[i[b.symbol]?.protocol||b.protocol," ¬∑ ",(i[b.symbol]?.apy||0).toFixed(1),"% APY"]})]})]}),e.jsx("button",{onClick:Z,className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center",children:e.jsx(Te,{size:16})})]}),_?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(_e,{size:32,className:"text-green-400"})}),e.jsx("p",{className:"text-green-400 text-sm font-medium",children:_})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-dark-400 text-xs",children:"Monto"}),e.jsxs("button",{onClick:ee,className:"text-kairos-400 text-xs font-medium hover:underline",children:["MAX: ",B==="deposit"?parseFloat(p[b.symbol]||0).toFixed(4):(n.find($=>$.symbol===b.symbol)?.deposited||0).toFixed(4)]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:k,onChange:$=>{w($.target.value),K("")},placeholder:"0.00",className:"glass-input text-lg font-semibold pr-16",style:{color:"#ffffff",WebkitTextFillColor:"#ffffff"},autoFocus:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-dark-400 text-sm font-medium",children:b.symbol})]})]}),j&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-400 mb-3 px-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{size:12})," Gas estimado"]}),e.jsxs("span",{children:[parseFloat(j.gasCostFormatted).toFixed(5)," ",r?.nativeCurrency?.symbol]})]}),B==="deposit"&&k&&parseFloat(k)>0&&e.jsxs("div",{className:"glass-card p-3 mb-4 space-y-1.5",children:[e.jsx("p",{className:"text-dark-400 text-[10px] uppercase tracking-wider",children:"Proyecci√≥n de ganancias"}),[{label:"Diario",mult:1/365},{label:"Mensual",mult:1/12},{label:"Anual",mult:1}].map($=>{const Y=i[b.symbol]?.apy||0,te=parseFloat(k)*(Y/100)*$.mult;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-dark-300 text-xs",children:$.label}),e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["+",te.toFixed(6)," ",b.symbol]})]},$.label)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-dark-400 text-xs mb-2 block",children:"Contrase√±a de la wallet"}),e.jsx("input",{type:"password",value:N,onChange:$=>{v($.target.value),K("")},placeholder:"Ingresa tu contrase√±a",className:"glass-input text-sm",style:{color:"#ffffff",WebkitTextFillColor:"#ffffff"}})]}),M&&e.jsxs("div",{className:"flex items-start gap-2 bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4",children:[e.jsx(ce,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-red-400 text-xs",children:M})]}),e.jsx("button",{onClick:X,disabled:P||!k||!N,className:`w-full py-3.5 rounded-xl font-bold text-sm transition-all disabled:opacity-40 flex items-center justify-center gap-2 ${B==="deposit"?"kairos-button":"bg-white/10 text-white hover:bg-white/15 border border-white/10"}`,children:P?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:16,className:"animate-spin"})," Procesando..."]}):B==="deposit"?e.jsxs(e.Fragment,{children:[e.jsx(H0,{size:16})," Depositar ",b.symbol]}):e.jsxs(e.Fragment,{children:[e.jsx(X0,{size:16})," Retirar ",b.symbol]})}),e.jsxs("div",{className:"flex items-start gap-2 mt-4 px-1",children:[e.jsx(ke,{size:12,className:"text-dark-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:b.protocol==="kairos"?"KAIROS Vault genera yield desde el treasury de Kairos 777 Inc. Retiros sin penalty.":`Tus fondos ser√°n depositados directamente en ${i[b.symbol]?.protocol||"el protocolo"}. T√∫ mantienes la custodia.`})]})]})]})})})]})}function lc(){const{goBack:t,activeChainId:a}=se(),[s,x]=C.useState({}),[r,l]=C.useState(!0),[u,m]=C.useState(null),o=C.useCallback(async()=>{l(!0);const p={},f=at.map(async E=>{try{const g=await re(E).getFeeData(),D=g.gasPrice?parseFloat(he(g.gasPrice,"gwei")):0,b=g.maxPriorityFeePerGas?parseFloat(he(g.maxPriorityFeePerGas,"gwei")):0,A=g.gasPrice?g.gasPrice*21000n:0n,B=parseFloat(De(A)),F=g.gasPrice?g.gasPrice*65000n:0n,k=parseFloat(De(F)),w=g.gasPrice?g.gasPrice*150000n:0n,N=parseFloat(De(w));p[E]={gasPrice:D.toFixed(2),maxPriorityFee:b.toFixed(2),transferCost:B,tokenCost:k,swapCost:N,level:D<5?"low":D<30?"medium":D<100?"high":"extreme",supportsEIP1559:!!g.maxFeePerGas}}catch{p[E]={gasPrice:"‚Äî",level:"unknown",error:!0}}});await Promise.allSettled(f),x(p),m(new Date),l(!1)},[]);C.useEffect(()=>{o();const p=setInterval(o,15e3);return()=>clearInterval(p)},[o]);const i=p=>{switch(p){case"low":return"text-green-400";case"medium":return"text-yellow-400";case"high":return"text-orange-400";case"extreme":return"text-red-400";default:return"text-dark-400"}},c=p=>{switch(p){case"low":return"bg-green-500/10 border-green-500/20";case"medium":return"bg-yellow-500/10 border-yellow-500/20";case"high":return"bg-orange-500/10 border-orange-500/20";case"extreme":return"bg-red-500/10 border-red-500/20";default:return"bg-dark-800/50 border-dark-700"}},n=p=>{switch(p){case"low":return e.jsx(Rt,{className:"text-green-400",size:14});case"medium":return e.jsx(a0,{className:"text-yellow-400",size:14});case"high":return e.jsx($e,{className:"text-orange-400",size:14});case"extreme":return e.jsx($e,{className:"text-red-400",size:14});default:return e.jsx(a0,{className:"text-dark-400",size:14})}},d=p=>{switch(p){case"low":return"üü¢ Bajo";case"medium":return"üü° Normal";case"high":return"üü† Alto";case"extreme":return"üî¥ Muy Alto";default:return"‚ö™ ‚Äî"}};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Gas Tracker"})]})]}),e.jsx("button",{onClick:o,className:"text-dark-400 hover:text-kairos-400 transition-colors",disabled:r,children:e.jsx(Ge,{size:18,className:r?"animate-spin":""})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u&&e.jsxs("div",{className:"flex items-center gap-1 text-dark-500 text-xs",children:[e.jsx(Xe,{size:10}),e.jsxs("span",{children:["Actualizado: ",u.toLocaleTimeString()]}),e.jsx("span",{className:"ml-auto text-dark-600",children:"Auto-refresh: 15s"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["low","medium","high","extreme"].map(p=>e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${i(p)} bg-dark-800`,children:d(p)},p))}),at.map(p=>{const f=q[p],E=s[p],h=p===a;return e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`rounded-xl p-4 border transition-all ${h?"border-kairos-500/50 bg-kairos-500/5":c(E?.level)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:f.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold text-sm",children:f.shortName}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:f.name})]}),h&&e.jsx("span",{className:"px-1.5 py-0.5 bg-kairos-500/20 text-kairos-400 text-[9px] font-bold rounded",children:"ACTIVA"})]}),e.jsxs("div",{className:"text-right flex items-center gap-2",children:[E&&!E.error&&n(E.level),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold text-lg ${i(E?.level)}`,children:E?.gasPrice||"‚Äî"}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:"Gwei"})]})]})]}),E&&!E.error&&e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-dark-900/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-dark-400 text-[9px] mb-0.5",children:"Enviar"}),e.jsx("p",{className:"text-white text-xs font-semibold",children:E.transferCost<1e-4?"<0.0001":E.transferCost.toFixed(4)}),e.jsx("p",{className:"text-dark-500 text-[9px]",children:f.nativeCurrency.symbol})]}),e.jsxs("div",{className:"bg-dark-900/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-dark-400 text-[9px] mb-0.5",children:"Token TX"}),e.jsx("p",{className:"text-white text-xs font-semibold",children:E.tokenCost<1e-4?"<0.0001":E.tokenCost.toFixed(4)}),e.jsx("p",{className:"text-dark-500 text-[9px]",children:f.nativeCurrency.symbol})]}),e.jsxs("div",{className:"bg-dark-900/50 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-dark-400 text-[9px] mb-0.5",children:"Swap"}),e.jsx("p",{className:"text-white text-xs font-semibold",children:E.swapCost<1e-4?"<0.0001":E.swapCost.toFixed(4)}),e.jsx("p",{className:"text-dark-500 text-[9px]",children:f.nativeCurrency.symbol})]})]}),E?.supportsEIP1559&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-dark-500 text-[10px]",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"EIP-1559 ‚Ä¢ Priority: ",E.maxPriorityFee," Gwei"]})]},p)}),e.jsxs("div",{className:"bg-dark-800/30 rounded-xl p-4 border border-dark-700/50",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-2",children:"üí° Tips para Ahorrar Gas"}),e.jsxs("ul",{className:"space-y-1 text-dark-400 text-xs",children:[e.jsx("li",{children:"‚Ä¢ BSC, Polygon y Arbitrum tienen gas ultra-bajo (<1 Gwei)"}),e.jsx("li",{children:"‚Ä¢ Las TX son m√°s baratas en fines de semana"}),e.jsx("li",{children:'‚Ä¢ Usa "Econ√≥mico" en gas preset para TX no urgentes'}),e.jsx("li",{children:"‚Ä¢ Los batch de aprobaciones ahorran hasta 40% de gas"})]})]})]})]})}const dc={"0xa9059cbb":{name:"transfer",params:["address to","uint256 amount"],label:"Token Transfer"},"0x095ea7b3":{name:"approve",params:["address spender","uint256 amount"],label:"Token Approval"},"0x23b872dd":{name:"transferFrom",params:["address from","address to","uint256 amount"],label:"TransferFrom"},"0x38ed1739":{name:"swapExactTokensForTokens",params:["uint256 amountIn","uint256 amountOutMin","address[] path","address to","uint256 deadline"],label:"DEX Swap"},"0x7ff36ab5":{name:"swapExactETHForTokens",params:["uint256 amountOutMin","address[] path","address to","uint256 deadline"],label:"DEX Swap (Native‚ÜíToken)"},"0x18cbafe5":{name:"swapExactTokensForETH",params:["uint256 amountIn","uint256 amountOutMin","address[] path","address to","uint256 deadline"],label:"DEX Swap (Token‚ÜíNative)"},"0xa22cb465":{name:"setApprovalForAll",params:["address operator","bool approved"],label:"NFT Approval"},"0x42842e0e":{name:"safeTransferFrom",params:["address from","address to","uint256 tokenId"],label:"NFT Transfer"},"0x3593564c":{name:"execute",params:["bytes commands","bytes[] inputs","uint256 deadline"],label:"Universal Router"},"0xfb3bdb41":{name:"swapETHForExactTokens",params:["uint256 amountOut","address[] path","address to","uint256 deadline"],label:"DEX Swap"},"0xa6f2ae3a":{name:"buy",params:[],label:"Buy"},"0xd0e30db0":{name:"deposit",params:[],label:"Wrap Native"},"0x2e1a7d4d":{name:"withdraw",params:["uint256 amount"],label:"Unwrap Native"}};function mc(t){if(!t||t==="0x"||t.length<10)return null;const a=t.slice(0,10),s=dc[a];return s?{...s,selector:a,raw:t}:{name:"Unknown",label:`Function: ${a}`,selector:a,raw:t,params:[]}}function s0(t){return t?`${t.slice(0,8)}...${t.slice(-6)}`:"‚Äî"}function uc(){const{goBack:t,activeChainId:a,showToast:s}=se(),x=se(A=>A.txDetailData),[r,l]=C.useState(null),[u,m]=C.useState(null),[o,i]=C.useState(!0),c=q[a];C.useEffect(()=>{if(!x?.hash)return;(async()=>{i(!0);try{const B=re(a),[F,k]=await Promise.allSettled([B.getTransaction(x.hash),B.getTransactionReceipt(x.hash)]);F.status==="fulfilled"&&m(F.value),k.status==="fulfilled"&&l(k.value)}catch{}i(!1)})()},[x?.hash,a]);const n=A=>{navigator.clipboard.writeText(A),s("Copiado","success")};if(!x)return e.jsxs("div",{className:"screen-container items-center justify-center",children:[e.jsx("p",{className:"text-dark-400",children:"No hay datos de transacci√≥n"}),e.jsx("button",{onClick:t,className:"mt-4 text-kairos-400 text-sm",children:"‚Üê Volver"})]});const d=mc(u?.data),p=r?.status===1;r?.status;const f=!r,E=r?.gasUsed?r.gasUsed.toString():"‚Äî",h=u?.gasPrice?he(u.gasPrice,"gwei"):"‚Äî",g=r?.gasUsed&&u?.gasPrice?De(r.gasUsed*u.gasPrice):"‚Äî",D=u?.value?De(u.value):x.value||"0",b=u?.nonce?.toString()||x.nonce||"‚Äî";return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Detalles de TX"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:`rounded-xl p-4 border flex items-center gap-3 ${f?"bg-yellow-500/10 border-yellow-500/20":p?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"}`,children:[f?e.jsx(O.div,{animate:{rotate:360},transition:{repeat:1/0,duration:2},children:e.jsx(Xe,{className:"text-yellow-400",size:24})}):p?e.jsx(_e,{className:"text-green-400",size:24}):e.jsx(ws,{className:"text-red-400",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold ${f?"text-yellow-400":p?"text-green-400":"text-red-400"}`,children:f?"Pendiente":p?"Confirmada":"Fallida"}),d&&e.jsx("p",{className:"text-dark-300 text-xs",children:d.label})]})]}),parseFloat(D)>0&&e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 text-center",children:[e.jsx("p",{className:"text-dark-400 text-xs mb-1",children:"Valor"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:[parseFloat(D).toFixed(6)," ",c?.nativeCurrency?.symbol]})]}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-dark-400 text-xs",children:[e.jsx(Ta,{size:12})," De"]}),e.jsxs("button",{onClick:()=>n(u?.from||x.from||""),className:"flex items-center gap-1 text-white text-xs font-mono",children:[s0(u?.from||x.from)," ",e.jsx(We,{size:10,className:"text-dark-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-dark-400 text-xs",children:[e.jsx(Pa,{size:12})," Para"]}),e.jsxs("button",{onClick:()=>n(u?.to||x.to||""),className:"flex items-center gap-1 text-white text-xs font-mono",children:[s0(u?.to||x.to)," ",e.jsx(We,{size:10,className:"text-dark-500"})]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 space-y-3",children:[e.jsxs("h3",{className:"text-dark-300 text-xs font-semibold flex items-center gap-1",children:[e.jsx(A0,{size:12})," DETALLES"]}),[{icon:e.jsx(gr,{size:12}),label:"TX Hash",value:s0(x.hash),full:x.hash},{icon:e.jsx(b0,{size:12}),label:"Nonce",value:b},{icon:e.jsx(Fr,{size:12}),label:"Bloque",value:r?.blockNumber?.toString()||"Pendiente"},{icon:e.jsx(ht,{size:12}),label:"Gas Usado",value:E},{icon:e.jsx(ht,{size:12}),label:"Gas Price",value:`${parseFloat(h).toFixed(2)} Gwei`},{icon:e.jsx(ht,{size:12}),label:"Fee Total",value:g!=="‚Äî"?`${parseFloat(g).toFixed(6)} ${c?.nativeCurrency?.symbol}`:"‚Äî"}].map((A,B)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2 text-dark-400 text-xs",children:[A.icon," ",A.label]}),e.jsxs("button",{onClick:()=>A.full&&n(A.full),className:"text-white text-xs font-mono flex items-center gap-1",children:[A.value,A.full&&e.jsx(We,{size:8,className:"text-dark-600"})]})]},B))]}),d&&e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700",children:[e.jsxs("h3",{className:"text-dark-300 text-xs font-semibold flex items-center gap-1 mb-3",children:[e.jsx(kr,{size:12})," DATOS DECODIFICADOS"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400 text-xs",children:"Funci√≥n"}),e.jsxs("span",{className:"text-kairos-400 text-xs font-mono",children:[d.name,"()"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400 text-xs",children:"Selector"}),e.jsx("span",{className:"text-white text-xs font-mono",children:d.selector})]}),d.params.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-dark-400 text-xs",children:"Par√°metros:"}),e.jsx("div",{className:"mt-1 space-y-1",children:d.params.map((A,B)=>e.jsx("div",{className:"text-dark-300 text-[10px] font-mono pl-2 border-l border-dark-600",children:A},B))})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-dark-700",children:[e.jsx("p",{className:"text-dark-500 text-[10px] mb-1",children:"Raw Input Data:"}),e.jsx("p",{className:"text-dark-400 text-[10px] font-mono break-all line-clamp-3",children:d.raw})]})]}),e.jsxs("a",{href:`${c?.blockExplorerUrl}/tx/${x.hash}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-dark-800 border border-dark-700 text-kairos-400 text-sm font-semibold hover:bg-dark-700 transition-colors",children:[e.jsx(Oe,{size:14})," Ver en ",c?.shortName||"Explorer"]})]})]})}const Ec=[...it,"function owner() view returns (address)","function getOwner() view returns (address)","function totalSupply() view returns (uint256)","function maxTransactionAmount() view returns (uint256)","function maxWalletAmount() view returns (uint256)","function tradingEnabled() view returns (bool)"];async function pc(t,a){const s=re(t),x=new oe(a,Ec,s),r=[];let l=100,u="?",m="?",o=18,i=0n;try{[u,m,o,i]=await Promise.all([x.name(),x.symbol(),x.decimals(),x.totalSupply()]),r.push({label:"Token v√°lido",status:"pass",detail:`${u} (${m})`})}catch{return r.push({label:"Token v√°lido",status:"fail",detail:"No se pudo leer contrato"}),{score:0,checks:r,name:"?",symbol:"?",risk:"critical"}}try{const d=await s.getCode(a);d==="0x"?(r.push({label:"Smart Contract",status:"fail",detail:"No es un contrato (EOA)"}),l-=50):d.length>100&&r.push({label:"Smart Contract",status:"pass",detail:`C√≥digo: ${d.length} bytes`})}catch{}let c=null;try{c=await x.owner(),c===i0?(r.push({label:"Propiedad renunciada",status:"pass",detail:"Owner = 0x0 (bueno)"}),l+=5):(r.push({label:"Tiene due√±o",status:"warn",detail:`Owner: ${c.slice(0,10)}...`}),l-=10)}catch{try{c=await x.getOwner(),r.push({label:"Tiene due√±o",status:"warn",detail:`Owner: ${c.slice(0,10)}...`}),l-=10}catch{r.push({label:"Sin funci√≥n owner()",status:"info",detail:"No se puede verificar"})}}if(i>0n){const d=he(i,o),p=parseFloat(d);p>1e15?(r.push({label:"Supply extremo",status:"warn",detail:`${p.toExponential(2)} tokens`}),l-=15):r.push({label:"Supply razonable",status:"pass",detail:`${p.toLocaleString()} tokens`})}try{const d=await x.maxTransactionAmount(),p=parseFloat(he(d,o)),f=parseFloat(he(i,o)),E=p/f*100;E<1?(r.push({label:"L√≠mite de TX muy bajo",status:"fail",detail:`${E.toFixed(2)}% del supply. Posible honeypot.`}),l-=30):E<5&&(r.push({label:"L√≠mite de TX",status:"warn",detail:`${E.toFixed(2)}% del supply`}),l-=10)}catch{}if(c&&c!==i0)try{const d=await x.balanceOf(c),p=i>0n?Number(d*10000n/i)/100:0;p>50?(r.push({label:"Owner concentra tokens",status:"fail",detail:`${p.toFixed(1)}% del supply`}),l-=25):p>20?(r.push({label:"Owner tiene muchos tokens",status:"warn",detail:`${p.toFixed(1)}% del supply`}),l-=10):r.push({label:"Distribuci√≥n del owner",status:"pass",detail:`${p.toFixed(1)}% del supply`})}catch{}try{const d=await s.getBlockNumber();r.push({label:"Bloque actual",status:"info",detail:`#${d.toLocaleString()}`})}catch{}l=Math.max(0,Math.min(100,l));let n="low";return l<30?n="critical":l<50?n="high":l<70&&(n="medium"),{score:l,checks:r,name:u,symbol:m,decimals:o,totalSupply:he(i,o),risk:n}}function hc(){const{goBack:t,activeChainId:a,showToast:s}=se(),[x,r]=C.useState(""),[l,u]=C.useState(null),[m,o]=C.useState(!1),i=q[a],c=async()=>{if(x){try{F0(x)}catch{s("Direcci√≥n inv√°lida","error");return}o(!0),u(null);try{const E=await pc(a,x);u(E)}catch(E){s("Error al analizar: "+E.message,"error")}finally{o(!1)}}},n=E=>E>=70?"text-green-400":E>=50?"text-yellow-400":E>=30?"text-orange-400":"text-red-400",d=E=>E>=70?"from-green-500/20 to-green-500/5":E>=50?"from-yellow-500/20 to-yellow-500/5":E>=30?"from-orange-500/20 to-orange-500/5":"from-red-500/20 to-red-500/5",p=E=>{switch(E){case"low":return{text:"BAJO RIESGO",color:"text-green-400",bg:"bg-green-500/20"};case"medium":return{text:"RIESGO MEDIO",color:"text-yellow-400",bg:"bg-yellow-500/20"};case"high":return{text:"ALTO RIESGO",color:"text-orange-400",bg:"bg-orange-500/20"};case"critical":return{text:"‚ö†Ô∏è PELIGROSO",color:"text-red-400",bg:"bg-red-500/20"};default:return{text:"?",color:"text-dark-400",bg:"bg-dark-800"}}},f=E=>{switch(E){case"pass":return e.jsx(_e,{className:"text-green-400 flex-shrink-0",size:14});case"warn":return e.jsx(ce,{className:"text-yellow-400 flex-shrink-0",size:14});case"fail":return e.jsx(ws,{className:"text-red-400 flex-shrink-0",size:14});default:return e.jsx(He,{className:"text-dark-400 flex-shrink-0",size:14})}};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Auditor√≠a de Token"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:x,onChange:E=>r(E.target.value),onKeyDown:E=>E.key==="Enter"&&c(),placeholder:"Pega la direcci√≥n del contrato...",className:"w-full bg-dark-800 border border-dark-700 rounded-xl px-4 py-3 pr-12 text-white placeholder-dark-500 focus:border-kairos-500 focus:outline-none text-sm font-mono"}),e.jsx("button",{onClick:c,disabled:m||!x,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-kairos-500 rounded-lg text-dark-950 disabled:opacity-50",children:m?e.jsx(O.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},children:e.jsx(Le,{size:16})}):e.jsx(bt,{size:16})})]}),e.jsxs("p",{className:"text-dark-500 text-xs text-center",children:["Red: ",i?.shortName," ‚Ä¢ An√°lisis on-chain en tiempo real"]}),l&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{className:`bg-gradient-to-b ${d(l.score)} rounded-2xl p-6 border border-dark-700 text-center`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full border-4 border-current mb-3",children:e.jsx("span",{className:`text-3xl font-black ${n(l.score)}`,children:l.score})}),e.jsxs("p",{className:"text-white font-bold text-lg",children:[l.name," (",l.symbol,")"]}),e.jsx("div",{className:"mt-2 inline-block",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${p(l.risk).color} ${p(l.risk).bg}`,children:p(l.risk).text})}),l.totalSupply&&e.jsxs("p",{className:"text-dark-400 text-xs mt-2",children:["Supply: ",parseFloat(l.totalSupply).toLocaleString()]})]}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl border border-dark-700 divide-y divide-dark-700",children:l.checks.map((E,h)=>e.jsxs("div",{className:"flex items-start gap-3 p-3",children:[f(E.status),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white text-sm",children:E.label}),e.jsx("p",{className:"text-dark-400 text-xs truncate",children:E.detail})]})]},h))}),l.risk==="critical"||l.risk==="high"?e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ce,{className:"text-red-400 flex-shrink-0 mt-0.5",size:16}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 font-semibold text-sm",children:"Precauci√≥n"}),e.jsx("p",{className:"text-dark-300 text-xs mt-1",children:"Este token muestra se√±ales de riesgo. Investiga m√°s antes de invertir. Ning√∫n an√°lisis automatizado reemplaza tu propia investigaci√≥n (DYOR)."})]})]})}):null,e.jsxs("a",{href:`${i?.blockExplorerUrl}/token/${x}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-dark-800 border border-dark-700 text-kairos-400 text-sm font-semibold",children:[e.jsx(Oe,{size:14})," Ver contrato en ",i?.shortName]})]}),!l&&!m&&e.jsxs("div",{className:"mt-8 text-center space-y-4",children:[e.jsx(ke,{className:"mx-auto text-dark-600",size:48}),e.jsxs("div",{children:[e.jsx("p",{className:"text-dark-300 text-sm font-semibold",children:"Analiza cualquier token"}),e.jsx("p",{className:"text-dark-500 text-xs mt-1",children:"Verificamos el contrato on-chain: propiedad, supply, l√≠mites de TX, concentraci√≥n de holders y m√°s."})]}),e.jsxs("div",{className:"text-left bg-dark-800/30 rounded-xl p-4 space-y-2",children:[e.jsx("p",{className:"text-dark-300 text-xs font-semibold",children:"üîç ¬øQu√© verificamos?"}),e.jsxs("ul",{className:"text-dark-500 text-xs space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Validez del contrato y c√≥digo"}),e.jsx("li",{children:"‚Ä¢ Si el owner renunci√≥ la propiedad"}),e.jsx("li",{children:"‚Ä¢ Supply total y distribuci√≥n"}),e.jsx("li",{children:"‚Ä¢ L√≠mites de transacci√≥n (honeypot check)"}),e.jsx("li",{children:"‚Ä¢ Concentraci√≥n de tokens del owner"})]})]})]})]})]})}function fc(){const{goBack:t,activeChainId:a,showToast:s,balances:x,nativePrice:r,tokenPrices:l}=se(),u=q[a],[m,o]=C.useState([]),[i,c]=C.useState([]),[n,d]=C.useState("active"),[p,f]=C.useState(!1),[E,h]=C.useState(typeof Notification<"u"&&Notification.permission==="granted"),[g,D]=C.useState(""),[b,A]=C.useState(""),[B,F]=C.useState("above"),[k,w]=C.useState(""),[N,v]=C.useState(0);C.useEffect(()=>{o(gt()),c(u0())},[]);const j=()=>{o(gt()),c(u0())},y=[];if(x?.native&&y.push({symbol:u.nativeCurrency.symbol,address:null,price:r}),x?.tokens)for(const S of x.tokens){if(!S.hasBalance)continue;const G=l[S.address?.toLowerCase()];y.push({symbol:S.symbol,address:S.address,price:G?.usd||0})}const P=S=>{D(S.symbol),A(S.address||""),v(S.price||0),w("")},R=()=>{if(!g||!k||parseFloat(k)<=0){s("Completa todos los campos","error");return}nx({tokenSymbol:g,tokenAddress:b,chainId:a,condition:B,targetPrice:k,currentPrice:N}),s(`üîî Alerta creada: ${g} ${B==="above"?"‚Üë":"‚Üì"} $${k}`,"success"),f(!1),D(""),w(""),j()},M=S=>{Jn(S),j(),s("Alerta eliminada","info")},K=S=>{Zn(S),j()},_=async()=>{const S=await to();h(S),s(S?"üîî Notificaciones activadas":"Notificaciones denegadas",S?"success":"error")},H=S=>S?new Date(S).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"",T=m.filter(S=>S.active),I=m.filter(S=>!S.active);return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Alertas de Precio"})]})]}),e.jsx("button",{onClick:()=>f(!0),className:"w-9 h-9 rounded-xl bg-kairos-500/20 flex items-center justify-center text-kairos-400 hover:bg-kairos-500/30",children:e.jsx(Ve,{size:18})})]}),!E&&e.jsxs("button",{onClick:_,className:"mx-4 mt-3 p-3 rounded-xl bg-blue-500/10 border border-blue-500/20 flex items-center gap-2 text-blue-400 text-xs",children:[e.jsx(Je,{size:14}),e.jsx("span",{children:"Activa notificaciones para recibir alertas"})]}),e.jsx("div",{className:"flex gap-1 p-1 mx-4 mt-3 rounded-xl bg-white/5",children:[{key:"active",label:`Activas (${T.length})`},{key:"history",label:`Historial (${i.length})`}].map(S=>e.jsx("button",{onClick:()=>d(S.key),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${n===S.key?"bg-kairos-500/15 text-kairos-400":"text-dark-400"}`,children:S.label},S.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:n==="active"?e.jsx(e.Fragment,{children:T.length===0&&I.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"mx-auto text-dark-600 mb-3",size:40}),e.jsx("p",{className:"text-dark-400 text-sm",children:"No tienes alertas"}),e.jsx("p",{className:"text-dark-500 text-xs mt-1",children:"Crea una para recibir notificaciones de precio"}),e.jsx("button",{onClick:()=>f(!0),className:"mt-4 px-4 py-2 rounded-xl bg-kairos-500/20 text-kairos-400 text-sm font-semibold",children:"+ Crear Alerta"})]}):e.jsxs(e.Fragment,{children:[T.map(S=>e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${S.condition==="above"?"bg-green-500/10":"bg-red-500/10"}`,children:S.condition==="above"?e.jsx($e,{className:"text-green-400",size:18}):e.jsx(Rt,{className:"text-red-400",size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold text-sm",children:S.tokenSymbol}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[S.condition==="above"?"Sube a":"Baja a"," $",S.targetPrice]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>K(S.id),className:"p-1.5 rounded-lg hover:bg-dark-700 text-dark-400",children:e.jsx(x0,{size:14})}),e.jsx("button",{onClick:()=>M(S.id),className:"p-1.5 rounded-lg hover:bg-red-500/10 text-red-400",children:e.jsx(st,{size:14})})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-dark-500 text-[10px]",children:[e.jsx(Xe,{size:10}),e.jsxs("span",{children:["Creada ",H(S.createdAt)]}),e.jsxs("span",{children:["‚Ä¢ Precio al crear: $",S.currentPrice?.toFixed(4)]})]})]},S.id)),I.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-dark-500 text-xs font-semibold mt-4 mb-1",children:"PAUSADAS"}),I.map(S=>e.jsx("div",{className:"bg-dark-800/30 rounded-xl p-3 border border-dark-700/50 opacity-60",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x0,{size:14,className:"text-dark-500"}),e.jsxs("span",{className:"text-dark-400 text-sm",children:[S.tokenSymbol," ",S.condition==="above"?"‚Üë":"‚Üì"," $",S.targetPrice]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>K(S.id),className:"p-1 text-green-400",children:e.jsx(Se,{size:12})}),e.jsx("button",{onClick:()=>M(S.id),className:"p-1 text-red-400",children:e.jsx(st,{size:12})})]})]})},S.id))]})]})}):e.jsx(e.Fragment,{children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"mx-auto text-dark-600 mb-3",size:40}),e.jsx("p",{className:"text-dark-400 text-sm",children:"No hay alertas disparadas"})]}):i.map((S,G)=>e.jsx("div",{className:"bg-dark-800/30 rounded-xl p-3 border border-dark-700/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-kairos-500/10 flex items-center justify-center",children:e.jsx(Je,{className:"text-kairos-400",size:14})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-white text-sm font-semibold",children:[S.tokenSymbol," ",S.condition==="above"?"‚Üë":"‚Üì"," $",S.targetPrice]}),e.jsxs("p",{className:"text-dark-400 text-xs",children:["Disparada a $",S.triggeredPrice?.toFixed(4)," ¬∑ ",H(S.triggeredAt)]})]})]})},S.id+G))})}),e.jsx(ue,{children:p&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-end justify-center",onClick:()=>f(!1),children:e.jsxs(O.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25},className:"bg-dark-900 w-full max-w-md rounded-t-3xl p-6 border-t border-dark-700",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-bold text-lg",children:"Nueva Alerta"}),e.jsx("button",{onClick:()=>f(!1),className:"text-dark-400",children:e.jsx(Te,{size:20})})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-2",children:"Token"}),e.jsx("div",{className:"flex gap-2 flex-wrap mb-4",children:y.map(S=>e.jsxs("button",{onClick:()=>P(S),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${g===S.symbol?"bg-kairos-500/20 text-kairos-400 border border-kairos-500/40":"bg-dark-800 text-dark-300 border border-dark-700"}`,children:[S.symbol,S.price>0&&e.jsxs("span",{className:"text-dark-500 text-xs ml-1",children:["$",S.price.toFixed(2)]})]},S.symbol))}),e.jsx("p",{className:"text-dark-400 text-xs mb-2",children:"Cuando el precio..."}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>F("above"),className:`flex-1 py-2.5 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 border ${B==="above"?"bg-green-500/10 border-green-500/30 text-green-400":"bg-dark-800 border-dark-700 text-dark-400"}`,children:[e.jsx($e,{size:14})," Suba a"]}),e.jsxs("button",{onClick:()=>F("below"),className:`flex-1 py-2.5 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 border ${B==="below"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-dark-800 border-dark-700 text-dark-400"}`,children:[e.jsx(Rt,{size:14})," Baje a"]})]}),e.jsx("p",{className:"text-dark-400 text-xs mb-2",children:"Precio objetivo (USD)"}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-500",children:"$"}),e.jsx("input",{type:"number",value:k,onChange:S=>w(S.target.value),placeholder:"0.00",className:"w-full bg-dark-800 border border-dark-700 rounded-xl pl-8 pr-4 py-3 text-white placeholder-dark-500 focus:border-kairos-500 focus:outline-none"})]}),N>0&&e.jsxs("p",{className:"text-dark-500 text-xs mb-4",children:["Precio actual: $",N.toFixed(4),k&&e.jsxs("span",{className:B==="above"&&parseFloat(k)>N?" text-green-400":B==="below"&&parseFloat(k)<N?" text-red-400":" text-yellow-400",children:[" ","(",((parseFloat(k||0)/N-1)*100).toFixed(1),"%)"]})]}),e.jsx("button",{onClick:R,disabled:!g||!k||parseFloat(k)<=0,className:"w-full py-3.5 rounded-xl font-bold text-sm bg-gradient-to-r from-kairos-500 to-kairos-400 text-dark-950 disabled:opacity-40 transition-all",children:"üîî Crear Alerta"})]})})})]})}function Cc(){const{goBack:t,activeChainId:a,activeAddress:s,balances:x,showToast:r,getActiveAccount:l,addPendingTx:u}=se(),m=q[a],o=l(),[i,c]=C.useState([{address:"",amount:""}]),[n,d]=C.useState("native"),[p,f]=C.useState(!1),[E,h]=C.useState(!1),[g,D]=C.useState([]),[b,A]=C.useState("form"),[B,F]=C.useState([]),[k,w]=C.useState(-1),N=o&&!o.privateKey,v=[{id:"native",symbol:m?.nativeCurrency?.symbol,balance:x?.native?.balance||"0",decimals:18},...(x?.tokens?.filter(z=>z.hasBalance)||[]).map(z=>({id:z.address,symbol:z.symbol,balance:z.balance||"0",decimals:z.decimals||18,address:z.address}))],j=v.find(z=>z.id===n)||v[0],y=()=>{if(i.length>=20){r("M√°ximo 20 destinatarios","error");return}c([...i,{address:"",amount:""}])},P=z=>{i.length<=1||c(i.filter((U,Q)=>Q!==z))},R=(z,U,Q)=>{const Z=[...i];if(Z[z]={...Z[z],[U]:Q},c(Z),U==="address"&&Q.length>=2){const ee=Qe().filter(X=>X.name.toLowerCase().includes(Q.toLowerCase())||X.address.toLowerCase().includes(Q.toLowerCase())).slice(0,3);F(ee),w(z)}else F([])},M=(z,U)=>{R(U,"address",z.address),F([])},K=z=>{c(i.map(U=>({...U,amount:z})))},_=i.reduce((z,U)=>z+(parseFloat(U.amount)||0),0),H=parseFloat(j?.balance||"0"),T=()=>{for(let z=0;z<i.length;z++){if(!et(i[z].address))return r(`Direcci√≥n inv√°lida en fila ${z+1}`,"error"),!1;if(!i[z].amount||parseFloat(i[z].amount)<=0)return r(`Cantidad inv√°lida en fila ${z+1}`,"error"),!1}return _>H?(r("Balance insuficiente para el total","error"),!1):!0},I=()=>{T()&&A("confirm")},S=()=>{f(!0)},G=async z=>{f(!1),h(!0),A("sending");const U=[];try{const Q=await ve(z),ee=[...Q.accounts||[],...Q.importedAccounts||[]].find(J=>J.address.toLowerCase()===s.toLowerCase());if(!ee?.privateKey)throw new Error("No se encontr√≥ la clave privada");for(let J=0;J<i.length;J++){const $=i[J];try{let Y;n==="native"?Y=await Ya(a,ee.privateKey,$.address,$.amount,"standard"):Y=await qa(a,ee.privateKey,j.address,$.address,$.amount,j.decimals,"standard"),u({hash:Y.hash,from:s,to:$.address,value:$.amount,type:"send",chainId:a,timestamp:Date.now(),status:"pending"}),U.push({index:J,address:$.address,amount:$.amount,hash:Y.hash,status:"success"})}catch(Y){U.push({index:J,address:$.address,amount:$.amount,error:Y.message,status:"error"})}}D(U),A("done");const X=U.filter(J=>J.status==="success").length;r(`‚úÖ ${X}/${i.length} env√≠os completados`,"success")}catch(Q){r(Q.message||"Error ejecutando batch","error"),h(!1),A("confirm")}};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n0,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Multi-Send"})]}),e.jsxs("span",{className:"ml-auto text-dark-500 text-xs",children:[i.length," destinatario",i.length>1?"s":""]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[b==="form"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-dark-400 text-xs mb-2",children:"Token a enviar"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:v.slice(0,6).map(z=>e.jsxs("button",{onClick:()=>d(z.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${n===z.id?"bg-kairos-500/20 text-kairos-400 border-kairos-500/40":"bg-dark-800 text-dark-300 border-dark-700"}`,children:[z.symbol,e.jsx("span",{className:"text-dark-500 text-xs ml-1",children:parseFloat(z.balance).toFixed(4)})]},z.id))})]}),e.jsx("div",{className:"space-y-3",children:i.map((z,U)=>e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-3 border border-dark-700 relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-dark-500 text-xs font-bold w-5",children:["#",U+1]}),e.jsx("input",{type:"text",value:z.address,onChange:Q=>R(U,"address",Q.target.value),placeholder:"0x... direcci√≥n o nombre",className:"flex-1 bg-dark-700 border border-dark-600 rounded-lg px-3 py-2 text-white text-sm placeholder-dark-500 focus:border-kairos-500 focus:outline-none font-mono"}),i.length>1&&e.jsx("button",{onClick:()=>P(U),className:"text-red-400 hover:text-red-300",children:e.jsx(st,{size:14})})]}),k===U&&B.length>0&&e.jsx("div",{className:"mb-2 space-y-1",children:B.map(Q=>e.jsxs("button",{onClick:()=>M(Q,U),className:"w-full text-left px-2 py-1 rounded bg-dark-700/50 text-xs text-dark-300 hover:bg-dark-600",children:[Q.name," ‚Äî ",ge(Q.address,4)]},Q.id))}),e.jsxs("div",{className:"flex items-center gap-2 pl-7",children:[e.jsx("input",{type:"number",value:z.amount,onChange:Q=>R(U,"amount",Q.target.value),placeholder:"Cantidad",className:"flex-1 bg-dark-700 border border-dark-600 rounded-lg px-3 py-2 text-white text-sm placeholder-dark-500 focus:border-kairos-500 focus:outline-none"}),e.jsx("span",{className:"text-dark-500 text-xs",children:j?.symbol})]})]},U))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:y,className:"flex-1 py-2.5 rounded-xl bg-dark-800 border border-dark-700 text-dark-300 text-sm font-medium flex items-center justify-center gap-1 hover:bg-dark-700",children:[e.jsx(Ve,{size:14})," Agregar"]}),i.length>1&&e.jsx("button",{onClick:()=>{const z=(H/i.length*.98).toFixed(6);K(z)},className:"flex-1 py-2.5 rounded-xl bg-dark-800 border border-dark-700 text-dark-300 text-sm font-medium hover:bg-dark-700",children:"Dividir equitativo"})]}),e.jsxs("div",{className:"bg-dark-800/30 rounded-xl p-3 border border-dark-700/50",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-dark-400",children:"Total a enviar"}),e.jsxs("span",{className:`font-bold ${_>H?"text-red-400":"text-white"}`,children:[_.toFixed(6)," ",j?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-dark-500",children:"Balance disponible"}),e.jsxs("span",{className:"text-dark-400",children:[parseFloat(j?.balance||0).toFixed(6)," ",j?.symbol]})]}),_>H&&e.jsxs("p",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[e.jsx(ce,{size:10})," Balance insuficiente"]})]})]}),b==="confirm"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx(n0,{className:"mx-auto text-kairos-400 mb-2",size:32}),e.jsx("h2",{className:"text-white font-bold text-lg",children:"Confirmar Multi-Send"}),e.jsxs("p",{className:"text-dark-400 text-sm mt-1",children:[i.length," env√≠o",i.length>1?"s":""," ¬∑ ",_.toFixed(6)," ",j?.symbol]})]}),i.map((z,U)=>e.jsxs("div",{className:"flex items-center justify-between bg-dark-800/50 rounded-lg p-3 border border-dark-700/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-mono",children:ge(z.address,6)}),e.jsxs("p",{className:"text-dark-500 text-xs",children:["Destino #",U+1]})]}),e.jsxs("p",{className:"text-kairos-400 font-bold text-sm",children:[z.amount," ",j?.symbol]})]},U)),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>A("form"),className:"flex-1 py-3 rounded-xl bg-dark-800 border border-dark-700 text-dark-300 text-sm font-semibold",children:"Editar"}),e.jsx("button",{onClick:S,disabled:N,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-kairos-500 to-kairos-400 text-dark-950 text-sm font-bold disabled:opacity-40",children:N?"üîí Solo lectura":"üöÄ Enviar Todo"})]})]}),b==="sending"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1.5,ease:"linear"},children:e.jsx(je,{className:"mx-auto text-kairos-400",size:48})}),e.jsx("p",{className:"text-white font-bold mt-4",children:"Enviando transacciones..."}),e.jsx("p",{className:"text-dark-400 text-sm mt-1",children:"Esto puede tomar un momento"})]}),b==="done"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx(_e,{className:"mx-auto text-green-400 mb-2",size:40}),e.jsx("h2",{className:"text-white font-bold text-lg",children:"Multi-Send Completado"}),e.jsxs("p",{className:"text-dark-400 text-sm mt-1",children:[g.filter(z=>z.status==="success").length,"/",g.length," exitosos"]})]}),g.map((z,U)=>e.jsxs("div",{className:`flex items-center justify-between rounded-lg p-3 border ${z.status==="success"?"bg-green-500/5 border-green-500/20":"bg-red-500/5 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[z.status==="success"?e.jsx(_e,{className:"text-green-400",size:14}):e.jsx(Te,{className:"text-red-400",size:14}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-xs font-mono",children:ge(z.address,6)}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:z.status==="success"?z.hash?.slice(0,16)+"...":z.error?.slice(0,40)})]})]}),e.jsxs("span",{className:"text-dark-300 text-xs",children:[z.amount," ",j?.symbol]})]},U)),e.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl bg-kairos-500/20 text-kairos-400 text-sm font-bold mt-4",children:"Listo"})]})]}),b==="form"&&e.jsx("div",{className:"p-4 border-t border-dark-800",children:e.jsxs("button",{onClick:I,disabled:N||_<=0||_>H,className:"w-full py-3.5 rounded-xl font-bold text-sm bg-gradient-to-r from-kairos-500 to-kairos-400 text-dark-950 disabled:opacity-40 flex items-center justify-center gap-2",children:[e.jsx(Me,{size:14})," Revisar ",i.length," env√≠o",i.length>1?"s":""]})}),p&&e.jsx(Ms,{title:"Confirmar Multi-Send",message:`Enviar ${_.toFixed(6)} ${j?.symbol} a ${i.length} destinatarios`,onConfirm:G,onCancel:()=>f(!1)})]})}const ga="kairos_crosschain_portfolio",Bc=6e4;async function bc(t,a){try{const s=re(t),x=q[t],r=await s.getBalance(a);return{chainId:t,symbol:x.nativeCurrency.symbol,balance:De(r),isNative:!0}}catch{return{chainId:t,symbol:q[t]?.nativeCurrency?.symbol||"?",balance:"0",isNative:!0}}}async function Ac(t,a){const s=Rs[t]||[],x=[],r=re(t);for(const l of s.slice(0,6))try{const m=await new oe(l.address,it,r).balanceOf(a),o=he(m,l.decimals);parseFloat(o)>1e-4&&x.push({chainId:t,address:l.address,symbol:l.symbol,balance:o,decimals:l.decimals,isNative:!1})}catch{}return x}async function Fa(t){try{const r=JSON.parse(localStorage.getItem(ga)||"{}");if(r.address===t&&Date.now()-r.timestamp<Bc)return r}catch{}const a={chains:{},totalUSD:0,address:t,timestamp:Date.now()},s=at.map(async r=>{const l=q[r];try{const[u,m,o]=await Promise.all([bc(r,t),Ac(r,t),R0(r)]),i=m.filter(E=>!E.isNative).map(E=>E.address);let c={};if(i.length>0)try{c=await sx(r,i)}catch{}const n=parseFloat(u.balance)*o;let d=0;const p=m.map(E=>{const h=c[E.address?.toLowerCase()]?.usd||0,g=parseFloat(E.balance)*h;return d+=g,{...E,price:h,usd:g}}),f=n+d;return{chainId:r,chainName:l.name,shortName:l.shortName,color:l.color,native:{...u,price:o,usd:n},tokens:p,totalUSD:f}}catch(u){return{chainId:r,chainName:l.name,shortName:l.shortName,color:l.color,native:{balance:"0",usd:0},tokens:[],totalUSD:0,error:u.message}}}),x=await Promise.allSettled(s);for(const r of x)if(r.status==="fulfilled"&&r.value){const l=r.value;a.chains[l.chainId]=l,a.totalUSD+=l.totalUSD}try{localStorage.setItem(ga,JSON.stringify(a))}catch{}return a}const ka=["#D4AF37","#22d3ee","#a78bfa","#f472b6","#34d399","#fb923c","#60a5fa","#facc15","#f87171","#94a3b8"],Ox="kairos_pnl_history";function Mx(){try{return JSON.parse(localStorage.getItem(Ox)||"[]")}catch{return[]}}function gc(t){const a=Mx(),s=Date.now();a.length>0&&s-a[a.length-1].t<36e5||(a.push({t:s,v:t}),a.length>720&&a.splice(0,a.length-720),localStorage.setItem(Ox,JSON.stringify(a)))}function Da({slices:t,size:a=160,stroke:s=28}){const x=(a-s)/2,r=2*Math.PI*x,l=a/2,u=a/2;let m=0;return e.jsxs("svg",{width:a,height:a,viewBox:`0 0 ${a} ${a}`,children:[t.map((o,i)=>{const c=r*o.pct,n=`${c} ${r-c}`,d=e.jsx("circle",{cx:l,cy:u,r:x,fill:"none",stroke:o.color,strokeWidth:s,strokeDasharray:n,strokeDashoffset:-m,strokeLinecap:"round",className:"transition-all duration-700"},i);return m+=c,d}),e.jsx("circle",{cx:l,cy:u,r:x-s/2+2,fill:"transparent"})]})}function Fc(){const{activeChainId:t,activeAddress:a,balances:s,tokenPrices:x,nativePrice:r,goBack:l,getTotalPortfolioValue:u}=se(),m=u(),[o,i]=C.useState("allocation"),[c,n]=C.useState(null),[d,p]=C.useState(!1);C.useEffect(()=>{m>0&&gc(m)},[m]),C.useEffect(()=>{o==="crosschain"&&!c&&a&&(p(!0),Fa(a).then(h=>n(h)).catch(()=>{}).finally(()=>p(!1)))},[o,a]);const f=C.useMemo(()=>{const h=[];if(s.native){const D=parseFloat(s.native.balance||0),b=D*r;b>.01&&h.push({symbol:s.native.symbol,balance:D,value:b,isNative:!0,token:s.native})}if(s.tokens)for(const D of s.tokens){if(!D.hasBalance)continue;const b=x[D.address.toLowerCase()]?.usd||0,A=parseFloat(D.balance||0),B=A*b;B>.01&&h.push({symbol:D.symbol,balance:A,value:B,price:b,change24h:x[D.address.toLowerCase()]?.change24h||0,isNative:!1,token:D})}h.sort((D,b)=>b.value-D.value);const g=h.reduce((D,b)=>D+b.value,0);return h.map((D,b)=>({...D,pct:g>0?D.value/g:0,color:ka[b%ka.length]}))},[s,x,r]),E=C.useMemo(()=>{const h=Mx();if(h.length===0)return{day:0,week:0,month:0};const g=Date.now(),D=b=>{const A=g-b;return(h.find(F=>F.t>=A)||h[0]).v};return{day:m-D(864e5),week:m-D(6048e5),month:m-D(2592e6)}},[m]);return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:l,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Portfolio"})]})]}),e.jsx("div",{className:"flex gap-1 p-1 mx-4 mt-4 rounded-xl bg-white/5",children:[{key:"allocation",label:"Tokens",icon:fs},{key:"crosschain",label:"Multi-Chain",icon:ze},{key:"pnl",label:"P&L",icon:Dr}].map(h=>e.jsxs("button",{onClick:()=>i(h.key),className:`flex-1 py-2.5 rounded-lg text-xs font-medium transition-all flex items-center justify-center gap-1 ${o===h.key?"bg-kairos-500/15 text-kairos-400":"text-dark-400"}`,children:[e.jsx(h.icon,{size:12})," ",h.label]},h.key))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o==="allocation"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center py-4 relative",children:f.length>0?e.jsxs("div",{className:"relative",children:[e.jsx(Da,{slices:f}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-dark-400 text-xs",children:"Total"}),e.jsx("p",{className:"text-white font-bold text-lg",children:we(m)})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(fs,{className:"mx-auto text-dark-600",size:48}),e.jsx("p",{className:"text-dark-500 text-sm mt-2",children:"Sin activos con valor"})]})}),e.jsx("div",{className:"space-y-2",children:f.map((h,g)=>e.jsxs(O.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:g*.05},className:"flex items-center gap-3 bg-dark-800/50 rounded-xl p-3 border border-dark-700/50",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:h.color}}),e.jsx(Ke,{token:h.token,chainId:t,size:28}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white text-sm font-semibold",children:h.symbol}),e.jsx("p",{className:"text-dark-500 text-xs",children:nt(h.balance.toString())})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white text-sm font-bold",children:we(h.value)}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[(h.pct*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-12 h-1.5 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${h.pct*100}%`,backgroundColor:h.color}})})]},h.symbol))})]}),o==="crosschain"&&e.jsx(e.Fragment,{children:d?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1.5,ease:"linear"},children:e.jsx(je,{className:"mx-auto text-kairos-400",size:32})}),e.jsx("p",{className:"text-dark-400 text-sm mt-3",children:"Escaneando 6 blockchains..."})]}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-dark-400 text-xs",children:"Portfolio Total (6 Chains)"}),e.jsx("p",{className:"text-white font-bold text-2xl mt-1",children:we(c.totalUSD)})]}),(()=>{const h=at.map(g=>({chainId:g,...c.chains[g],pct:c.totalUSD>0?(c.chains[g]?.totalUSD||0)/c.totalUSD:0,color:q[g]?.color||"#888"})).filter(g=>g.totalUSD>.01);return h.length>0?e.jsx("div",{className:"flex justify-center py-2 relative",children:e.jsxs("div",{className:"relative",children:[e.jsx(Da,{slices:h,size:140,stroke:24}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx(ze,{className:"text-dark-500",size:16}),e.jsx("p",{className:"text-dark-400 text-[10px]",children:"6 chains"})]})]})}):null})(),e.jsx("div",{className:"space-y-2",children:at.map((h,g)=>{const D=c.chains[h];return!D||D.totalUSD<.01?e.jsxs("div",{className:"flex items-center gap-3 bg-dark-800/30 rounded-xl p-3 border border-dark-700/30 opacity-50",children:[e.jsx(Ct,{chainId:h,size:24}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-dark-400 text-sm",children:q[h].shortName})}),e.jsx("p",{className:"text-dark-600 text-xs",children:"$0.00"})]},h):e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:g*.05},className:"bg-dark-800/50 rounded-xl p-3 border border-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ct,{chainId:h,size:24}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white text-sm font-semibold",children:D.chainName}),e.jsxs("p",{className:"text-dark-500 text-xs",children:[D.tokens?.length||0," token",(D.tokens?.length||0)!==1?"s":""," con balance"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white text-sm font-bold",children:we(D.totalUSD)}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[c.totalUSD>0?(D.totalUSD/c.totalUSD*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"ml-9 space-y-1",children:[D.native&&parseFloat(D.native.balance)>1e-4&&e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-dark-400",children:D.native.symbol}),e.jsxs("span",{className:"text-dark-300",children:[parseFloat(D.native.balance).toFixed(4)," ¬∑ ",we(D.native.usd)]})]}),(D.tokens||[]).map(b=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-dark-400",children:b.symbol}),e.jsxs("span",{className:"text-dark-300",children:[parseFloat(b.balance).toFixed(4)," ¬∑ ",we(b.usd)]})]},b.address))]})]},h)})}),e.jsxs("button",{onClick:()=>{n(null),p(!0),Fa(a).then(h=>n(h)).finally(()=>p(!1))},className:"w-full py-2.5 rounded-xl bg-dark-800/50 text-dark-400 text-xs flex items-center justify-center gap-1.5 border border-dark-700/30",children:[e.jsx(Ge,{size:12})," Actualizar portfolio multi-chain"]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"mx-auto text-dark-600",size:40}),e.jsx("p",{className:"text-dark-500 text-sm mt-2",children:"Error cargando datos multi-chain"})]})}),o==="pnl"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-dark-400 text-xs",children:"Valor del Portfolio"}),e.jsx("p",{className:"text-white font-bold text-2xl mt-1",children:we(m)})]}),e.jsx("div",{className:"space-y-3",children:[{label:"√öltimas 24h",value:E.day,emoji:"üìÖ"},{label:"√öltimos 7 d√≠as",value:E.week,emoji:"üìÜ"},{label:"√öltimos 30 d√≠as",value:E.month,emoji:"üóìÔ∏è"}].map(h=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border ${h.value>=0?"bg-green-500/5 border-green-500/20":"bg-red-500/5 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:h.emoji}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:h.label}),e.jsx("p",{className:"text-dark-500 text-xs",children:"Ganancia/P√©rdida"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[h.value>=0?e.jsx($e,{size:14,className:"text-green-400"}):e.jsx(Rt,{size:14,className:"text-red-400"}),e.jsxs("span",{className:`font-bold text-sm ${h.value>=0?"text-green-400":"text-red-400"}`,children:[h.value>=0?"+":"",we(Math.abs(h.value))]})]}),m>0&&e.jsxs("p",{className:`text-xs ${h.value>=0?"text-green-500/60":"text-red-500/60"}`,children:[h.value>=0?"+":"",(h.value/m*100).toFixed(2),"%"]})]})]},h.label))}),e.jsx("div",{className:"bg-dark-800/30 rounded-xl p-3 border border-dark-700/30",children:e.jsx("p",{className:"text-dark-500 text-xs text-center",children:"üí° Los datos P&L se calculan desde snapshots de tu portfolio. Cuanto m√°s uses la wallet, m√°s preciso ser√°."})})]})]})]})}async function kc(t,a){const s=performance.now();try{const x=new rt(t,a,{staticNetwork:!0,batchMaxCount:1}),r=await Promise.race([x.getBlockNumber(),new Promise((u,m)=>setTimeout(()=>m("timeout"),5e3))]),l=Math.round(performance.now()-s);return{url:t,status:"ok",latency:l,blockNumber:r,error:null}}catch(x){const r=Math.round(performance.now()-s);return{url:t,status:"error",latency:r,blockNumber:0,error:x.message||"Timeout"}}}function Dc(){const{goBack:t}=se(),[a,s]=C.useState({}),[x,r]=C.useState(!1),[l,u]=C.useState(null),m=async()=>{r(!0);const c={};for(const n of at){const d=q[n],p=d.rpcUrls||[d.rpcUrl],f=await Promise.all(p.map(E=>kc(E,n)));c[n]=f}s(c),r(!1)};C.useEffect(()=>{m()},[]);const o=c=>{const n=a[c];if(!n)return"unknown";const d=n.filter(p=>p.status==="ok");return d.length===n.length?"healthy":d.length>0?"degraded":"down"},i=c=>{const n=a[c]?.filter(d=>d.status==="ok");return n?.length?Math.round(n.reduce((d,p)=>d+p.latency,0)/n.length):0};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:t,className:"text-dark-300 hover:text-white",children:e.jsx(le,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q0,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"RPC Health"})]}),e.jsx("button",{onClick:m,disabled:x,className:"ml-auto text-dark-400 hover:text-white",children:e.jsx(Ge,{size:16,className:x?"animate-spin":""})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[x&&Object.keys(a).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1.5,ease:"linear"},children:e.jsx(Q0,{className:"mx-auto text-kairos-400",size:32})}),e.jsx("p",{className:"text-dark-400 text-sm mt-3",children:"Verificando RPCs..."})]}),at.map(c=>{const n=q[c],d=o(c),p=i(c),f=a[c]||[],E=l===c;return e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("button",{onClick:()=>u(E?null:c),className:"w-full bg-dark-800/50 rounded-xl p-3 border border-dark-700/50 text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-lg",style:{backgroundColor:n.color+"15"},children:n.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-white text-sm font-semibold",children:n.shortName}),d==="healthy"&&e.jsx(_e,{size:12,className:"text-green-400"}),d==="degraded"&&e.jsx(ce,{size:12,className:"text-amber-400"}),d==="down"&&e.jsx(wr,{size:12,className:"text-red-400"})]}),e.jsxs("p",{className:"text-dark-500 text-xs",children:[f.length," RPCs ¬∑ ",f.filter(h=>h.status==="ok").length," activos"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm font-bold ${p<500?"text-green-400":p<1500?"text-amber-400":"text-red-400"}`,children:p>0?`${p}ms`:"‚Äî"}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:"latencia"})]})]})}),E&&f.length>0&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:f.map((h,g)=>e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg text-xs border ${h.status==="ok"?"bg-green-500/5 border-green-500/10":"bg-red-500/5 border-red-500/10"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${h.status==="ok"?"bg-green-400":"bg-red-400"}`}),e.jsxs("span",{className:"text-dark-300 font-mono truncate flex-1",title:h.url,children:[h.url.replace("https://","").slice(0,35),"..."]}),e.jsx("span",{className:`font-bold ${h.status==="ok"?"text-green-400":"text-red-400"}`,children:h.status==="ok"?`${h.latency}ms`:"FAIL"}),h.blockNumber>0&&e.jsxs("span",{className:"text-dark-500",children:["#",h.blockNumber.toLocaleString()]})]},g))})]},c)}),e.jsx("div",{className:"bg-dark-800/30 rounded-xl p-3 border border-dark-700/30 mt-4",children:e.jsx("p",{className:"text-dark-500 text-xs text-center",children:"üí° FallbackProvider cambia autom√°ticamente al siguiente RPC si uno falla. Verde = <500ms ¬∑ Amarillo = <1500ms ¬∑ Rojo = lento o ca√≠do."})})]})]})}let wc=class extends xe.Component{constructor(s){super(s);Vs(this,"handleReload",()=>{window.location.reload()});Vs(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,x){this.setState({errorInfo:x}),console.error("[ErrorBoundary]",s,x)}render(){return this.state.hasError?e.jsxs("div",{className:"h-full w-full max-w-md mx-auto bg-dark-950 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mb-6",children:e.jsx(ce,{className:"w-8 h-8 text-red-400"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Algo sali√≥ mal"}),e.jsx("p",{className:"text-dark-300 text-sm mb-6 max-w-xs",children:"La aplicaci√≥n encontr√≥ un error inesperado. Tus fondos est√°n seguros."}),this.state.error&&e.jsx("div",{className:"w-full bg-dark-800 rounded-xl p-3 mb-6 max-h-24 overflow-auto",children:e.jsx("p",{className:"text-red-400 text-xs font-mono break-all",children:this.state.error.toString()})}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs("button",{onClick:this.handleGoHome,className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl
                         bg-dark-700 hover:bg-dark-600 text-white transition-colors`,children:[e.jsx(vr,{className:"w-4 h-4"}),"Reintentar"]}),e.jsxs("button",{onClick:this.handleReload,className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl
                         bg-kairos-500 hover:bg-kairos-600 text-black font-semibold transition-colors`,children:[e.jsx(Ge,{className:"w-4 h-4"}),"Recargar"]})]})]}):this.props.children}};const wa={success:e.jsx(Se,{size:16,className:"text-green-400"}),error:e.jsx(ce,{size:16,className:"text-red-400"}),info:e.jsx(g0,{size:16,className:"text-blue-400"})},va={success:"border-green-500/30 bg-green-500/10",error:"border-red-500/30 bg-red-500/10",info:"border-blue-500/30 bg-blue-500/10"};function vc(){const t=se(a=>a.toastMessage);return e.jsx(ue,{children:t&&e.jsx(O.div,{initial:{y:-60,opacity:0},animate:{y:0,opacity:1},exit:{y:-60,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"fixed top-12 left-1/2 -translate-x-1/2 z-50 max-w-sm w-[90%]",children:e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 rounded-xl border backdrop-blur-xl ${va[t.type]||va.info}`,children:[wa[t.type]||wa.info,e.jsx("span",{className:"text-sm text-white flex-1",children:t.message})]})})})}const yc={initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}},jc={type:"tween",ease:"easeInOut",duration:.25};function Nc(){const{currentScreen:t,navigate:a,isUnlocked:s,lock:x}=se();C.useEffect(()=>{Ua()?a("unlock"):a("welcome")},[]),C.useEffect(()=>(s?tn(()=>x()):sa(),()=>sa()),[s]);const r=()=>{switch(t){case"welcome":return e.jsx(on,{},"welcome");case"create":return e.jsx(dn,{},"create");case"import":return e.jsx(mn,{},"import");case"unlock":return e.jsx(un,{},"unlock");case"dashboard":return e.jsx(oo,{},"dashboard");case"send":return e.jsx(Fo,{},"send");case"receive":return e.jsx(To,{},"receive");case"history":return e.jsx(Oo,{},"history");case"settings":return e.jsx(Go,{},"settings");case"tokens":return e.jsx(Wo,{},"tokens");case"swap":return e.jsx(Zo,{},"swap");case"contacts":return e.jsx(ei,{},"contacts");case"tokenDetail":return e.jsx(ii,{},"tokenDetail");case"walletconnect":return e.jsx(Ci,{},"walletconnect");case"nft":return e.jsx(Di,{},"nft");case"dapps":return e.jsx(Ni,{},"dapps");case"buy":return e.jsx(Ti,{},"buy");case"bridge":return e.jsx(Mi,{},"bridge");case"networks":return e.jsx(_i,{},"networks");case"approvals":return e.jsx($i,{},"approvals");case"pending":return e.jsx(Ui,{},"pending");case"staking":return e.jsx(Zi,{},"staking");case"vault":return e.jsx(cc,{},"vault");case"gas":return e.jsx(lc,{},"gas");case"txdetail":return e.jsx(uc,{},"txdetail");case"tokenaudit":return e.jsx(hc,{},"tokenaudit");case"alerts":return e.jsx(fc,{},"alerts");case"multisend":return e.jsx(Cc,{},"multisend");case"portfolio":return e.jsx(Fc,{},"portfolio");case"notifications":return e.jsx(no,{},"notifications");case"rpchealth":return e.jsx(Dc,{},"rpchealth");default:return e.jsx(Sc,{},"loading")}};return e.jsx(wc,{onReset:()=>a("dashboard"),children:e.jsxs("div",{className:"h-full w-full max-w-md mx-auto relative overflow-hidden bg-dark-950",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 rounded-full bg-kairos-500/5 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 rounded-full bg-kairos-600/5 blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full bg-kairos-400/3 blur-3xl"})]}),e.jsx(ue,{mode:"wait",children:e.jsx(O.div,{variants:yc,initial:"initial",animate:"animate",exit:"exit",transition:jc,className:"h-full w-full relative z-10",children:r()},t)}),e.jsx(vc,{})]})})}function Sc(){return e.jsxs("div",{className:"screen-container items-center justify-center",children:[e.jsx(O.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx("img",{src:"/icons/logo-128.png",alt:"Kairos",className:"w-16 h-16"})}),e.jsx("p",{className:"mt-4 text-dark-300 text-sm",children:"Cargando Kairos Wallet..."})]})}class Pc extends xe.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){console.error("Kairos Wallet Error:",a,s)}render(){return this.state.hasError?xe.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#05050f",color:"white",fontFamily:"Inter, sans-serif",padding:"20px",textAlign:"center",gap:"16px"}},xe.createElement("img",{src:"/icons/logo-128.png",width:64,height:64,alt:"Kairos"}),xe.createElement("h2",{style:{color:"#f7c948",fontSize:"20px"}},"Kairos Wallet"),xe.createElement("p",{style:{color:"#9d9db8",fontSize:"14px",maxWidth:"300px"}},"Algo sali√≥ mal. Intenta limpiar los datos del sitio."),xe.createElement("p",{style:{color:"#585887",fontSize:"12px",fontFamily:"monospace",maxWidth:"300px",wordBreak:"break-all"}},String(this.state.error)),xe.createElement("button",{onClick:()=>{localStorage.clear(),"caches"in window&&caches.keys().then(a=>a.forEach(s=>caches.delete(s))),window.location.reload()},style:{marginTop:"12px",padding:"12px 24px",borderRadius:"12px",background:"linear-gradient(135deg, #f7c948, #d4a017)",color:"#05050f",fontWeight:"bold",border:"none",cursor:"pointer",fontSize:"14px"}},"Reiniciar Wallet")):this.props.children}}const ya=document.getElementById("app-loading");ya&&ya.remove();try{zr.createRoot(document.getElementById("root")).render(xe.createElement(Pc,null,xe.createElement(xe.StrictMode,null,xe.createElement(Nc,null))))}catch(t){console.error("Fatal Kairos error:",t),document.getElementById("root").innerHTML=`
    <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#05050f;color:white;font-family:Inter,sans-serif;text-align:center;padding:20px;gap:16px;">
      <img src="/icons/logo-128.png" width="64" height="64" />
      <h2 style="color:#f7c948;">Error Fatal</h2>
      <p style="color:#9d9db8;font-size:14px;">${t.message}</p>
      <button onclick="localStorage.clear();location.reload()" style="padding:12px 24px;border-radius:12px;background:linear-gradient(135deg,#f7c948,#d4a017);color:#05050f;font-weight:bold;border:none;cursor:pointer;">Reiniciar</button>
    </div>
  `}
