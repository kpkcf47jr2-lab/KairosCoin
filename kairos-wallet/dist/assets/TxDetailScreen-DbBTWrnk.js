import{d as p,j as e,e as z,m as D,O as P,aj as U,az as A,a4 as I,h as b,a3 as O,a2 as $,aD as L,s as X,aE as H,_ as h,aF as R,w as B}from"./ui-Bym_0wSS.js";import{u as w,C as G,E as M}from"./index-Cv82Q9rX.js";import{formatUnits as V,formatEther as T}from"./crypto-1JBTrmrY.js";import"./vendor-CCYniLZC.js";const _={"0xa9059cbb":{name:"transfer",params:["address to","uint256 amount"],label:"Token Transfer"},"0x095ea7b3":{name:"approve",params:["address spender","uint256 amount"],label:"Token Approval"},"0x23b872dd":{name:"transferFrom",params:["address from","address to","uint256 amount"],label:"TransferFrom"},"0x38ed1739":{name:"swapExactTokensForTokens",params:["uint256 amountIn","uint256 amountOutMin","address[] path","address to","uint256 deadline"],label:"DEX Swap"},"0x7ff36ab5":{name:"swapExactETHForTokens",params:["uint256 amountOutMin","address[] path","address to","uint256 deadline"],label:"DEX Swap (Native→Token)"},"0x18cbafe5":{name:"swapExactTokensForETH",params:["uint256 amountIn","uint256 amountOutMin","address[] path","address to","uint256 deadline"],label:"DEX Swap (Token→Native)"},"0xa22cb465":{name:"setApprovalForAll",params:["address operator","bool approved"],label:"NFT Approval"},"0x42842e0e":{name:"safeTransferFrom",params:["address from","address to","uint256 tokenId"],label:"NFT Transfer"},"0x3593564c":{name:"execute",params:["bytes commands","bytes[] inputs","uint256 deadline"],label:"Universal Router"},"0xfb3bdb41":{name:"swapETHForExactTokens",params:["uint256 amountOut","address[] path","address to","uint256 deadline"],label:"DEX Swap"},"0xa6f2ae3a":{name:"buy",params:[],label:"Buy"},"0xd0e30db0":{name:"deposit",params:[],label:"Wrap Native"},"0x2e1a7d4d":{name:"withdraw",params:["uint256 amount"],label:"Unwrap Native"}};function W(a){if(!a||a==="0x"||a.length<10)return null;const n=a.slice(0,10),d=_[n];return d?{...d,selector:n,raw:a}:{name:"Unknown",label:`Function: ${n}`,selector:n,raw:a,params:[]}}function f(a){return a?`${a.slice(0,8)}...${a.slice(-6)}`:"—"}function Z(){const{goBack:a,activeChainId:n,showToast:d}=w(),s=w(t=>t.txDetailData),[l,y]=p.useState(null),[r,F]=p.useState(null),[q,j]=p.useState(!0),c=G[n];p.useEffect(()=>{if(!s?.hash)return;(async()=>{j(!0);try{const i=M(n),[v,g]=await Promise.allSettled([i.getTransaction(s.hash),i.getTransactionReceipt(s.hash)]);v.status==="fulfilled"&&F(v.value),g.status==="fulfilled"&&y(g.value)}catch{}j(!1)})()},[s?.hash,n]);const u=t=>{navigator.clipboard.writeText(t),d("Copiado","success")};if(!s)return e.jsxs("div",{className:"screen-container items-center justify-center",children:[e.jsx("p",{className:"text-dark-400",children:"No hay datos de transacción"}),e.jsx("button",{onClick:a,className:"mt-4 text-kairos-400 text-sm",children:"← Volver"})]});const o=W(r?.data),x=l?.status===1;l?.status;const m=!l,C=l?.gasUsed?l.gasUsed.toString():"—",E=r?.gasPrice?V(r.gasPrice,"gwei"):"—",N=l?.gasUsed&&r?.gasPrice?T(l.gasUsed*r.gasPrice):"—",k=r?.value?T(r.value):s.value||"0",S=r?.nonce?.toString()||s.nonce||"—";return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:a,className:"text-dark-300 hover:text-white",children:e.jsx(z,{size:20})}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Detalles de TX"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:`rounded-xl p-4 border flex items-center gap-3 ${m?"bg-yellow-500/10 border-yellow-500/20":x?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"}`,children:[m?e.jsx(D.div,{animate:{rotate:360},transition:{repeat:1/0,duration:2},children:e.jsx(P,{className:"text-yellow-400",size:24})}):x?e.jsx(U,{className:"text-green-400",size:24}):e.jsx(A,{className:"text-red-400",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold ${m?"text-yellow-400":x?"text-green-400":"text-red-400"}`,children:m?"Pendiente":x?"Confirmada":"Fallida"}),o&&e.jsx("p",{className:"text-dark-300 text-xs",children:o.label})]})]}),parseFloat(k)>0&&e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 text-center",children:[e.jsx("p",{className:"text-dark-400 text-xs mb-1",children:"Valor"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:[parseFloat(k).toFixed(6)," ",c?.nativeCurrency?.symbol]})]}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-dark-400 text-xs",children:[e.jsx(I,{size:12})," De"]}),e.jsxs("button",{onClick:()=>u(r?.from||s.from||""),className:"flex items-center gap-1 text-white text-xs font-mono",children:[f(r?.from||s.from)," ",e.jsx(b,{size:10,className:"text-dark-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-dark-400 text-xs",children:[e.jsx(O,{size:12})," Para"]}),e.jsxs("button",{onClick:()=>u(r?.to||s.to||""),className:"flex items-center gap-1 text-white text-xs font-mono",children:[f(r?.to||s.to)," ",e.jsx(b,{size:10,className:"text-dark-500"})]})]})]}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 space-y-3",children:[e.jsxs("h3",{className:"text-dark-300 text-xs font-semibold flex items-center gap-1",children:[e.jsx($,{size:12})," DETALLES"]}),[{icon:e.jsx(L,{size:12}),label:"TX Hash",value:f(s.hash),full:s.hash},{icon:e.jsx(X,{size:12}),label:"Nonce",value:S},{icon:e.jsx(H,{size:12}),label:"Bloque",value:l?.blockNumber?.toString()||"Pendiente"},{icon:e.jsx(h,{size:12}),label:"Gas Usado",value:C},{icon:e.jsx(h,{size:12}),label:"Gas Price",value:`${parseFloat(E).toFixed(2)} Gwei`},{icon:e.jsx(h,{size:12}),label:"Fee Total",value:N!=="—"?`${parseFloat(N).toFixed(6)} ${c?.nativeCurrency?.symbol}`:"—"}].map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2 text-dark-400 text-xs",children:[t.icon," ",t.label]}),e.jsxs("button",{onClick:()=>t.full&&u(t.full),className:"text-white text-xs font-mono flex items-center gap-1",children:[t.value,t.full&&e.jsx(b,{size:8,className:"text-dark-600"})]})]},i))]}),o&&e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700",children:[e.jsxs("h3",{className:"text-dark-300 text-xs font-semibold flex items-center gap-1 mb-3",children:[e.jsx(R,{size:12})," DATOS DECODIFICADOS"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400 text-xs",children:"Función"}),e.jsxs("span",{className:"text-kairos-400 text-xs font-mono",children:[o.name,"()"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dark-400 text-xs",children:"Selector"}),e.jsx("span",{className:"text-white text-xs font-mono",children:o.selector})]}),o.params.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-dark-400 text-xs",children:"Parámetros:"}),e.jsx("div",{className:"mt-1 space-y-1",children:o.params.map((t,i)=>e.jsx("div",{className:"text-dark-300 text-[10px] font-mono pl-2 border-l border-dark-600",children:t},i))})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-dark-700",children:[e.jsx("p",{className:"text-dark-500 text-[10px] mb-1",children:"Raw Input Data:"}),e.jsx("p",{className:"text-dark-400 text-[10px] font-mono break-all line-clamp-3",children:o.raw})]})]}),e.jsxs("a",{href:`${c?.blockExplorerUrl}/tx/${s.hash}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-dark-800 border border-dark-700 text-kairos-400 text-sm font-semibold hover:bg-dark-700 transition-colors",children:[e.jsx(B,{size:14})," Ver en ",c?.shortName||"Explorer"]})]})]})}export{Z as default};
