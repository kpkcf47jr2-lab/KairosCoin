import{d as a,j as e,e as q,D as G,al as R,P as w,a1 as V,B as X,m as h,C as H,h as K,t as W,am as Y,p as y,A as C,X as Z}from"./ui-Bym_0wSS.js";import{u as _,L as z,M as ee,f as te,y as se,N as E,O as ae,P as re}from"./index-CpQ9NCSn.js";import{a as ne,p as oe}from"./export-BfnEPiIM.js";import"./vendor-CCYniLZC.js";import"./crypto-1JBTrmrY.js";function me(){const{goBack:S,navigate:A,showToast:o}=_(),[x,D]=a.useState(z()),[r,I]=a.useState(""),[T,b]=a.useState(null),[l,n]=a.useState(null),[m,j]=a.useState(null),[s,c]=a.useState({name:"",address:"",notes:""}),[N,i]=a.useState(""),f=a.useMemo(()=>r?ee(r):x,[x,r]),u=()=>D(z()),B=t=>{navigator.clipboard.writeText(t.address),b(t.id),setTimeout(()=>b(null),2e3)},g=()=>{c({name:"",address:"",notes:""}),i(""),n("add")},P=t=>{j(t),c({name:t.name,address:t.address,notes:t.notes||""}),i(""),n("edit")},F=t=>{j(t),n("delete")},O=()=>{if(i(""),!s.name.trim()){i("Ingresa un nombre");return}if(!se(s.address)){i("Dirección inválida");return}try{l==="add"?(E(s),o("Contacto agregado","success")):(ae(m.id,s),o("Contacto actualizado","success")),u(),n(null)}catch(t){i(t.message)}},M=()=>{re(m.id),o("Contacto eliminado","success"),u(),n(null)},J=t=>{A("send"),setTimeout(()=>{const d=new CustomEvent("kairos:prefill-address",{detail:t.address});window.dispatchEvent(d)},300)},L=()=>{const t=ne(x);o(`${t} contactos exportados`,"success")},Q=()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async d=>{const k=d.target.files?.[0];if(k)try{const p=await k.text(),U=oe(p);let v=0;for(const $ of U)try{E($),v++}catch{}u(),o(`${v} contactos importados`,"success")}catch(p){o(p.message,"error")}},t.click()};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("button",{onClick:S,className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(q,{size:20,className:"text-dark-300"})}),e.jsx("h1",{className:"font-bold text-white",children:"Contactos"}),e.jsxs("div",{className:"flex items-center gap-1",children:[x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:L,className:"p-2 rounded-xl hover:bg-white/5",title:"Exportar",children:e.jsx(G,{size:16,className:"text-dark-400"})}),e.jsx("button",{onClick:Q,className:"p-2 rounded-xl hover:bg-white/5",title:"Importar",children:e.jsx(R,{size:16,className:"text-dark-400"})})]}),e.jsx("button",{onClick:g,className:"p-2 -mr-2 rounded-xl hover:bg-white/5",children:e.jsx(w,{size:20,className:"text-kairos-400"})})]})]}),e.jsx("div",{className:"px-5 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-500"}),e.jsx("input",{type:"text",value:r,onChange:t=>I(t.target.value),placeholder:"Buscar por nombre o dirección...",className:"w-full bg-white/[0.04] rounded-xl pl-10 pr-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8",children:f.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{size:24,className:"text-dark-400"})}),e.jsx("p",{className:"text-dark-400 text-sm mb-1",children:r?"No se encontraron contactos":"Sin contactos aún"}),e.jsx("p",{className:"text-dark-500 text-xs mb-4",children:r?"Intenta con otra búsqueda":"Agrega direcciones frecuentes"}),!r&&e.jsxs("button",{onClick:g,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-kairos-500/10 text-kairos-400 text-sm",children:[e.jsx(w,{size:14}),"Agregar contacto"]})]}):e.jsx("div",{className:"space-y-2",children:f.map((t,d)=>e.jsx(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d*.03},className:"bg-white/[0.03] rounded-xl p-3 border border-white/5 hover:border-white/10 transition-colors group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-kairos-500/20 to-purple-500/20 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-sm font-bold text-kairos-400",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold text-sm text-white truncate",children:t.name})}),e.jsx("span",{className:"text-xs text-dark-400 font-mono",children:te(t.address,8)}),t.notes&&e.jsx("p",{className:"text-[10px] text-dark-500 mt-1 truncate",children:t.notes})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>B(t),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Copiar dirección",children:T===t.id?e.jsx(H,{size:14,className:"text-green-400"}):e.jsx(K,{size:14,className:"text-dark-400"})}),e.jsx("button",{onClick:()=>J(t),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Enviar",children:e.jsx(W,{size:14,className:"text-blue-400"})}),e.jsx("button",{onClick:()=>P(t),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Editar",children:e.jsx(Y,{size:14,className:"text-dark-400"})}),e.jsx("button",{onClick:()=>F(t),className:"p-2 rounded-lg hover:bg-white/5 transition-colors",title:"Eliminar",children:e.jsx(y,{size:14,className:"text-red-400/60"})})]})]})},t.id))})}),e.jsx(C,{children:(l==="add"||l==="edit")&&e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/95 backdrop-blur-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsx("h2",{className:"font-bold text-white",children:l==="add"?"Nuevo contacto":"Editar contacto"}),e.jsx("button",{onClick:()=>n(null),className:"p-2 rounded-xl hover:bg-white/5",children:e.jsx(Z,{size:20,className:"text-dark-300"})})]}),e.jsxs("div",{className:"px-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1.5 block",children:"Nombre"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>c({...s,name:t.target.value}),placeholder:"ej: Binance, Amigo, Exchange",className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1.5 block",children:"Dirección"}),e.jsx("input",{type:"text",value:s.address,onChange:t=>c({...s,address:t.target.value}),placeholder:"0x...",className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50 font-mono text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-dark-400 mb-1.5 block",children:"Notas (opcional)"}),e.jsx("textarea",{value:s.notes,onChange:t=>c({...s,notes:t.target.value}),placeholder:"Notas adicionales...",rows:2,className:"w-full bg-white/[0.04] rounded-xl px-4 py-3 text-sm text-white placeholder-dark-500 outline-none border border-white/5 focus:border-kairos-500/50 resize-none"})]}),N&&e.jsx("p",{className:"text-red-400 text-xs",children:N}),e.jsx("button",{onClick:O,className:"w-full py-3 rounded-xl bg-gradient-to-r from-kairos-500 to-kairos-400 text-dark-950 font-bold text-sm",children:l==="add"?"Agregar":"Guardar"})]})]})}),e.jsx(C,{children:l==="delete"&&m&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-dark-950/80 backdrop-blur-xl flex items-center justify-center px-5",children:e.jsxs(h.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-sm bg-dark-800 rounded-2xl p-6 border border-white/10",children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/10 flex items-center justify-center mx-auto mb-3",children:e.jsx(y,{size:24,className:"text-red-400"})}),e.jsx("h3",{className:"font-bold text-white text-lg",children:"¿Eliminar contacto?"}),e.jsxs("p",{className:"text-xs text-dark-400 mt-1",children:['Se eliminará "',m.name,'" permanentemente.']})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n(null),className:"flex-1 py-3 rounded-xl bg-white/[0.06] text-dark-300 font-medium text-sm",children:"Cancelar"}),e.jsx("button",{onClick:M,className:"flex-1 py-3 rounded-xl bg-red-500 text-white font-bold text-sm",children:"Eliminar"})]})]})})})]})}export{me as default};
