import{d as x,j as e,e as Be,b as Fe,at as Se,k as Ee,aB as ae,W as oe,S as re,m as R,Z as ne,I as ke,aC as ie,A as Pe,X as Ue,aj as Re,T as Ve,ag as Le}from"./ui-Bym_0wSS.js";import{E as B,u as We,C as Oe,p as $e}from"./index-Cquho6SP.js";import{formatEther as le,Contract as y,formatUnits as z,parseUnits as de,MaxUint256 as ce,parseEther as Ke,Wallet as ze}from"./crypto-1JBTrmrY.js";import"./vendor-CCYniLZC.js";const pe=["function supply(address asset, uint256 amount, address onBehalfOf, uint16 referralCode)","function withdraw(address asset, uint256 amount, address to) returns (uint256)","function getUserAccountData(address user) view returns (uint256 totalCollateralBase, uint256 totalDebtBase, uint256 availableBorrowsBase, uint256 currentLiquidationThreshold, uint256 ltv, uint256 healthFactor)"],me=["function getReserveData(address asset) view returns (tuple(uint256 unbacked, uint256 accruedToTreasuryScaled, uint256 totalAToken, uint256 totalStableDebt, uint256 totalVariableDebt, uint256 liquidityRate, uint256 variableBorrowRate, uint256 stableBorrowRate, uint256 averageStableBorrowRate, uint256 liquidityIndex, uint256 variableBorrowIndex, uint40 lastUpdateTimestamp))","function getUserReserveData(address asset, address user) view returns (uint256 currentATokenBalance, uint256 currentStableDebt, uint256 currentVariableDebt, uint256 principalStableDebt, uint256 scaledVariableDebt, uint256 stableBorrowRate, uint256 liquidityRate, uint40 stableRateLastUpdated, bool usageAsCollateralEnabled)"],L=["function mint(uint256 mintAmount) returns (uint256)","function redeem(uint256 redeemTokens) returns (uint256)","function redeemUnderlying(uint256 redeemAmount) returns (uint256)","function balanceOf(address owner) view returns (uint256)","function balanceOfUnderlying(address owner) returns (uint256)","function supplyRatePerBlock() view returns (uint256)","function exchangeRateStored() view returns (uint256)"],V=["function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function balanceOf(address account) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)"],W={aave:{1:{pool:"0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2",dataProvider:"0x7B4EB56E7CD4b454BA8ff71E4518426c86AF5bBb"},137:{pool:"0x794a61358D6845594F94dc1DB02A252b5b4814aD",dataProvider:"0x69FA688f1Dc47d4B5d8029D5a35FB7a548310654"},42161:{pool:"0x794a61358D6845594F94dc1DB02A252b5b4814aD",dataProvider:"0x69FA688f1Dc47d4B5d8029D5a35FB7a548310654"},8453:{pool:"0xA238Dd80C259a72e81d7e4664a9801593F98d1c5",dataProvider:"0x2d8A3C5677189723C4cB8873CfC9C8976FDF38Ac"}},venus:{56:{comptroller:"0xfD36E2c2a6789Db23113685031d7F16329158384"}}},Me={56:[{symbol:"USDT",name:"Tether USD",address:"0x55d398326f99059fF775485246999027B3197955",decimals:18,icon:"üíµ",protocol:"venus",vToken:"0xfD5840Cd36d94D7229439859C0112a4185BC0255"},{symbol:"USDC",name:"USD Coin",address:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",decimals:18,icon:"ü™ô",protocol:"venus",vToken:"0xecA88125a5ADbe82614ffC12D0DB554E2e2867C8"},{symbol:"BNB",name:"BNB",address:"0x0000000000000000000000000000000000000000",decimals:18,icon:"‚õìÔ∏è",protocol:"venus",vToken:"0xA07c5b74C9B40447a954e1466938b865b6BBea36",isNative:!0},{symbol:"BTCB",name:"Bitcoin BEP2",address:"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c",decimals:18,icon:"‚Çø",protocol:"venus",vToken:"0x882C173bC7Ff3b7786CA16dfeD3DFFfb9Ee7847B"},{symbol:"ETH",name:"Ethereum",address:"0x2170Ed0880ac9A755fd29B2688956BD959F933F8",decimals:18,icon:"üíé",protocol:"venus",vToken:"0xf508fCD89b8bd15579dc79A6827cB4686A3592c8"},{symbol:"KAIROS",name:"KairosCoin",address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],1:[{symbol:"USDT",name:"Tether USD",address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",decimals:8,icon:"‚Çø",protocol:"aave"},{symbol:"DAI",name:"Dai",address:"0x6B175474E89094C44Da98b954EedeAC495271d0F",decimals:18,icon:"üü°",protocol:"aave"}],137:[{symbol:"USDT",name:"Tether USD",address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6",decimals:8,icon:"‚Çø",protocol:"aave"},{symbol:"POL",name:"POL",address:"0x0000000000000000000000000000000000001010",decimals:18,icon:"üü£",protocol:"aave",wrappedAddress:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270"},{symbol:"KAIROS",name:"KairosCoin",address:"0x9151B8C90B2F8a8DF82426E7E65d00563A75a6C9",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],42161:[{symbol:"USDT",name:"Tether USD",address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",decimals:8,icon:"‚Çø",protocol:"aave"},{symbol:"ARB",name:"Arbitrum",address:"0x912CE59144191C1204E64559FE8253a0e49E6548",decimals:18,icon:"üîµ",protocol:"aave"},{symbol:"KAIROS",name:"KairosCoin",address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],8453:[{symbol:"USDC",name:"USD Coin",address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WETH",name:"Wrapped ETH",address:"0x4200000000000000000000000000000000000006",decimals:18,icon:"üíé",protocol:"aave"},{symbol:"KAIROS",name:"KairosCoin",address:"0x14D41707269c7D8b8DFa5095b38824a46dA05da3",decimals:18,icon:"üèõÔ∏è",protocol:"kairos",apy:5}],43114:[{symbol:"USDT",name:"Tether USD",address:"0x9702230A8Ea53601f5cD2dc00fDBc13d4dF4A8c7",decimals:6,icon:"üíµ",protocol:"aave"},{symbol:"USDC",name:"USD Coin",address:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",decimals:6,icon:"ü™ô",protocol:"aave"},{symbol:"WAVAX",name:"Wrapped AVAX",address:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",decimals:18,icon:"üî∫",protocol:"aave"},{symbol:"WBTC",name:"Wrapped BTC",address:"0x50b7545627a5162F82A992c33b87aDc75187B218",decimals:8,icon:"‚Çø",protocol:"aave"}]};function xe(a,o){return new ze(o,B(a))}const ue="kairos_vault_positions";function be(){try{return JSON.parse(localStorage.getItem(ue)||"{}")}catch{return{}}}function T(a,o,s,n){const i=be(),r=`${a.toLowerCase()}_${o}_${s}`;i[r]={...n,updatedAt:Date.now()},localStorage.setItem(ue,JSON.stringify(i))}function A(a,o,s){return be()[`${a.toLowerCase()}_${o}_${s}`]||null}function M(a){return Me[a]||[]}async function _e(a,o){try{if(o.protocol==="kairos")return{apy:o.apy||5,protocol:"Kairos Treasury"};if(o.protocol==="aave"){const s=W.aave[a];if(!s)return{apy:0,protocol:"Aave V3"};const n=B(a),i=new y(s.dataProvider,me,n);try{const r=await i.getReserveData(o.address),c=Number(r.liquidityRate||r[5])/1e27*100;return{apy:Math.round(c*100)/100,protocol:"Aave V3"}}catch{return{apy:{USDT:4.2,USDC:4.5,WETH:1.8,WBTC:.3,DAI:4,POL:2.5,ARB:1.2,WAVAX:2}[o.symbol]||2,protocol:"Aave V3"}}}if(o.protocol==="venus"&&o.vToken){const s=B(a),n=new y(o.vToken,L,s);try{const i=await n.supplyRatePerBlock(),r=28800n*365n,l=Number(i)*Number(r)/1e18*100;return{apy:Math.round(l*100)/100,protocol:"Venus"}}catch{return{apy:{USDT:3.8,USDC:4.1,BNB:1.5,BTCB:.5,ETH:1.3}[o.symbol]||2,protocol:"Venus"}}}return{apy:0,protocol:"Unknown"}}catch(s){return console.error("APY fetch error:",s),{apy:0,protocol:o.protocol}}}async function He(a){const o=M(a),s={},n=o.map(async i=>{const{apy:r,protocol:l}=await _e(a,i);s[i.symbol]={apy:r,protocol:l}});return await Promise.allSettled(n),s}async function Ye(a,o,s){const n=B(a);if(s.isNative||s.address==="0x0000000000000000000000000000000000000000"){const l=await n.getBalance(o);return le(l)}const r=await new y(s.address,V,n).balanceOf(o);return z(r,s.decimals)}async function Ge(a,o,s){try{if(s.protocol==="kairos"){const n=A(o,a,s.symbol);if(!n||!n.deposited||n.deposited<=0)return{deposited:0,earned:0};const i=(Date.now()-n.depositedAt)/1e3,l=(s.apy||5)/100/(365.25*24*3600),c=n.deposited*l*i;return{deposited:n.deposited,earned:Math.round(c*1e6)/1e6,depositedAt:n.depositedAt,protocol:"Kairos Treasury"}}if(s.protocol==="venus"&&s.vToken){const n=B(a),i=new y(s.vToken,L,n),r=await i.balanceOf(o);if(r===0n)return{deposited:0,earned:0};const l=await i.exchangeRateStored(),c=r*l/Ke("1"),d=Number(z(c,s.decimals)),p=A(o,a,s.symbol),u=p?Math.max(0,d-p.deposited):0;return{deposited:d,earned:u,protocol:"Venus"}}if(s.protocol==="aave"){const n=W.aave[a];if(!n)return{deposited:0,earned:0};const i=B(a),r=new y(n.dataProvider,me,i),l=s.wrappedAddress||s.address,c=await r.getUserReserveData(l,o),d=Number(z(c[0],s.decimals));if(d<=0)return{deposited:0,earned:0};const p=A(o,a,s.symbol),u=p?Math.max(0,d-p.deposited):0;return{deposited:d,earned:u,protocol:"Aave V3"}}return{deposited:0,earned:0}}catch(n){console.error("Position fetch error:",n);const i=A(o,a,s.symbol);if(i&&i.deposited>0){const r=(Date.now()-(i.depositedAt||Date.now()))/1e3,l=(s.apy||3)/100,c=i.deposited*(l/(365.25*24*3600))*r;return{deposited:i.deposited,earned:Math.round(c*1e6)/1e6,protocol:s.protocol}}return{deposited:0,earned:0}}}async function qe(a,o){const s=M(a),n=[],i=s.map(async r=>{const l=await Ge(a,o,r);l.deposited>0&&n.push({...r,...l})});return await Promise.allSettled(i),n}async function Xe(a,o,s,n){const i=xe(a,o),r=i.address,l=de(n.toString(),s.decimals);if(s.protocol==="kairos"){const c=A(r,a,s.symbol),d=c?.deposited||0,u=await new y(s.address,V,i).approve(r,l);return await u.wait(),T(r,a,s.symbol,{deposited:d+parseFloat(n),depositedAt:c?.depositedAt||Date.now()}),{success:!0,hash:u.hash,protocol:"Kairos Treasury"}}if(s.protocol==="venus"&&s.vToken){const c=new y(s.vToken,L,i);if(s.isNative){const p=await(await c.mint(l,{value:l})).wait();return T(r,a,s.symbol,{deposited:parseFloat(n),depositedAt:Date.now()}),{success:!0,hash:p.hash,protocol:"Venus"}}else{const d=new y(s.address,V,i);await d.allowance(r,s.vToken)<l&&await(await d.approve(s.vToken,ce)).wait();const h=await(await c.mint(l)).wait();return T(r,a,s.symbol,{deposited:parseFloat(n),depositedAt:Date.now()}),{success:!0,hash:h.hash,protocol:"Venus"}}}if(s.protocol==="aave"){const c=W.aave[a];if(!c)throw new Error("Aave not available on this chain");const d=new y(c.pool,pe,i),p=s.wrappedAddress||s.address,u=new y(p,V,i);await u.allowance(r,c.pool)<l&&await(await u.approve(c.pool,ce)).wait();const N=await(await d.supply(p,l,r,0)).wait();return T(r,a,s.symbol,{deposited:parseFloat(n),depositedAt:Date.now()}),{success:!0,hash:N.hash,protocol:"Aave V3"}}throw new Error("Protocol not supported")}async function Ie(a,o,s,n){const i=xe(a,o),r=i.address,l=de(n.toString(),s.decimals);if(s.protocol==="kairos"){const c=A(r,a,s.symbol);if(!c||c.deposited<parseFloat(n))throw new Error("Saldo insuficiente en vault");const d=c.deposited-parseFloat(n);return T(r,a,s.symbol,{deposited:d>1e-4?d:0,depositedAt:d>0?c.depositedAt:0}),{success:!0,hash:"0x_kairos_local_withdraw",protocol:"Kairos Treasury"}}if(s.protocol==="venus"&&s.vToken){const p=await(await new y(s.vToken,L,i).redeemUnderlying(l)).wait(),u=A(r,a,s.symbol);if(u){const h=Math.max(0,u.deposited-parseFloat(n));T(r,a,s.symbol,{...u,deposited:h})}return{success:!0,hash:p.hash,protocol:"Venus"}}if(s.protocol==="aave"){const c=W.aave[a];if(!c)throw new Error("Aave not available on this chain");const d=new y(c.pool,pe,i),p=s.wrappedAddress||s.address,h=await(await d.withdraw(p,l,r)).wait(),j=A(r,a,s.symbol);if(j){const N=Math.max(0,j.deposited-parseFloat(n));T(r,a,s.symbol,{...j,deposited:N})}return{success:!0,hash:h.hash,protocol:"Aave V3"}}throw new Error("Protocol not supported")}async function Je(a,o,s="deposit"){try{const i=await B(a).getFeeData(),r=i.maxFeePerGas||i.gasPrice||0n,c={kairos:60000n,venus:250000n,aave:300000n}[o.protocol]||200000n,d=c*r;return{gasLimit:c.toString(),gasCostWei:d.toString(),gasCostFormatted:le(d)}}catch{return{gasLimit:"200000",gasCostWei:"0",gasCostFormatted:"0.0"}}}function ts(){const{activeAddress:a,activeChainId:o,goBack:s,showToast:n}=We(),i=Oe[o],[r,l]=x.useState("deposit"),[c,d]=x.useState([]),[p,u]=x.useState({}),[h,j]=x.useState([]),[N,_]=x.useState({}),[fe,H]=x.useState(!0),[ye,Y]=x.useState(!1),[m,G]=x.useState(null),[C,he]=x.useState("deposit"),[v,S]=x.useState(""),[E,O]=x.useState(""),[q,X]=x.useState(null),[I,J]=x.useState(!1),[Z,D]=x.useState(""),[$,k]=x.useState(""),[ve,we]=x.useState(0),[ge,Ce]=x.useState(0),P=x.useCallback(async()=>{const t=M(o);d(t);try{const[b,f]=await Promise.all([He(o),qe(o,a)]);u(b),j(f);const w={USDT:1,USDC:1,DAI:1,ETH:2800,WETH:2800,BTC:95e3,BTCB:95e3,WBTC:95e3,BNB:650,POL:.45,ARB:1.1,WAVAX:35,KAIROS:1};let U=0,se=0;f.forEach(g=>{const F=w[g.symbol]||0;U+=g.deposited*F,se+=g.earned*F}),we(U),Ce(se);const Ne=t.map(async g=>{try{const F=await Ye(o,a,g);return[g.symbol,F]}catch{return[g.symbol,"0"]}}),Te=await Promise.all(Ne),te={};Te.forEach(([g,F])=>{te[g]=F}),_(te)}catch(b){console.error("Vault load error:",b)}H(!1),Y(!1)},[o,a]);x.useEffect(()=>{H(!0),P()},[P]);const De=()=>{Y(!0),P()},Q=async(t,b)=>{G(t),he(b),S(""),O(""),D(""),k(""),X(null);try{const f=await Je(o,t,b);X(f)}catch{}},K=()=>{G(null),S(""),O(""),D(""),k("")},Ae=()=>{if(C==="deposit")S(N[m?.symbol]||"0");else{const t=h.find(b=>b.symbol===m?.symbol);S(t?t.deposited.toString():"0")}},je=async()=>{if(!v||parseFloat(v)<=0){D("Ingresa un monto v√°lido");return}if(!E){D("Ingresa tu contrase√±a");return}J(!0),D(""),k("");try{const t=await $e(E),f=[...t.accounts||[],...t.importedAccounts||[]].find(U=>U.address.toLowerCase()===a.toLowerCase());if(!f)throw new Error("Cuenta no encontrada");let w;C==="deposit"?w=await Xe(o,f.privateKey,m,v):w=await Ie(o,f.privateKey,m,v),k(C==="deposit"?`‚úÖ ${v} ${m.symbol} depositados en ${w.protocol}`:`‚úÖ ${v} ${m.symbol} retirados de ${w.protocol}`),n($||"Transacci√≥n exitosa","success"),setTimeout(()=>{P(),K()},2e3)}catch(t){D(t.message||"Error en la transacci√≥n")}J(!1)},ee=t=>t>=1e6?`$${(t/1e6).toFixed(2)}M`:t>=1e3?`$${(t/1e3).toFixed(2)}K`:`$${t.toFixed(2)}`;return e.jsxs("div",{className:"screen-container px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(Be,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Yield Vault"}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[i?.icon," ",i?.shortName," ¬∑ Gana intereses on-chain"]})]}),e.jsx("button",{onClick:De,className:"w-9 h-9 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(Fe,{size:16,className:`text-dark-300 ${ye?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(Se,{size:14,className:"text-kairos-400"}),e.jsx("span",{className:"text-dark-400 text-xs",children:"Depositado"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:ee(ve)})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(Ee,{size:14,className:"text-green-400"}),e.jsx("span",{className:"text-dark-400 text-xs",children:"Ganancias"})]}),e.jsxs("p",{className:"text-lg font-bold text-green-400",children:["+",ee(ge)]})]})]}),e.jsx("div",{className:"flex gap-1 p-1 rounded-xl bg-white/5 mb-4",children:[{key:"deposit",label:"Depositar",icon:ae},{key:"positions",label:"Mis Posiciones",icon:oe}].map(t=>e.jsxs("button",{onClick:()=>l(t.key),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-lg text-xs font-medium transition-all ${r===t.key?"bg-kairos-500/15 text-kairos-400":"text-dark-400 hover:text-white"}`,children:[e.jsx(t.icon,{size:14}),t.label]},t.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto -mx-1 px-1",children:fe?e.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(t=>e.jsx("div",{className:"glass-card p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-20 bg-white/5 rounded mb-1"}),e.jsx("div",{className:"h-3 w-28 bg-white/5 rounded"})]}),e.jsx("div",{className:"h-6 w-16 bg-white/5 rounded"})]})},t))}):r==="deposit"?e.jsxs("div",{className:"space-y-2",children:[c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{size:32,className:"text-dark-500 mx-auto mb-3"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"No hay vaults disponibles en esta red"})]}):c.map(t=>{const b=p[t.symbol],f=N[t.symbol]||"0",w=parseFloat(f)>1e-4;return e.jsxs(R.button,{onClick:()=>w?Q(t,"deposit"):null,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`w-full glass-card p-4 flex items-center gap-3 text-left transition-all ${w?"hover:bg-white/[0.06] cursor-pointer":"opacity-50"}`,children:[e.jsx("div",{className:"w-11 h-11 rounded-full bg-white/5 flex items-center justify-center text-xl",children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:t.symbol}),b&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold ${b.apy>=3?"bg-green-500/15 text-green-400":b.apy>=1?"bg-yellow-500/15 text-yellow-400":"bg-dark-700 text-dark-300"}`,children:[b.apy.toFixed(1),"% APY"]})]}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[b?.protocol||t.protocol," ¬∑ Bal: ",parseFloat(f).toFixed(4)]})]}),w&&e.jsxs("div",{className:"flex items-center gap-1 text-kairos-400",children:[e.jsx(ne,{size:14}),e.jsx("span",{className:"text-xs font-medium",children:"Depositar"})]})]},t.symbol)}),e.jsxs("div",{className:"glass-card p-3 mt-4 flex items-start gap-2",children:[e.jsx(ke,{size:14,className:"text-dark-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-dark-400 text-[11px]",children:"Los fondos se depositan directamente en protocolos DeFi auditados (Aave V3, Venus). KAIROS genera yield del 5% APY desde el treasury de Kairos 777. Los intereses se acumulan en tiempo real."})]})]}):e.jsx("div",{className:"space-y-2",children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{size:32,className:"text-dark-500 mx-auto mb-3"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"No tienes posiciones activas"}),e.jsx("p",{className:"text-dark-500 text-xs mt-1",children:"Deposita tokens para empezar a ganar"}),e.jsx("button",{onClick:()=>l("deposit"),className:"kairos-button mt-4 px-6 py-2.5 text-sm",children:"Ver Vaults"})]}):h.map(t=>e.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-xl",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:t.symbol}),e.jsxs("span",{className:"text-[10px] bg-green-500/15 text-green-400 px-1.5 py-0.5 rounded-full font-bold",children:[(p[t.symbol]?.apy||0).toFixed(1),"% APY"]})]}),e.jsx("p",{className:"text-dark-400 text-xs",children:t.protocol})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"bg-white/[0.03] rounded-lg p-2.5",children:[e.jsx("p",{className:"text-dark-400 text-[10px] mb-0.5",children:"Depositado"}),e.jsxs("p",{className:"text-white text-sm font-semibold",children:[t.deposited.toFixed(4)," ",e.jsx("span",{className:"text-dark-400 text-xs",children:t.symbol})]})]}),e.jsxs("div",{className:"bg-white/[0.03] rounded-lg p-2.5",children:[e.jsx("p",{className:"text-dark-400 text-[10px] mb-0.5",children:"Ganado"}),e.jsxs("p",{className:"text-green-400 text-sm font-semibold",children:["+",t.earned.toFixed(6)," ",e.jsx("span",{className:"text-dark-400 text-xs",children:t.symbol})]})]})]}),e.jsxs("button",{onClick:()=>Q(t,"withdraw"),className:"w-full py-2.5 rounded-xl border border-white/10 text-sm font-medium text-white hover:bg-white/5 transition-all flex items-center justify-center gap-1.5",children:[e.jsx(ie,{size:14}),"Retirar"]})]},t.symbol))})}),e.jsx(Pe,{children:m&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-end justify-center",onClick:K,children:e.jsxs(R.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},onClick:t=>t.stopPropagation(),className:"w-full max-w-lg glass-card-strong rounded-t-3xl p-6 pb-10 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-xl",children:m.icon}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-white",children:[C==="deposit"?"Depositar":"Retirar"," ",m.symbol]}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[p[m.symbol]?.protocol||m.protocol," ¬∑ ",(p[m.symbol]?.apy||0).toFixed(1),"% APY"]})]})]}),e.jsx("button",{onClick:K,className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center",children:e.jsx(Ue,{size:16})})]}),$?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(Re,{size:32,className:"text-green-400"})}),e.jsx("p",{className:"text-green-400 text-sm font-medium",children:$})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-dark-400 text-xs",children:"Monto"}),e.jsxs("button",{onClick:Ae,className:"text-kairos-400 text-xs font-medium hover:underline",children:["MAX: ",C==="deposit"?parseFloat(N[m.symbol]||0).toFixed(4):(h.find(t=>t.symbol===m.symbol)?.deposited||0).toFixed(4)]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:v,onChange:t=>{S(t.target.value),D("")},placeholder:"0.00",className:"glass-input text-lg font-semibold pr-16",style:{color:"#ffffff",WebkitTextFillColor:"#ffffff"},autoFocus:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-dark-400 text-sm font-medium",children:m.symbol})]})]}),q&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-400 mb-3 px-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ne,{size:12})," Gas estimado"]}),e.jsxs("span",{children:[parseFloat(q.gasCostFormatted).toFixed(5)," ",i?.nativeCurrency?.symbol]})]}),C==="deposit"&&v&&parseFloat(v)>0&&e.jsxs("div",{className:"glass-card p-3 mb-4 space-y-1.5",children:[e.jsx("p",{className:"text-dark-400 text-[10px] uppercase tracking-wider",children:"Proyecci√≥n de ganancias"}),[{label:"Diario",mult:1/365},{label:"Mensual",mult:1/12},{label:"Anual",mult:1}].map(t=>{const b=p[m.symbol]?.apy||0,f=parseFloat(v)*(b/100)*t.mult;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-dark-300 text-xs",children:t.label}),e.jsxs("span",{className:"text-green-400 text-xs font-medium",children:["+",f.toFixed(6)," ",m.symbol]})]},t.label)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-dark-400 text-xs mb-2 block",children:"Contrase√±a de la wallet"}),e.jsx("input",{type:"password",value:E,onChange:t=>{O(t.target.value),D("")},placeholder:"Ingresa tu contrase√±a",className:"glass-input text-sm",style:{color:"#ffffff",WebkitTextFillColor:"#ffffff"}})]}),Z&&e.jsxs("div",{className:"flex items-start gap-2 bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4",children:[e.jsx(Ve,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-red-400 text-xs",children:Z})]}),e.jsx("button",{onClick:je,disabled:I||!v||!E,className:`w-full py-3.5 rounded-xl font-bold text-sm transition-all disabled:opacity-40 flex items-center justify-center gap-2 ${C==="deposit"?"kairos-button":"bg-white/10 text-white hover:bg-white/15 border border-white/10"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:16,className:"animate-spin"})," Procesando..."]}):C==="deposit"?e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:16})," Depositar ",m.symbol]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:16})," Retirar ",m.symbol]})}),e.jsxs("div",{className:"flex items-start gap-2 mt-4 px-1",children:[e.jsx(re,{size:12,className:"text-dark-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:m.protocol==="kairos"?"KAIROS Vault genera yield desde el treasury de Kairos 777 Inc. Retiros sin penalty.":`Tus fondos ser√°n depositados directamente en ${p[m.symbol]?.protocol||"el protocolo"}. T√∫ mantienes la custodia.`})]})]})]})})})]})}export{ts as default};
