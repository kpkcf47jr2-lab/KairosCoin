import{d as c,j as e,e as _,aa as T,L as K,k as $,m as b,A as z,S as G,Z as V,w as U}from"./ui-Bym_0wSS.js";import{E as h,u as Q,C as P,a1 as Z,p as W}from"./index-CpQ9NCSn.js";import{Wallet as J,Contract as m,parseEther as Y,ZeroAddress as ee,formatEther as w}from"./crypto-1JBTrmrY.js";import{P as te}from"./PasswordConfirm-CS3v3BHN.js";import"./vendor-CCYniLZC.js";const ae={1:[{id:"lido-eth",name:"Lido",description:"Liquid staking for ETH â€” get stETH while earning ~3.5% APR",logo:"ðŸ”µ",color:"#00A3FF",type:"liquid",asset:"ETH",reward:"stETH",aprRange:"3.0% â€“ 4.0%",minStake:"0.001",contract:"0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",website:"https://lido.fi"},{id:"rocketpool-eth",name:"Rocket Pool",description:"Decentralized ETH staking â€” receive rETH",logo:"ðŸš€",color:"#FF6B35",type:"liquid",asset:"ETH",reward:"rETH",aprRange:"3.0% â€“ 3.8%",minStake:"0.01",contract:"0xae78736Cd615f374D3085123A210448E74Fc6393",depositContract:"0xDD9bc35aE942dF0cD11BbB945349b2d1d6A45659",website:"https://rocketpool.net"}],56:[{id:"pancake-cake",name:"PancakeSwap",description:"Stake CAKE for auto-compounding yield",logo:"ðŸ¥ž",color:"#1FC7D4",type:"staking",asset:"CAKE",reward:"CAKE",aprRange:"5.0% â€“ 15.0%",minStake:"0.1",contract:"0x45c54210128a065de780C4B0Df3d16664f7f859e",tokenAddress:"0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82",website:"https://pancakeswap.finance/pools"},{id:"bnb-liquid",name:"Ankr BNB",description:"Liquid BNB staking â€” earn aBNBc while staking",logo:"âš¡",color:"#4A90E2",type:"liquid",asset:"BNB",reward:"aBNBc",aprRange:"2.5% â€“ 4.0%",minStake:"0.5",contract:"0x52F24a5e03aee338Da5fd9Df68D2b6FAe1178827",website:"https://www.ankr.com/staking/stake/bnb/"}],137:[{id:"lido-matic",name:"Lido",description:"Liquid staking for MATIC â€” receive stMATIC",logo:"ðŸ”µ",color:"#00A3FF",type:"liquid",asset:"MATIC",reward:"stMATIC",aprRange:"4.0% â€“ 5.5%",minStake:"1",contract:"0x9ee91F9f426fA633d227f7a9b000E28b9dfd8599",website:"https://polygon.lido.fi/"}],42161:[{id:"gmx-arb",name:"GMX",description:"Stake GMX for ETH + esGMX rewards",logo:"ðŸŸ¢",color:"#4CC9F0",type:"staking",asset:"GMX",reward:"ETH + esGMX",aprRange:"8.0% â€“ 20.0%",minStake:"0.01",contract:"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1",tokenAddress:"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a",website:"https://app.gmx.io/#/earn"}],43114:[{id:"benqi-avax",name:"BENQI",description:"Liquid AVAX staking â€” receive sAVAX",logo:"â„ï¸",color:"#E84142",type:"liquid",asset:"AVAX",reward:"sAVAX",aprRange:"5.0% â€“ 7.0%",minStake:"0.5",contract:"0x2b2C81e08f1Af8835a78Bb2A90AE924ACE0eA4bE",website:"https://staking.benqi.fi/"}]},F=["function submit(address _referral) external payable returns (uint256)","function balanceOf(address) view returns (uint256)","function getPooledEthByShares(uint256 _sharesAmount) view returns (uint256)","function getTotalPooledEther() view returns (uint256)","function getTotalShares() view returns (uint256)"],se=["function deposit(uint256 _amount, uint256 _lockDuration) external","function withdrawByAmount(uint256 _amount) external","function userInfo(address) view returns (uint256 shares, uint256 lastDepositedTime, uint256 cakeAtLastUserAction, uint256 lastUserActionTime, uint256 lockStartTime, uint256 lockEndTime, uint256 userBoostedShare, bool locked, uint256 lockedAmount)"],ne=["function stakeBNB() external payable","function balanceOf(address) view returns (uint256)"];function ie(n){return ae[n]||[]}async function re(n,a){const s=h(1),r=new J(n,s),u=new m("0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",F,r),d=Y(a.toString());return{hash:(await u.submit(ee,{value:d})).hash,type:"stake",protocol:"Lido",amount:a,asset:"ETH",reward:"stETH",chainId:1,timestamp:Date.now(),status:"pending"}}async function oe(n){try{const a=h(1),r=await new m("0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",F,a).balanceOf(n);return w(r)}catch{return"0"}}async function ce(n){const a=[];try{const s=await oe(n);parseFloat(s)>0&&a.push({protocol:"Lido",asset:"ETH",reward:"stETH",staked:s,chainId:1,logo:"ðŸ”µ",color:"#00A3FF"})}catch{}try{const s=await le(n);parseFloat(s)>0&&a.push({protocol:"PancakeSwap",asset:"CAKE",reward:"CAKE",staked:s,chainId:56,logo:"ðŸ¥ž",color:"#1FC7D4"})}catch{}try{const s=await xe(n);parseFloat(s)>0&&a.push({protocol:"Ankr BNB",asset:"BNB",reward:"aBNBc",staked:s,chainId:56,logo:"âš¡",color:"#4A90E2"})}catch{}return a}async function de(){try{return(await(await fetch("https://eth-api.lido.fi/v1/protocol/steth/apr/sma")).json()).data?.smaApr?.toFixed(2)||"3.5"}catch{return"3.5"}}async function le(n){try{const a=h(56),r=await new m("0x45c54210128a065de780C4B0Df3d16664f7f859e",se,a).userInfo(n);return w(r.lockedAmount||r.shares||0n)}catch{return"0"}}async function xe(n){try{const a=h(56),r=await new m("0x52F24a5e03aee338Da5fd9Df68D2b6FAe1178827",ne,a).balanceOf(n);return w(r)}catch{return"0"}}function ke(){const{goBack:n,activeChainId:a,showToast:s,getActiveAccount:r,addPendingTx:u}=Q(),d=r(),[p,D]=c.useState([]),[A,L]=c.useState([]),[l,N]=c.useState(null),[o,x]=c.useState(""),[f,j]=c.useState("0"),[E,I]=c.useState("3.5"),[v,g]=c.useState(!1),[R,k]=c.useState(!1),[he,O]=c.useState(!0),y=P[a];c.useEffect(()=>{const t=ie(a);D(t),d?.address&&ce(d.address).then(L).catch(()=>{}).finally(()=>O(!1)),de().then(I)},[a,d?.address]);const H=async t=>{if(N(t),x(""),t.asset===y?.nativeCurrency?.symbol||t.asset==="ETH"||t.asset==="BNB"||t.asset==="AVAX"||t.asset==="MATIC")try{const i=await Z(a,d.address);j(i)}catch{j("0")}},q=()=>{if(!o||parseFloat(o)<=0){s("Ingresa una cantidad vÃ¡lida","error");return}if(parseFloat(o)>parseFloat(f)){s("Balance insuficiente","error");return}k(!0)},M=async t=>{k(!1),g(!0);try{const i=await W(t),S=[...i.accounts,...i.importedAccounts].find(X=>X.address.toLowerCase()===d.address.toLowerCase());if(!S?.privateKey)throw new Error("No se encontrÃ³ la clave privada");let C;if(l.id==="lido-eth")C=await re(S.privateKey,o);else{window.open(l.website,"_blank"),g(!1);return}u(C),s(`âš¡ Staking de ${o} ${l.asset} iniciado`,"success"),x(""),N(null)}catch(i){s(i.message||"Error al hacer staking","error")}finally{g(!1)}},B=d&&!d.privateKey;return e.jsxs("div",{className:"screen-container",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-800",children:[e.jsx("button",{onClick:n,className:"text-dark-300 hover:text-white",children:e.jsx(_,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"text-kairos-400",size:20}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Staking Hub"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[A.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-dark-300 mb-3 flex items-center gap-2",children:[e.jsx(K,{size:14})," TUS POSICIONES"]}),A.map((t,i)=>e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700 mb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:t.logo}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:t.protocol}),e.jsxs("p",{className:"text-dark-400 text-xs",children:[t.reward," en ",P[t.chainId]?.shortName]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-bold",children:parseFloat(t.staked).toFixed(6)}),e.jsx("p",{className:"text-dark-400 text-xs",children:t.reward})]})]})},i))]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-dark-300 mb-3 flex items-center gap-2",children:[e.jsx($,{size:14})," PROTOCOLOS EN ",y?.shortName||"RED"]}),p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"mx-auto text-dark-500 mb-3",size:40}),e.jsx("p",{className:"text-dark-400",children:"No hay protocolos de staking en esta red"}),e.jsx("p",{className:"text-dark-500 text-sm mt-1",children:"Cambia a Ethereum o BSC para mÃ¡s opciones"})]}):e.jsx("div",{className:"space-y-3",children:p.map(t=>e.jsxs(b.button,{whileTap:{scale:.98},onClick:()=>H(t),className:`w-full bg-dark-800/50 rounded-xl p-4 border transition-all text-left ${l?.id===t.id?"border-kairos-500 bg-kairos-500/5":"border-dark-700 hover:border-dark-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:t.logo}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-white font-semibold",children:t.name}),t.type==="liquid"&&e.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500/20 text-blue-400 text-[10px] font-bold rounded",children:"LÃQUIDO"})]}),e.jsx("p",{className:"text-dark-400 text-xs mt-0.5",children:t.description})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-3",children:[e.jsx("p",{className:"text-green-400 font-bold text-sm",children:t.id==="lido-eth"?`${E}%`:t.aprRange}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:"APR"})]})]}),e.jsx(z,{children:l?.id===t.id&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-700 space-y-3",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-lg text-dark-300 text-xs flex items-center gap-1",children:[e.jsx(G,{size:10})," MÃ­n: ",t.minStake," ",t.asset]}),e.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-lg text-dark-300 text-xs flex items-center gap-1",children:[e.jsx(V,{size:10})," Recibe: ",t.reward]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:o,onChange:i=>x(i.target.value),placeholder:`Cantidad de ${t.asset}`,className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-white placeholder-dark-400 focus:border-kairos-500 focus:outline-none"}),e.jsx("button",{onClick:()=>x(f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-kairos-400 text-xs font-bold",children:"MAX"})]}),e.jsxs("p",{className:"text-dark-500 text-xs",children:["Balance: ",parseFloat(f).toFixed(6)," ",t.asset]}),t.id==="lido-eth"?e.jsx("button",{onClick:q,disabled:v||B||!o||parseFloat(o)<=0,className:"w-full py-3 rounded-xl font-bold text-sm transition-all bg-gradient-to-r from-kairos-500 to-kairos-600 text-dark-950 hover:shadow-lg disabled:opacity-50 disabled:shadow-none",children:v?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(b.span,{animate:{rotate:360},transition:{repeat:1/0,duration:1},children:"â³"}),"Procesando..."]}):B?"ðŸ”’ Cuenta de solo lectura":`Stake ${o||"0"} ${t.asset}`}):e.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 rounded-xl font-bold text-sm transition-all bg-dark-700 text-white hover:bg-dark-600 flex items-center justify-center gap-2",children:[e.jsx(U,{size:14})," Abrir en ",t.name]})]})})})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-dark-300 mb-3",children:"âš¡ TODAS LAS OPORTUNIDADES"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{chain:"ETH",name:"Lido",apr:`${E}%`,logo:"ðŸ”µ"},{chain:"BSC",name:"PancakeSwap",apr:"5-15%",logo:"ðŸ¥ž"},{chain:"ARB",name:"GMX",apr:"8-20%",logo:"ðŸŸ¢"},{chain:"AVAX",name:"BENQI",apr:"5-7%",logo:"â„ï¸"}].map((t,i)=>e.jsxs("div",{className:"bg-dark-800/30 rounded-lg p-3 border border-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{children:t.logo}),e.jsx("span",{className:"text-white text-xs font-semibold",children:t.name})]}),e.jsxs("p",{className:"text-green-400 text-xs font-bold",children:[t.apr," APR"]}),e.jsx("p",{className:"text-dark-500 text-[10px]",children:t.chain})]},i))})]})]}),R&&e.jsx(te,{title:"Confirmar Staking",message:`Stake ${o} ${l?.asset} en ${l?.name}`,onConfirm:M,onCancel:()=>k(!1)})]})}export{ke as default};
