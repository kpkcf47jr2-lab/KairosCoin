import{d as x,j as e,e as W,S as g,b as C,m,C as z,h as O,w as B,T as E,W as G,I as q,aD as J,L as M,s as Q,U as I}from"./ui-Bym_0wSS.js";import{u as X}from"./index-D681O2Ot.js";import"./vendor-CCYniLZC.js";import"./crypto-1JBTrmrY.js";const r="0xC84f261c7e7Cffdf3e9972faD88cE59400d5E5A8",Y=["https://bsc-dataseed1.binance.org","https://bsc-dataseed2.binance.org","https://bsc-rpc.publicnode.com","https://rpc.ankr.com/bsc"],Z="0x14D41707269c7D8b8DFa5095b38824a46dA05da3";async function A(s,a){for(const n of Y)try{const i=await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:s,params:a,id:1})})).json();if(i.result!==void 0)return i.result}catch{continue}return null}async function h(s,a){return A("eth_call",[{to:s,data:a},"latest"])}function ee(s){if(!s||s==="0x")return[];const a=s.slice(2),n=parseInt(a.slice(64,128),16),l=[];for(let i=0;i<n;i++){const t=128+i*64;l.push("0x"+a.slice(t+24,t+64))}return l}function N(s){return!s||s==="0x"?0:parseInt(s,16)}function se(s){if(!s||s==="0x")return"";const a=s.slice(2),n=parseInt(a.slice(0,64),16)*2,l=parseInt(a.slice(n,n+64),16),i=a.slice(n+64,n+64+l*2);let t="";for(let o=0;o<i.length;o+=2)t+=String.fromCharCode(parseInt(i.slice(o,o+2),16));return t}const p={getOwners:"0xa0e67e2b",getThreshold:"0xe75235b8",nonce:"0xaffed0e0",VERSION:"0xffa1ad74",isOwner:"0x2f54bf6e",balanceOf:"0x70a08231"};function T(s){return"0x"+s.slice(2).toLowerCase().padStart(64,"0")}function re(){const{navigate:s,activeAddress:a,showToast:n}=X(),[l,i]=x.useState(!0),[t,o]=x.useState(null),[D,w]=x.useState(!1),[y,L]=x.useState(!1),f=x.useCallback(async()=>{i(!0);try{const[c,v,d,F,S,u,b]=await Promise.all([h(r,p.getOwners),h(r,p.getThreshold),h(r,p.nonce),h(r,p.VERSION),A("eth_getBalance",[r,"latest"]),h(Z,p.balanceOf+T(r).slice(2)),a?h(r,p.isOwner+T(a).slice(2)):Promise.resolve("0x0")]),H=ee(c),$=N(v),_=N(d),P=se(F),U=S?parseInt(S,16)/1e18:0,K=u&&u!=="0x"&&u!=="0x0000000000000000000000000000000000000000000000000000000000000000"?Number(BigInt(u))/1e18:0,V=b&&b!=="0x"?N(b)===1:!1;o({owners:H,threshold:$,nonce:_,version:P,bnbBalance:U,kairosBalance:K}),L(V)}catch(c){console.error("Failed to load Safe info:",c),n("Error cargando info del Safe","error")}i(!1)},[a,n]);x.useEffect(()=>{f()},[f]);const R=()=>{navigator.clipboard?.writeText(r),w(!0),n("Direcci√≥n del Safe copiada","success"),setTimeout(()=>w(!1),2e3)},k=()=>{window.open(`https://bscscan.com/address/${r}`,"_blank")};return e.jsxs("div",{className:"h-full flex flex-col bg-dark-950",children:[e.jsxs("div",{className:"flex items-center gap-3 px-5 pt-6 pb-4",children:[e.jsx("button",{onClick:()=>s("dashboard"),className:"p-2 rounded-xl bg-white/5 hover:bg-white/10 transition",children:e.jsx(W,{size:18,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(g,{size:20,className:"text-kairos-400"}),"Gnosis Safe"]}),e.jsx("p",{className:"text-xs text-dark-400",children:"Multisig Wallet ¬∑ BSC"})]}),e.jsx("button",{onClick:f,className:`p-2 rounded-xl bg-white/5 hover:bg-white/10 transition ${l?"animate-spin":""}`,children:e.jsx(C,{size:16,className:"text-dark-300"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-5 pb-8 space-y-4",children:l&&!t?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(C,{size:32,className:"text-kairos-400 animate-spin mb-4"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"Cargando Safe..."})]}):t?e.jsxs(e.Fragment,{children:[e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-kairos-500/10 to-kairos-600/5 rounded-2xl p-4 border border-kairos-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs font-medium text-kairos-400 uppercase tracking-wider",children:"Safe Address"}),e.jsxs("span",{className:"text-[10px] bg-kairos-500/20 text-kairos-400 px-2 py-0.5 rounded-full",children:["v",t.version]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-mono text-white flex-1 break-all",children:r}),e.jsx("button",{onClick:R,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 shrink-0",children:D?e.jsx(z,{size:14,className:"text-green-400"}):e.jsx(O,{size:14,className:"text-dark-300"})}),e.jsx("button",{onClick:k,className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 shrink-0",children:e.jsx(B,{size:14,className:"text-dark-300"})})]})]}),e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:`rounded-2xl p-4 border ${y?"bg-green-500/5 border-green-500/20":"bg-yellow-500/5 border-yellow-500/20"}`,children:e.jsx("div",{className:"flex items-center gap-3",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/10 flex items-center justify-center",children:e.jsx(z,{size:20,className:"text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-400",children:"Eres owner de este Safe"}),e.jsx("p",{className:"text-xs text-dark-400",children:"Puedes aprobar y ejecutar transacciones"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-yellow-500/10 flex items-center justify-center",children:e.jsx(E,{size:20,className:"text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-400",children:"No eres owner"}),e.jsx("p",{className:"text-xs text-dark-400",children:"Tu wallet actual no es owner del Safe"})]})]})})}),e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/[0.03] rounded-2xl p-4 border border-white/5",children:[e.jsxs("h3",{className:"text-xs font-medium text-dark-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(G,{size:14}),"Balances del Safe"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-yellow-400",children:"BNB"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"BNB"}),e.jsx("p",{className:"text-[10px] text-dark-400",children:"Native"})]})]}),e.jsx("p",{className:"text-sm font-mono text-white",children:t.bnbBalance.toFixed(4)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-kairos-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] font-bold text-kairos-400",children:"K"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"KAIROS"}),e.jsxs("p",{className:"text-[10px] text-dark-400",children:["‚âà $",t.kairosBalance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsx("p",{className:"text-sm font-mono text-white",children:t.kairosBalance.toLocaleString()})]})]})]}),e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-white/[0.03] rounded-2xl p-4 border border-white/5",children:[e.jsxs("h3",{className:"text-xs font-medium text-dark-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(q,{size:14}),"Detalles"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{icon:J,label:"Nonce (TXs ejecutadas)",value:t.nonce.toString()}),e.jsx(j,{icon:M,label:"Threshold",value:`${t.threshold} de ${t.owners.length}`}),e.jsx(j,{icon:Q,label:"Red",value:"BNB Smart Chain"}),e.jsx(j,{icon:g,label:"Tipo",value:`Safe v${t.version}`})]})]}),e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/[0.03] rounded-2xl p-4 border border-white/5",children:[e.jsxs("h3",{className:"text-xs font-medium text-dark-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(I,{size:14}),"Owners (",t.owners.length,")"]}),e.jsx("div",{className:"space-y-2",children:t.owners.map((c,v)=>{const d=a&&c.toLowerCase()===a.toLowerCase();return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${d?"bg-kairos-500/10 border border-kairos-500/20":"bg-white/[0.02]"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${d?"bg-kairos-500/20":"bg-white/5"}`,children:e.jsx(I,{size:14,className:d?"text-kairos-400":"text-dark-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-mono text-white truncate",children:c}),d&&e.jsx("p",{className:"text-[10px] text-kairos-400 font-medium",children:"T√∫"})]}),e.jsx("button",{onClick:()=>{navigator.clipboard?.writeText(c),n("Direcci√≥n copiada","success")},className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 shrink-0",children:e.jsx(O,{size:12,className:"text-dark-400"})})]},c)})})]}),e.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"bg-blue-500/5 rounded-2xl p-4 border border-blue-500/10",children:[e.jsxs("h3",{className:"text-xs font-semibold text-blue-400 mb-2 flex items-center gap-2",children:[e.jsx(g,{size:14}),"¬øQu√© es un Safe?"]}),e.jsxs("p",{className:"text-xs text-dark-400 leading-relaxed",children:["Un Gnosis Safe es una billetera multifirma en la blockchain. Funciona como una caja fuerte digital: para mover fondos o ejecutar operaciones, se necesitan las firmas de los owners (actualmente ",t.threshold," de ",t.owners.length,"). Esto protege contra hackeos porque incluso si alguien consigue una clave privada, no puede actuar sin las firmas necesarias."]}),e.jsxs("div",{className:"mt-3 space-y-1.5",children:[e.jsx("p",{className:"text-[10px] text-dark-500",children:"üîí Tu Safe se controla SOLO desde tu wallet"}),e.jsx("p",{className:"text-[10px] text-dark-500",children:"üõ°Ô∏è Contratos auditados por la comunidad Safe"}),e.jsx("p",{className:"text-[10px] text-dark-500",children:"üì± Las claves se guardan en tu tel√©fono, no en servidores"})]})]}),e.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-white/[0.03] border border-white/5 hover:bg-white/[0.06] transition",children:[e.jsx(B,{size:14,className:"text-kairos-400"}),e.jsx("span",{className:"text-sm text-kairos-400",children:"Ver en BscScan"})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(E,{size:32,className:"text-red-400 mb-4"}),e.jsx("p",{className:"text-dark-400 text-sm",children:"Error al cargar el Safe"}),e.jsx("button",{onClick:f,className:"mt-3 px-4 py-2 rounded-xl bg-kairos-500/10 text-kairos-400 text-sm",children:"Reintentar"})]})})]})}function j({icon:s,label:a,value:n}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{size:14,className:"text-dark-500"}),e.jsx("span",{className:"text-xs text-dark-400",children:a})]}),e.jsx("span",{className:"text-xs font-medium text-white",children:n})]})}export{re as default};
