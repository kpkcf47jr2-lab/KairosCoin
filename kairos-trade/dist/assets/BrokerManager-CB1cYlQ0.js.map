{"version":3,"file":"BrokerManager-CB1cYlQ0.js","sources":["../../src/components/Broker/BrokerManager.jsx"],"sourcesContent":["// Kairos Trade ‚Äî Broker Connection Manager (Guided API Key Flow)\n// Beautiful UI + step-by-step tutorial + real API key connection\nimport { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  CheckCircle, XCircle, Shield, RefreshCw, Wallet,\n  Trash2, X, Lock, ChevronRight, ChevronLeft, ChevronDown,\n  Eye, EyeOff, Loader2, ExternalLink,\n  ArrowRight, Info, Key, Zap, Coins\n} from 'lucide-react';\nimport useStore from '../../store/useStore';\nimport { BROKERS } from '../../constants';\nimport brokerService from '../../services/broker';\n\n// ‚îÄ‚îÄ‚îÄ Broker catalog with setup guides ‚îÄ‚îÄ‚îÄ\nconst BROKER_CATALOG = [\n  {\n    id: 'binance', name: 'Binance', logo: 'üü°',\n    color: '#F0B90B', desc: 'El exchange m√°s grande del mundo',\n    features: ['Spot', 'Futuros', 'Margin'], users: '150M+',\n    apiUrl: 'https://www.binance.com/en/my/settings/api-management',\n    steps: [\n      { title: 'Inicia sesi√≥n en Binance', desc: 'Ve a binance.com e inicia sesi√≥n en tu cuenta.' },\n      { title: 'Ve a API Management', desc: 'Haz clic en tu perfil ‚Üí \"API Management\" o usa el enlace directo de abajo.' },\n      { title: 'Crea una nueva API Key', desc: 'Haz clic en \"Create API\" ‚Üí Elige \"System Generated Keys\".' },\n      { title: 'Configura permisos', desc: 'Activa solo \"Enable Reading\" y \"Enable Spot & Margin Trading\". NO actives retiros.' },\n      { title: 'Copia tus claves', desc: 'Copia el API Key y Secret Key. El Secret solo se muestra UNA vez.' },\n    ],\n  },\n  {\n    id: 'bybit', name: 'Bybit', logo: 'üü†',\n    color: '#F7A600', desc: 'Trading de derivados l√≠der',\n    features: ['Spot', 'Futuros', 'Opciones'], users: '20M+',\n    apiUrl: 'https://www.bybit.com/app/user/api-management',\n    steps: [\n      { title: 'Inicia sesi√≥n en Bybit', desc: 'Ve a bybit.com e inicia sesi√≥n.' },\n      { title: 'Ve a API Management', desc: 'Perfil ‚Üí \"API\" o usa el enlace directo de abajo.' },\n      { title: 'Crea nueva API Key', desc: 'Clic en \"Create New Key\" ‚Üí \"System-generated API Keys\".' },\n      { title: 'Configura permisos', desc: 'Selecciona \"Read-Write\" para Trading. Deja desactivado \"Withdrawal\".' },\n      { title: 'Copia tus claves', desc: 'Copia el API Key y API Secret antes de cerrar.' },\n    ],\n  },\n  {\n    id: 'kraken', name: 'Kraken', logo: 'üü£',\n    color: '#7B61FF', desc: 'Regulado y seguro desde 2011',\n    features: ['Spot', 'Futuros', 'Staking'], users: '10M+',\n    apiUrl: 'https://www.kraken.com/u/security/api',\n    steps: [\n      { title: 'Inicia sesi√≥n en Kraken', desc: 'Ve a kraken.com e inicia sesi√≥n.' },\n      { title: 'Ve a API Settings', desc: 'Security ‚Üí API ‚Üí \"Add Key\".' },\n      { title: 'Configura permisos', desc: 'Activa \"Query Funds\", \"Query Orders\", \"Create/Modify Orders\".' },\n      { title: 'Guarda la clave', desc: 'Kraken te da un Key y un Private Key. Copia ambos.' },\n    ],\n  },\n  {\n    id: 'coinbase', name: 'Coinbase', logo: 'üîµ',\n    color: '#0052FF', desc: 'Exchange p√∫blico regulado en USA',\n    features: ['Spot', 'Advanced Trade'], users: '110M+',\n    apiUrl: 'https://portal.cdp.coinbase.com/access/api',\n    steps: [\n      { title: 'Inicia sesi√≥n en Coinbase', desc: 'Ve a portal.cdp.coinbase.com e inicia sesi√≥n.' },\n      { title: 'Crea nueva API Key', desc: 'Haz clic en \"Create API Key\". Coinbase te dar√° un API Key Name y una EC Private Key.' },\n      { title: 'Configura permisos', desc: 'Selecciona \"View\" y \"Trade\". NO actives \"Transfer\".' },\n      { title: 'Copia tus 2 claves', desc: 'Copia el API Key Name (va en API KEY) y la EC Private Key completa (va en API SECRET). No necesitas Passphrase.' },\n    ],\n  },\n  {\n    id: 'kucoin', name: 'KuCoin', logo: 'üü¢',\n    color: '#23AF91', desc: 'La exchange del pueblo',\n    features: ['Spot', 'Futuros', 'Bots'], users: '30M+',\n    apiUrl: 'https://www.kucoin.com/account/api',\n    needsPassphrase: true,\n    steps: [\n      { title: 'Inicia sesi√≥n en KuCoin', desc: 'Ve a kucoin.com e inicia sesi√≥n.' },\n      { title: 'Ve a API Management', desc: 'Account ‚Üí API Management ‚Üí \"Create API\".' },\n      { title: 'Configura permisos y Passphrase', desc: 'Activa \"General\" y \"Trade\". Crea un passphrase. No actives \"Transfer\".' },\n      { title: 'Copia tus 3 claves', desc: 'Necesitar√°s: API Key, API Secret y Passphrase.' },\n    ],\n  },\n  {\n    id: 'okx', name: 'OKX', logo: '‚ö´',\n    color: '#FFFFFF', desc: 'Trading avanzado multimercado',\n    features: ['Spot', 'Futuros', 'Opciones'], users: '50M+',\n    apiUrl: 'https://www.okx.com/account/my-api',\n    needsPassphrase: true,\n    steps: [\n      { title: 'Inicia sesi√≥n en OKX', desc: 'Ve a okx.com e inicia sesi√≥n.' },\n      { title: 'Ve a API Settings', desc: 'Perfil ‚Üí API ‚Üí \"Create API Key\".' },\n      { title: 'Configura permisos y Passphrase', desc: 'Selecciona \"Read\" y \"Trade\". Crea un passphrase. NO actives \"Withdraw\".' },\n      { title: 'Copia tus 3 claves', desc: 'Necesitar√°s: API Key, Secret Key y Passphrase.' },\n    ],\n  },\n  {\n    id: 'bingx', name: 'BingX', logo: 'üî∂',\n    color: '#F7931A', desc: 'Social trading y copy trading',\n    features: ['Spot', 'Futuros', 'Copy'], users: '10M+',\n    apiUrl: 'https://bingx.com/en-us/account/api/',\n    steps: [\n      { title: 'Inicia sesi√≥n en BingX', desc: 'Ve a bingx.com e inicia sesi√≥n.' },\n      { title: 'Ve a API Management', desc: 'Account ‚Üí API Management ‚Üí \"Create API\".' },\n      { title: 'Configura permisos', desc: 'Activa \"Read\" y \"Trade\". No actives \"Withdraw\".' },\n      { title: 'Copia tus claves', desc: 'Copia el API Key y Secret Key.' },\n    ],\n  },\n  {\n    id: 'bitget', name: 'Bitget', logo: 'üî∑',\n    color: '#00CED1', desc: 'Copy trading #1 del mundo',\n    features: ['Spot', 'Futuros', 'Copy'], users: '25M+',\n    apiUrl: 'https://www.bitget.com/account/newapi',\n    needsPassphrase: true,\n    steps: [\n      { title: 'Inicia sesi√≥n en Bitget', desc: 'Ve a bitget.com e inicia sesi√≥n.' },\n      { title: 'Ve a API Management', desc: 'Account ‚Üí API Management ‚Üí \"Create API\".' },\n      { title: 'Configura permisos y Passphrase', desc: 'Activa \"Read\" y \"Trade\". Crea passphrase. No actives \"Transfer\".' },\n      { title: 'Copia tus 3 claves', desc: 'Necesitar√°s: API Key, Secret Key y Passphrase.' },\n    ],\n  },\n  {\n    id: 'mexc', name: 'MEXC', logo: 'üîª',\n    color: '#00B897', desc: 'M√°s de 1,500 criptomonedas',\n    features: ['Spot', 'Futuros'], users: '10M+',\n    apiUrl: 'https://www.mexc.com/ucenter/api',\n    steps: [\n      { title: 'Inicia sesi√≥n en MEXC', desc: 'Ve a mexc.com e inicia sesi√≥n.' },\n      { title: 'Ve a API Management', desc: 'Account ‚Üí API Management ‚Üí \"Create API Key\".' },\n      { title: 'Configura permisos', desc: 'Marca \"Read\" y \"Trade\". Sin permisos de retiro.' },\n      { title: 'Copia tus claves', desc: 'Copia API Key y Secret Key.' },\n    ],\n  },\n];\n\n// ‚îÄ‚îÄ‚îÄ Flow steps ‚îÄ‚îÄ‚îÄ\nconst FLOW = {\n  SELECT: 'select',\n  GUIDE: 'guide',\n  KEYS: 'keys',\n  VERIFYING: 'verifying',\n  SUCCESS: 'success',\n};\n\nexport default function BrokerManager() {\n  const { user, brokers, addBroker, removeBroker, updateBrokerStatus, setActiveBroker } = useStore();\n  const walletAddress = user?.walletAddress || '';\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [step, setStep] = useState(FLOW.SELECT);\n  const [selectedBroker, setSelectedBroker] = useState(null);\n  const [guideStep, setGuideStep] = useState(0);\n  const [keyForm, setKeyForm] = useState({ apiKey: '', apiSecret: '', passphrase: '', label: '' });\n  const [showSecret, setShowSecret] = useState(false);\n  const [keyError, setKeyError] = useState('');\n  const [balances, setBalances] = useState({});\n  const [loadingBalances, setLoadingBalances] = useState({});\n  const [expandedBroker, setExpandedBroker] = useState(null);\n  const [showCrypto, setShowCrypto] = useState({});\n\n  // ‚îÄ‚îÄ‚îÄ Fetch balances ‚îÄ‚îÄ‚îÄ\n  const fetchBalances = useCallback(async (broker) => {\n    setLoadingBalances(prev => ({ ...prev, [broker.id]: true }));\n    try {\n      const result = await brokerService.getBalances(broker.id);\n      // getBalances returns array directly, not { success, balances }\n      if (Array.isArray(result)) {\n        setBalances(prev => ({ ...prev, [broker.id]: result }));\n      } else if (result?.success) {\n        setBalances(prev => ({ ...prev, [broker.id]: result.balances }));\n      }\n    } catch (err) {\n      console.error(`[BROKER BALANCE] ${broker.brokerId} error:`, err.message);\n    }\n    setLoadingBalances(prev => ({ ...prev, [broker.id]: false }));\n  }, []);\n\n  useEffect(() => {\n    const connected = brokers.filter(b => b.connected);\n    connected.forEach(b => fetchBalances(b));\n    const interval = setInterval(() => connected.forEach(b => fetchBalances(b)), 30000);\n    return () => clearInterval(interval);\n  }, [brokers, fetchBalances]);\n\n  // ‚îÄ‚îÄ‚îÄ Open connect flow ‚îÄ‚îÄ‚îÄ\n  const openFlow = (broker) => {\n    setSelectedBroker(broker);\n    setGuideStep(0);\n    setStep(FLOW.GUIDE);\n    setKeyForm({ apiKey: '', apiSecret: '', passphrase: '', label: '' });\n    setKeyError('');\n    setModalOpen(true);\n  };\n\n  // ‚îÄ‚îÄ‚îÄ Submit keys (REAL connection) ‚îÄ‚îÄ‚îÄ\n  const handleSubmitKeys = async () => {\n    if (!keyForm.apiKey.trim() || !keyForm.apiSecret.trim()) {\n      setKeyError('API Key y Secret son obligatorios');\n      return;\n    }\n    if (selectedBroker.needsPassphrase && !keyForm.passphrase.trim()) {\n      setKeyError('Este exchange requiere Passphrase');\n      return;\n    }\n    setKeyError('');\n    setStep(FLOW.VERIFYING);\n\n    // Add broker to store (keys get encrypted via AES-256-GCM in addBroker)\n    const newBroker = await addBroker({\n      brokerId: selectedBroker.id,\n      label: keyForm.label || selectedBroker.name,\n      apiKey: keyForm.apiKey.trim(),\n      apiSecret: keyForm.apiSecret.trim(),\n      passphrase: keyForm.passphrase.trim() || undefined,\n    });\n\n    // Real connection via broker.js service\n    try {\n      const result = await brokerService.connect(newBroker);\n      updateBrokerStatus(newBroker.id, result.success);\n      if (result.success) {\n        setActiveBroker(newBroker);\n        fetchBalances(newBroker);\n        setStep(FLOW.SUCCESS);\n        setTimeout(() => { setModalOpen(false); setStep(FLOW.SELECT); }, 2500);\n      } else {\n        setStep(FLOW.KEYS);\n        setKeyError(result.message || 'No se pudo conectar. Verifica que tus claves sean correctas y tengan los permisos adecuados.');\n      }\n    } catch (err) {\n      setStep(FLOW.KEYS);\n      setKeyError(err.message || 'Error de conexi√≥n desconocido');\n    }\n  };\n\n  const handleDisconnect = (id) => {\n    brokerService.disconnect(id);\n    removeBroker(id);\n    setBalances(prev => { const n = { ...prev }; delete n[id]; return n; });\n  };\n\n  const STABLES = ['USD', 'USDT', 'USDC', 'BUSD', 'FDUSD', 'KAIROS'];\n\n  const totalUSD = (brokerId) => {\n    const bals = balances[brokerId] || [];\n    return bals.reduce((sum, b) => {\n      // Include USD (Coinbase), USDT, USDC, BUSD, FDUSD, KAIROS as stablecoins\n      if (STABLES.includes(b.asset)) {\n        return sum + parseFloat(b.free) + parseFloat(b.locked || 0);\n      }\n      return sum;\n    }, 0);\n  };\n\n  // Separate stablecoins vs crypto for display\n  const splitBalances = (brokerId) => {\n    const bals = balances[brokerId] || [];\n    const stables = bals.filter(b => STABLES.includes(b.asset));\n    const crypto = bals.filter(b => !STABLES.includes(b.asset));\n    return { stables, crypto };\n  };\n\n  const connectedIds = brokers.map(b => b.brokerId);\n  const closeModal = () => { setModalOpen(false); setStep(FLOW.SELECT); };\n\n  return (\n    <div className=\"flex-1 overflow-y-auto px-5 py-5 space-y-5\">\n      {/* ‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ */}\n      <div>\n        <h1 className=\"text-lg font-bold\">Conectar Exchange</h1>\n        <p className=\"text-xs text-[var(--text-dim)] mt-1\">\n          Conecta tu cuenta en 3 simples pasos.\n        </p>\n      </div>\n\n      {/* ‚îÄ‚îÄ‚îÄ Kairos Wallet (always connected) ‚îÄ‚îÄ‚îÄ */}\n      {walletAddress && (\n        <div className=\"rounded-xl overflow-hidden\" style={{ background: 'linear-gradient(135deg, rgba(212,175,55,0.08), rgba(212,175,55,0.02))', border: '1px solid rgba(212,175,55,0.2)' }}>\n          <div className=\"p-4 flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-xl flex items-center justify-center text-xl\"\n                style={{ background: 'rgba(212,175,55,0.15)', border: '1px solid rgba(212,175,55,0.3)' }}>\n                üëõ\n              </div>\n              <div>\n                <p className=\"text-sm font-bold\">Kairos Wallet</p>\n                <p className=\"text-xs text-[var(--text-dim)] font-mono\">{walletAddress.slice(0, 6)}...{walletAddress.slice(-4)}</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <span className=\"flex items-center gap-1 text-xs text-[var(--green)] px-2 py-1 rounded-lg\" style={{ background: 'rgba(0,220,130,0.1)' }}>\n                <CheckCircle size={12} /> Vinculada\n              </span>\n              <span className=\"text-[9px] px-2 py-1 rounded-full bg-[var(--gold)]/10 text-[var(--gold)] font-bold\">NATIVA</span>\n            </div>\n          </div>\n          <div className=\"px-4 pb-3 flex items-center gap-2\" style={{ borderTop: '1px solid rgba(212,175,55,0.1)' }}>\n            <Shield size={12} className=\"text-[var(--gold)]\" />\n            <p className=\"text-[10px] text-[var(--text-dim)]\">\n              Tu wallet se gener√≥ autom√°ticamente al registrarte. Soporta DEX trading en BSC, Ethereum, Polygon, Arbitrum y Base.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* ‚îÄ‚îÄ‚îÄ Security badge ‚îÄ‚îÄ‚îÄ */}\n      <div className=\"rounded-xl p-4 flex items-start gap-3\" style={{ background: 'rgba(59,130,246,0.04)', border: '1px solid rgba(59,130,246,0.1)' }}>\n        <Shield size={20} className=\"text-[var(--gold)] shrink-0 mt-0.5\" />\n        <div>\n          <p className=\"text-sm font-bold text-[var(--gold)]\">Conexi√≥n segura con API Keys</p>\n          <p className=\"text-xs text-[var(--text-dim)] mt-1\">\n            Tu exchange genera claves especiales (API Keys) que solo permiten leer y operar ‚Äî <strong className=\"text-[var(--text)]\">nunca retirar fondos</strong>. Las claves se almacenan encriptadas solo en tu dispositivo. Kairos Trade nunca tiene acceso a tu contrase√±a ni a tus fondos directamente.\n          </p>\n        </div>\n      </div>\n\n      {/* ‚îÄ‚îÄ‚îÄ How it works ‚Äî 3 steps ‚îÄ‚îÄ‚îÄ */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2\">\n        {[\n          { num: '1', title: 'Elige tu Exchange', desc: 'Selecciona de la lista', icon: Zap },\n          { num: '2', title: 'Sigue la gu√≠a', desc: 'Te mostramos paso a paso', icon: Info },\n          { num: '3', title: 'Pega tus claves', desc: 'Y listo, conectado', icon: Key },\n        ].map((s, i) => (\n          <div key={i} className=\"rounded-xl p-3 text-center\" style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.4)' }}>\n            <div className=\"w-8 h-8 rounded-full mx-auto mb-2 flex items-center justify-center text-xs font-bold\"\n              style={{ background: 'rgba(59,130,246,0.1)', color: 'var(--gold)', border: '1px solid rgba(59,130,246,0.15)' }}>\n              {s.num}\n            </div>\n            <p className=\"text-xs font-bold mb-0.5\">{s.title}</p>\n            <p className=\"text-[10px] text-[var(--text-dim)]\">{s.desc}</p>\n          </div>\n        ))}\n      </div>\n\n      {/* ‚îÄ‚îÄ‚îÄ Connected brokers ‚îÄ‚îÄ‚îÄ */}\n      {brokers.length > 0 && (\n        <div className=\"space-y-3\">\n          <h2 className=\"text-sm font-bold text-[var(--text-dim)] uppercase tracking-wider\">Cuentas Conectadas</h2>\n          {brokers.map(broker => {\n            const catalog = BROKER_CATALOG.find(b => b.id === broker.brokerId);\n            const bals = balances[broker.id] || [];\n            const isExpanded = expandedBroker === broker.id;\n            const usd = totalUSD(broker.id);\n\n            return (\n              <div key={broker.id} className=\"rounded-xl overflow-hidden\" style={{ background: 'var(--surface)', border: '1px solid var(--border)' }}>\n                <div className=\"p-4 flex items-center justify-between cursor-pointer\" onClick={() => setExpandedBroker(isExpanded ? null : broker.id)}>\n                  <div className=\"flex items-center gap-3 min-w-0 flex-1 overflow-hidden\">\n                    <div className=\"w-10 h-10 rounded-xl flex items-center justify-center text-xl\"\n                      style={{ background: `${catalog?.color || '#333'}15`, border: `1px solid ${catalog?.color || '#333'}30` }}>\n                      {catalog?.logo || 'üìä'}\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-bold\">{broker.label}</p>\n                      <p className=\"text-xs text-[var(--text-dim)]\">{catalog?.name || broker.brokerId}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {broker.connected && (\n                      <div className=\"text-right mr-2\">\n                        <p className=\"text-[10px] text-[var(--text-dim)]\">Balance</p>\n                        <p className=\"text-sm font-bold text-[var(--gold)]\">${usd.toFixed(2)}</p>\n                      </div>\n                    )}\n                    {broker.connected ? (\n                      <span className=\"flex items-center gap-1 text-xs text-[var(--green)] px-2 py-1 rounded-lg\" style={{ background: 'rgba(0,220,130,0.1)' }}>\n                        <CheckCircle size={12} /> Conectado\n                      </span>\n                    ) : (\n                      <span className=\"flex items-center gap-1 text-xs text-[var(--text-dim)] px-2 py-1 rounded-lg\" style={{ background: 'var(--surface-2)' }}>\n                        <XCircle size={12} /> Error\n                      </span>\n                    )}\n                    <button onClick={(e) => { e.stopPropagation(); handleDisconnect(broker.id); }}\n                      className=\"text-xs text-[var(--text-dim)] hover:text-[var(--red)] transition-colors px-2 py-1 rounded-lg hover:bg-[var(--red)]/5\">\n                      <Trash2 size={14} />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Expanded balances */}\n                <AnimatePresence>\n                  {isExpanded && broker.connected && (() => {\n                    const { stables, crypto } = splitBalances(broker.id);\n                    const cryptoOpen = showCrypto[broker.id] || false;\n                    const decimals = (asset) => ['BTC', 'ETH', 'WBTC'].includes(asset) ? 8 : ['SOL', 'BNB', 'AVAX'].includes(asset) ? 4 : 2;\n                    return (\n                      <motion.div initial={{ height: 0 }} animate={{ height: 'auto' }} exit={{ height: 0 }} className=\"overflow-hidden\">\n                        <div className=\"px-4 pb-4 space-y-3\" style={{ borderTop: '1px solid var(--border)' }}>\n                          {/* Header */}\n                          <div className=\"flex items-center justify-between pt-3\">\n                            <h4 className=\"text-xs font-bold uppercase tracking-wider text-[var(--text-dim)] flex items-center gap-2\">\n                              <Wallet size={13} className=\"text-[var(--gold)]\" /> Balance Total: <span className=\"text-[var(--gold)]\">${usd.toFixed(2)}</span>\n                            </h4>\n                            <button onClick={() => fetchBalances(broker)}\n                              className=\"text-[10px] text-[var(--text-dim)] hover:text-[var(--gold)] flex items-center gap-1\">\n                              <RefreshCw size={11} className={loadingBalances[broker.id] ? 'animate-spin' : ''} /> Actualizar\n                            </button>\n                          </div>\n\n                          {/* Stablecoins - always visible */}\n                          {stables.length > 0 && (\n                            <div>\n                              <p className=\"text-[10px] text-[var(--text-dim)] uppercase tracking-wider mb-1.5 flex items-center gap-1\">\n                                <span className=\"text-green-400\">$</span> Stablecoins / Fiat\n                              </p>\n                              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2\">\n                                {stables.map(b => (\n                                  <div key={b.asset} className=\"rounded-lg p-2.5 flex items-center justify-between\" style={{ background: 'rgba(0,220,130,0.04)', border: '1px solid rgba(0,220,130,0.1)' }}>\n                                    <div>\n                                      <span className=\"text-[10px] font-bold text-[var(--green)]\">{b.asset}</span>\n                                      <p className=\"text-sm font-bold mt-0.5\">${parseFloat(b.free).toFixed(2)}</p>\n                                    </div>\n                                    {parseFloat(b.locked || 0) > 0 && (\n                                      <div className=\"text-right\">\n                                        <span className=\"text-[9px] text-[var(--text-dim)]\">En uso</span>\n                                        <p className=\"text-[10px] text-yellow-400\">${parseFloat(b.locked).toFixed(2)}</p>\n                                      </div>\n                                    )}\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Crypto assets - collapsible */}\n                          {crypto.length > 0 && (\n                            <div>\n                              <button\n                                onClick={(e) => { e.stopPropagation(); setShowCrypto(prev => ({ ...prev, [broker.id]: !cryptoOpen })); }}\n                                className=\"w-full flex items-center justify-between py-1.5 text-left group\"\n                              >\n                                <p className=\"text-[10px] text-[var(--text-dim)] uppercase tracking-wider flex items-center gap-1\">\n                                  <Coins size={11} className=\"text-[var(--gold)]\" /> Criptomonedas ({crypto.length})\n                                </p>\n                                <ChevronDown size={12} className={`text-[var(--text-dim)] transition-transform ${cryptoOpen ? 'rotate-180' : ''}`} />\n                              </button>\n                              <AnimatePresence>\n                                {cryptoOpen && (\n                                  <motion.div\n                                    initial={{ height: 0, opacity: 0 }}\n                                    animate={{ height: 'auto', opacity: 1 }}\n                                    exit={{ height: 0, opacity: 0 }}\n                                    className=\"overflow-hidden\"\n                                  >\n                                    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 pt-1.5\">\n                                      {crypto.map(b => (\n                                        <div key={b.asset} className=\"rounded-lg p-2.5\" style={{ background: 'var(--surface-2)', border: '1px solid var(--border)' }}>\n                                          <span className=\"text-[10px] font-bold text-[var(--gold)]\">{b.asset}</span>\n                                          <p className=\"text-xs font-bold mt-0.5\">{parseFloat(b.free).toFixed(decimals(b.asset))}</p>\n                                          {parseFloat(b.locked || 0) > 0 && (\n                                            <p className=\"text-[9px] text-yellow-400 mt-0.5\">En uso: {parseFloat(b.locked).toFixed(decimals(b.asset))}</p>\n                                          )}\n                                        </div>\n                                      ))}\n                                    </div>\n                                  </motion.div>\n                                )}\n                              </AnimatePresence>\n                            </div>\n                          )}\n\n                          {bals.length === 0 && (\n                            <p className=\"text-xs text-[var(--text-dim)] py-2\">{loadingBalances[broker.id] ? 'Cargando balances...' : 'Sin balances disponibles'}</p>\n                          )}\n                        </div>\n                      </motion.div>\n                    );\n                  })()}\n                </AnimatePresence>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* ‚îÄ‚îÄ‚îÄ Available brokers grid ‚îÄ‚îÄ‚îÄ */}\n      <div>\n        <h2 className=\"text-sm font-bold text-[var(--text-dim)] uppercase tracking-wider mb-3\">\n          {brokers.length > 0 ? 'Conectar Otro Exchange' : 'Selecciona tu Exchange'}\n        </h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\n          {BROKER_CATALOG.map(broker => {\n            const isConnected = connectedIds.includes(broker.id);\n            return (\n              <button\n                key={broker.id}\n                onClick={() => !isConnected && openFlow(broker)}\n                disabled={isConnected}\n                className=\"group relative rounded-xl p-4 text-left transition-all hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-default\"\n                style={{\n                  background: isConnected\n                    ? 'rgba(0,220,130,0.04)'\n                    : 'linear-gradient(135deg, rgba(17,19,24,0.9), rgba(24,26,32,0.7))',\n                  border: `1px solid ${isConnected ? 'rgba(0,220,130,0.15)' : 'var(--border)'}`,\n                }}\n              >\n                <div className=\"flex items-start justify-between mb-3\">\n                  <div className=\"w-12 h-12 rounded-xl flex items-center justify-center text-2xl\"\n                    style={{ background: `${broker.color}15`, border: `1px solid ${broker.color}25` }}>\n                    {broker.logo}\n                  </div>\n                  {isConnected ? (\n                    <CheckCircle size={16} className=\"text-[var(--green)]\" />\n                  ) : (\n                    <ChevronRight size={16} className=\"text-[var(--text-dim)] group-hover:text-[var(--gold)] transition-colors\" />\n                  )}\n                </div>\n                <h3 className=\"text-sm font-bold mb-0.5\">{broker.name}</h3>\n                <p className=\"text-[10px] text-[var(--text-dim)] mb-2 leading-relaxed\">{broker.desc}</p>\n                <div className=\"flex flex-wrap gap-1\">\n                  {broker.features.map(f => (\n                    <span key={f} className=\"text-[9px] px-1.5 py-0.5 rounded-full bg-white/[0.04] text-[var(--text-dim)] font-medium\">{f}</span>\n                  ))}\n                </div>\n                <p className=\"text-[9px] text-[var(--text-dim)]/50 mt-2\">{broker.users} usuarios</p>\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n          Guided Connection Modal\n          ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */}\n      <AnimatePresence>\n        {modalOpen && selectedBroker && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n            style={{ background: 'rgba(0,0,0,0.8)', backdropFilter: 'blur(8px)' }}\n            onClick={closeModal}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0, y: 20 }}\n              animate={{ scale: 1, opacity: 1, y: 0 }}\n              exit={{ scale: 0.9, opacity: 0, y: 20 }}\n              transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n              onClick={(e) => e.stopPropagation()}\n              className=\"w-full max-w-lg rounded-2xl overflow-hidden shadow-2xl\"\n              style={{ background: '#0E1015', border: '1px solid rgba(30,34,45,0.6)' }}\n            >\n              {/* Modal header */}\n              <div className=\"p-5 pb-4 flex items-center justify-between\"\n                style={{ borderBottom: '1px solid rgba(30,34,45,0.5)' }}>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 rounded-xl flex items-center justify-center text-xl\"\n                    style={{ background: `${selectedBroker.color}15`, border: `1px solid ${selectedBroker.color}30` }}>\n                    {selectedBroker.logo}\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-bold\">Conectar {selectedBroker.name}</p>\n                    <div className=\"flex items-center gap-1 mt-0.5\">\n                      <Lock size={9} className=\"text-[var(--green)]\" />\n                      <span className=\"text-[9px] text-[var(--green)] font-semibold\">Conexi√≥n segura con API Keys</span>\n                    </div>\n                  </div>\n                </div>\n                <button onClick={closeModal}\n                  className=\"p-1.5 rounded-lg text-[var(--text-dim)] hover:text-[var(--text)] transition-colors hover:bg-white/5\">\n                  <X size={18} />\n                </button>\n              </div>\n\n              {/* ‚îÄ‚îÄ‚îÄ Step: GUIDE (Tutorial) ‚îÄ‚îÄ‚îÄ */}\n              {step === FLOW.GUIDE && (\n                <div className=\"p-5 space-y-4\">\n                  {/* Progress dots */}\n                  <div className=\"flex items-center justify-center gap-1.5 mb-2\">\n                    {selectedBroker.steps.map((_, i) => (\n                      <div key={i} className=\"transition-all duration-300\"\n                        style={{\n                          width: i === guideStep ? 20 : 6,\n                          height: 6,\n                          borderRadius: 3,\n                          background: i === guideStep ? selectedBroker.color : i < guideStep ? 'var(--green)' : 'rgba(30,34,45,0.6)',\n                        }} />\n                    ))}\n                  </div>\n\n                  {/* Step content */}\n                  <AnimatePresence mode=\"wait\">\n                    <motion.div\n                      key={guideStep}\n                      initial={{ opacity: 0, x: 20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      exit={{ opacity: 0, x: -20 }}\n                      transition={{ duration: 0.2 }}\n                    >\n                      <div className=\"rounded-xl p-4\" style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.4)' }}>\n                        <div className=\"flex items-start gap-3\">\n                          <div className=\"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold shrink-0\"\n                            style={{ background: `${selectedBroker.color}15`, color: selectedBroker.color }}>\n                            {guideStep + 1}\n                          </div>\n                          <div>\n                            <p className=\"text-sm font-bold mb-1\">{selectedBroker.steps[guideStep].title}</p>\n                            <p className=\"text-xs text-[var(--text-dim)] leading-relaxed\">{selectedBroker.steps[guideStep].desc}</p>\n                          </div>\n                        </div>\n                      </div>\n                    </motion.div>\n                  </AnimatePresence>\n\n                  {/* Open exchange link */}\n                  {guideStep === 0 && (\n                    <a\n                      href={selectedBroker.apiUrl}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"flex items-center justify-center gap-2 w-full py-3 rounded-xl text-sm font-bold transition-all hover:brightness-110\"\n                      style={{ background: `${selectedBroker.color}20`, color: selectedBroker.color, border: `1px solid ${selectedBroker.color}30` }}\n                    >\n                      <ExternalLink size={14} /> Abrir {selectedBroker.name} API Management\n                    </a>\n                  )}\n\n                  {/* Navigation */}\n                  <div className=\"flex items-center gap-2\">\n                    {guideStep > 0 && (\n                      <button onClick={() => setGuideStep(g => g - 1)}\n                        className=\"flex items-center gap-1 px-4 py-2.5 rounded-xl text-xs font-semibold text-[var(--text-dim)] hover:text-[var(--text)] transition-colors\"\n                        style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.4)' }}>\n                        <ChevronLeft size={14} /> Anterior\n                      </button>\n                    )}\n                    <div className=\"flex-1\" />\n                    {guideStep < selectedBroker.steps.length - 1 ? (\n                      <button onClick={() => setGuideStep(g => g + 1)}\n                        className=\"flex items-center gap-1 px-5 py-2.5 rounded-xl text-sm font-bold text-white transition-all hover:brightness-110\"\n                        style={{ background: `linear-gradient(135deg, ${selectedBroker.color}, ${selectedBroker.color}CC)` }}>\n                        Siguiente <ChevronRight size={14} />\n                      </button>\n                    ) : (\n                      <button onClick={() => setStep(FLOW.KEYS)}\n                        className=\"flex items-center gap-1 px-5 py-2.5 rounded-xl text-sm font-bold text-white transition-all hover:brightness-110\"\n                        style={{ background: 'linear-gradient(135deg, #0ECB81, #0AA06A)' }}>\n                        Ya tengo mis claves <ArrowRight size={14} />\n                      </button>\n                    )}\n                  </div>\n\n                  {/* Skip guide */}\n                  <button onClick={() => setStep(FLOW.KEYS)}\n                    className=\"w-full text-center text-[11px] text-[var(--text-dim)]/50 hover:text-[var(--text-dim)] transition-colors py-1\">\n                    Ya s√© c√≥mo hacerlo, ir directo a pegar claves ‚Üí\n                  </button>\n                </div>\n              )}\n\n              {/* ‚îÄ‚îÄ‚îÄ Step: KEYS (Enter API keys) ‚îÄ‚îÄ‚îÄ */}\n              {step === FLOW.KEYS && (\n                <div className=\"p-5 space-y-4\">\n                  <div className=\"text-center mb-1\">\n                    <p className=\"text-sm font-bold\">\n                      {selectedBroker.isDex ? 'Conecta tu Wallet' : `Pega tus API Keys de ${selectedBroker.name}`}\n                    </p>\n                    <p className=\"text-[11px] text-[var(--text-dim)] mt-1\">\n                      {selectedBroker.isDex\n                        ? 'Tu clave privada se almacena solo en tu dispositivo, encriptada'\n                        : 'Las claves se encriptan y almacenan solo en tu dispositivo'}\n                    </p>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    {/* Label */}\n                    <div>\n                      <label className=\"text-[10px] text-[var(--text-dim)] mb-1 block font-semibold uppercase tracking-wider\">\n                        Nombre de la cuenta <span className=\"text-[var(--text-dim)]/40\">(opcional)</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={keyForm.label}\n                        onChange={(e) => setKeyForm({ ...keyForm, label: e.target.value })}\n                        placeholder={selectedBroker.isDex ? 'Mi Wallet DeFi' : `Mi cuenta ${selectedBroker.name}`}\n                        className=\"w-full text-sm rounded-xl\"\n                        style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.5)', padding: '10px 14px' }}\n                      />\n                    </div>\n\n                    {/* Chain selector (wallet only) */}\n                    {selectedBroker.isDex && (\n                      <div>\n                        <label className=\"text-[10px] text-[var(--text-dim)] mb-1 block font-semibold uppercase tracking-wider flex items-center gap-1\">\n                          üîó Red / Blockchain <span className=\"text-[var(--red)]\">*</span>\n                        </label>\n                        <select\n                          value={keyForm.passphrase || '56'}\n                          onChange={(e) => setKeyForm({ ...keyForm, passphrase: e.target.value })}\n                          className=\"w-full text-sm rounded-xl\"\n                          style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.5)', padding: '10px 14px', color: 'var(--text)' }}\n                        >\n                          <option value=\"56\">üü° BSC (BNB Smart Chain) ‚Äî PancakeSwap</option>\n                          <option value=\"1\">üîµ Ethereum ‚Äî Uniswap</option>\n                          <option value=\"137\">üü£ Polygon ‚Äî QuickSwap</option>\n                          <option value=\"42161\">‚ö™ Arbitrum ‚Äî SushiSwap</option>\n                          <option value=\"43114\">üî¥ Avalanche ‚Äî Trader Joe</option>\n                          <option value=\"8453\">üîµ Base ‚Äî BaseSwap</option>\n                        </select>\n                      </div>\n                    )}\n\n                    {/* API Key / Wallet Address */}\n                    <div>\n                      <label className=\"text-[10px] text-[var(--text-dim)] mb-1 block font-semibold uppercase tracking-wider flex items-center gap-1\">\n                        <Key size={10} className=\"text-[var(--gold)]\" /> {selectedBroker.isDex ? 'Wallet Address' : 'API Key'} <span className=\"text-[var(--red)]\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={keyForm.apiKey}\n                        onChange={(e) => setKeyForm({ ...keyForm, apiKey: e.target.value })}\n                        placeholder={selectedBroker.isDex ? '0x... tu direcci√≥n de wallet' : 'Pega tu API Key aqu√≠'}\n                        className=\"w-full text-sm font-mono rounded-xl\"\n                        style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.5)', padding: '10px 14px' }}\n                        autoFocus\n                      />\n                    </div>\n\n                    {/* API Secret / Private Key */}\n                    <div className=\"relative\">\n                      <label className=\"text-[10px] text-[var(--text-dim)] mb-1 block font-semibold uppercase tracking-wider flex items-center gap-1\">\n                        <Lock size={10} className=\"text-[var(--gold)]\" /> {selectedBroker.isDex ? 'Private Key' : 'API Secret'} <span className=\"text-[var(--red)]\">*</span>\n                      </label>\n                      <input\n                        type={showSecret ? 'text' : 'password'}\n                        value={keyForm.apiSecret}\n                        onChange={(e) => setKeyForm({ ...keyForm, apiSecret: e.target.value })}\n                        placeholder={selectedBroker.isDex ? '0x... tu clave privada' : 'Pega tu API Secret aqu√≠'}\n                        className=\"w-full text-sm font-mono rounded-xl pr-10\"\n                        style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.5)', padding: '10px 14px' }}\n                      />\n                      <button onClick={() => setShowSecret(!showSecret)}\n                        className=\"absolute right-3 top-7 text-[var(--text-dim)] hover:text-[var(--text)] transition-colors\">\n                        {showSecret ? <EyeOff size={15} /> : <Eye size={15} />}\n                      </button>\n                    </div>\n\n                    {/* Passphrase (if needed, not for wallet) */}\n                    {selectedBroker.needsPassphrase && !selectedBroker.isDex && (\n                      <div>\n                        <label className=\"text-[10px] text-[var(--text-dim)] mb-1 block font-semibold uppercase tracking-wider flex items-center gap-1\">\n                          <Shield size={10} className=\"text-[var(--gold)]\" /> Passphrase <span className=\"text-[var(--red)]\">*</span>\n                        </label>\n                        <input\n                          type=\"password\"\n                          value={keyForm.passphrase}\n                          onChange={(e) => setKeyForm({ ...keyForm, passphrase: e.target.value })}\n                          placeholder=\"Pega tu Passphrase aqu√≠\"\n                          className=\"w-full text-sm font-mono rounded-xl\"\n                          style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.5)', padding: '10px 14px' }}\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Error */}\n                  {keyError && (\n                    <div className=\"rounded-lg px-3 py-2 text-xs text-[var(--red)] flex items-start gap-2\" style={{ background: 'rgba(246,70,93,0.08)', border: '1px solid rgba(246,70,93,0.15)' }}>\n                      <XCircle size={14} className=\"shrink-0 mt-0.5\" /> {keyError}\n                    </div>\n                  )}\n\n                  {/* Permissions reminder */}\n                  <div className=\"rounded-lg px-3 py-2 flex items-start gap-2\" style={{ background: selectedBroker.isDex ? 'rgba(212,175,55,0.06)' : 'rgba(59,130,246,0.04)', border: `1px solid ${selectedBroker.isDex ? 'rgba(212,175,55,0.12)' : 'rgba(59,130,246,0.08)'}` }}>\n                    <Info size={13} className=\"text-[var(--gold)] shrink-0 mt-0.5\" />\n                    <p className=\"text-[10px] text-[var(--text-dim)] leading-relaxed\">\n                      {selectedBroker.isDex ? (\n                        <>\n                          Tu clave privada da <strong className=\"text-[var(--red)]\">acceso total</strong> a tu wallet. \n                          Se almacena solo en tu dispositivo, encriptada. \n                          <strong className=\"text-[var(--gold)]\"> Trading via PancakeSwap/Uniswap DEX.</strong>\n                        </>\n                      ) : (\n                        <>\n                          Aseg√∫rate de que tu API Key tenga permisos de <strong className=\"text-[var(--text)]\">lectura</strong> y <strong className=\"text-[var(--text)]\">trading</strong>. \n                          <strong className=\"text-[var(--red)]\"> Nunca actives permisos de retiro.</strong>\n                        </>\n                      )}\n                    </p>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex gap-2\">\n                    <button onClick={() => { setStep(FLOW.GUIDE); setGuideStep(0); }}\n                      className=\"flex items-center gap-1 px-4 py-2.5 rounded-xl text-xs font-semibold text-[var(--text-dim)] hover:text-[var(--text)] transition-colors\"\n                      style={{ background: 'rgba(24,26,32,0.6)', border: '1px solid rgba(30,34,45,0.4)' }}>\n                      <ChevronLeft size={14} /> Ver gu√≠a\n                    </button>\n                    <button\n                      onClick={handleSubmitKeys}\n                      disabled={!keyForm.apiKey || !keyForm.apiSecret}\n                      className=\"flex-1 py-3 rounded-xl text-sm font-bold text-white transition-all hover:brightness-110 disabled:opacity-40\"\n                      style={{ background: 'linear-gradient(135deg, #0ECB81, #0AA06A)' }}\n                    >\n                      Conectar {selectedBroker.name}\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* ‚îÄ‚îÄ‚îÄ Step: VERIFYING ‚îÄ‚îÄ‚îÄ */}\n              {step === FLOW.VERIFYING && (\n                <div className=\"p-8 flex flex-col items-center gap-4\">\n                  <div className=\"relative\">\n                    <div className=\"w-16 h-16 rounded-2xl flex items-center justify-center text-3xl\"\n                      style={{ background: `${selectedBroker.color}15` }}>\n                      {selectedBroker.logo}\n                    </div>\n                    <div className=\"absolute -bottom-1 -right-1 w-7 h-7 rounded-full bg-[var(--dark)] flex items-center justify-center\">\n                      <Loader2 size={16} className=\"text-[var(--gold)] animate-spin\" />\n                    </div>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm font-bold mb-1\">Verificando conexi√≥n...</p>\n                    <p className=\"text-[11px] text-[var(--text-dim)]\">Conectando de forma segura con {selectedBroker.name}</p>\n                  </div>\n                  <div className=\"w-48 h-1 rounded-full overflow-hidden\" style={{ background: 'rgba(30,34,45,0.5)' }}>\n                    <motion.div\n                      className=\"h-full rounded-full\"\n                      style={{ background: `linear-gradient(90deg, ${selectedBroker.color}, var(--gold))` }}\n                      initial={{ width: '0%' }}\n                      animate={{ width: '90%' }}\n                      transition={{ duration: 3, ease: 'easeOut' }}\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* ‚îÄ‚îÄ‚îÄ Step: SUCCESS ‚îÄ‚îÄ‚îÄ */}\n              {step === FLOW.SUCCESS && (\n                <div className=\"p-8 flex flex-col items-center gap-4\">\n                  <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ type: 'spring', damping: 12 }}>\n                    <div className=\"w-16 h-16 rounded-full flex items-center justify-center\"\n                      style={{ background: 'rgba(14,203,129,0.12)', border: '2px solid rgba(14,203,129,0.3)' }}>\n                      <CheckCircle size={32} className=\"text-[var(--green)]\" />\n                    </div>\n                  </motion.div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm font-bold mb-1\">¬°Conectado exitosamente!</p>\n                    <p className=\"text-[11px] text-[var(--text-dim)]\">\n                      Tu cuenta de {selectedBroker.name} est√° lista para operar desde Kairos Trade\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {/* Footer */}\n              <div className=\"px-5 py-3 flex items-center justify-center gap-2\" style={{ borderTop: '1px solid rgba(30,34,45,0.3)' }}>\n                <Lock size={10} className=\"text-[var(--text-dim)]/40\" />\n                <span className=\"text-[9px] text-[var(--text-dim)]/40\">Tus claves est√°n encriptadas localmente</span>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":["BROKER_CATALOG","FLOW","BrokerManager","user","brokers","addBroker","removeBroker","updateBrokerStatus","setActiveBroker","useStore","walletAddress","modalOpen","setModalOpen","useState","step","setStep","selectedBroker","setSelectedBroker","guideStep","setGuideStep","keyForm","setKeyForm","showSecret","setShowSecret","keyError","setKeyError","balances","setBalances","loadingBalances","setLoadingBalances","expandedBroker","setExpandedBroker","showCrypto","setShowCrypto","fetchBalances","useCallback","broker","prev","result","brokerService","err","useEffect","connected","b","interval","openFlow","handleSubmitKeys","newBroker","handleDisconnect","id","n","STABLES","totalUSD","brokerId","sum","splitBalances","bals","stables","crypto","connectedIds","closeModal","jsxs","jsx","CheckCircle","Shield","Zap","Info","Key","i","catalog","isExpanded","usd","XCircle","e","Trash2","AnimatePresence","cryptoOpen","decimals","asset","motion","Wallet","RefreshCw","Coins","ChevronDown","isConnected","ChevronRight","f","Lock","X","_","ExternalLink","g","ChevronLeft","ArrowRight","EyeOff","Eye","Fragment","Loader2"],"mappings":"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"}