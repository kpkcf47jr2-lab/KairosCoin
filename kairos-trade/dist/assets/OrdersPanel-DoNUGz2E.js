import{a as h,j as t,az as f,F as v,d as u}from"./ui-8HTTZoBK.js";import{u as w}from"./index-D1oitnvn.js";import"./vendor-C1W0orB6.js";function L(){const{positions:l,orders:n,tradeHistory:x,bots:o,currentPrice:b,closePosition:g,cancelOrder:y}=w(),[i,j]=h.useState("positions"),[N,c]=h.useState(!1),d=o.flatMap(e=>(e.tradeLog||e.trades_log||[]).map(a=>({...a,botName:e.name,botId:e.id}))).sort((e,s)=>new Date(s.time||s.timestamp||0)-new Date(e.time||e.timestamp||0)),r=o.filter(e=>e.status==="active"),m=[{id:"positions",label:"Posiciones",count:l.length},{id:"orders",label:"Órdenes",count:n.length},{id:"botTrades",label:"Bot Trades",count:d.length},{id:"history",label:"Historial",count:x.length}];return N?t.jsxs("div",{className:"flex items-center justify-between px-4 py-2 cursor-pointer shrink-0 select-none",style:{borderTop:"1px solid rgba(30,34,45,0.6)",background:"rgba(14,16,21,0.95)"},onClick:()=>c(!1),children:[t.jsx("div",{className:"flex items-center gap-4 overflow-x-auto",children:m.map(e=>t.jsxs("span",{className:"text-[11px] text-[var(--text-dim)] font-medium whitespace-nowrap",children:[e.label," ",t.jsxs("span",{style:{opacity:.5},children:["(",e.count,")"]})]},e.id))}),t.jsx(f,{size:14,className:"text-[var(--text-dim)] shrink-0 ml-2"})]}):t.jsxs("div",{className:"flex flex-col shrink-0",style:{height:200,borderTop:"1px solid rgba(30,34,45,0.6)",background:"rgba(14,16,21,0.95)"},children:[t.jsxs("div",{className:"flex items-center shrink-0 px-3 gap-1",style:{borderBottom:"1px solid rgba(30,34,45,0.4)"},children:[m.map((e,s)=>t.jsxs("button",{onClick:()=>j(e.id),className:`px-3 py-2.5 text-[11px] font-semibold transition-colors relative whitespace-nowrap
              ${i===e.id?"text-[var(--text)]":"text-[var(--text-dim)] hover:text-[var(--text-secondary)]"}`,children:[e.label,e.count>0&&t.jsx("span",{className:`ml-1.5 text-[9px] px-1.5 py-0.5 rounded-full font-bold
                ${i===e.id?"bg-[var(--gold)]/15 text-[var(--gold)]":"bg-white/5 text-[var(--text-dim)]"}`,children:e.count}),i===e.id&&t.jsx("div",{className:"absolute bottom-0 left-1 right-1 h-[2px] rounded-t-full bg-[var(--gold)]"})]},e.id)),t.jsx("div",{className:"flex-1"}),t.jsx("button",{onClick:()=>c(!0),className:"p-1.5 text-[var(--text-dim)] hover:text-[var(--text)] transition-colors mr-1 shrink-0",children:t.jsx(v,{size:14})})]}),t.jsxs("div",{className:"flex-1 overflow-auto",style:{scrollbarWidth:"thin"},children:[i==="positions"&&t.jsxs("table",{className:"w-full text-[11px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[var(--text-dim)] text-[10px] uppercase tracking-wider",children:[t.jsx("th",{className:"text-left py-1.5 px-3 font-semibold",children:"Par"}),t.jsx("th",{className:"text-left py-1.5 px-2 font-semibold",children:"Lado"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Cantidad"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Entrada"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Actual"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"P&L"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"SL"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"TP"}),t.jsx("th",{className:"text-right py-1.5 px-3 font-semibold",children:"Acción"})]})}),t.jsx("tbody",{children:l.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:9,className:"text-center py-8 text-[var(--text-dim)]/50 text-xs",children:"Sin posiciones abiertas"})}):l.map(e=>{const s=b||e.entryPrice,a=e.side==="buy"?(s-e.entryPrice)*e.quantity:(e.entryPrice-s)*e.quantity,p=a/(e.entryPrice*e.quantity)*100;return t.jsxs("tr",{className:"border-b border-[var(--border)]/30 hover:bg-white/[0.015] transition-colors",children:[t.jsx("td",{className:"py-1.5 px-3 font-bold text-[var(--text)]",children:e.symbol}),t.jsx("td",{className:"py-1.5 px-2",children:t.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${e.side==="buy"?"text-[var(--green)] bg-[var(--green)]/10":"text-[var(--red)] bg-[var(--red)]/10"}`,children:e.side==="buy"?"LONG":"SHORT"})}),t.jsx("td",{className:"py-1.5 px-2 text-right font-mono",children:e.quantity}),t.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",Number(e.entryPrice).toLocaleString(void 0,{minimumFractionDigits:2})]}),t.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",Number(s).toLocaleString(void 0,{minimumFractionDigits:2})]}),t.jsxs("td",{className:`py-1.5 px-2 text-right font-mono font-bold ${a>=0?"text-[var(--green)]":"text-[var(--red)]"}`,children:[a>=0?"+":"",a.toFixed(2)," ",t.jsxs("span",{className:"text-[9px] opacity-70",children:["(",p>=0?"+":"",p.toFixed(2),"%)"]})]}),t.jsx("td",{className:"py-1.5 px-2 text-right font-mono text-[var(--red)]",children:e.stopLoss?`$${e.stopLoss}`:"—"}),t.jsx("td",{className:"py-1.5 px-2 text-right font-mono text-[var(--green)]",children:e.takeProfit?`$${e.takeProfit}`:"—"}),t.jsx("td",{className:"py-1.5 px-3 text-right",children:t.jsx("button",{onClick:()=>g(e.id),className:"text-[10px] font-semibold text-[var(--text-dim)] hover:text-[var(--red)] px-2 py-1 rounded-md hover:bg-[var(--red)]/10 transition-all",children:"Cerrar"})})]},e.id)})})]}),i==="orders"&&t.jsxs("table",{className:"w-full text-[11px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[var(--text-dim)] text-[10px] uppercase tracking-wider",children:[t.jsx("th",{className:"text-left py-1.5 px-3 font-semibold",children:"Par"}),t.jsx("th",{className:"text-left py-1.5 px-2 font-semibold",children:"Tipo"}),t.jsx("th",{className:"text-left py-1.5 px-2 font-semibold",children:"Lado"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Precio"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Cantidad"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Total"}),t.jsx("th",{className:"text-left py-1.5 px-2 font-semibold",children:"Fecha"}),t.jsx("th",{className:"text-right py-1.5 px-3 font-semibold",children:"Acción"})]})}),t.jsx("tbody",{children:n.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"text-center py-8 text-[var(--text-dim)]/50 text-xs",children:"Sin órdenes pendientes"})}):n.map(e=>t.jsxs("tr",{className:"border-b border-[var(--border)]/30 hover:bg-white/[0.015] transition-colors",children:[t.jsx("td",{className:"py-1.5 px-3 font-bold text-[var(--text)]",children:e.symbol}),t.jsx("td",{className:"py-1.5 px-2",children:t.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-white/5 text-[var(--text-secondary)]",children:e.type==="limit"?"LIMIT":e.type==="stop_loss"?"STOP":"MARKET"})}),t.jsx("td",{className:"py-1.5 px-2",children:t.jsx("span",{className:`text-[10px] font-bold ${e.side==="buy"?"text-[var(--green)]":"text-[var(--red)]"}`,children:e.side==="buy"?"COMPRA":"VENTA"})}),t.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",Number(e.price).toLocaleString(void 0,{minimumFractionDigits:2})]}),t.jsx("td",{className:"py-1.5 px-2 text-right font-mono",children:e.quantity}),t.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",(e.price*e.quantity).toFixed(2)]}),t.jsx("td",{className:"py-1.5 px-2 text-[var(--text-dim)]",children:e.createdAt?new Date(e.createdAt).toLocaleString("es",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—"}),t.jsx("td",{className:"py-1.5 px-3 text-right",children:t.jsx("button",{onClick:()=>y(e.id),className:"text-[10px] font-semibold text-[var(--text-dim)] hover:text-[var(--red)] px-2 py-1 rounded-md hover:bg-[var(--red)]/10 transition-all",children:"Cancelar"})})]},e.id))})]}),i==="botTrades"&&t.jsxs("div",{children:[r.length>0&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 flex-wrap overflow-hidden",style:{borderBottom:"1px solid rgba(30,34,45,0.3)"},children:[t.jsx(u,{size:12,className:"text-[var(--gold)] shrink-0"}),t.jsxs("span",{className:"text-[10px] text-[var(--text-dim)] shrink-0",children:[r.length," bot",r.length>1?"s":""," activo",r.length>1?"s":""]}),r.map(e=>t.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-[var(--green)]/10 text-[var(--green)] font-semibold truncate max-w-[200px]",children:[e.name," • ",e.trades||0," trades"]},e.id))]}),t.jsxs("table",{className:"w-full text-[11px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[var(--text-dim)] text-[10px] uppercase tracking-wider",children:[t.jsx("th",{className:"text-left py-1.5 px-3 font-semibold",children:"Bot"}),t.jsx("th",{className:"text-left py-1.5 px-2 font-semibold",children:"Par"}),t.jsx("th",{className:"text-left py-1.5 px-2 font-semibold",children:"Señal"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Precio"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Cantidad"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"P&L"}),t.jsx("th",{className:"text-left py-1.5 px-3 font-semibold",children:"Hora"})]})}),t.jsx("tbody",{children:d.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-8 text-[var(--text-dim)]/50 text-xs",children:o.length===0?"No hay bots configurados":"Los bots no han ejecutado trades aún"})}):d.slice(0,50).map((e,s)=>t.jsxs("tr",{className:"border-b border-[var(--border)]/30 hover:bg-white/[0.015] transition-colors",children:[t.jsx("td",{className:"py-1.5 px-3 font-semibold text-[var(--gold)]",children:e.botName||"Bot"}),t.jsx("td",{className:"py-1.5 px-2 font-bold text-[var(--text)]",children:e.symbol||e.pair||"—"}),t.jsx("td",{className:"py-1.5 px-2",children:t.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded
                        ${e.signal==="buy"||e.side==="buy"?"text-[var(--green)] bg-[var(--green)]/10":e.signal==="sell"||e.side==="sell"?"text-[var(--red)] bg-[var(--red)]/10":"text-[var(--text-dim)] bg-white/5"}`,children:(e.signal||e.side||"HOLD").toUpperCase()})}),t.jsx("td",{className:"py-1.5 px-2 text-right font-mono",children:e.price?`$${Number(e.price).toLocaleString(void 0,{minimumFractionDigits:2})}`:"—"}),t.jsx("td",{className:"py-1.5 px-2 text-right font-mono",children:e.quantity||e.amount||"—"}),t.jsx("td",{className:`py-1.5 px-2 text-right font-mono font-bold
                      ${(e.pnl||0)>0?"text-[var(--green)]":(e.pnl||0)<0?"text-[var(--red)]":"text-[var(--text-dim)]"}`,children:e.pnl!=null?`${e.pnl>=0?"+":""}$${e.pnl.toFixed(2)}`:"—"}),t.jsx("td",{className:"py-1.5 px-3 text-[var(--text-dim)]",children:e.time||e.timestamp?new Date(e.time||e.timestamp).toLocaleString("es",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"—"})]},s))})]})]}),i==="history"&&t.jsxs("table",{className:"w-full text-[11px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[var(--text-dim)] text-[10px] uppercase tracking-wider",children:[t.jsx("th",{className:"text-left py-1.5 px-3 font-semibold",children:"Par"}),t.jsx("th",{className:"text-left py-1.5 px-2 font-semibold",children:"Lado"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Entrada"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Salida"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"Cantidad"}),t.jsx("th",{className:"text-right py-1.5 px-2 font-semibold",children:"P&L"}),t.jsx("th",{className:"text-left py-1.5 px-3 font-semibold",children:"Fecha"})]})}),t.jsx("tbody",{children:x.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-8 text-[var(--text-dim)]/50 text-xs",children:"Sin trades cerrados"})}):[...x].reverse().slice(0,50).map((e,s)=>t.jsxs("tr",{className:"border-b border-[var(--border)]/30 hover:bg-white/[0.015] transition-colors",children:[t.jsx("td",{className:"py-1.5 px-3 font-bold text-[var(--text)]",children:e.symbol}),t.jsx("td",{className:"py-1.5 px-2",children:t.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${e.side==="buy"?"text-[var(--green)] bg-[var(--green)]/10":"text-[var(--red)] bg-[var(--red)]/10"}`,children:e.side==="buy"?"LONG":"SHORT"})}),t.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",Number(e.entryPrice).toLocaleString(void 0,{minimumFractionDigits:2})]}),t.jsxs("td",{className:"py-1.5 px-2 text-right font-mono",children:["$",e.exitPrice?Number(e.exitPrice).toLocaleString(void 0,{minimumFractionDigits:2}):"—"]}),t.jsx("td",{className:"py-1.5 px-2 text-right font-mono",children:e.quantity}),t.jsxs("td",{className:`py-1.5 px-2 text-right font-mono font-bold ${(e.pnl||0)>=0?"text-[var(--green)]":"text-[var(--red)]"}`,children:[(e.pnl||0)>=0?"+":"","$",(e.pnl||0).toFixed(2)]}),t.jsx("td",{className:"py-1.5 px-3 text-[var(--text-dim)]",children:e.closedAt?new Date(e.closedAt).toLocaleString("es",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—"})]},e.id||s))})]})]})]})}export{L as default};
//# sourceMappingURL=OrdersPanel-DoNUGz2E.js.map
