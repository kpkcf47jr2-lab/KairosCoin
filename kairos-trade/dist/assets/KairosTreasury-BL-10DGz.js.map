{"version":3,"file":"KairosTreasury-BL-10DGz.js","sources":["../../src/components/Kairos/KairosTreasury.jsx"],"sourcesContent":["// ═══════════════════════════════════════════════════════════════════════════════\n//  Kairos Trade — Treasury Dashboard (Admin Panel)\n//  Shows Kairos 777 Inc trading fee revenue in real time\n//  Endpoint: GET /api/perps/treasury\n// ═══════════════════════════════════════════════════════════════════════════════\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  Landmark, DollarSign, TrendingUp, BarChart3, Clock,\n  RefreshCw, ArrowUpRight, Percent, Users, Activity,\n  Zap, Shield, AlertTriangle\n} from 'lucide-react';\nimport useStore from '../../store/useStore';\nimport { isAdmin, ADMIN_CONFIG } from '../../constants';\nimport { feeService } from '../../services/feeService';\n\nconst API_HOST = 'https://kairos-api-u6k5.onrender.com';\n\n// ── Helpers ──────────────────────────────────────────────────────────────────\nconst fmt = (n, d = 2) => (n || 0).toLocaleString(undefined, { minimumFractionDigits: d, maximumFractionDigits: d });\nconst fmtK = (n) => {\n  if (!n) return '$0';\n  if (n >= 1_000_000) return `$${(n / 1_000_000).toFixed(2)}M`;\n  if (n >= 1_000) return `$${(n / 1_000).toFixed(1)}K`;\n  return `$${n.toFixed(2)}`;\n};\n\nexport default function KairosTreasury() {\n  const { showToast, user, setPage } = useStore();\n  const [treasury, setTreasury] = useState(null);\n  const [stats, setStats] = useState(null);\n  const [platformFees, setPlatformFees] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [lastUpdate, setLastUpdate] = useState(null);\n\n  const fetchData = useCallback(async () => {\n    if (!isAdmin(user)) return;\n    try {\n      const [treasuryRes, statsRes] = await Promise.all([\n        fetch(`${API_HOST}/api/perps/treasury`).then(r => r.json()),\n        fetch(`${API_HOST}/api/perps/stats`).then(r => r.json()),\n      ]);\n      if (treasuryRes.success) setTreasury(treasuryRes.data);\n      if (statsRes.success) setStats(statsRes.data);\n      // Platform trading bot fees (local feeService)\n      setPlatformFees(feeService.getStats());\n      setLastUpdate(new Date());\n    } catch (err) {\n      console.error('Treasury fetch error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    fetchData();\n    const interval = setInterval(fetchData, 10000);\n    return () => clearInterval(interval);\n  }, [fetchData]);\n\n  // ── Admin Guard ──\n  if (!isAdmin(user)) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center p-8\">\n          <Shield size={48} className=\"text-red-500 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-bold text-white mb-2\">Acceso Restringido</h2>\n          <p className=\"text-zinc-400 mb-4\">Solo administradores de {ADMIN_CONFIG.companyName} pueden acceder al Treasury.</p>\n          <button onClick={() => setPage('dashboard')} className=\"px-4 py-2 bg-blue-600 rounded-lg text-white text-sm hover:bg-blue-500 transition\">\n            Volver al Dashboard\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"w-8 h-8 text-[var(--gold)] animate-spin mx-auto mb-3\" />\n          <p className=\"text-sm text-zinc-400\">Cargando Treasury...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const breakdown = treasury?.breakdown || {};\n  const openFees = breakdown.open_fee || { total: 0, count: 0 };\n  const closeFees = breakdown.close_fee || { total: 0, count: 0 };\n  const liqFees = breakdown.liquidation_fee || { total: 0, count: 0 };\n  const totalRevenue = treasury?.totalRevenue || 0;\n  const todayRevenue = treasury?.todayRevenue || 0;\n  const feeRates = treasury?.feeRates || {};\n\n  return (\n    <div className=\"flex-1 overflow-y-auto p-4 space-y-4\" style={{ scrollbarWidth: 'thin', scrollbarColor: '#3f3f46 transparent' }}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-11 h-11 rounded-xl bg-gradient-to-br from-amber-500/20 to-yellow-600/10 border border-amber-500/30 flex items-center justify-center\">\n            <Landmark size={22} className=\"text-amber-400\" />\n          </div>\n          <div>\n            <h1 className=\"text-xl font-bold text-white\">Kairos 777 Treasury</h1>\n            <p className=\"text-xs text-zinc-500\">Ingresos por comisiones de trading</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {lastUpdate && (\n            <span className=\"text-[10px] text-zinc-600\">\n              Actualizado {lastUpdate.toLocaleTimeString()}\n            </span>\n          )}\n          <button onClick={fetchData} className=\"p-2 rounded-lg bg-zinc-800 hover:bg-zinc-700 transition-colors\">\n            <RefreshCw size={14} className=\"text-zinc-400\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Main Revenue Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n        {/* Total Revenue */}\n        <motion.div\n          initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}\n          className=\"bg-gradient-to-br from-amber-500/10 to-amber-600/5 border border-amber-500/20 rounded-xl p-5\"\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <DollarSign size={16} className=\"text-amber-400\" />\n            <span className=\"text-xs font-medium text-amber-400/80 uppercase tracking-wider\">Revenue Total</span>\n          </div>\n          <p className=\"text-3xl font-bold text-white font-mono\">{fmt(totalRevenue)} <span className=\"text-base text-amber-400\">KAIROS</span></p>\n          <p className=\"text-xs text-zinc-500 mt-1\">≈ ${fmt(totalRevenue)} USD (1:1 peg)</p>\n        </motion.div>\n\n        {/* Today Revenue */}\n        <motion.div\n          initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.05 }}\n          className=\"bg-zinc-900 border border-zinc-800 rounded-xl p-5\"\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Clock size={16} className=\"text-green-400\" />\n            <span className=\"text-xs font-medium text-zinc-500 uppercase tracking-wider\">Revenue Hoy</span>\n          </div>\n          <p className=\"text-3xl font-bold text-green-400 font-mono\">{fmt(todayRevenue)} <span className=\"text-base text-green-400/60\">KAIROS</span></p>\n          <p className=\"text-xs text-zinc-500 mt-1\">Acumulado desde 00:00 UTC</p>\n        </motion.div>\n\n        {/* Volume & Trades */}\n        <motion.div\n          initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}\n          className=\"bg-zinc-900 border border-zinc-800 rounded-xl p-5\"\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <BarChart3 size={16} className=\"text-blue-400\" />\n            <span className=\"text-xs font-medium text-zinc-500 uppercase tracking-wider\">Actividad</span>\n          </div>\n          <p className=\"text-2xl font-bold text-white font-mono\">{fmtK(stats?.volume || 0)}</p>\n          <p className=\"text-xs text-zinc-500\">Volumen total • {stats?.positionsOpened || 0} trades</p>\n        </motion.div>\n      </div>\n\n      {/* Fee Breakdown */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n        {/* Open Fees */}\n        <div className=\"bg-zinc-900 border border-zinc-800 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center\">\n                <ArrowUpRight size={16} className=\"text-blue-400\" />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-white\">Open Fees</p>\n                <p className=\"text-[10px] text-zinc-600\">{feeRates.openFee} por posición</p>\n              </div>\n            </div>\n          </div>\n          <p className=\"text-xl font-bold text-blue-400 font-mono\">{fmt(openFees.total)}</p>\n          <p className=\"text-xs text-zinc-500 mt-1\">{openFees.count} cobros</p>\n          <div className=\"mt-2 h-1 bg-zinc-800 rounded-full overflow-hidden\">\n            <div className=\"h-full bg-blue-500 rounded-full\" style={{ width: `${totalRevenue > 0 ? (openFees.total / totalRevenue * 100) : 0}%` }} />\n          </div>\n        </div>\n\n        {/* Close Fees */}\n        <div className=\"bg-zinc-900 border border-zinc-800 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center\">\n                <TrendingUp size={16} className=\"text-purple-400\" />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-white\">Close Fees</p>\n                <p className=\"text-[10px] text-zinc-600\">{feeRates.closeFee} por cierre</p>\n              </div>\n            </div>\n          </div>\n          <p className=\"text-xl font-bold text-purple-400 font-mono\">{fmt(closeFees.total)}</p>\n          <p className=\"text-xs text-zinc-500 mt-1\">{closeFees.count} cobros</p>\n          <div className=\"mt-2 h-1 bg-zinc-800 rounded-full overflow-hidden\">\n            <div className=\"h-full bg-purple-500 rounded-full\" style={{ width: `${totalRevenue > 0 ? (closeFees.total / totalRevenue * 100) : 0}%` }} />\n          </div>\n        </div>\n\n        {/* Liquidation Fees */}\n        <div className=\"bg-zinc-900 border border-zinc-800 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-red-500/10 flex items-center justify-center\">\n                <AlertTriangle size={16} className=\"text-red-400\" />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-white\">Liquidation Fees</p>\n                <p className=\"text-[10px] text-zinc-600\">{feeRates.liquidationFee} penalización</p>\n              </div>\n            </div>\n          </div>\n          <p className=\"text-xl font-bold text-red-400 font-mono\">{fmt(liqFees.total)}</p>\n          <p className=\"text-xs text-zinc-500 mt-1\">{liqFees.count} liquidaciones</p>\n          <div className=\"mt-2 h-1 bg-zinc-800 rounded-full overflow-hidden\">\n            <div className=\"h-full bg-red-500 rounded-full\" style={{ width: `${totalRevenue > 0 ? (liqFees.total / totalRevenue * 100) : 0}%` }} />\n          </div>\n        </div>\n      </div>\n\n      {/* Protocol Stats */}\n      {stats && (\n        <div className=\"bg-zinc-900 border border-zinc-800 rounded-xl p-4\">\n          <h3 className=\"text-sm font-semibold text-white mb-3 flex items-center gap-2\">\n            <Activity size={14} className=\"text-[var(--gold)]\" />\n            Estadísticas del Protocolo\n          </h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Open Interest Long</p>\n              <p className=\"text-sm font-bold text-green-400 font-mono\">{fmtK(stats.openInterestLong)}</p>\n            </div>\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Open Interest Short</p>\n              <p className=\"text-sm font-bold text-red-400 font-mono\">{fmtK(stats.openInterestShort)}</p>\n            </div>\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Cuentas Activas</p>\n              <p className=\"text-sm font-bold text-white font-mono\">{stats.totalAccounts || 0}</p>\n            </div>\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Liquidaciones</p>\n              <p className=\"text-sm font-bold text-orange-400 font-mono\">{stats.liquidations || 0}</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Recent Fees Table */}\n      {treasury?.recentFees?.length > 0 && (\n        <div className=\"bg-zinc-900 border border-zinc-800 rounded-xl p-4\">\n          <h3 className=\"text-sm font-semibold text-white mb-3 flex items-center gap-2\">\n            <Clock size={14} className=\"text-zinc-400\" />\n            Últimas Comisiones Cobradas\n          </h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-xs\">\n              <thead>\n                <tr className=\"text-zinc-600 border-b border-zinc-800\">\n                  <th className=\"text-left py-2 px-2 font-medium\">Fecha</th>\n                  <th className=\"text-left py-2 px-2 font-medium\">Tipo</th>\n                  <th className=\"text-left py-2 px-2 font-medium\">Par</th>\n                  <th className=\"text-left py-2 px-2 font-medium\">Trader</th>\n                  <th className=\"text-right py-2 px-2 font-medium\">Monto</th>\n                </tr>\n              </thead>\n              <tbody>\n                {treasury.recentFees.map((fee) => (\n                  <tr key={fee.id} className=\"border-b border-zinc-800/50 hover:bg-zinc-800/30 transition-colors\">\n                    <td className=\"py-2 px-2 text-zinc-400 font-mono\">\n                      {new Date(fee.created_at + 'Z').toLocaleString('es', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}\n                    </td>\n                    <td className=\"py-2 px-2\">\n                      <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${\n                        fee.fee_type === 'open_fee' ? 'bg-blue-500/10 text-blue-400' :\n                        fee.fee_type === 'close_fee' ? 'bg-purple-500/10 text-purple-400' :\n                        'bg-red-500/10 text-red-400'\n                      }`}>\n                        {fee.fee_type === 'open_fee' ? 'Apertura' :\n                         fee.fee_type === 'close_fee' ? 'Cierre' : 'Liquidación'}\n                      </span>\n                    </td>\n                    <td className=\"py-2 px-2 text-white font-medium\">{fee.pair}</td>\n                    <td className=\"py-2 px-2 text-zinc-500 font-mono\">{fee.trader?.slice(0, 6)}...{fee.trader?.slice(-4)}</td>\n                    <td className=\"py-2 px-2 text-right font-bold text-amber-400 font-mono\">+{fmt(fee.amount)} K</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* ═══ Platform Bot Trading Fees (feeService) ═══ */}\n      {platformFees && (\n        <div className=\"bg-gradient-to-br from-green-500/5 to-emerald-600/5 border border-green-500/20 rounded-xl p-4\">\n          <h3 className=\"text-sm font-semibold text-white mb-3 flex items-center gap-2\">\n            <Zap size={14} className=\"text-green-400\" />\n            Platform Trading Fees (Bots & Trading)\n            <span className=\"ml-auto text-[10px] text-green-400/60 font-mono\">{platformFees.feeRateDisplay} por operación</span>\n          </h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3\">\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Total Recaudado</p>\n              <p className=\"text-lg font-bold text-green-400 font-mono\">${fmt(platformFees.totalCollected, 4)}</p>\n            </div>\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Hoy</p>\n              <p className=\"text-lg font-bold text-white font-mono\">${fmt(platformFees.today.fees, 4)}</p>\n              <p className=\"text-[10px] text-zinc-500\">{platformFees.today.trades} trades • Vol: {fmtK(platformFees.today.volume)}</p>\n            </div>\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Últimos 7 Días</p>\n              <p className=\"text-lg font-bold text-white font-mono\">${fmt(platformFees.last7days.fees, 4)}</p>\n              <p className=\"text-[10px] text-zinc-500\">{platformFees.last7days.trades} trades</p>\n            </div>\n            <div>\n              <p className=\"text-[10px] text-zinc-600 uppercase tracking-wider\">Últimos 30 Días</p>\n              <p className=\"text-lg font-bold text-white font-mono\">${fmt(platformFees.last30days.fees, 4)}</p>\n              <p className=\"text-[10px] text-zinc-500\">{platformFees.last30days.trades} trades</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2 text-[10px] text-zinc-500\">\n            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-500/10 text-green-400\">\n              <Activity size={10} /> {platformFees.totalTrades} trades totales\n            </span>\n            {platformFees.pendingSync > 0 && (\n              <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500/10 text-amber-400\">\n                <RefreshCw size={10} /> ${fmt(platformFees.pendingSync, 4)} pendiente de sync\n              </span>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Fee Structure Info */}\n      <div className=\"bg-zinc-900/50 border border-zinc-800/50 rounded-xl p-4\">\n        <h3 className=\"text-sm font-semibold text-white mb-3 flex items-center gap-2\">\n          <Percent size={14} className=\"text-[var(--gold)]\" />\n          Estructura de Comisiones — Kairos 777 Inc\n        </h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3 text-xs\">\n          <div className=\"bg-zinc-800/50 rounded-lg p-3\">\n            <p className=\"text-green-400 font-bold mb-1\">Platform Fee: 0.05%</p>\n            <p className=\"text-zinc-500\">Se cobra al abrir y cerrar trades en bots, simulador, grid, DCA y trading manual. Invisible para el usuario.</p>\n          </div>\n          <div className=\"bg-zinc-800/50 rounded-lg p-3\">\n            <p className=\"text-blue-400 font-bold mb-1\">Open Fee: 0.10%</p>\n            <p className=\"text-zinc-500\">Se cobra al abrir una posición apalancada. Calculado sobre el tamaño total (collateral × leverage).</p>\n          </div>\n          <div className=\"bg-zinc-800/50 rounded-lg p-3\">\n            <p className=\"text-purple-400 font-bold mb-1\">Close Fee: 0.10%</p>\n            <p className=\"text-zinc-500\">Se cobra al cerrar una posición. Calculado sobre el tamaño total de la posición.</p>\n          </div>\n          <div className=\"bg-zinc-800/50 rounded-lg p-3\">\n            <p className=\"text-red-400 font-bold mb-1\">Liquidation Fee: 0.50%</p>\n            <p className=\"text-zinc-500\">Penalización cuando una posición es liquidada automáticamente por el monitor de riesgo.</p>\n          </div>\n        </div>\n        <p className=\"text-[10px] text-zinc-600 mt-3 text-center\">\n          Todas las comisiones se acumulan en el Treasury de Kairos 777 Inc • Los fondos son propiedad de la empresa\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":["API_HOST","fmt","fmtK","KairosTreasury","showToast","user","setPage","useStore","treasury","setTreasury","useState","stats","setStats","platformFees","setPlatformFees","loading","setLoading","lastUpdate","setLastUpdate","fetchData","useCallback","isAdmin","treasuryRes","statsRes","r","feeService","err","useEffect","interval","jsxs","jsx","Shield","ADMIN_CONFIG","RefreshCw","breakdown","openFees","closeFees","liqFees","totalRevenue","todayRevenue","feeRates","Landmark","motion","DollarSign","Clock","BarChart3","ArrowUpRight","TrendingUp","AlertTriangle","Activity","_a","fee","_b","Zap","Percent"],"mappings":"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"}