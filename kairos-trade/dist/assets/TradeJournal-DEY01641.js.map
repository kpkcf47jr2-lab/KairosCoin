{"version":3,"file":"TradeJournal-DEY01641.js","sources":["../../src/components/Journal/TradeJournal.jsx"],"sourcesContent":["// Kairos Trade â€” Trade Journal (Elite Feature)\n// Manual notes, tags, screenshots, and post-mortem analysis per trade\nimport { useState, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  BookOpen, Tag, Search, Filter, ArrowUpRight, ArrowDownRight,\n  MessageSquare, Star, StarOff, ChevronDown, ChevronUp, Plus,\n  X, Camera, Calendar, TrendingUp, TrendingDown, Hash\n} from 'lucide-react';\nimport useStore from '../../store/useStore';\n\nconst EMOTION_TAGS = ['ðŸ˜Ž Confiado', 'ðŸ˜° Nervioso', 'ðŸ¤” Dudoso', 'ðŸ˜¤ Impulsivo', 'ðŸ§˜ Disciplinado', 'ðŸŽ¯ Enfocado'];\nconst SETUP_TAGS = ['Breakout', 'Pullback', 'Reversal', 'Scalp', 'Swing', 'Trend Following', 'Mean Reversion', 'News'];\n\nexport default function TradeJournal() {\n  const { tradeHistory } = useStore();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTrade, setSelectedTrade] = useState(null);\n  const [notes, setNotes] = useState(() => {\n    try { return JSON.parse(localStorage.getItem('kairos_journal') || '{}'); } catch { return {}; }\n  });\n  const [filterTag, setFilterTag] = useState('all');\n  const [sortBy, setSortBy] = useState('date'); // date, pnl, rating\n  const [expandedId, setExpandedId] = useState(null);\n\n  // Save notes to localStorage\n  const saveNote = (tradeId, noteData) => {\n    const updated = { ...notes, [tradeId]: { ...notes[tradeId], ...noteData, updatedAt: Date.now() } };\n    setNotes(updated);\n    localStorage.setItem('kairos_journal', JSON.stringify(updated));\n  };\n\n  // Filter and sort trades\n  const filteredTrades = useMemo(() => {\n    let trades = [...(tradeHistory || [])];\n\n    if (searchQuery) {\n      const q = searchQuery.toLowerCase();\n      trades = trades.filter(t =>\n        (t.pair || t.symbol || '').toLowerCase().includes(q) ||\n        (t.botName || '').toLowerCase().includes(q) ||\n        (notes[t.id]?.note || '').toLowerCase().includes(q) ||\n        (notes[t.id]?.tags || []).some(tag => tag.toLowerCase().includes(q))\n      );\n    }\n\n    if (filterTag !== 'all') {\n      trades = trades.filter(t => (notes[t.id]?.tags || []).includes(filterTag));\n    }\n\n    trades.sort((a, b) => {\n      if (sortBy === 'pnl') return Math.abs(b.pnl || 0) - Math.abs(a.pnl || 0);\n      if (sortBy === 'rating') return (notes[b.id]?.rating || 0) - (notes[a.id]?.rating || 0);\n      return new Date(b.closedAt || b.time || 0) - new Date(a.closedAt || a.time || 0);\n    });\n\n    return trades;\n  }, [tradeHistory, searchQuery, filterTag, sortBy, notes]);\n\n  // All used tags\n  const allTags = useMemo(() => {\n    const tags = new Set();\n    Object.values(notes).forEach(n => (n.tags || []).forEach(t => tags.add(t)));\n    return Array.from(tags);\n  }, [notes]);\n\n  // Trade detail card\n  const TradeDetail = ({ trade }) => {\n    const tradeNotes = notes[trade.id] || {};\n    const [localNote, setLocalNote] = useState(tradeNotes.note || '');\n    const [localTags, setLocalTags] = useState(tradeNotes.tags || []);\n    const [localEmotion, setLocalEmotion] = useState(tradeNotes.emotion || '');\n    const [localSetup, setLocalSetup] = useState(tradeNotes.setup || '');\n    const [localRating, setLocalRating] = useState(tradeNotes.rating || 0);\n    const [localLesson, setLocalLesson] = useState(tradeNotes.lesson || '');\n\n    const handleSave = () => {\n      saveNote(trade.id, {\n        note: localNote,\n        tags: localTags,\n        emotion: localEmotion,\n        setup: localSetup,\n        rating: localRating,\n        lesson: localLesson,\n      });\n    };\n\n    const toggleTag = (tag) => {\n      setLocalTags(prev => prev.includes(tag) ? prev.filter(t => t !== tag) : [...prev, tag]);\n    };\n\n    return (\n      <motion.div\n        initial={{ height: 0, opacity: 0 }}\n        animate={{ height: 'auto', opacity: 1 }}\n        exit={{ height: 0, opacity: 0 }}\n        className=\"overflow-hidden\"\n      >\n        <div className=\"p-4 bg-[var(--dark)] border-t border-[var(--border)] space-y-4\">\n          {/* Trade summary */}\n          <div className=\"grid grid-cols-4 gap-3 text-xs\">\n            <div>\n              <p className=\"text-[var(--text-dim)]\">Entrada</p>\n              <p className=\"font-mono font-bold\">${(trade.entryPrice || 0).toFixed(2)}</p>\n            </div>\n            <div>\n              <p className=\"text-[var(--text-dim)]\">Salida</p>\n              <p className=\"font-mono font-bold\">${(trade.exitPrice || 0).toFixed(2)}</p>\n            </div>\n            <div>\n              <p className=\"text-[var(--text-dim)]\">DuraciÃ³n</p>\n              <p className=\"font-bold\">\n                {trade.closedAt && trade.time\n                  ? (() => {\n                    const ms = new Date(trade.closedAt) - new Date(trade.time);\n                    if (ms < 60000) return `${Math.round(ms / 1000)}s`;\n                    if (ms < 3600000) return `${Math.round(ms / 60000)}m`;\n                    return `${(ms / 3600000).toFixed(1)}h`;\n                  })()\n                  : 'â€”'\n                }\n              </p>\n            </div>\n            <div>\n              <p className=\"text-[var(--text-dim)]\">Bot</p>\n              <p className=\"font-bold\">{trade.botName || 'â€”'}</p>\n            </div>\n          </div>\n\n          {/* Rating */}\n          <div>\n            <label className=\"text-[10px] text-[var(--text-dim)] block mb-1\">CalificaciÃ³n del Trade</label>\n            <div className=\"flex gap-1\">\n              {[1, 2, 3, 4, 5].map(star => (\n                <button\n                  key={star}\n                  onClick={() => setLocalRating(star)}\n                  className=\"transition-colors\"\n                >\n                  {star <= localRating\n                    ? <Star size={16} className=\"text-[var(--gold)] fill-[var(--gold)]\" />\n                    : <StarOff size={16} className=\"text-[var(--text-dim)]\" />\n                  }\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Emotion */}\n          <div>\n            <label className=\"text-[10px] text-[var(--text-dim)] block mb-1\">Estado Emocional</label>\n            <div className=\"flex gap-1.5 flex-wrap\">\n              {EMOTION_TAGS.map(e => (\n                <button\n                  key={e}\n                  onClick={() => setLocalEmotion(localEmotion === e ? '' : e)}\n                  className={`px-2 py-1 text-[10px] rounded-full transition-colors ${localEmotion === e ? 'bg-[var(--gold)]/20 text-[var(--gold)] border border-[var(--gold)]/30' : 'bg-white/5 text-[var(--text-dim)] border border-[var(--border)]'}`}\n                >\n                  {e}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Setup type */}\n          <div>\n            <label className=\"text-[10px] text-[var(--text-dim)] block mb-1\">Tipo de Setup</label>\n            <div className=\"flex gap-1.5 flex-wrap\">\n              {SETUP_TAGS.map(s => (\n                <button\n                  key={s}\n                  onClick={() => setLocalSetup(localSetup === s ? '' : s)}\n                  className={`px-2 py-1 text-[10px] rounded-full transition-colors ${localSetup === s ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30' : 'bg-white/5 text-[var(--text-dim)] border border-[var(--border)]'}`}\n                >\n                  {s}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Custom tags */}\n          <div>\n            <label className=\"text-[10px] text-[var(--text-dim)] block mb-1\">Tags Personalizados</label>\n            <div className=\"flex gap-1.5 flex-wrap\">\n              {localTags.map(tag => (\n                <span key={tag} className=\"px-2 py-0.5 text-[10px] bg-purple-500/20 text-purple-400 rounded-full flex items-center gap-1\">\n                  <Hash size={8} /> {tag}\n                  <button onClick={() => toggleTag(tag)} className=\"hover:text-white\"><X size={10} /></button>\n                </span>\n              ))}\n              <button\n                onClick={() => {\n                  const tag = prompt('Nombre del tag:');\n                  if (tag?.trim()) toggleTag(tag.trim());\n                }}\n                className=\"px-2 py-0.5 text-[10px] bg-white/5 text-[var(--text-dim)] rounded-full flex items-center gap-1 hover:bg-white/10\"\n              >\n                <Plus size={10} /> Tag\n              </button>\n            </div>\n          </div>\n\n          {/* Notes */}\n          <div>\n            <label className=\"text-[10px] text-[var(--text-dim)] block mb-1\">Notas del Trade</label>\n            <textarea\n              value={localNote}\n              onChange={(e) => setLocalNote(e.target.value)}\n              placeholder=\"Â¿Por quÃ© tomaste este trade? Â¿QuÃ© observaste?\"\n              className=\"w-full bg-[var(--dark-2)] border border-[var(--border)] rounded-lg p-2 text-xs h-20 resize-none focus:border-[var(--gold)]/50 outline-none\"\n            />\n          </div>\n\n          {/* Lesson learned */}\n          <div>\n            <label className=\"text-[10px] text-[var(--text-dim)] block mb-1\">ðŸ“š LecciÃ³n Aprendida</label>\n            <textarea\n              value={localLesson}\n              onChange={(e) => setLocalLesson(e.target.value)}\n              placeholder=\"Â¿QuÃ© harÃ­as diferente la prÃ³xima vez?\"\n              className=\"w-full bg-[var(--dark-2)] border border-[var(--border)] rounded-lg p-2 text-xs h-16 resize-none focus:border-[var(--gold)]/50 outline-none\"\n            />\n          </div>\n\n          {/* Save button */}\n          <button\n            onClick={handleSave}\n            className=\"w-full py-2 bg-[var(--gold)] text-white font-bold text-sm rounded-xl hover:bg-[var(--gold-light)] transition-colors\"\n          >\n            Guardar Notas\n          </button>\n        </div>\n      </motion.div>\n    );\n  };\n\n  return (\n    <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-xl font-bold flex items-center gap-2\">\n            <BookOpen size={22} className=\"text-[var(--gold)]\" /> Trade Journal\n          </h1>\n          <p className=\"text-sm text-[var(--text-dim)]\">Documenta, analiza y mejora tu trading</p>\n        </div>\n        <div className=\"text-sm text-[var(--text-dim)]\">\n          {filteredTrades.length} trades\n        </div>\n      </div>\n\n      {/* Filters bar */}\n      <div className=\"flex gap-2 flex-wrap items-center\">\n        {/* Search */}\n        <div className=\"flex items-center gap-1.5 bg-[var(--dark-2)] border border-[var(--border)] rounded-lg px-2 py-1.5 flex-1 min-w-[200px] max-w-[300px]\">\n          <Search size={14} className=\"text-[var(--text-dim)]\" />\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Buscar por par, bot, nota...\"\n            className=\"bg-transparent text-xs outline-none flex-1\"\n          />\n        </div>\n\n        {/* Sort */}\n        <select\n          value={sortBy}\n          onChange={(e) => setSortBy(e.target.value)}\n          className=\"text-xs bg-[var(--dark-2)] border border-[var(--border)] rounded-lg px-2 py-1.5\"\n        >\n          <option value=\"date\">MÃ¡s reciente</option>\n          <option value=\"pnl\">Mayor P&L</option>\n          <option value=\"rating\">Mejor valorado</option>\n        </select>\n\n        {/* Tag filter */}\n        <select\n          value={filterTag}\n          onChange={(e) => setFilterTag(e.target.value)}\n          className=\"text-xs bg-[var(--dark-2)] border border-[var(--border)] rounded-lg px-2 py-1.5\"\n        >\n          <option value=\"all\">Todos los tags</option>\n          {allTags.map(tag => (\n            <option key={tag} value={tag}>{tag}</option>\n          ))}\n          {SETUP_TAGS.map(tag => (\n            <option key={tag} value={tag}>{tag}</option>\n          ))}\n        </select>\n      </div>\n\n      {/* Stats summary */}\n      {filteredTrades.length > 0 && (\n        <div className=\"grid grid-cols-4 gap-3\">\n          {[\n            {\n              label: 'Win Rate',\n              value: `${(filteredTrades.filter(t => t.pnl > 0).length / filteredTrades.length * 100).toFixed(0)}%`,\n              color: 'text-emerald-400',\n            },\n            {\n              label: 'Con Notas',\n              value: `${filteredTrades.filter(t => notes[t.id]?.note).length}`,\n              color: 'text-[var(--gold)]',\n            },\n            {\n              label: 'Avg Rating',\n              value: (() => {\n                const rated = filteredTrades.filter(t => notes[t.id]?.rating > 0);\n                return rated.length > 0\n                  ? `${(rated.reduce((s, t) => s + notes[t.id].rating, 0) / rated.length).toFixed(1)} â˜…`\n                  : 'â€”';\n              })(),\n              color: 'text-yellow-400',\n            },\n            {\n              label: 'Top Setup',\n              value: (() => {\n                const setups = {};\n                filteredTrades.forEach(t => {\n                  const s = notes[t.id]?.setup;\n                  if (s) setups[s] = (setups[s] || 0) + 1;\n                });\n                const top = Object.entries(setups).sort((a, b) => b[1] - a[1])[0];\n                return top ? top[0] : 'â€”';\n              })(),\n              color: 'text-blue-400',\n            },\n          ].map((stat, i) => (\n            <div key={i} className=\"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl p-3 text-center\">\n              <p className=\"text-[10px] text-[var(--text-dim)]\">{stat.label}</p>\n              <p className={`text-sm font-bold ${stat.color}`}>{stat.value}</p>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Trade list */}\n      {filteredTrades.length === 0 ? (\n        <div className=\"flex-1 flex flex-col items-center justify-center py-20 text-center\">\n          <BookOpen size={48} className=\"text-[var(--text-dim)] mb-4\" />\n          <h2 className=\"text-lg font-bold mb-2\">Sin trades registrados</h2>\n          <p className=\"text-sm text-[var(--text-dim)]\">\n            Los trades se registran automÃ¡ticamente cuando tus bots ejecutan operaciones.\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-1\">\n          {filteredTrades.map(trade => {\n            const tradeNotes = notes[trade.id] || {};\n            const isExpanded = expandedId === trade.id;\n            const pnl = trade.pnl || 0;\n            const isWin = pnl > 0;\n\n            return (\n              <div key={trade.id} className=\"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl overflow-hidden\">\n                <button\n                  onClick={() => setExpandedId(isExpanded ? null : trade.id)}\n                  className=\"w-full flex items-center gap-3 p-3 text-left hover:bg-white/[0.02] transition-colors\"\n                >\n                  {/* Win/Loss indicator */}\n                  <div className={`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${isWin ? 'bg-emerald-500/15' : 'bg-red-500/15'}`}>\n                    {isWin ? <ArrowUpRight size={16} className=\"text-emerald-400\" /> : <ArrowDownRight size={16} className=\"text-red-400\" />}\n                  </div>\n\n                  {/* Trade info */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs font-bold font-mono\">{trade.pair || trade.symbol || 'â€”'}</span>\n                      <span className={`text-[10px] px-1.5 py-0.5 rounded font-bold ${trade.side === 'buy' ? 'bg-emerald-500/20 text-emerald-400' : 'bg-red-500/20 text-red-400'}`}>\n                        {(trade.side || 'â€”').toUpperCase()}\n                      </span>\n                      {tradeNotes.rating > 0 && (\n                        <span className=\"text-[10px] text-yellow-400\">{'â˜…'.repeat(tradeNotes.rating)}</span>\n                      )}\n                      {tradeNotes.emotion && (\n                        <span className=\"text-[10px]\">{tradeNotes.emotion.split(' ')[0]}</span>\n                      )}\n                      {tradeNotes.setup && (\n                        <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-blue-500/10 text-blue-400\">{tradeNotes.setup}</span>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-3 text-[10px] text-[var(--text-dim)] mt-0.5\">\n                      <span>{new Date(trade.closedAt || trade.time || Date.now()).toLocaleDateString('es', { day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit' })}</span>\n                      <span>${(trade.entryPrice || 0).toFixed(2)} â†’ ${(trade.exitPrice || 0).toFixed(2)}</span>\n                      {trade.botName && <span>ðŸ¤– {trade.botName}</span>}\n                      {tradeNotes.note && <MessageSquare size={10} className=\"text-[var(--gold)]\" />}\n                    </div>\n                  </div>\n\n                  {/* P&L */}\n                  <div className=\"text-right shrink-0\">\n                    <p className={`text-sm font-bold ${isWin ? 'text-emerald-400' : 'text-red-400'}`}>\n                      {pnl >= 0 ? '+' : ''}${pnl.toFixed(2)}\n                    </p>\n                  </div>\n\n                  {/* Expand */}\n                  {isExpanded ? <ChevronUp size={14} className=\"text-[var(--text-dim)]\" /> : <ChevronDown size={14} className=\"text-[var(--text-dim)]\" />}\n                </button>\n\n                <AnimatePresence>\n                  {isExpanded && <TradeDetail trade={trade} />}\n                </AnimatePresence>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["EMOTION_TAGS","SETUP_TAGS","TradeJournal","tradeHistory","useStore","searchQuery","setSearchQuery","useState","selectedTrade","setSelectedTrade","notes","setNotes","filterTag","setFilterTag","sortBy","setSortBy","expandedId","setExpandedId","saveNote","tradeId","noteData","updated","filteredTrades","useMemo","trades","q","t","_a","_b","tag","a","b","allTags","tags","n","TradeDetail","trade","tradeNotes","localNote","setLocalNote","localTags","setLocalTags","localEmotion","setLocalEmotion","localSetup","setLocalSetup","localRating","setLocalRating","localLesson","setLocalLesson","handleSave","toggleTag","prev","jsx","motion","jsxs","ms","star","Star","StarOff","e","s","Hash","Plus","BookOpen","Search","rated","setups","top","stat","i","isExpanded","pnl","isWin","ArrowUpRight","ArrowDownRight","MessageSquare","ChevronUp","ChevronDown","AnimatePresence"],"mappings":"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"}