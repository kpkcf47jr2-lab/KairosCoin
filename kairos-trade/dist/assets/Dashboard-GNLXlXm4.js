import{c as z,f as Z,A as I,J as _,T as J,o as Q,j as e,m as y,B as O,n as D,K as ee,M as te,N as se,x as ae,O as re,Q as le,Z as W,P as ie,d as ne,S as oe,V as ce,Y as de,t as xe,y as me,z as pe,D as ge}from"./ui-ASeLHpJA.js";import{a as g}from"./vendor-CUCP814w.js";import{u as H,i as he,f as be,g as K,t as ue}from"./index-BTeEscrR.js";import{m as fe}from"./marketData-K1zKCjjj.js";import{t as q}from"./tradingEngine-BcFjO_Ex.js";import"./indicators-DJQYQkcq.js";import"./broker-BWAqFZIS.js";import"./kairosScript-CBWhdg6T.js";function ve({data:r,color:i="#D4AF37",height:p=48,width:c=140}){const k=g.useRef(null);return g.useEffect(()=>{const d=k.current;if(!d||!r||r.length<2)return;const a=d.getContext("2d"),f=window.devicePixelRatio||1;d.width=c*f,d.height=p*f,a.scale(f,f),a.clearRect(0,0,c,p);const N=Math.min(...r),C=Math.max(...r)-N||1,x=4,$=c-x*2,T=p-x*2,m=a.createLinearGradient(0,x,0,p-x);m.addColorStop(0,i+"30"),m.addColorStop(1,i+"00"),a.beginPath(),r.forEach((P,n)=>{const v=x+n/(r.length-1)*$,w=x+(1-(P-N)/C)*T;n===0?a.moveTo(v,w):a.lineTo(v,w)}),a.lineTo(x+$,p-x),a.lineTo(x,p-x),a.closePath(),a.fillStyle=m,a.fill(),a.beginPath(),r.forEach((P,n)=>{const v=x+n/(r.length-1)*$,w=x+(1-(P-N)/C)*T;n===0?a.moveTo(v,w):a.lineTo(v,w)}),a.strokeStyle=i,a.lineWidth=1.5,a.stroke();const R=x+$,E=x+(1-(r[r.length-1]-N)/C)*T;a.beginPath(),a.arc(R,E,2.5,0,Math.PI*2),a.fillStyle=i,a.fill()},[r,i,c,p]),e.jsx("canvas",{ref:k,style:{width:c,height:p}})}function je(r){const i=Math.floor((Date.now()-new Date(r).getTime())/1e3);return i<60?"ahora":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}function Fe(){const{setPage:r,bots:i,brokers:p,tradeHistory:c,positions:k,user:d}=H(),[a,f]=g.useState([]),[N,L]=g.useState(!0),[C,x]=g.useState({});g.useEffect(()=>{$();const t=setInterval($,3e4);return()=>clearInterval(t)},[]),g.useEffect(()=>{const t=()=>{const l={};q.activeBots.forEach((h,b)=>{l[b]=q.liveData.get(b)||{}}),x(l)};t();const s=setInterval(t,2e3);return()=>clearInterval(s)},[i]);const $=async()=>{try{const t=["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","XRPUSDT","ADAUSDT"],s=await Promise.all(t.map(async l=>{try{return await fe.get24hrTicker(l)}catch{return null}}));f(s.filter(Boolean))}catch(t){console.error("Dashboard load error:",t)}L(!1)},T=i.filter(t=>t.status==="active"),m=c.reduce((t,s)=>t+(s.pnl||0),0),R=p.filter(t=>t.connected),E=[{label:"Bots Activos",value:T.length,icon:z,color:"#3B82F6",gradient:"linear-gradient(135deg, rgba(59,130,246,0.1), rgba(59,130,246,0.02))",border:"rgba(59,130,246,0.1)",action:"bots"},{label:"Brokers",value:`${R.length}/${p.length}`,icon:Z,color:"#A855F7",gradient:"linear-gradient(135deg, rgba(168,85,247,0.1), rgba(168,85,247,0.02))",border:"rgba(168,85,247,0.1)",action:"brokers"},{label:"Posiciones",value:k.length,icon:I,color:"#00DC82",gradient:"linear-gradient(135deg, rgba(0,220,130,0.1), rgba(0,220,130,0.02))",border:"rgba(0,220,130,0.1)",action:"history"},{label:"P&L Total",value:`${m>=0?"+":""}$${m.toFixed(2)}`,icon:_,color:m>=0?"#00DC82":"#FF4757",gradient:m>=0?"linear-gradient(135deg, rgba(0,220,130,0.1), rgba(0,220,130,0.02))":"linear-gradient(135deg, rgba(255,71,87,0.1), rgba(255,71,87,0.02))",border:m>=0?"rgba(0,220,130,0.1)":"rgba(255,71,87,0.1)",action:"history"}],P=[{label:"Trading",icon:O,page:"chart",desc:"Gráficos profesionales",color:"#3B82F6"},{label:"Simulador",icon:ie,page:"simulator",desc:"Paper trading sin riesgo",color:"#00DC82"},{label:"Kairos AI",icon:ne,page:"ai",desc:"Asistente inteligente",color:"#A855F7"},{label:"Crear Bot",icon:z,page:"bots",desc:"Automatiza tu trading",color:"#60A5FA"},{label:"Estrategias",icon:W,page:"strategies",desc:"Crea y gestiona",color:"#EC4899"},{label:"Brokers",icon:oe,page:"brokers",desc:"Conecta tu cuenta",color:"#22D3EE"}],n=g.useMemo(()=>{const t=c||[];if(t.length===0)return null;const s=t.filter(o=>(o.pnl||0)>0),l=t.filter(o=>(o.pnl||0)<0),h=s.length/t.length*100,b=s.reduce((o,j)=>o+j.pnl,0),F=l.reduce((o,j)=>o+Math.abs(j.pnl),0),A=F>0?b/F:b>0?1/0:0;let B=0,S=0,M=0;const U=[];t.forEach(o=>{B+=o.pnl||0,U.push(B),S=Math.max(S,B);const j=S>0?(S-B)/S*100:0;M=Math.max(M,j)});const G=new Date().setHours(0,0,0,0),V=t.filter(o=>new Date(o.closedAt||o.time).getTime()>=G).reduce((o,j)=>o+(j.pnl||0),0),X=Date.now()-7*864e5,Y=t.filter(o=>new Date(o.closedAt||o.time).getTime()>=X).reduce((o,j)=>o+(j.pnl||0),0);return{winRate:h,profitFactor:A,maxDD:M,equityCurve:U,todayPnl:V,weekPnl:Y,totalPnl:m,totalTrades:t.length}},[c,m]),v=g.useMemo(()=>i.filter(t=>t.status==="active"),[i]),w=g.useMemo(()=>{const t=[];return(c||[]).slice(-6).forEach(s=>{var l;t.push({type:"trade",icon:s.pnl>=0?J:Q,color:s.pnl>=0?"#10B981":"#EF4444",text:`${((l=s.side)==null?void 0:l.toUpperCase())||"TRADE"} ${s.symbol||s.pair||"—"} → ${s.pnl>=0?"+":""}$${(s.pnl||0).toFixed(2)}`,time:s.closedAt||s.time})}),i.filter(s=>s.status==="active").forEach(s=>{t.push({type:"bot",icon:z,color:"#3B82F6",text:`${s.name} running on ${s.pair}`,time:s.startedAt||s.createdAt})}),t.sort((s,l)=>new Date(l.time||0)-new Date(s.time||0)).slice(0,8)},[c,i]),u=g.useMemo(()=>{if(!he(d))return null;try{return be.getStats()}catch{return null}},[d]);return e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-5 space-y-5",style:{maxWidth:"100%"},children:[e.jsxs(y.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h1",{className:"text-[22px] font-bold tracking-tight truncate",children:["Bienvenido, ",e.jsx("span",{className:"text-[var(--gold)]",children:(d==null?void 0:d.name)||"Trader"})]}),e.jsx("p",{className:"text-sm text-[var(--text-dim)] mt-0.5",children:"Tu centro de control de trading automatizado"})]}),e.jsxs("button",{onClick:()=>r("chart"),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-semibold transition-all hover:opacity-90 btn-gold shrink-0",children:[e.jsx(O,{size:14}),"Trading"]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:E.map((t,s)=>{const l=t.icon;return e.jsxs(y.button,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:s*.06},onClick:()=>r(t.action),className:"rounded-xl p-4 text-left transition-all duration-200 hover:scale-[1.02] group",style:{background:t.gradient,border:`1px solid ${t.border}`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:`${t.color}15`},children:e.jsx(l,{size:18,style:{color:t.color}})}),e.jsx(D,{size:14,className:"text-[var(--text-dim)]/30 group-hover:text-[var(--text-dim)] transition-colors"})]}),e.jsx("p",{className:"text-[22px] font-bold leading-none truncate",style:{color:t.color},children:t.value}),e.jsx("p",{className:"text-[11px] text-[var(--text-dim)] mt-1.5 font-medium truncate",children:t.label})]},t.label)})}),n&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:14,className:"text-[var(--gold)]"}),e.jsx("h2",{className:"text-sm font-bold",children:"Portfolio Performance"})]}),e.jsxs("button",{onClick:()=>r("portfolio"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:["Analytics completos ",e.jsx(D,{size:12})]})]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-[1fr_auto] gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ve,{data:n.equityCurve,color:m>=0?"#10B981":"#EF4444",width:180,height:56}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold",children:"Hoy"}),e.jsxs("p",{className:`text-sm font-bold ${n.todayPnl>=0?"text-emerald-400":"text-red-400"}`,children:[n.todayPnl>=0?"+":"","$",n.todayPnl.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold",children:"7 Días"}),e.jsxs("p",{className:`text-sm font-bold ${n.weekPnl>=0?"text-emerald-400":"text-red-400"}`,children:[n.weekPnl>=0?"+":"","$",n.weekPnl.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold",children:"Total"}),e.jsxs("p",{className:`text-sm font-bold ${m>=0?"text-emerald-400":"text-red-400"}`,children:[m>=0?"+":"","$",m.toFixed(2)]})]})]})]}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:[{label:"Win Rate",value:`${n.winRate.toFixed(0)}%`,color:n.winRate>=50?"#10B981":"#EF4444",icon:ee},{label:"Profit Factor",value:n.profitFactor===1/0?"∞":n.profitFactor.toFixed(1),color:n.profitFactor>=1?"#10B981":"#EF4444",icon:te},{label:"Max DD",value:`${n.maxDD.toFixed(1)}%`,color:n.maxDD<15?"#10B981":"#EF4444",icon:se}].map((t,s)=>{const l=t.icon;return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg",style:{background:`${t.color}08`,border:`1px solid ${t.color}15`},children:[e.jsx(l,{size:13,style:{color:t.color}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-[var(--text-dim)] uppercase font-semibold",children:t.label}),e.jsx("p",{className:"text-sm font-bold",style:{color:t.color},children:t.value})]})]},s)})})]})]}),v.length>0&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-bold text-[var(--text)] flex items-center gap-2",children:[e.jsx(z,{size:14,className:"text-blue-400"}),"Bots Activos",e.jsxs("span",{className:"text-[10px] font-bold text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded-full",children:[v.length," running"]})]}),e.jsxs("button",{onClick:()=>r("bots"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:["Ver todos ",e.jsx(D,{size:12})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:v.slice(0,6).map(t=>{var F,A;const s=C[t.id]||{},l=s.unrealizedPnl||0,h=s.pnlPercent||0,b=s.position;return e.jsxs("div",{onClick:()=>r("bots"),className:"rounded-xl p-3.5 cursor-pointer transition-all hover:scale-[1.01] group",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:`1px solid ${l>=0?"rgba(16,185,129,0.12)":"rgba(239,68,68,0.12)"}`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold truncate max-w-[120px]",children:t.name})]}),e.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)]",children:t.pair})]}),b?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${b.side==="buy"?"bg-emerald-500/15 text-emerald-400":"bg-red-500/15 text-red-400"}`,children:[(F=b.side)==null?void 0:F.toUpperCase()," @ $",(A=b.entryPrice)==null?void 0:A.toFixed(2)]}),e.jsxs("span",{className:`text-sm font-bold ${l>=0?"text-emerald-400":"text-red-400"}`,children:[l>=0?"+":"","$",l.toFixed(2),e.jsxs("span",{className:"text-[10px] ml-1",children:["(",h>=0?"+":"",h.toFixed(1),"%)"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-[var(--text-dim)]",children:"Esperando señal..."}),e.jsx(ae,{size:12,className:"text-[var(--text-dim)]"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[10px] text-[var(--text-dim)]",children:[e.jsxs("span",{children:["Trades: ",t.trades||0]}),e.jsxs("span",{children:["WR: ",(t.winRate||0).toFixed(0),"%"]}),s.price&&e.jsxs("span",{className:"ml-auto font-mono",children:["$",s.price.toLocaleString(void 0,{maximumFractionDigits:2})]})]})]},t.id)})})]}),e.jsxs("div",{className:`grid gap-4 ${u?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"}`,children:[w.length>0&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{size:14,className:"text-[var(--gold)]"}),e.jsx("h2",{className:"text-sm font-bold",children:"Actividad Reciente"})]}),e.jsxs("button",{onClick:()=>r("history"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:["Ver historial ",e.jsx(D,{size:12})]})]}),e.jsx("div",{className:"divide-y divide-[var(--border)]/30",children:w.map((t,s)=>{const l=t.icon,h=t.time?new Date(t.time):null,b=h?je(h):"";return e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-white/[0.01] transition-colors",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center shrink-0",style:{background:`${t.color}12`},children:e.jsx(l,{size:13,style:{color:t.color}})}),e.jsx("p",{className:"flex-1 text-xs truncate",children:t.text}),e.jsx("span",{className:"text-[10px] text-[var(--text-dim)] shrink-0",children:b})]},s)})})]}),u&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(212,175,55,0.04), rgba(212,175,55,0.01))",border:"1px solid rgba(212,175,55,0.12)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(212,175,55,0.08)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:14,className:"text-amber-400"}),e.jsx("h2",{className:"text-sm font-bold",children:"Platform Revenue"}),e.jsx("span",{className:"text-[9px] font-bold text-amber-400 bg-amber-400/10 px-2 py-0.5 rounded-full",children:"ADMIN"})]}),e.jsxs("button",{onClick:()=>r("kairos-treasury"),className:"text-[11px] text-amber-400 hover:text-amber-300 font-semibold flex items-center gap-1 transition-colors",children:["Treasury ",e.jsx(D,{size:12})]})]}),e.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(16,185,129,0.06)",border:"1px solid rgba(16,185,129,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"Total Recaudado"}),e.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["$",u.totalCollected.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[u.totalTrades," trades"]})]}),e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(59,130,246,0.06)",border:"1px solid rgba(59,130,246,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"Hoy"}),e.jsxs("p",{className:"text-lg font-bold text-blue-400",children:["$",u.today.fees.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[u.today.trades," trades • $",u.today.volume.toLocaleString()," vol"]})]}),e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(168,85,247,0.06)",border:"1px solid rgba(168,85,247,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"7 Días"}),e.jsxs("p",{className:"text-lg font-bold text-purple-400",children:["$",u.last7days.fees.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[u.last7days.trades," trades"]})]}),e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(212,175,55,0.06)",border:"1px solid rgba(212,175,55,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"30 Días"}),e.jsxs("p",{className:"text-lg font-bold text-amber-400",children:["$",u.last30days.fees.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:["$",u.last30days.volume.toLocaleString()," volumen"]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-bold text-[var(--text)] mb-3 flex items-center gap-2",children:[e.jsx(W,{size:14,className:"text-[var(--gold)]"}),"Acceso Rápido"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2.5",children:P.map((t,s)=>{const l=t.icon;return e.jsxs(y.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2+s*.05},onClick:()=>r(t.page),className:"rounded-xl p-4 text-left transition-all duration-200 group hover:scale-[1.01]",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},onMouseEnter:h=>h.currentTarget.style.borderColor=`${t.color}30`,onMouseLeave:h=>h.currentTarget.style.borderColor="rgba(30,34,45,0.5)",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3 transition-transform group-hover:scale-110",style:{background:`${t.color}12`},children:e.jsx(l,{size:20,style:{color:t.color}})}),e.jsx("p",{className:"text-[13px] font-bold text-[var(--text)] truncate",children:t.label}),e.jsx("p",{className:"text-[11px] text-[var(--text-dim)] mt-0.5 truncate",children:t.desc})]},t.label)})})]}),e.jsxs("div",{className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:14,className:"text-[var(--gold)]"}),e.jsx("h2",{className:"text-sm font-bold",children:"Mercado en Tiempo Real"})]}),e.jsxs("button",{onClick:()=>r("chart"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:["Ver gráfico ",e.jsx(D,{size:12})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 px-4 py-2 text-[10px] font-bold text-[var(--text-dim)]/50 uppercase tracking-wider",children:[e.jsx("span",{children:"Par"}),e.jsx("span",{className:"text-right",children:"Precio"}),e.jsx("span",{className:"text-right",children:"Cambio 24h"}),e.jsx("span",{className:"text-right",children:"Acción"})]}),e.jsx("div",{className:"divide-y divide-[var(--border)]/30",children:N?e.jsx("div",{className:"p-8 text-center text-sm text-[var(--text-dim)] animate-pulse",children:"Cargando mercado..."}):a.map((t,s)=>e.jsxs(y.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:s*.05},onClick:()=>{H.getState().setSelectedPair(ue(t.symbol)),r("chart")},className:"group w-full grid grid-cols-4 gap-2 items-center px-4 py-3 hover:bg-white/[0.02] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold",style:{background:t.changePercent>=0?"rgba(14,203,129,0.08)":"rgba(246,70,93,0.08)"},children:e.jsx("span",{className:t.changePercent>=0?"text-[var(--green)]":"text-[var(--red)]",children:K(t.symbol).slice(0,3)})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[13px] font-bold leading-none",children:K(t.symbol)}),e.jsx("p",{className:"text-[10px] text-[var(--text-dim)]/50 mt-0.5",children:"KAIROS"})]})]}),e.jsxs("p",{className:"text-[13px] font-mono font-semibold text-right",children:["$",t.price.toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsx("div",{className:"flex items-center gap-1 justify-end",children:e.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-mono font-semibold px-2 py-0.5 rounded-md
                  ${t.changePercent>=0?"text-[var(--green)] bg-[var(--green)]/[0.08]":"text-[var(--red)] bg-[var(--red)]/[0.08]"}`,children:[t.changePercent>=0?e.jsx(ce,{size:10}):e.jsx(de,{size:10}),t.changePercent>=0?"+":"",t.changePercent.toFixed(2),"%"]})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-[10px] font-semibold text-[var(--gold)] opacity-0 group-hover:opacity-100 transition-opacity bg-[var(--gold)]/10 px-2 py-1 rounded-md",children:"Trading →"})})]},t.symbol))})]}),(d==null?void 0:d.referralCode)&&e.jsx(ye,{code:d.referralCode})]})}function ye({code:r}){const[i,p]=g.useState(!1),c=`https://kairos-trade.netlify.app?ref=${r}`,k=g.useCallback(async a=>{try{await navigator.clipboard.writeText(a),p(!0),setTimeout(()=>p(!1),2e3)}catch{}},[]),d=g.useCallback(a=>{const f=encodeURIComponent(`Únete a Kairos Trade — trading automatizado con 10+ brokers y bots AI. Usa mi código ${r} y recibe 100 KAIROS gratis: ${c}`),N={whatsapp:`https://wa.me/?text=${f}`,telegram:`https://t.me/share/url?url=${encodeURIComponent(c)}&text=${f}`,twitter:`https://twitter.com/intent/tweet?text=${f}`};window.open(N[a],"_blank")},[r,c]);return e.jsx(y.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.4},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(245,158,11,0.04), rgba(245,158,11,0.01))",border:"1px solid rgba(245,158,11,0.12)"},children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"rgba(245,158,11,0.1)"},children:e.jsx(xe,{size:16,className:"text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-[var(--text)]",children:"Invita y Gana"}),e.jsx("p",{className:"text-[10px] text-[var(--text-dim)]",children:"20 KAIROS por cada amigo"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex-1 rounded-lg px-3 py-2 font-mono text-sm font-bold text-amber-400 tracking-wider",style:{background:"rgba(245,158,11,0.06)",border:"1px solid rgba(245,158,11,0.1)"},children:r}),e.jsx("button",{onClick:()=>k(r),className:"px-3 py-2 rounded-lg transition-all hover:scale-105",style:{background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.15)"},children:i?e.jsx(me,{size:14,className:"text-green-400"}):e.jsx(pe,{size:14,className:"text-amber-400/60"})})]}),e.jsx("button",{onClick:()=>k(c),className:"w-full text-left rounded-lg px-3 py-2 text-[11px] text-[var(--text-dim)] truncate hover:text-white/50 transition-colors mb-3",style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)"},children:c}),e.jsx("div",{className:"flex gap-2",children:[{id:"whatsapp",label:"WhatsApp",bg:"#25D366"},{id:"telegram",label:"Telegram",bg:"#0088cc"},{id:"twitter",label:"X",bg:"#1DA1F2"}].map(a=>e.jsxs("button",{onClick:()=>d(a.id),className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[11px] font-semibold text-white/60 hover:text-white transition-all hover:scale-[1.02]",style:{background:`${a.bg}10`,border:`1px solid ${a.bg}20`},children:[e.jsx(ge,{size:10}),a.label]},a.id))})]})})}export{Fe as default};
