import{j as e,a3 as o,Z as j,m as n,a7 as S,P as f,a6 as y,k as E}from"./ui-CebUoxKF.js";import{a as p}from"./vendor-CUCP814w.js";import{u as w}from"./index-GzHEPH3k.js";import{S as P}from"./StrategyEditor-BpcxJx0Q.js";import"./kairosScript-uRRN30t1.js";import"./indicators-DJQYQkcq.js";import"./marketData-K1zKCjjj.js";const A=[{name:"EMA Cross Classic",description:"Cruces de EMA rápida/lenta — Tendencia",entry:{condition:"EMA 20 cruza por encima de EMA 50",indicator:"ema_cross",params:{fast:20,slow:50}},exit:{condition:"EMA 20 cruza por debajo de EMA 50",indicator:"ema_cross",params:{fast:20,slow:50}},stopLoss:"2",takeProfit:"4"},{name:"RSI Reversal",description:"Compra en sobreventa, vende en sobrecompra",entry:{condition:"RSI < 30 (sobreventa)",indicator:"rsi",params:{period:14,oversold:30}},exit:{condition:"RSI > 70 (sobrecompra)",indicator:"rsi",params:{period:14,overbought:70}},stopLoss:"1.5",takeProfit:"3"},{name:"MACD Momentum",description:"Cruce de línea MACD y señal",entry:{condition:"MACD cruza por encima de señal",indicator:"macd_cross",params:{fast:12,slow:26,signal:9}},exit:{condition:"MACD cruza por debajo de señal",indicator:"macd_cross",params:{}},stopLoss:"2",takeProfit:"4"},{name:"EMA + RSI Combo",description:"Más preciso: cruces de EMA confirmados con RSI",entry:{condition:"EMA 20 > EMA 50 + RSI < 30",indicator:"ema_cross_rsi",params:{fastEma:20,slowEma:50,rsiPeriod:14,rsiOversold:30}},exit:{condition:"RSI > 70",indicator:"rsi",params:{rsiOverbought:70}},stopLoss:"2",takeProfit:"4"}];function B(){const{strategies:g,addStrategy:u,removeStrategy:b,setPage:h}=w(),[N,r]=p.useState(!1),[a,i]=p.useState(null),[l,v]=p.useState("custom"),d=g.filter(s=>s.type==="custom_script"),c=g.filter(s=>s.type!=="custom_script"),C=s=>{u({...s,pair:"BTCUSDT",timeframe:"1h"})},k=s=>{i(s),r(!0)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Estrategias de Trading"}),e.jsx("p",{className:"text-sm text-[var(--text-dim)]",children:"Crea estrategias con código o usa plantillas predefinidas"})]}),e.jsxs("button",{onClick:()=>{i(null),r(!0)},className:"flex items-center gap-2 px-4 py-2 btn-gold rounded-xl text-sm",children:[e.jsx(o,{size:16})," Crear con Código"]})]}),e.jsxs("div",{className:"flex gap-1 bg-[var(--dark-3)] rounded-lg p-1 w-fit",children:[e.jsxs("button",{onClick:()=>v("custom"),className:`flex items-center gap-1.5 px-4 py-1.5 text-sm rounded-md transition-colors ${l==="custom"?"bg-[var(--gold)] text-white font-bold":"text-[var(--text-dim)]"}`,children:[e.jsx(o,{size:14})," Custom Scripts (",d.length,")"]}),e.jsxs("button",{onClick:()=>v("preset"),className:`flex items-center gap-1.5 px-4 py-1.5 text-sm rounded-md transition-colors ${l==="preset"?"bg-[var(--gold)] text-white font-bold":"text-[var(--text-dim)]"}`,children:[e.jsx(j,{size:14})," Predefinidas (",c.length,")"]})]}),l==="custom"&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:"rounded-xl p-6 text-center",style:{background:"linear-gradient(135deg, rgba(168,85,247,0.08) 0%, rgba(59,130,246,0.08) 100%)",border:"1px solid rgba(168,85,247,0.15)"},children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-3",style:{background:"rgba(168,85,247,0.1)",border:"1px solid rgba(168,85,247,0.2)"},children:e.jsx(o,{size:24,className:"text-[#A855F7]"})}),e.jsx("h2",{className:"text-lg font-bold mb-1",children:"Kairos Script"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-4 max-w-md mx-auto",children:"Escribe tu propia estrategia con código simple, o pídele a ChatGPT que la genere por ti. Más fácil que Pine Script, más potente que MQL."}),e.jsx("div",{className:"flex gap-3 justify-center flex-wrap",children:e.jsxs("button",{onClick:()=>{i(null),r(!0)},className:"flex items-center gap-2 px-5 py-2.5 btn-gold rounded-xl text-sm font-bold",children:[e.jsx(o,{size:14})," Crear Estrategia"]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[{step:"1",title:"Pide a ChatGPT",desc:"Dile qué estrategia quieres con nuestro prompt optimizado",color:"#A855F7"},{step:"2",title:"Pega el Código",desc:"Copia el código que te generó y pégalo en el editor",color:"#3B82F6"},{step:"3",title:"Activa el Bot",desc:"Testea con backtest y asígnala a un Script Bot",color:"#00DC82"}].map(({step:s,title:t,desc:x,color:m})=>e.jsxs("div",{className:"rounded-xl p-4 flex gap-3",style:{background:"var(--surface)",border:"1px solid var(--border)"},children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-sm font-black",style:{background:`${m}15`,color:m,border:`1px solid ${m}25`},children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold mb-0.5",children:t}),e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] leading-relaxed",children:x})]})]},s))}),d.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-bold",children:["Mis Scripts (",d.length,")"]}),d.map(s=>{var t;return e.jsxs(n.div,{layout:!0,className:"rounded-xl p-4 flex items-center justify-between",style:{background:"var(--surface)",border:"1px solid var(--border)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(168,85,247,0.1)",border:"1px solid rgba(168,85,247,0.2)"},children:e.jsx(o,{size:18,className:"text-[#A855F7]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:s.name}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[((t=s.code)==null?void 0:t.split(`
`).filter(x=>x.trim()&&!x.trim().startsWith("//")).length)||0," líneas de lógica"," • ","Creada: ",new Date(s.createdAt).toLocaleDateString("es")]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>k(s),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",style:{background:"rgba(168,85,247,0.1)",border:"1px solid rgba(168,85,247,0.2)",color:"#A855F7"},children:[e.jsx(S,{size:12})," Editar"]}),e.jsxs("button",{onClick:()=>h("bots"),className:"flex items-center gap-1 px-3 py-1.5 bg-[var(--green)]/10 text-[var(--green)] rounded-lg text-xs font-bold border border-[var(--green)]/20",children:[e.jsx(f,{size:12})," Usar en Bot"]}),e.jsx("button",{onClick:()=>b(s.id),className:"p-1.5 text-[var(--text-dim)] hover:text-[var(--red)] transition-colors",children:e.jsx(y,{size:14})})]})]},s.id)})]}):e.jsxs("div",{className:"rounded-xl p-8 text-center",style:{background:"var(--surface)",border:"1px solid var(--border)"},children:[e.jsx(o,{size:32,className:"text-[var(--text-dim)]/20 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-[var(--text-dim)]",children:"No tienes scripts custom aún"}),e.jsx("p",{className:"text-xs text-[var(--text-dim)] mt-1",children:"Crea tu primera estrategia personalizada"})]})]}),l==="preset"&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map((s,t)=>e.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.05},className:"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl p-4 hover:border-[var(--gold)]/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{size:16,className:"text-[var(--gold)]"}),e.jsx("h3",{className:"text-sm font-bold",children:s.name})]}),e.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-3",children:s.description}),e.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-[var(--green)]",children:"▲"})," ",s.entry.condition]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-[var(--red)]",children:"▼"})," ",s.exit.condition]}),e.jsxs("p",{className:"text-[var(--text-dim)]",children:["SL: ",s.stopLoss,"% | TP: ",s.takeProfit,"%"]})]}),e.jsx("button",{onClick:()=>C(s),className:"w-full py-1.5 bg-[var(--gold)]/20 text-[var(--gold)] rounded-lg text-xs font-bold hover:bg-[var(--gold)]/30 transition-colors",children:"Usar Plantilla"})]},s.name))}),c.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-bold",children:["Guardadas (",c.length,")"]}),c.map(s=>{var t;return e.jsxs("div",{className:"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold",children:s.name}),e.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[(t=s.entry)==null?void 0:t.condition," | SL: ",s.stopLoss,"% | TP: ",s.takeProfit,"%"]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>h("bots"),className:"px-3 py-1.5 bg-[var(--green)]/20 text-[var(--green)] rounded-lg text-xs font-bold",children:[e.jsx(f,{size:12,className:"inline mr-1"})," Usar en Bot"]}),e.jsx("button",{onClick:()=>b(s.id),className:"p-1.5 text-[var(--text-dim)] hover:text-[var(--red)]",children:e.jsx(y,{size:14})})]})]},s.id)})]})]}),e.jsx(E,{children:N&&e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.7)",backdropFilter:"blur(8px)"},onClick:()=>{r(!1),i(null)},children:e.jsx(n.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:e.jsx(P,{initialCode:a==null?void 0:a.code,initialName:a==null?void 0:a.name,editMode:!!a,onClose:()=>{r(!1),i(null)},onSave:s=>{u(s),r(!1),i(null)}})})})})]})}export{B as default};
