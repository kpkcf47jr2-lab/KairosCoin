{"version":3,"file":"Dashboard-Dexemss4.js","sources":["../../src/components/Dashboard/Dashboard.jsx"],"sourcesContent":["// Kairos Trade — Dashboard (Premium v3.1 — i18n + Analytics)\nimport React, { useEffect, useState, useCallback, useMemo, useRef } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  TrendingUp, TrendingDown, Bot, Link2, BarChart3, Brain,\n  DollarSign, Activity, Zap, ArrowUpRight, ArrowDownRight,\n  Sparkles, Play, Shield, ChevronRight, Gift, Copy, Check, Share2, Users,\n  Clock, Target, AlertTriangle, Award, Percent, Flame, Eye\n} from 'lucide-react';\nimport useStore from '../../store/useStore';\nimport marketData from '../../services/marketData';\nimport { tradingEngine } from '../../services/tradingEngine';\nimport { feeService } from '../../services/feeService';\nimport { isAdmin } from '../../constants';\nimport { toDisplayPair, getBase, formatPair } from '../../utils/pairUtils';\nimport useTranslation from '../../hooks/useTranslation';\n\n// ─── Safe render helper — prevents Error #310 (objects as React children) ───\nfunction safe(val) {\n  if (val === null || val === undefined) return '';\n  if (typeof val === 'string' || typeof val === 'number' || typeof val === 'boolean') return val;\n  if (React.isValidElement(val)) return val;\n  if (Array.isArray(val)) return val;\n  console.error('[SAFE] Object caught as React child:', JSON.stringify(val).slice(0, 200), val);\n  return String(val);\n}\n\n// ─── Mini sparkline (canvas) ───\nfunction MiniSparkline({ data, color = '#D4AF37', height = 48, width = 140 }) {\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !data || data.length < 2) return;\n    const ctx = canvas.getContext('2d');\n    const dpr = window.devicePixelRatio || 1;\n    canvas.width = width * dpr;\n    canvas.height = height * dpr;\n    ctx.scale(dpr, dpr);\n    ctx.clearRect(0, 0, width, height);\n    const min = Math.min(...data);\n    const max = Math.max(...data);\n    const range = max - min || 1;\n    const pad = 4;\n    const cW = width - pad * 2;\n    const cH = height - pad * 2;\n    // Gradient fill\n    const gradient = ctx.createLinearGradient(0, pad, 0, height - pad);\n    gradient.addColorStop(0, color + '30');\n    gradient.addColorStop(1, color + '00');\n    ctx.beginPath();\n    data.forEach((v, i) => {\n      const x = pad + (i / (data.length - 1)) * cW;\n      const y = pad + (1 - (v - min) / range) * cH;\n      i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);\n    });\n    ctx.lineTo(pad + cW, height - pad);\n    ctx.lineTo(pad, height - pad);\n    ctx.closePath();\n    ctx.fillStyle = gradient;\n    ctx.fill();\n    // Line\n    ctx.beginPath();\n    data.forEach((v, i) => {\n      const x = pad + (i / (data.length - 1)) * cW;\n      const y = pad + (1 - (v - min) / range) * cH;\n      i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);\n    });\n    ctx.strokeStyle = color;\n    ctx.lineWidth = 1.5;\n    ctx.stroke();\n    // Last dot\n    const lastX = pad + cW;\n    const lastY = pad + (1 - (data[data.length - 1] - min) / range) * cH;\n    ctx.beginPath();\n    ctx.arc(lastX, lastY, 2.5, 0, Math.PI * 2);\n    ctx.fillStyle = color;\n    ctx.fill();\n  }, [data, color, width, height]);\n  return <canvas ref={canvasRef} style={{ width, height }} />;\n}\n\n// ─── Time ago helper ───\nfunction timeSince(date) {\n  const s = Math.floor((Date.now() - new Date(date).getTime()) / 1000);\n  if (s < 60) return 'ahora';\n  if (s < 3600) return `${Math.floor(s / 60)}m`;\n  if (s < 86400) return `${Math.floor(s / 3600)}h`;\n  return `${Math.floor(s / 86400)}d`;\n}\n\nexport default function Dashboard() {\n  const { setPage, bots, brokers, tradeHistory, positions, user } = useStore();\n  const [marketOverview, setMarketOverview] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [liveBotData, setLiveBotData] = useState({});\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    loadMarketData();\n    const interval = setInterval(loadMarketData, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Refresh live bot data every 2s\n  useEffect(() => {\n    const tick = () => {\n      const data = {};\n      tradingEngine.activeBots.forEach((val, key) => {\n        data[key] = tradingEngine.liveData.get(key) || {};\n      });\n      setLiveBotData(data);\n    };\n    tick();\n    const iv = setInterval(tick, 2000);\n    return () => clearInterval(iv);\n  }, [bots]);\n\n  const loadMarketData = async () => {\n    try {\n      const topPairs = ['BTCUSDT', 'ETHUSDT', 'BNBUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT'];\n      const data = await Promise.all(\n        topPairs.map(async (pair) => {\n          try { return await marketData.get24hrTicker(pair); }\n          catch { return null; }\n        })\n      );\n      setMarketOverview(data.filter(Boolean));\n    } catch (err) {\n      console.error('Dashboard load error:', err);\n    }\n    setLoading(false);\n  };\n\n  const activeBots = bots.filter(b => b.status === 'active');\n  const totalPnl = tradeHistory.reduce((sum, t) => sum + (t.pnl || 0), 0);\n  const connectedBrokers = brokers.filter(b => b.connected);\n\n  const stats = [\n    { label: t('dashboard.activeBots'), value: activeBots.length, icon: Bot, color: '#3B82F6', gradient: 'linear-gradient(135deg, rgba(59,130,246,0.1), rgba(59,130,246,0.02))', border: 'rgba(59,130,246,0.1)', action: 'bots' },\n    { label: t('dashboard.brokers'), value: `${connectedBrokers.length}/${brokers.length}`, icon: Link2, color: '#A855F7', gradient: 'linear-gradient(135deg, rgba(168,85,247,0.1), rgba(168,85,247,0.02))', border: 'rgba(168,85,247,0.1)', action: 'brokers' },\n    { label: t('dashboard.positions'), value: positions.length, icon: Activity, color: '#00DC82', gradient: 'linear-gradient(135deg, rgba(0,220,130,0.1), rgba(0,220,130,0.02))', border: 'rgba(0,220,130,0.1)', action: 'history' },\n    { label: t('dashboard.totalPnl'), value: `${totalPnl >= 0 ? '+' : ''}$${totalPnl.toFixed(2)}`, icon: DollarSign, color: totalPnl >= 0 ? '#00DC82' : '#FF4757', gradient: totalPnl >= 0 ? 'linear-gradient(135deg, rgba(0,220,130,0.1), rgba(0,220,130,0.02))' : 'linear-gradient(135deg, rgba(255,71,87,0.1), rgba(255,71,87,0.02))', border: totalPnl >= 0 ? 'rgba(0,220,130,0.1)' : 'rgba(255,71,87,0.1)', action: 'history' },\n  ];\n\n  const quickActions = [\n    { label: t('dashboard.trading'), icon: BarChart3, page: 'chart', desc: t('dashboard.tradingDesc'), color: '#3B82F6' },\n    { label: t('dashboard.simulator'), icon: Play, page: 'simulator', desc: t('dashboard.simulatorDesc'), color: '#00DC82' },\n    { label: t('dashboard.kairosAi'), icon: Sparkles, page: 'ai', desc: t('dashboard.kairosAiDesc'), color: '#A855F7' },\n    { label: t('dashboard.createBot'), icon: Bot, page: 'bots', desc: t('dashboard.createBotDesc'), color: '#60A5FA' },\n    { label: t('dashboard.strategies'), icon: Zap, page: 'strategies', desc: t('dashboard.strategiesDesc'), color: '#EC4899' },\n    { label: t('dashboard.brokersAction'), icon: Shield, page: 'brokers', desc: t('dashboard.brokersActionDesc'), color: '#22D3EE' },\n  ];\n\n  // ─── Portfolio analytics (computed from tradeHistory) ───\n  const portfolio = useMemo(() => {\n    const trades = tradeHistory || [];\n    if (trades.length === 0) return null;\n    const wins = trades.filter(t => (t.pnl || 0) > 0);\n    const losses = trades.filter(t => (t.pnl || 0) < 0);\n    const winRate = (wins.length / trades.length) * 100;\n    const totalWin = wins.reduce((s, t) => s + t.pnl, 0);\n    const totalLoss = losses.reduce((s, t) => s + Math.abs(t.pnl), 0);\n    const profitFactor = totalLoss > 0 ? totalWin / totalLoss : totalWin > 0 ? Infinity : 0;\n    // Equity curve\n    let equity = 0, peak = 0, maxDD = 0;\n    const equityCurve = [];\n    trades.forEach(t => {\n      equity += (t.pnl || 0);\n      equityCurve.push(equity);\n      peak = Math.max(peak, equity);\n      const dd = peak > 0 ? ((peak - equity) / peak) * 100 : 0;\n      maxDD = Math.max(maxDD, dd);\n    });\n    // Today's P&L\n    const todayStart = new Date().setHours(0, 0, 0, 0);\n    const todayPnl = trades\n      .filter(t => new Date(t.closedAt || t.time).getTime() >= todayStart)\n      .reduce((s, t) => s + (t.pnl || 0), 0);\n    // This week\n    const weekStart = Date.now() - 7 * 86400000;\n    const weekPnl = trades\n      .filter(t => new Date(t.closedAt || t.time).getTime() >= weekStart)\n      .reduce((s, t) => s + (t.pnl || 0), 0);\n    return { winRate, profitFactor, maxDD, equityCurve, todayPnl, weekPnl, totalPnl, totalTrades: trades.length };\n  }, [tradeHistory, totalPnl]);\n\n  // Active bots list\n  const activeBotsList = useMemo(() => bots.filter(b => b.status === 'active'), [bots]);\n\n  // Recent activity (last 8 events)\n  const recentActivity = useMemo(() => {\n    const events = [];\n    (tradeHistory || []).slice(-6).forEach(t => {\n      events.push({\n        type: 'trade',\n        icon: t.pnl >= 0 ? TrendingUp : TrendingDown,\n        color: t.pnl >= 0 ? '#10B981' : '#EF4444',\n        text: `${t.side?.toUpperCase() || 'TRADE'} ${t.symbol || t.pair || '—'} → ${t.pnl >= 0 ? '+' : ''}$${(t.pnl || 0).toFixed(2)}`,\n        time: t.closedAt || t.time,\n      });\n    });\n    bots.filter(b => b.status === 'active').forEach(b => {\n      events.push({\n        type: 'bot',\n        icon: Bot,\n        color: '#3B82F6',\n        text: `${b.name} running on ${b.pair}`,\n        time: b.startedAt || b.createdAt,\n      });\n    });\n    return events.sort((a, b) => new Date(b.time || 0) - new Date(a.time || 0)).slice(0, 8);\n  }, [tradeHistory, bots]);\n\n  // Admin treasury stats\n  const treasuryStats = useMemo(() => {\n    if (!isAdmin(user)) return null;\n    try { return feeService.getStats(); } catch { return null; }\n  }, [user]);\n\n  return (\n    <div className=\"flex-1 overflow-y-auto px-3 md:px-5 py-4 md:py-5 space-y-4 md:space-y-5\" style={{ maxWidth: '100%' }}>\n      {/* Welcome section */}\n      <motion.div\n        initial={{ opacity: 0, y: 8 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"flex items-center justify-between gap-3\"\n      >\n        <div className=\"min-w-0\">\n          <h1 className=\"text-[18px] md:text-[22px] font-bold tracking-tight truncate\">\n            Bienvenido, <span className=\"text-[var(--gold)]\">{safe(user?.name) || 'Trader'}</span>\n          </h1>\n          <p className=\"text-sm text-[var(--text-dim)] mt-0.5 hidden sm:block\">Tu centro de control de trading automatizado</p>\n        </div>\n        <button\n          onClick={() => setPage('chart')}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-semibold transition-all hover:opacity-90 btn-gold shrink-0\"\n        >\n          <BarChart3 size={14} />\n          Trading\n        </button>\n      </motion.div>\n\n      {/* Stats grid */}\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n        {stats.map((stat, i) => {\n          const Icon = stat.icon;\n          return (\n            <motion.button\n              key={stat.label}\n              initial={{ opacity: 0, y: 12 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: i * 0.06 }}\n              onClick={() => setPage(stat.action)}\n              className=\"rounded-xl p-4 text-left transition-all duration-200 hover:scale-[1.02] group\"\n              style={{\n                background: stat.gradient,\n                border: `1px solid ${stat.border}`,\n              }}\n            >\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"w-9 h-9 rounded-lg flex items-center justify-center\"\n                  style={{ background: `${stat.color}15` }}>\n                  <Icon size={18} style={{ color: stat.color }} />\n                </div>\n                <ChevronRight size={14} className=\"text-[var(--text-dim)]/30 group-hover:text-[var(--text-dim)] transition-colors\" />\n              </div>\n              <p className=\"text-[22px] font-bold leading-none truncate\" style={{ color: stat.color }}>{safe(stat.value)}</p>\n              <p className=\"text-[11px] text-[var(--text-dim)] mt-1.5 font-medium truncate\">{safe(stat.label)}</p>\n            </motion.button>\n          );\n        })}\n      </div>\n\n      {/* ═══ Portfolio Performance Widget ═══ */}\n      {portfolio && (\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.25 }}\n          className=\"rounded-xl overflow-hidden\"\n          style={{\n            background: 'linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))',\n            border: '1px solid rgba(30,34,45,0.5)',\n          }}\n        >\n          <div className=\"flex items-center justify-between p-4\" style={{ borderBottom: '1px solid rgba(30,34,45,0.5)' }}>\n            <div className=\"flex items-center gap-2\">\n              <Activity size={14} className=\"text-[var(--gold)]\" />\n              <h2 className=\"text-sm font-bold\">Portfolio Performance</h2>\n            </div>\n            <button onClick={() => setPage('portfolio')} className=\"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors\">\n              Analytics completos <ChevronRight size={12} />\n            </button>\n          </div>\n          <div className=\"p-4 grid grid-cols-1 md:grid-cols-[1fr_auto] gap-4 items-center\">\n            {/* Mini chart */}\n            <div className=\"flex items-center gap-4\">\n              <MiniSparkline\n                data={portfolio.equityCurve}\n                color={totalPnl >= 0 ? '#10B981' : '#EF4444'}\n                width={180}\n                height={56}\n              />\n              <div className=\"flex-1 grid grid-cols-3 gap-3\">\n                <div>\n                  <p className=\"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold\">Hoy</p>\n                  <p className={`text-sm font-bold ${portfolio.todayPnl >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                    {portfolio.todayPnl >= 0 ? '+' : ''}${portfolio.todayPnl.toFixed(2)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold\">7 Días</p>\n                  <p className={`text-sm font-bold ${portfolio.weekPnl >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                    {portfolio.weekPnl >= 0 ? '+' : ''}${portfolio.weekPnl.toFixed(2)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold\">Total</p>\n                  <p className={`text-sm font-bold ${totalPnl >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                    {totalPnl >= 0 ? '+' : ''}${totalPnl.toFixed(2)}\n                  </p>\n                </div>\n              </div>\n            </div>\n            {/* Quick KPIs */}\n            <div className=\"flex gap-3 flex-wrap\">\n              {[\n                { label: 'Win Rate', value: `${portfolio.winRate.toFixed(0)}%`, color: portfolio.winRate >= 50 ? '#10B981' : '#EF4444', icon: Target },\n                { label: 'Profit Factor', value: portfolio.profitFactor === Infinity ? '∞' : portfolio.profitFactor.toFixed(1), color: portfolio.profitFactor >= 1 ? '#10B981' : '#EF4444', icon: Award },\n                { label: 'Max DD', value: `${portfolio.maxDD.toFixed(1)}%`, color: portfolio.maxDD < 15 ? '#10B981' : '#EF4444', icon: AlertTriangle },\n              ].map((kpi, i) => {\n                const I = kpi.icon;\n                return (\n                  <div key={i} className=\"flex items-center gap-2 px-3 py-2 rounded-lg\" style={{ background: `${kpi.color}08`, border: `1px solid ${kpi.color}15` }}>\n                    <I size={13} style={{ color: kpi.color }} />\n                    <div>\n                      <p className=\"text-[9px] text-[var(--text-dim)] uppercase font-semibold\">{safe(kpi.label)}</p>\n                      <p className=\"text-sm font-bold\" style={{ color: kpi.color }}>{safe(kpi.value)}</p>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* ═══ Active Bots Live ═══ */}\n      {activeBotsList.length > 0 && (\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n        >\n          <div className=\"flex items-center justify-between mb-3\">\n            <h2 className=\"text-sm font-bold text-[var(--text)] flex items-center gap-2\">\n              <Bot size={14} className=\"text-blue-400\" />\n              Bots Activos\n              <span className=\"text-[10px] font-bold text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded-full\">\n                {activeBotsList.length} {safe(t('dashboard.running'))}\n              </span>\n            </h2>\n            <button onClick={() => setPage('bots')} className=\"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors\">\n              {safe(t('dashboard.viewAll'))} <ChevronRight size={12} />\n            </button>\n          </div>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\n            {activeBotsList.slice(0, 6).map(bot => {\n              const live = liveBotData[bot.id] || {};\n              const pnl = live.unrealizedPnl || 0;\n              const pnlPct = live.pnlPercent || 0;\n              const pos = live.position;\n              return (\n                <div\n                  key={bot.id}\n                  onClick={() => setPage('bots')}\n                  className=\"rounded-xl p-3.5 cursor-pointer transition-all hover:scale-[1.01] group\"\n                  style={{\n                    background: 'linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))',\n                    border: `1px solid ${pnl >= 0 ? 'rgba(16,185,129,0.12)' : 'rgba(239,68,68,0.12)'}`,\n                  }}\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-2 h-2 rounded-full bg-emerald-400 animate-pulse\" />\n                      <span className=\"text-xs font-bold truncate max-w-[120px]\">{safe(bot.name)}</span>\n                    </div>\n                    <span className=\"text-[10px] font-mono text-[var(--text-dim)]\">{safe(bot.pair)}</span>\n                  </div>\n                  {pos ? (\n                    <div className=\"flex items-center justify-between\">\n                      <span className={`text-[10px] font-bold px-1.5 py-0.5 rounded ${pos.side === 'buy' ? 'bg-emerald-500/15 text-emerald-400' : 'bg-red-500/15 text-red-400'}`}>\n                        {pos.side?.toUpperCase()} @ ${pos.entryPrice?.toFixed(2)}\n                      </span>\n                      <span className={`text-sm font-bold ${pnl >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n                        {pnl >= 0 ? '+' : ''}${pnl.toFixed(2)}\n                        <span className=\"text-[10px] ml-1\">({pnlPct >= 0 ? '+' : ''}{pnlPct.toFixed(1)}%)</span>\n                      </span>\n                    </div>\n                  ) : (\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-[10px] text-[var(--text-dim)]\">Esperando señal...</span>\n                      <Eye size={12} className=\"text-[var(--text-dim)]\" />\n                    </div>\n                  )}\n                  <div className=\"flex items-center gap-3 mt-2 text-[10px] text-[var(--text-dim)]\">\n                    <span>Trades: {bot.trades || 0}</span>\n                    <span>WR: {(bot.winRate || 0).toFixed(0)}%</span>\n                    {live.price && <span className=\"ml-auto font-mono\">${live.price.toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </motion.div>\n      )}\n\n      {/* ═══ Activity Feed + Admin Revenue (side by side on large screens) ═══ */}\n      <div className={`grid gap-4 ${treasuryStats ? 'grid-cols-1 lg:grid-cols-2' : 'grid-cols-1'}`}>\n        {/* Activity Feed */}\n        {recentActivity.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.35 }}\n            className=\"rounded-xl overflow-hidden\"\n            style={{\n              background: 'linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))',\n              border: '1px solid rgba(30,34,45,0.5)',\n            }}\n          >\n            <div className=\"flex items-center justify-between p-4\" style={{ borderBottom: '1px solid rgba(30,34,45,0.5)' }}>\n              <div className=\"flex items-center gap-2\">\n                <Clock size={14} className=\"text-[var(--gold)]\" />\n                <h2 className=\"text-sm font-bold\">Actividad Reciente</h2>\n              </div>\n              <button onClick={() => setPage('history')} className=\"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors\">\n                Ver historial <ChevronRight size={12} />\n              </button>\n            </div>\n            <div className=\"divide-y divide-[var(--border)]/30\">\n              {recentActivity.map((evt, i) => {\n                const I = evt.icon;\n                const when = evt.time ? new Date(evt.time) : null;\n                const ago = when ? timeSince(when) : '';\n                return (\n                  <div key={i} className=\"flex items-center gap-3 px-4 py-2.5 hover:bg-white/[0.01] transition-colors\">\n                    <div className=\"w-7 h-7 rounded-lg flex items-center justify-center shrink-0\" style={{ background: `${evt.color}12` }}>\n                      <I size={13} style={{ color: evt.color }} />\n                    </div>\n                    <p className=\"flex-1 text-xs truncate\">{safe(evt.text)}</p>\n                    <span className=\"text-[10px] text-[var(--text-dim)] shrink-0\">{safe(ago)}</span>\n                  </div>\n                );\n              })}\n            </div>\n          </motion.div>\n        )}\n\n        {/* Admin Revenue Panel */}\n        {treasuryStats && (\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.4 }}\n            className=\"rounded-xl overflow-hidden\"\n            style={{\n              background: 'linear-gradient(135deg, rgba(212,175,55,0.04), rgba(212,175,55,0.01))',\n              border: '1px solid rgba(212,175,55,0.12)',\n            }}\n          >\n            <div className=\"flex items-center justify-between p-4\" style={{ borderBottom: '1px solid rgba(212,175,55,0.08)' }}>\n              <div className=\"flex items-center gap-2\">\n                <Flame size={14} className=\"text-amber-400\" />\n                <h2 className=\"text-sm font-bold\">Platform Revenue</h2>\n                <span className=\"text-[9px] font-bold text-amber-400 bg-amber-400/10 px-2 py-0.5 rounded-full\">ADMIN</span>\n              </div>\n              <button onClick={() => setPage('kairos-treasury')} className=\"text-[11px] text-amber-400 hover:text-amber-300 font-semibold flex items-center gap-1 transition-colors\">\n                Treasury <ChevronRight size={12} />\n              </button>\n            </div>\n            <div className=\"p-4 grid grid-cols-2 gap-3\">\n              <div className=\"rounded-lg p-3\" style={{ background: 'rgba(16,185,129,0.06)', border: '1px solid rgba(16,185,129,0.1)' }}>\n                <p className=\"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1\">Total Recaudado</p>\n                <p className=\"text-lg font-bold text-emerald-400\">${safe(treasuryStats.totalCollected.toFixed(2))}</p>\n                <p className=\"text-[10px] text-[var(--text-dim)]\">{safe(treasuryStats.totalTrades)} trades</p>\n              </div>\n              <div className=\"rounded-lg p-3\" style={{ background: 'rgba(59,130,246,0.06)', border: '1px solid rgba(59,130,246,0.1)' }}>\n                <p className=\"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1\">Hoy</p>\n                <p className=\"text-lg font-bold text-blue-400\">${safe(treasuryStats.today.fees.toFixed(2))}</p>\n                <p className=\"text-[10px] text-[var(--text-dim)]\">{safe(treasuryStats.today.trades)} trades • ${safe(treasuryStats.today.volume.toLocaleString())} vol</p>\n              </div>\n              <div className=\"rounded-lg p-3\" style={{ background: 'rgba(168,85,247,0.06)', border: '1px solid rgba(168,85,247,0.1)' }}>\n                <p className=\"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1\">7 Días</p>\n                <p className=\"text-lg font-bold text-purple-400\">${safe(treasuryStats.last7days.fees.toFixed(2))}</p>\n                <p className=\"text-[10px] text-[var(--text-dim)]\">{safe(treasuryStats.last7days.trades)} trades</p>\n              </div>\n              <div className=\"rounded-lg p-3\" style={{ background: 'rgba(212,175,55,0.06)', border: '1px solid rgba(212,175,55,0.1)' }}>\n                <p className=\"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1\">30 Días</p>\n                <p className=\"text-lg font-bold text-amber-400\">${safe(treasuryStats.last30days.fees.toFixed(2))}</p>\n                <p className=\"text-[10px] text-[var(--text-dim)]\">${safe(treasuryStats.last30days.volume.toLocaleString())} volumen</p>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </div>\n\n      {/* Quick actions */}\n      <div>\n        <h2 className=\"text-sm font-bold text-[var(--text)] mb-3 flex items-center gap-2\">\n          <Zap size={14} className=\"text-[var(--gold)]\" />\n          Acceso Rápido\n        </h2>\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2.5\">\n          {quickActions.map((action, i) => {\n            const Icon = action.icon;\n            return (\n              <motion.button\n                key={action.label}\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.2 + i * 0.05 }}\n                onClick={() => setPage(action.page)}\n                className=\"rounded-xl p-4 text-left transition-all duration-200 group hover:scale-[1.01]\"\n                style={{\n                  background: 'linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))',\n                  border: '1px solid rgba(30,34,45,0.5)',\n                }}\n                onMouseEnter={e => e.currentTarget.style.borderColor = `${action.color}30`}\n                onMouseLeave={e => e.currentTarget.style.borderColor = 'rgba(30,34,45,0.5)'}\n              >\n                <div className=\"w-10 h-10 rounded-lg flex items-center justify-center mb-3 transition-transform group-hover:scale-110\"\n                  style={{ background: `${action.color}12` }}>\n                  <Icon size={20} style={{ color: action.color }} />\n                </div>\n                <p className=\"text-[13px] font-bold text-[var(--text)] truncate\">{safe(action.label)}</p>\n                <p className=\"text-[11px] text-[var(--text-dim)] mt-0.5 truncate\">{safe(action.desc)}</p>\n              </motion.button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Market Overview */}\n      <div className=\"rounded-xl overflow-hidden\"\n        style={{\n          background: 'linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))',\n          border: '1px solid rgba(30,34,45,0.5)',\n        }}>\n        <div className=\"flex items-center justify-between p-4\" style={{ borderBottom: '1px solid rgba(30,34,45,0.5)' }}>\n          <div className=\"flex items-center gap-2\">\n            <Activity size={14} className=\"text-[var(--gold)]\" />\n            <h2 className=\"text-sm font-bold\">{safe(t('dashboard.realtimeMarket'))}</h2>\n          </div>\n          <button onClick={() => setPage('chart')} className=\"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors\">\n            {safe(t('dashboard.viewChart'))} <ChevronRight size={12} />\n          </button>\n        </div>\n\n        {/* Table header */}\n        <div className=\"grid grid-cols-3 md:grid-cols-4 gap-2 px-3 md:px-4 py-2 text-[10px] font-bold text-[var(--text-dim)]/50 uppercase tracking-wider\">\n          <span>{safe(t('dashboard.pair'))}</span>\n          <span className=\"text-right\">{safe(t('dashboard.price'))}</span>\n          <span className=\"text-right\">{safe(t('dashboard.change24h'))}</span>\n          <span className=\"text-right hidden md:block\">{safe(t('dashboard.action'))}</span>\n        </div>\n\n        <div className=\"divide-y divide-[var(--border)]/30\">\n          {loading ? (\n            <div className=\"p-8 text-center text-sm text-[var(--text-dim)] animate-pulse\">{safe(t('dashboard.loadingMarket'))}</div>\n          ) : marketOverview.map((ticker, i) => (\n            <motion.button\n              key={ticker.symbol}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: i * 0.05 }}\n              onClick={() => { useStore.getState().setSelectedPair(toDisplayPair(ticker.symbol)); setPage('chart'); }}\n              className=\"group w-full grid grid-cols-3 md:grid-cols-4 gap-2 items-center px-3 md:px-4 py-3 hover:bg-white/[0.02] transition-colors\"\n            >\n              {/* Pair */}\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold\"\n                  style={{\n                    background: ticker.changePercent >= 0\n                      ? 'rgba(14,203,129,0.08)'\n                      : 'rgba(246,70,93,0.08)',\n                  }}>\n                  <span className={ticker.changePercent >= 0 ? 'text-[var(--green)]' : 'text-[var(--red)]'}>\n                    {getBase(ticker.symbol).slice(0, 3)}\n                  </span>\n                </div>\n                <div className=\"text-left\">\n                  <p className=\"text-[13px] font-bold leading-none\">{safe(getBase(ticker.symbol))}</p>\n                  <p className=\"text-[10px] text-[var(--text-dim)]/50 mt-0.5\">KAIROS</p>\n                </div>\n              </div>\n\n              {/* Price */}\n              <p className=\"text-[13px] font-mono font-semibold text-right\">${ticker.price.toLocaleString(undefined, { maximumFractionDigits: 2 })}</p>\n\n              {/* Change */}\n              <div className=\"flex items-center gap-1 justify-end\">\n                <span className={`flex items-center gap-0.5 text-xs font-mono font-semibold px-2 py-0.5 rounded-md\n                  ${ticker.changePercent >= 0 ? 'text-[var(--green)] bg-[var(--green)]/[0.08]' : 'text-[var(--red)] bg-[var(--red)]/[0.08]'}`}>\n                  {ticker.changePercent >= 0 ? <ArrowUpRight size={10} /> : <ArrowDownRight size={10} />}\n                  {ticker.changePercent >= 0 ? '+' : ''}{ticker.changePercent.toFixed(2)}%\n                </span>\n              </div>\n\n              {/* Action */}\n              <div className=\"text-right hidden md:block\">\n                <span className=\"text-[10px] font-semibold text-[var(--gold)] opacity-0 group-hover:opacity-100 transition-opacity bg-[var(--gold)]/10 px-2 py-1 rounded-md\">\n                  {safe(t('dashboard.trade'))} →\n                </span>\n              </div>\n            </motion.button>\n          ))}\n        </div>\n      </div>\n\n      {/* Referral Card — Invite & Earn */}\n      {user?.referralCode && <ReferralCard code={user.referralCode} />}\n    </div>\n  );\n}\n\n/* ─── Referral Sharing Card ─── */\nfunction ReferralCard({ code }) {\n  const [copied, setCopied] = useState(false);\n\n  const link = `https://kairos-trade.netlify.app?ref=${code}`;\n\n  const handleCopy = useCallback(async (text) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch {}\n  }, []);\n\n  const handleShare = useCallback((platform) => {\n    const msg = encodeURIComponent(`Únete a Kairos 777 — trading automatizado con 10+ brokers y bots AI. Usa mi código ${code} y recibe 100 KAIROS gratis: ${link}`);\n    const urls = {\n      whatsapp: `https://wa.me/?text=${msg}`,\n      telegram: `https://t.me/share/url?url=${encodeURIComponent(link)}&text=${msg}`,\n      twitter: `https://twitter.com/intent/tweet?text=${msg}`,\n    };\n    window.open(urls[platform], '_blank');\n  }, [code, link]);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 12 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: 0.4 }}\n      className=\"rounded-xl overflow-hidden\"\n      style={{\n        background: 'linear-gradient(135deg, rgba(245,158,11,0.04), rgba(245,158,11,0.01))',\n        border: '1px solid rgba(245,158,11,0.12)',\n      }}\n    >\n      <div className=\"p-4\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <div className=\"w-8 h-8 rounded-lg flex items-center justify-center\" style={{ background: 'rgba(245,158,11,0.1)' }}>\n            <Gift size={16} className=\"text-amber-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-sm font-bold text-[var(--text)]\">Invita y Gana</h3>\n            <p className=\"text-[10px] text-[var(--text-dim)]\">20 KAIROS por cada amigo</p>\n          </div>\n        </div>\n\n        {/* Code + Copy */}\n        <div className=\"flex items-center gap-2 mb-3\">\n          <div className=\"flex-1 rounded-lg px-3 py-2 font-mono text-sm font-bold text-amber-400 tracking-wider\"\n            style={{ background: 'rgba(245,158,11,0.06)', border: '1px solid rgba(245,158,11,0.1)' }}>\n            {code}\n          </div>\n          <button onClick={() => handleCopy(code)}\n            className=\"px-3 py-2 rounded-lg transition-all hover:scale-105\"\n            style={{ background: 'rgba(245,158,11,0.08)', border: '1px solid rgba(245,158,11,0.15)' }}>\n            {copied ? <Check size={14} className=\"text-green-400\" /> : <Copy size={14} className=\"text-amber-400/60\" />}\n          </button>\n        </div>\n\n        {/* Link */}\n        <button onClick={() => handleCopy(link)}\n          className=\"w-full text-left rounded-lg px-3 py-2 text-[11px] text-[var(--text-dim)] truncate hover:text-white/50 transition-colors mb-3\"\n          style={{ background: 'rgba(255,255,255,0.02)', border: '1px solid rgba(255,255,255,0.04)' }}>\n          {link}\n        </button>\n\n        {/* Share buttons */}\n        <div className=\"flex gap-2\">\n          {[\n            { id: 'whatsapp', label: 'WhatsApp', bg: '#25D366' },\n            { id: 'telegram', label: 'Telegram', bg: '#0088cc' },\n            { id: 'twitter', label: 'X', bg: '#1DA1F2' },\n          ].map(p => (\n            <button key={p.id} onClick={() => handleShare(p.id)}\n              className=\"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[11px] font-semibold text-white/60 hover:text-white transition-all hover:scale-[1.02]\"\n              style={{ background: `${p.bg}10`, border: `1px solid ${p.bg}20` }}>\n              <Share2 size={10} />\n              {p.label}\n            </button>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":["safe","val","React","MiniSparkline","data","color","height","width","canvasRef","useRef","useEffect","canvas","ctx","dpr","min","range","pad","cW","cH","gradient","v","i","x","y","lastX","lastY","jsx","timeSince","date","s","Dashboard","setPage","bots","brokers","tradeHistory","positions","user","useStore","marketOverview","setMarketOverview","useState","loading","setLoading","liveBotData","setLiveBotData","t","useTranslation","loadMarketData","interval","tick","tradingEngine","key","iv","topPairs","pair","marketData","err","activeBots","b","totalPnl","sum","connectedBrokers","stats","Bot","Link2","Activity","DollarSign","quickActions","BarChart3","Play","Sparkles","Zap","Shield","portfolio","useMemo","trades","wins","losses","winRate","totalWin","totalLoss","profitFactor","equity","peak","maxDD","equityCurve","dd","todayStart","todayPnl","weekStart","weekPnl","activeBotsList","recentActivity","events","TrendingUp","TrendingDown","treasuryStats","isAdmin","feeService","jsxs","motion","stat","Icon","ChevronRight","Target","Award","AlertTriangle","kpi","I","bot","live","pnl","pnlPct","pos","_a","_b","Eye","Clock","evt","when","ago","Flame","action","e","ticker","toDisplayPair","getBase","ArrowUpRight","ArrowDownRight","ReferralCard","code","copied","setCopied","link","handleCopy","useCallback","text","handleShare","platform","msg","urls","Gift","Check","Copy","p","Share2"],"mappings":"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"}