{"version":3,"mappings":"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GAAO,CAAC,EAAM,EAAM,EAAM,EAAM,GAAM,GAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAI,EAE1LpjB,GAAI,CAAC,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,EAAM,IAAM,GAAM,IAAM,GAAM,IAAM,EAAM,IAAM,EAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,EAAM,IAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,EAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAAM,EAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,EAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,EAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,EAAI,EACngDqjB,GAAK,CAAC,GAAM,EAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,EAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,EAAM,IAAM,IAAM,GAAM,EAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,GAAM,EAAM,IAAM,IAAM,IAAM,EAAM,EAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,EAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,EAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAI,EAEpgDl2B,GAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,EAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,SAAU,EACpgGC,GAAK,CAAC,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,EAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,SAAU,EACpgGk2B,GAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,EAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,SAAU,EACpgGC,GAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,EAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,SAAU,EAEpgGC,GAAK,CAAC,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,EAAY,UAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAU,EACpgGC,GAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,EAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,SAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAU,EACpgGC,GAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,EAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAU,EACpgGC,GAAK,CAAC,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,WAAY,SAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,EAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAU,EAEpgGzc,GAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAU,EACpgGC,GAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAU,EACpgGyc,GAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAU,EACpgGC,GAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY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","names":["m","require$$0","client","BROKERS","POPULAR_PAIRS","TIMEFRAMES","KAIROS_COIN","ADMIN_CONFIG","isAdmin","user","STORAGE_KEYS","USER_SCOPED_KEYS","getUserKey","baseKey","userId","API_HOST","TREASURY_KEY","FEE_RATE","SYNC_INTERVAL","FeeService","price","quantity","rawPnl","fee","adjustedPnl","today","keys","todayStats","last7","last30","amount","reason","n","result","now","i","d","key","day","saved","auth","feeService","PBKDF2_ITERATIONS","SALT_BYTES","IV_BYTES","KEY_LENGTH","deriveKey","password","salt","enc","keyMaterial","encrypt","plaintext","iv","ciphertext","combined","decrypt","encryptedStr","raw","c","plainBuffer","isLegacyKey","encryptedKey","decryptKey","migrateLegacyKey","legacyEncryptedKey","privateKey","loadJSON","fallback","saveJSON","data","loadUserJSON","saveUserJSON","migrateToUser","keyName","userKey","legacyData","clearLegacyKeys","autoUpgradeAdmin","upgraded","initialUser","uid","useStore","create","set","get","userData","_a","message","type","toast","page","broker","derivedPwd","encrypted","vaultEncrypt","updated","id","b","connected","bot","newBot","updates","pair","tf","change","ob","pos","p","pnl","closedTrade","updatedPositions","updatedHistory","order","o","existing","s","userOnly","defaults","strategy","newStrat","msg","loading","modal","isRefreshing","refreshPromise","getStoredAuth","updateStoredTokens","accessToken","refreshToken","clearAuth","refreshAccessToken","res","getValidToken","fetchWithRetry","url","options","retries","delays","attempt","err","r","apiRequest","path","opts","method","body","headers","noAuth","reqHeaders","token","newToken","errMsg","apiClient","es","en","translations","getTranslation","lang","dict","parts","val","useTranslation","updateSettings","useCallback","setLang","newLang","SECTIONS","TrendingUp","Landmark","Crown","CreditCard","LayoutDashboard","BarChart3","Grid3x3","Activity","Play","Bot","Zap","Sparkles","BookOpen","Shield","Link2","History","Bell","BOTTOM_ITEMS","Wallet","Settings","Sidebar","forceMobileOpen","currentPage","setPage","sidebarOpen","toggleSidebar","bots","brokers","logout","hoveredItem","setHoveredItem","useState","t","isExpanded","activeBots","connectedBrokers","userIsAdmin","getBadge","NavItem","item","compact","Icon","isActive","badge","isHovered","isKairos","label","desc","jsxs","jsx","AnimatePresence","motion","SectionLabel","kairos","User","Fragment","section","si","visibleItems","LogOut","ChevronLeft","ChevronRight","QUOTE_DISPLAY","QUOTE_API","toApiPair","displayPair","toDisplayPair","apiPair","getBase","formatPair","Header","onMenuToggle","mobileMenuOpen","selectedPair","currentPrice","priceChange24h","toggleAiPanel","aiPanelOpen","activeBroker","connectedBroker","searchFocused","setSearchFocused","X","Menu","TrendingDown","Wifi","WifiOff","Globe","Brain","ErrorBoundary","Component","props","__publicField","error","errorInfo","level","AlertTriangle","RefreshCw","_c","_b","Home","version","checkType","value","name","types","resolveProperties","k","accum","v","index","defineProperties","target","values","stringify","seen","HEX","isError","code","isCallException","makeError","info","shortMessage","details","assert","check","assertArgument","assertArgumentCount","count","expectedCount","_normalizeForms","form","assertNormalize","assertPrivate","givenGuard","guard","className","operation","_getBytes","copy","offset","getBytes","getBytesCopy","isHexString","length","isBytesLike","HexCharacters","hexlify","bytes","concat","datas","dataLength","dataSlice","start","end","zeroPad","left","zeroPadValue","zeroPadBytes","BN_0","BN_1","maxValue","fromTwos","_value","_width","getUint","width","getNumber","mask","toTwos","getBigInt","limit","_bits","bits","e","Nibbles","toBigInt","toNumber","toBeHex","toBeArray","hex","toQuantity","Alphabet","Lookup","getAlpha","letter","BN_58","encodeBase58","decodeBase58","errorFunc","output","badCodepoint","ignoreFunc","replaceFunc","Utf8ErrorFuncs","getUtf8CodePoints","_bytes","onError","extraLength","overlongMask","j","nextChar","toUtf8Bytes","str","c2","_toUtf8String","codePoints","codePoint","toUtf8String","hexlifyByte","unarrayifyInteger","_decodeChildren","childOffset","decoded","_decode","checkOffset","lengthLength","decodeRlp","_data","arrayifyInteger","_encode","object","payload","child","nibbles","encodeRlp","uuidV4","randomBytes","number","lengths","hash","exists","instance","checkFinished","out","min","crypto","u8a","a","u32","arr","createView","rotr","word","shift","isLE","nextTick","asyncLoop","iters","tick","cb","ts","diff","utf8ToBytes","toBytes","concatBytes","arrays","sum","pad","Hash","toStr","checkOpts","wrapConstructor","hashCons","hashC","tmp","bytesLength","HMAC","_key","assertHash","blockLen","buf","assertExists","assertBytes","to","oHash","iHash","finished","destroyed","outputLen","hmac","pbkdf2Init","_password","_salt","_opts","dkLen","asyncTick","assertNumber","DK","PRF","PRFSalt","pbkdf2Output","prfW","u","pbkdf2","view","ti","Ti","ui","setBigUint64","byteOffset","_32n","_u32_max","wh","wl","h","SHA2","padOffset","buffer","len","take","dataView","oview","outLen","state","Chi","Maj","SHA256_K","IV","SHA256_W","SHA256","A","B","C","D","E","F","G","H","W15","W2","s0","s1","sigma1","T1","T2","sha256","U32_MASK64","fromBig","le","split","lst","Ah","Al","l","toBig","shrSH","_l","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","_h","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","add","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","u64","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","sha512","getGlobal","anyGlobal","createHash","algo","createHmac","_algo","pbkdf2Sync","iterations","keylen","locked","_computeHmac","algorithm","__computeHmac","computeHmac","func","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","_0n","_1n","_2n","_7n","_256n","_0x71n","round","R","x","y","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","keccakP","rounds","idx1","idx0","B0","B1","Th","Tl","curH","curL","PI","Keccak","suffix","enableXOF","bufferOut","gen","keccak_256","_keccak256","__keccak256","keccak256","Rho","Id","_","Pi","idxL","idxR","shifts","shiftsL","idx","shiftsR","Kl","Kr","rotl","f","group","z","BUF","RIPEMD160","h0","h1","h2","h3","h4","al","ar","bl","br","cl","cr","dl","dr","el","er","rGroup","hbl","hbr","rl","rr","sl","sr","tl","tr","ripemd160","_ripemd160","noble_ripemd160","__ripemd160","_pbkdf2","__pbkdf2","_randomBytes","crypto_random","__randomBytes","XorAndSalsa","prev","pi","input","ii","oi","y00","y01","y02","y03","y04","y05","y06","y07","y08","y09","y10","y11","y12","y13","y14","y15","x00","x01","x02","x03","x04","x05","x06","x07","x08","x09","x10","x11","x12","x13","x14","x15","BlockMix","head","tail","scryptInit","N","maxmem","onProgress","blockSize","blockSize32","memUsed","B32","V","blockMixCb","totalBlockMix","callbackPer","blockMixCnt","scryptOutput","scrypt","scryptAsync","lockedSync","lockedAsync","_scryptAsync","passwd","_nobleAsync","_scryptSync","_nobleSync","__scryptAsync","__scryptSync","_passwd","progress","scryptSync","_sha256","__sha256","locked256","hexes","bytesToHex","hexToNumber","hexToBytes","array","hexByte","byte","bytesToNumberBE","bytesToNumberLE","numberToBytesBE","numberToBytesLE","ensureBytes","title","expectedLength","bitMask","u8n","u8fr","createHmacDrbg","hashLen","qByteLen","hmacFn","reset","reseed","seed","pred","validatorFns","validateObject","validators","optValidators","checkField","fieldName","isOptional","checkVal","_3n","_4n","_5n","_8n","mod","pow","num","power","modulo","pow2","invert","q","tonelliShanks","P","legendreC","Q","S","Z","p1div4","Fp","root","Q1div2","g","t2","ge","FpSqrt","c1","n2","nv","FIELD_FIELDS","validateField","field","initial","map","FpPow","FpInvertBatch","nums","lastMultiplied","acc","inverted","nLength","nBitLength","_nBitLength","nByteLength","Field","ORDER","bitLen","redef","BITS","BYTES","sqrtP","lhs","rhs","getFieldBytesLength","fieldOrder","bitLength","getMinHashLength","mapHashToField","fieldLen","minLen","reduced","wNAF","constTimeNegate","condition","neg","W","windows","windowSize","elm","points","base","window","precomputes","maxNumber","shiftBy","wbits","offset1","offset2","cond1","cond2","precomputesMap","transform","comp","validateBasic","curve","validatePointOpts","ut.validateObject","endo","b2n","h2b","ut","DER","sBytes","rBytesLeft","sig","slice","shl","rhl","weierstrassPoints","CURVE","point","_isCompressed","ut.concatBytes","fromBytes","weierstrassEquation","x2","x3","isWithinCurveOrder","assertGE","normPrivateKeyToScalar","wrapPrivateKey","ut.bytesToHex","ut.bytesToNumberBE","mod.mod","pointPrecomputes","assertPrjPoint","other","Point","px","py","pz","is0","toInv","right","X1","Y1","Z1","X2","Y2","Z2","U1","U2","b3","X3","Y3","Z3","t0","t1","t3","t4","t5","wnaf","I","k1neg","k1","k2neg","k2","k1p","k2p","scalar","fake","f1p","f2p","mul","iz","ax","ay","zz","cofactor","isTorsionFree","clearCofactor","isCompressed","validateOpts","weierstrass","curveDef","CURVE_ORDER","compressedLen","uncompressedLen","isValidFieldElement","modN","invN","mod.invert","cat","y2","isYOdd","numToNByteStr","ut.numberToBytesBE","isBiggerThanHalfOrder","HALF","normalizeS","slcNum","from","Signature","recovery","msgHash","rec","bits2int_modN","radj","prefix","ir","u1","u2","ut.hexToBytes","utils","mod.getMinHashLength","mod.mapHashToField","getPublicKey","isProbPub","getSharedSecret","privateA","publicB","bits2int","delta","ORDER_MASK","ut.bitMask","int2octets","prepSig","defaultSigOpts","lowS","prehash","ent","h1int","seedArgs","k2sig","kBytes","ik","normS","defaultVerOpts","sign","privKey","ut.createHmacDrbg","verify","signature","publicKey","sg","_sig","derError","is","getHash","msgs","createCurve","defHash","secp256k1P","secp256k1N","divNearest","sqrtMod","_6n","_11n","_22n","_23n","_44n","_88n","b2","b6","b9","b11","b22","b44","b88","b176","b220","b223","secp256k1","a1","b1","a2","POW_2_128","ZeroAddress","ZeroHash","MessagePrefix","BN_2","BN_27","BN_28","BN_35","BN_N","BN_N_2","inspect","_guard","toUint256","_Signature","__privateAdd","_r","_s","_v","_networkV","__privateSet","__privateGet","yParityAndS","clone","networkV","bv","chainId","assertError","yParity","_SigningKey","_privateKey","digest","pubKey","compressed","pub","secpSig","p0","p1","pub0","pub1","SigningKey","BN_36","getChecksumAddress","address","chars","expanded","hashed","ibanLookup","safeDigits","ibanChecksum","block","checksum","Base36","fromBase36","getAddress","isAddressable","isAddress","checkAddress","promise","resolveAddress","resolver","accessSetify","addr","storageKeys","storageKey","accessListify","authorizationify","computeAddress","pubkey","recoverAddress","BN_MAX_UINT","BLOB_SIZE","CELL_COUNT","getKzgLibrary","kzg","blob","commitment","getVersionedHash","versioned","handleAddress","handleAccessList","param","handleAuthorizationList","handleUint","handleNumber","formatNumber","formatAccessList","formatAuthorizationList","formatHashes","_parseLegacy","fields","tx","_serializeLegacy","legacy","_parseEipSignature","_parseEip1559","_serializeEip1559","_parseEip2930","_serializeEip2930","_parseEip4844","typeName","blobWrapperVersion","blobs","fBlobs","fCommits","fProofs","proof","_serializeEip4844","wrapperVersion","cellProofs","cellSize","_parseEip7702","_serializeEip7702","_Transaction","_Transaction_instances","_type","_to","_nonce","_gasLimit","_gasPrice","_maxPriorityFeePerGas","_maxFeePerGas","_chainId","_accessList","_maxFeePerBlobGas","_blobVersionedHashes","_kzg","_blobs","_auths","_blobWrapperVersion","auths","versionedHashes","padded","commit","__privateMethod","getSerialized_fn","hasGasPrice","hasFee","hasAccessList","hasBlob","outputAuths","signed","sidecar","Transaction","hashAuthorization","hashMessage","padding","BN__1","BN_MAX_UINT256","hexPadRight","hexTrue","hexFalse","domainFieldTypes","domainFieldNames","checkString","domainChecks","getBaseEncoder","match","boundsUpper","boundsLower","encodeType","splitArray","_TypedDataEncoder","_types","_TypedDataEncoder_instances","_fullTypes","_encoderCache","links","parents","subtypes","uniqueNames","baseType","primaryTypes","checkCircular","found","subtype","st","encoder","getEncoder_fn","callback","domain","domainFields","resolveName","ensCache","domainValues","domainTypes","typesWithDomain","subEncoder","encodedType","TypedDataEncoder","getValue","toJson","FeeData","gasPrice","maxFeePerGas","maxPriorityFeePerGas","copyRequest","req","bigIntKeys","numberKeys","Block","provider","_transactions","TransactionResponse","txs","baseFeePerGas","difficulty","extraData","gasLimit","gasUsed","miner","prevRandao","nonce","parentHash","parentBeaconBlockRoot","stateRoot","receiptsRoot","timestamp","transactions","indexOrHash","createOrphanedBlockFilter","Log","log","topics","blockHash","blockNumber","removed","transactionHash","transactionIndex","receipt","createRemovedLogFilter","TransactionReceipt","_logs","contractAddress","logsBloom","logs","status","createRemovedTransactionFilter","createReorderedTransactionFilter","_TransactionResponse","_startBlock","accessList","blobVersionedHashes","_confirms","_timeout","confirms","timeout","startBlock","nextScan","stopScanning","checkReplacement","mined","checkReceipt","resolve","reject","cancellers","cancel","timer","txListener","replaceListener","checkProvider","signer","populate","pop","AbstractSigner","blockTag","network","hasEip1559","feeData","_auth","txObj","authorization","_VoidSigner","_VoidSigner_instances","throwUnsupported_fn","VoidSigner","_BaseWallet","_signingKey","btx","populated","BaseWallet","subsChrs","Word","unfold","words","sep","decode","subs","clumps","leftover","all","semi","decodeOwl","Wordlist","locale","phrase","WordlistOwl","_WordlistOwl_instances","_checksum","_words","loadWords_fn","wordlist","LangEn","getUpperMask","getLowerMask","mnemonicToEntropy","mnemonic","entropy","bit","entropyBits","checksumBits","checksumMask","entropyToMnemonic","indices","remainingBits","Mnemonic","_entropy","__classPrivateFieldGet","receiver","kind","__classPrivateFieldSet","_AES_key","_AES_Kd","_AES_Ke","numberOfRounds","rcon","Si","T3","T4","T5","T6","T7","T8","U3","U4","convertToInt32","AES","roundKeyCount","KC","tk","rconpointer","tt","ModeOfOperation","cls","_CBC_iv","_CBC_lastBlock","CBC","_CTR_remaining","_CTR_remainingIndex","_CTR_counter","CTR","initialValue","crypttext","pkcs7Strip","padder","looseArrayify","hexString","zpad","getPassword","spelunk","_path","reqd","cur","defaultPath","isKeystoreJson","json","aesCtr","getAccount","computedMAC","account","mnemonicKey","mnemonicCiphertext","mnemonicIv","mnemonicAesCtr","getDecryptKdfParams","kdf","prf","decryptKeystoreJsonSync","params","stall","duration","decryptKeystoreJson","getEncryptKdfParams","_encryptKeystore","uuidRandom","derivedKey","macPrefix","mac","gethFilename","encryptKeystoreJsonSync","passwordBytes","encryptKeystoreJson","MasterSecret","HardenedBit","encodeBase58Check","ser_I","chainCode","derivePath","node","components","component","_HDNodeWallet","signingKey","parentFingerprint","depth","_HDNodeWallet_instances","fingerprint","progressCallback","account_fn","HDNodeVoidWallet","_index","IR","IL","ki","extendedKey","_HDNodeWallet_static","fromSeed_fn","_seed","HDNodeWallet","Ki","isCrowdsaleJson","decryptCrowdsaleJson","encseed","encryptedSeed","aesCbc","seedHex","_Wallet","_Wallet_static","fromAccount_fn","wallet","_pk","setSessionKey","getSessionKey","KAIROS_LOGO","ParticleField","isMobile","particles","useMemo","STATS","FEATURES","Gift","Lock","TwoFAInput","onChange","inputRefs","useRef","digits","handleChange","char","next","joined","handleKeyDown","handlePaste","pasted","focusIdx","AuthScreen","login","isLogin","setIsLogin","setForm","setError","setLoading","showPassword","setShowPassword","showForm","setShowForm","referralCode","setReferralCode","signupBonus","setSignupBonus","show2FA","setShow2FA","totpCode","setTotpCode","tempToken","setTempToken","showForgot","setShowForgot","forgotStep","setForgotStep","forgotEmail","setForgotEmail","resetCode","setResetCode","newPassword","setNewPassword","forgotSuccess","setForgotSuccess","useEffect","ref","apiFetch","authToken","completeLogin","needsMigration","newEncrypted","handleSubmit","ethers.Wallet","walletAddress","handle2FASubmit","cancel2FA","handleForgotRequest","handleForgotReset","cancelForgot","ArrowRight","ShieldCheck","EyeOff","Eye","ChevronDown","STEPS","Rocket","StepDots","current","total","Check","OnboardingWizard","onComplete","step","setStep","copied","setCopied","currentStep","isLast","referralLink","handleNext","handleBack","handleSkip","handleAction","handleCopy","text","handleShare","platform","urls","Copy","Share2","ArrowLeft","TelegramService","botToken","chatId","settings","parseMode","botName","side","symbol","entryPrice","exitPrice","emoji","reasonMap","totalTrades","totalPnl","stats","_d","telegramService","Dashboard","lazy","TradingChart","DepthChart","TradingPanel","BotManager","BrokerManager","AIChat","StrategyBuilder","TradeHistory","SimulatorScreen","SettingsPanel","AlertPanel","OrdersPanel","PortfolioAnalytics","MultiChart","TradeJournal","RiskDashboard","MobileTradeView","KairosBroker","BuyKairos","KairosVault","KairosTreasury","WalletPage","MarketHeatmap","PageLoader","TradingView","chartTab","setChartTab","showPanel","setShowPanel","setIsMobile","onResize","Suspense","App","isAuthenticated","seedDefaultStrategies","showOnboarding","setShowOnboarding","setMobileMenuOpen","validatingSession","setValidatingSession","cancelled","serverUser","handleExpired","done","justRegistered","renderPage","Toaster","MAX_AUTO_RETRIES","RETRY_RESET_AFTER_MS","GlobalErrorBoundary","retryCount","prevState","ReactDOM","React"],"ignoreList":[0,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],"sources":["../../node_modules/react-dom/client.js","../../src/constants/index.js","../../src/services/feeService.js","../../src/utils/keyVault.js","../../src/store/useStore.js","../../src/services/apiClient.js","../../src/i18n/es.js","../../src/i18n/en.js","../../src/i18n/index.js","../../src/hooks/useTranslation.js","../../src/components/Layout/Sidebar.jsx","../../src/utils/pairUtils.js","../../src/components/Layout/Header.jsx","../../src/components/Layout/ErrorBoundary.jsx","../../node_modules/ethers/lib.esm/_version.js","../../node_modules/ethers/lib.esm/utils/properties.js","../../node_modules/ethers/lib.esm/utils/errors.js","../../node_modules/ethers/lib.esm/utils/data.js","../../node_modules/ethers/lib.esm/utils/maths.js","../../node_modules/ethers/lib.esm/utils/base58.js","../../node_modules/ethers/lib.esm/utils/utf8.js","../../node_modules/ethers/lib.esm/utils/rlp-decode.js","../../node_modules/ethers/lib.esm/utils/rlp-encode.js","../../node_modules/ethers/lib.esm/utils/uuid.js","../../node_modules/@noble/hashes/esm/_assert.js","../../node_modules/@noble/hashes/esm/crypto.js","../../node_modules/@noble/hashes/esm/utils.js","../../node_modules/@noble/hashes/esm/hmac.js","../../node_modules/@noble/hashes/esm/pbkdf2.js","../../node_modules/@noble/hashes/esm/_sha2.js","../../node_modules/@noble/hashes/esm/sha256.js","../../node_modules/@noble/hashes/esm/_u64.js","../../node_modules/@noble/hashes/esm/sha512.js","../../node_modules/ethers/lib.esm/crypto/crypto-browser.js","../../node_modules/ethers/lib.esm/crypto/hmac.js","../../node_modules/@noble/hashes/esm/sha3.js","../../node_modules/ethers/lib.esm/crypto/keccak.js","../../node_modules/@noble/hashes/esm/ripemd160.js","../../node_modules/ethers/lib.esm/crypto/ripemd160.js","../../node_modules/ethers/lib.esm/crypto/pbkdf2.js","../../node_modules/ethers/lib.esm/crypto/random.js","../../node_modules/@noble/hashes/esm/scrypt.js","../../node_modules/ethers/lib.esm/crypto/scrypt.js","../../node_modules/ethers/lib.esm/crypto/sha2.js","../../node_modules/@noble/curves/esm/abstract/utils.js","../../node_modules/@noble/curves/esm/abstract/modular.js","../../node_modules/@noble/curves/esm/abstract/curve.js","../../node_modules/@noble/curves/esm/abstract/weierstrass.js","../../node_modules/@noble/curves/esm/_shortw_utils.js","../../node_modules/@noble/curves/esm/secp256k1.js","../../node_modules/ethers/lib.esm/constants/addresses.js","../../node_modules/ethers/lib.esm/constants/hashes.js","../../node_modules/ethers/lib.esm/constants/strings.js","../../node_modules/ethers/lib.esm/crypto/signature.js","../../node_modules/ethers/lib.esm/crypto/signing-key.js","../../node_modules/ethers/lib.esm/address/address.js","../../node_modules/ethers/lib.esm/address/checks.js","../../node_modules/ethers/lib.esm/transaction/accesslist.js","../../node_modules/ethers/lib.esm/transaction/authorization.js","../../node_modules/ethers/lib.esm/transaction/address.js","../../node_modules/ethers/lib.esm/transaction/transaction.js","../../node_modules/ethers/lib.esm/hash/authorization.js","../../node_modules/ethers/lib.esm/hash/id.js","../../node_modules/ethers/lib.esm/hash/message.js","../../node_modules/ethers/lib.esm/hash/typed-data.js","../../node_modules/ethers/lib.esm/providers/provider.js","../../node_modules/ethers/lib.esm/providers/abstract-signer.js","../../node_modules/ethers/lib.esm/wallet/base-wallet.js","../../node_modules/ethers/lib.esm/wordlists/decode-owl.js","../../node_modules/ethers/lib.esm/wordlists/wordlist.js","../../node_modules/ethers/lib.esm/wordlists/wordlist-owl.js","../../node_modules/ethers/lib.esm/wordlists/lang-en.js","../../node_modules/ethers/lib.esm/wallet/mnemonic.js","../../node_modules/aes-js/lib.esm/aes.js","../../node_modules/aes-js/lib.esm/mode.js","../../node_modules/aes-js/lib.esm/mode-cbc.js","../../node_modules/aes-js/lib.esm/mode-ctr.js","../../node_modules/aes-js/lib.esm/padding.js","../../node_modules/ethers/lib.esm/wallet/utils.js","../../node_modules/ethers/lib.esm/wallet/json-keystore.js","../../node_modules/ethers/lib.esm/wallet/hdwallet.js","../../node_modules/ethers/lib.esm/wallet/json-crowdsale.js","../../node_modules/ethers/lib.esm/wallet/wallet.js","../../src/utils/sessionVault.js","../../src/components/Auth/AuthScreen.jsx","../../src/components/Onboarding/OnboardingWizard.jsx","../../src/services/telegram.js","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// Kairos Trade  Constants\nexport const APP_VERSION = '2.0.0';\nexport const APP_NAME = 'Kairos Trade';\n\n// Supported brokers\nexport const BROKERS = {\n  binance: {\n    id: 'binance',\n    name: 'Binance',\n    logo: '',\n    baseUrl: 'https://api.binance.com',\n    wsUrl: 'wss://stream.binance.com:9443/ws',\n    supportedMarkets: ['spot', 'futures'],\n    requiredFields: ['apiKey', 'apiSecret'],\n  },\n  bybit: {\n    id: 'bybit',\n    name: 'Bybit',\n    logo: '',\n    baseUrl: 'https://api.bybit.com',\n    wsUrl: 'wss://stream.bybit.com/v5/public/spot',\n    supportedMarkets: ['spot', 'futures', 'options'],\n    requiredFields: ['apiKey', 'apiSecret'],\n  },\n  kraken: {\n    id: 'kraken',\n    name: 'Kraken',\n    logo: '',\n    baseUrl: 'https://api.kraken.com',\n    wsUrl: 'wss://ws.kraken.com',\n    supportedMarkets: ['spot', 'futures'],\n    requiredFields: ['apiKey', 'apiSecret'],\n  },\n  coinbase: {\n    id: 'coinbase',\n    name: 'Coinbase',\n    logo: '',\n    baseUrl: 'https://api.coinbase.com',\n    wsUrl: 'wss://ws-feed.exchange.coinbase.com',\n    supportedMarkets: ['spot'],\n    requiredFields: ['apiKey', 'apiSecret'],\n  },\n  kucoin: {\n    id: 'kucoin',\n    name: 'KuCoin',\n    logo: '',\n    baseUrl: 'https://api.kucoin.com',\n    wsUrl: 'wss://ws-api.kucoin.com',\n    supportedMarkets: ['spot', 'futures'],\n    requiredFields: ['apiKey', 'apiSecret', 'passphrase'],\n  },\n  okx: {\n    id: 'okx',\n    name: 'OKX',\n    logo: '',\n    baseUrl: 'https://www.okx.com',\n    wsUrl: 'wss://ws.okx.com:8443/ws/v5/public',\n    supportedMarkets: ['spot', 'futures', 'options'],\n    requiredFields: ['apiKey', 'apiSecret', 'passphrase'],\n  },\n  bingx: {\n    id: 'bingx',\n    name: 'BingX',\n    logo: '',\n    baseUrl: 'https://open-api.bingx.com',\n    wsUrl: 'wss://open-api-ws.bingx.com/market',\n    supportedMarkets: ['spot', 'futures'],\n    requiredFields: ['apiKey', 'apiSecret'],\n  },\n  bitget: {\n    id: 'bitget',\n    name: 'Bitget',\n    logo: '',\n    baseUrl: 'https://api.bitget.com',\n    wsUrl: 'wss://ws.bitget.com/spot/v1/stream/public',\n    supportedMarkets: ['spot', 'futures', 'copy'],\n    requiredFields: ['apiKey', 'apiSecret', 'passphrase'],\n  },\n  mexc: {\n    id: 'mexc',\n    name: 'MEXC',\n    logo: '',\n    baseUrl: 'https://api.mexc.com',\n    wsUrl: 'wss://wbs.mexc.com/ws',\n    supportedMarkets: ['spot', 'futures'],\n    requiredFields: ['apiKey', 'apiSecret'],\n  },\n  wallet: {\n    id: 'wallet',\n    name: 'Kairos Wallet',\n    logo: '',\n    baseUrl: 'dex',\n    wsUrl: '',\n    supportedMarkets: ['dex'],\n    requiredFields: ['apiKey', 'apiSecret'],\n    isDex: true,\n  },\n};\n\n// Popular trading pairs (displayed as KAIROS, mapped to USDT for API calls)\nexport const POPULAR_PAIRS = [\n  'BTCKAIROS', 'ETHKAIROS', 'BNBKAIROS', 'SOLKAIROS', 'XRPKAIROS',\n  'ADAKAIROS', 'DOGEKAIROS', 'AVAXKAIROS', 'DOTKAIROS', 'MATICKAIROS',\n  'LINKKAIROS', 'ATOMKAIROS', 'LTCKAIROS', 'UNIKAIROS', 'AAVEKAIROS',\n];\n\n// Timeframes\nexport const TIMEFRAMES = [\n  { label: '1m', value: '1m', seconds: 60 },\n  { label: '5m', value: '5m', seconds: 300 },\n  { label: '15m', value: '15m', seconds: 900 },\n  { label: '1H', value: '1h', seconds: 3600 },\n  { label: '4H', value: '4h', seconds: 14400 },\n  { label: '1D', value: '1d', seconds: 86400 },\n  { label: '1W', value: '1w', seconds: 604800 },\n];\n\n// Technical indicators\nexport const INDICATORS = {\n  ema: { name: 'EMA', params: [{ name: 'period', default: 20, min: 1, max: 500 }] },\n  sma: { name: 'SMA', params: [{ name: 'period', default: 20, min: 1, max: 500 }] },\n  rsi: { name: 'RSI', params: [{ name: 'period', default: 14, min: 1, max: 100 }] },\n  macd: { name: 'MACD', params: [\n    { name: 'fast', default: 12 },\n    { name: 'slow', default: 26 },\n    { name: 'signal', default: 9 },\n  ]},\n  bb: { name: 'Bollinger Bands', params: [\n    { name: 'period', default: 20 },\n    { name: 'stdDev', default: 2 },\n  ]},\n  vwap: { name: 'VWAP', params: [] },\n  volume: { name: 'Volume', params: [] },\n};\n\n// Bot statuses\nexport const BOT_STATUS = {\n  ACTIVE: 'active',\n  PAUSED: 'paused',\n  STOPPED: 'stopped',\n  ERROR: 'error',\n};\n\n// Order types\nexport const ORDER_TYPES = {\n  MARKET: 'market',\n  LIMIT: 'limit',\n  STOP_LOSS: 'stop_loss',\n  TAKE_PROFIT: 'take_profit',\n  TRAILING_STOP: 'trailing_stop',\n};\n\n// Order sides\nexport const ORDER_SIDES = {\n  BUY: 'buy',\n  SELL: 'sell',\n};\n\n// Strategy conditions\nexport const CONDITIONS = {\n  CROSSES_ABOVE: 'crosses_above',\n  CROSSES_BELOW: 'crosses_below',\n  GREATER_THAN: 'greater_than',\n  LESS_THAN: 'less_than',\n  EQUALS: 'equals',\n};\n\n// Brand\nexport const BRAND = {\n  primary: '#3B82F6',\n  primaryLight: '#60A5FA',\n  primaryDark: '#2563EB',\n  dark: '#08090C',\n  surface: '#0E1015',\n  green: '#00DC82',\n  red: '#FF4757',\n  name: 'Kairos Trade',\n  company: 'Kairos 777 Inc',\n  tagline: 'Professional AI-Powered Trading',\n};\n\n// Kairos Coin info\nexport const KAIROS_COIN = {\n  symbol: 'KAIROS',\n  name: 'KairosCoin',\n  decimals: 18,\n  addresses: {\n    56: '0x14D41707269c7D8b8DFa5095b38824a46dA05da3',\n    8453: '0x14D41707269c7D8b8DFa5095b38824a46dA05da3',\n    42161: '0x14D41707269c7D8b8DFa5095b38824a46dA05da3',\n    137: '0x9151B8C90B2F8a8DF82426E7E65d00563A75a6C9',\n  },\n};\n\n//  Admin Configuration \n// Only these emails have admin access (Treasury, global settings)\nexport const ADMIN_CONFIG = {\n  emails: ['info@kairos-777.com'],\n  companyName: 'Kairos 777 Inc',\n  role: 'CEO & Founder',\n  plan: 'enterprise',\n};\n\nexport const isAdmin = (user) => {\n  if (!user?.email) return false;\n  return ADMIN_CONFIG.emails.includes(user.email.toLowerCase());\n};\n\nexport const STORAGE_KEYS = {\n  AUTH: 'kairos_trade_auth',\n  BROKERS: 'kairos_trade_brokers',\n  BOTS: 'kairos_trade_bots',\n  SETTINGS: 'kairos_trade_settings',\n  STRATEGIES: 'kairos_trade_strategies',\n  POSITIONS: 'kairos_trade_positions',\n  ORDERS: 'kairos_trade_orders',\n  TRADE_HISTORY: 'kairos_trade_history',\n};\n\n// Per-user storage keys  isolates data between accounts\nexport const USER_SCOPED_KEYS = ['BROKERS', 'BOTS', 'SETTINGS', 'STRATEGIES', 'POSITIONS', 'ORDERS', 'TRADE_HISTORY'];\n\nexport const getUserKey = (baseKey, userId) => userId ? `${baseKey}_u_${userId}` : baseKey;\n","// Kairos Trade  Platform Fee Service (Kairos Treasury)\n// Collects a micro-spread on each trade (0.05% of volume)\n// Accumulates in a treasury that syncs to backend\n// Revenue model: invisible to users, standard broker practice\n\nconst API_HOST = 'https://kairos-api-u6k5.onrender.com';\n\nconst TREASURY_KEY = 'kairos_treasury';\nconst FEE_RATE = 0.0005; // 0.05%  5 basis points (Binance charges 0.1%)\nconst SYNC_INTERVAL = 60_000; // Sync to backend every 60s\n\nclass FeeService {\n  constructor() {\n    this.treasury = this._load();\n    this._pendingSync = 0;\n    this._syncTimer = null;\n  }\n\n  //  Fee rate getter \n  getRate() {\n    return FEE_RATE;\n  }\n\n  //  Calculate fee for a trade \n  // volume = price * quantity (in USD)\n  calculateFee(price, quantity) {\n    const volume = Math.abs(price * quantity);\n    return +(volume * FEE_RATE).toFixed(8);\n  }\n\n  //  Apply fee: deducts from PnL, adds to treasury \n  // Returns { adjustedPnl, fee }\n  applyFee(price, quantity, rawPnl) {\n    const fee = this.calculateFee(price, quantity);\n    const adjustedPnl = rawPnl - fee;\n\n    this.treasury.totalCollected += fee;\n    this.treasury.tradeCount += 1;\n    this.treasury.lastTradeAt = Date.now();\n\n    // Track daily stats\n    const today = new Date().toISOString().slice(0, 10);\n    if (!this.treasury.daily[today]) {\n      this.treasury.daily[today] = { fees: 0, trades: 0, volume: 0 };\n    }\n    this.treasury.daily[today].fees += fee;\n    this.treasury.daily[today].trades += 1;\n    this.treasury.daily[today].volume += Math.abs(price * quantity);\n\n    // Keep only last 90 days\n    const keys = Object.keys(this.treasury.daily).sort();\n    while (keys.length > 90) {\n      delete this.treasury.daily[keys.shift()];\n    }\n\n    this._save();\n    this._pendingSync += fee;\n    this._scheduleSyncToBackend();\n\n    return { adjustedPnl, fee };\n  }\n\n  //  Apply fee on volume only (for open-position or one-sided fee) \n  applyVolumeFee(price, quantity) {\n    const fee = this.calculateFee(price, quantity);\n\n    this.treasury.totalCollected += fee;\n    this.treasury.tradeCount += 1;\n    this.treasury.lastTradeAt = Date.now();\n\n    const today = new Date().toISOString().slice(0, 10);\n    if (!this.treasury.daily[today]) {\n      this.treasury.daily[today] = { fees: 0, trades: 0, volume: 0 };\n    }\n    this.treasury.daily[today].fees += fee;\n    this.treasury.daily[today].trades += 1;\n    this.treasury.daily[today].volume += Math.abs(price * quantity);\n\n    const keys = Object.keys(this.treasury.daily).sort();\n    while (keys.length > 90) {\n      delete this.treasury.daily[keys.shift()];\n    }\n\n    this._save();\n    this._pendingSync += fee;\n    this._scheduleSyncToBackend();\n    return fee;\n  }\n\n  //  Get treasury stats (for admin dashboard) \n  getStats() {\n    const today = new Date().toISOString().slice(0, 10);\n    const todayStats = this.treasury.daily[today] || { fees: 0, trades: 0, volume: 0 };\n\n    // Last 7 days\n    const last7 = this._aggregateDays(7);\n    // Last 30 days\n    const last30 = this._aggregateDays(30);\n\n    return {\n      totalCollected: +this.treasury.totalCollected.toFixed(4),\n      totalTrades: this.treasury.tradeCount,\n      feeRate: FEE_RATE,\n      feeRateDisplay: `${(FEE_RATE * 100).toFixed(2)}%`,\n      lastTradeAt: this.treasury.lastTradeAt,\n      today: {\n        fees: +todayStats.fees.toFixed(4),\n        trades: todayStats.trades,\n        volume: +todayStats.volume.toFixed(2),\n      },\n      last7days: last7,\n      last30days: last30,\n      pendingSync: +this._pendingSync.toFixed(4),\n    };\n  }\n\n  //  Admin: manually adjust treasury (correction) \n  adminAdjust(amount, reason) {\n    this.treasury.totalCollected += amount;\n    this.treasury.adjustments = this.treasury.adjustments || [];\n    this.treasury.adjustments.push({ amount, reason, at: Date.now() });\n    this._save();\n  }\n\n  //  Internals \n\n  _aggregateDays(n) {\n    const result = { fees: 0, trades: 0, volume: 0 };\n    const now = new Date();\n    for (let i = 0; i < n; i++) {\n      const d = new Date(now);\n      d.setDate(d.getDate() - i);\n      const key = d.toISOString().slice(0, 10);\n      const day = this.treasury.daily[key];\n      if (day) {\n        result.fees += day.fees;\n        result.trades += day.trades;\n        result.volume += day.volume;\n      }\n    }\n    result.fees = +result.fees.toFixed(4);\n    result.volume = +result.volume.toFixed(2);\n    return result;\n  }\n\n  _load() {\n    try {\n      const saved = JSON.parse(localStorage.getItem(TREASURY_KEY));\n      if (saved && typeof saved.totalCollected === 'number') return saved;\n    } catch {}\n    return {\n      totalCollected: 0,\n      tradeCount: 0,\n      lastTradeAt: null,\n      daily: {},\n      syncedTotal: 0,\n    };\n  }\n\n  _save() {\n    try {\n      localStorage.setItem(TREASURY_KEY, JSON.stringify(this.treasury));\n    } catch {}\n  }\n\n  _scheduleSyncToBackend() {\n    if (this._syncTimer) return;\n    this._syncTimer = setTimeout(() => {\n      this._syncToBackend();\n      this._syncTimer = null;\n    }, SYNC_INTERVAL);\n  }\n\n  async _syncToBackend() {\n    if (this._pendingSync <= 0) return;\n    const amount = this._pendingSync;\n    try {\n      const auth = JSON.parse(localStorage.getItem('kairos_trade_auth') || '{}');\n      await fetch(`${API_HOST}/api/treasury/collect`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${auth.token}`,\n        },\n        body: JSON.stringify({\n          amount,\n          trades: this.treasury.tradeCount,\n          source: 'platform_fees',\n        }),\n      });\n      this.treasury.syncedTotal += amount;\n      this._pendingSync = 0;\n      this._save();\n    } catch {\n      // Will retry on next sync cycle\n    }\n  }\n}\n\nexport const feeService = new FeeService();\nexport default feeService;\n","/**\n * keyVault.js  AES-256-GCM encryption for private keys\n * Uses Web Crypto API (SubtleCrypto) with PBKDF2 key derivation.\n * \n * NEVER store raw private keys  always encrypt with user's password first.\n * The encrypted blob is safe to store on server or localStorage.\n */\n\nconst PBKDF2_ITERATIONS = 310_000; // OWASP recommended minimum\nconst SALT_BYTES = 16;\nconst IV_BYTES = 12; // AES-GCM standard nonce size\nconst KEY_LENGTH = 256; // AES-256\n\n/**\n * Derive an AES-256 key from a password using PBKDF2\n */\nasync function deriveKey(password, salt) {\n  const enc = new TextEncoder();\n  const keyMaterial = await crypto.subtle.importKey(\n    'raw', enc.encode(password), 'PBKDF2', false, ['deriveKey']\n  );\n  return crypto.subtle.deriveKey(\n    { name: 'PBKDF2', salt, iterations: PBKDF2_ITERATIONS, hash: 'SHA-256' },\n    keyMaterial,\n    { name: 'AES-GCM', length: KEY_LENGTH },\n    false,\n    ['encrypt', 'decrypt']\n  );\n}\n\n/**\n * Encrypt a plaintext string with a password.\n * Returns a base64-encoded string containing: salt + iv + ciphertext\n * Format: \"v1:\" prefix for versioning, then base64(salt|iv|ciphertext)\n */\nexport async function encrypt(plaintext, password) {\n  const enc = new TextEncoder();\n  const salt = crypto.getRandomValues(new Uint8Array(SALT_BYTES));\n  const iv = crypto.getRandomValues(new Uint8Array(IV_BYTES));\n  const key = await deriveKey(password, salt);\n\n  const ciphertext = await crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv },\n    key,\n    enc.encode(plaintext)\n  );\n\n  // Concatenate salt + iv + ciphertext\n  const combined = new Uint8Array(salt.length + iv.length + ciphertext.byteLength);\n  combined.set(salt, 0);\n  combined.set(iv, salt.length);\n  combined.set(new Uint8Array(ciphertext), salt.length + iv.length);\n\n  return 'v1:' + btoa(String.fromCharCode(...combined));\n}\n\n/**\n * Decrypt an encrypted string with a password.\n * Expects the \"v1:\" prefixed format from encrypt().\n */\nexport async function decrypt(encryptedStr, password) {\n  if (!encryptedStr.startsWith('v1:')) {\n    throw new Error('Unknown encryption format');\n  }\n\n  const raw = encryptedStr.slice(3);\n  const combined = Uint8Array.from(atob(raw), c => c.charCodeAt(0));\n\n  const salt = combined.slice(0, SALT_BYTES);\n  const iv = combined.slice(SALT_BYTES, SALT_BYTES + IV_BYTES);\n  const ciphertext = combined.slice(SALT_BYTES + IV_BYTES);\n\n  const key = await deriveKey(password, salt);\n\n  const plainBuffer = await crypto.subtle.decrypt(\n    { name: 'AES-GCM', iv },\n    key,\n    ciphertext\n  );\n\n  return new TextDecoder().decode(plainBuffer);\n}\n\n/**\n * Check if an encryptedKey is legacy (plain btoa) or properly encrypted (v1:).\n * Legacy keys are just base64-encoded private keys starting with \"0x\".\n */\nexport function isLegacyKey(encryptedKey) {\n  if (!encryptedKey) return false;\n  if (encryptedKey.startsWith('v1:')) return false;\n  try {\n    const decoded = atob(encryptedKey);\n    return decoded.startsWith('0x');\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Decrypt a key  handles both legacy (btoa) and v1 encrypted keys.\n * For legacy keys, returns the decoded key and sets needsMigration flag.\n */\nexport async function decryptKey(encryptedKey, password) {\n  if (!encryptedKey) return { privateKey: null, needsMigration: false };\n\n  // Legacy btoa key  just decode it\n  if (isLegacyKey(encryptedKey)) {\n    return { privateKey: atob(encryptedKey), needsMigration: true };\n  }\n\n  // Properly encrypted key\n  if (encryptedKey.startsWith('v1:')) {\n    const privateKey = await decrypt(encryptedKey, password);\n    return { privateKey, needsMigration: false };\n  }\n\n  return { privateKey: null, needsMigration: false };\n}\n\n/**\n * Migrate a legacy key to proper encryption.\n * Returns the new encrypted key string.\n */\nexport async function migrateLegacyKey(legacyEncryptedKey, password) {\n  const privateKey = atob(legacyEncryptedKey);\n  return encrypt(privateKey, password);\n}\n","// Kairos Trade  Zustand Store\nimport { create } from 'zustand';\nimport { toast } from 'react-hot-toast';\nimport { STORAGE_KEYS, ADMIN_CONFIG, USER_SCOPED_KEYS, getUserKey } from '../constants';\nimport { feeService } from '../services/feeService';\nimport { encrypt as vaultEncrypt } from '../utils/keyVault';\n\nconst loadJSON = (key, fallback) => {\n  try { return JSON.parse(localStorage.getItem(key)) || fallback; }\n  catch { return fallback; }\n};\n\nconst saveJSON = (key, data) => localStorage.setItem(key, JSON.stringify(data));\n\n//  Per-user scoped load/save \nconst loadUserJSON = (baseKey, userId, fallback) => loadJSON(getUserKey(baseKey, userId), fallback);\nconst saveUserJSON = (baseKey, userId, data) => saveJSON(getUserKey(baseKey, userId), data);\n\n//  Migrate legacy (non-scoped) data to a specific user \nconst migrateToUser = (userId) => {\n  if (!userId) return;\n  const migrated = localStorage.getItem('kairos_migrated_' + userId);\n  if (migrated) return; // already migrated\n\n  USER_SCOPED_KEYS.forEach((keyName) => {\n    const baseKey = STORAGE_KEYS[keyName];\n    const userKey = getUserKey(baseKey, userId);\n    const legacyData = localStorage.getItem(baseKey);\n    const userData = localStorage.getItem(userKey);\n\n    // Only migrate if user doesn't have data yet AND legacy data exists\n    if (!userData && legacyData) {\n      localStorage.setItem(userKey, legacyData);\n    }\n  });\n\n  localStorage.setItem('kairos_migrated_' + userId, '1');\n};\n\n//  Clear legacy (non-scoped) keys so other users start fresh \nconst clearLegacyKeys = () => {\n  USER_SCOPED_KEYS.forEach((keyName) => {\n    localStorage.removeItem(STORAGE_KEYS[keyName]);\n  });\n};\n\n//  Auto-detect admin on page load and upgrade stored user \nconst autoUpgradeAdmin = (user) => {\n  if (!user?.email) return user;\n  if (ADMIN_CONFIG.emails.includes(user.email.toLowerCase())) {\n    const upgraded = {\n      ...user,\n      name: ADMIN_CONFIG.companyName,\n      plan: ADMIN_CONFIG.plan,\n      role: 'admin',\n    };\n    saveJSON(STORAGE_KEYS.AUTH, upgraded);\n    return upgraded;\n  }\n  return user;\n};\n\nconst initialUser = autoUpgradeAdmin(loadJSON(STORAGE_KEYS.AUTH, null));\nconst uid = initialUser?.id || null;\n\n// If user is logged in, ensure migration happened\nif (uid) {\n  migrateToUser(uid);\n  clearLegacyKeys();\n}\n\nconst useStore = create((set, get) => ({\n  //  Auth \n  user: initialUser,\n  isAuthenticated: !!initialUser?.accessToken,\n\n  login: (userData) => {\n    saveJSON(STORAGE_KEYS.AUTH, userData);\n    // Migrate legacy data to this user, then clear legacy\n    if (userData?.id) {\n      migrateToUser(userData.id);\n      clearLegacyKeys();\n    }\n    const userId = userData?.id || null;\n    set({\n      user: userData,\n      isAuthenticated: true,\n      brokers: loadUserJSON(STORAGE_KEYS.BROKERS, userId, []),\n      bots: loadUserJSON(STORAGE_KEYS.BOTS, userId, []),\n      positions: loadUserJSON(STORAGE_KEYS.POSITIONS, userId, []),\n      orders: loadUserJSON(STORAGE_KEYS.ORDERS, userId, []),\n      tradeHistory: loadUserJSON(STORAGE_KEYS.TRADE_HISTORY, userId, []),\n      strategies: loadUserJSON(STORAGE_KEYS.STRATEGIES, userId, []),\n      settings: loadUserJSON(STORAGE_KEYS.SETTINGS, userId, {\n        theme: 'dark', language: 'es', notifications: true, soundAlerts: true,\n        maxRiskPerTrade: 2, defaultLeverage: 1,\n      }),\n    });\n  },\n  logout: async () => {\n    const user = get().user;\n    // Revoke server session if we have a token\n    if (user?.accessToken) {\n      try {\n        const host = import.meta.env.DEV ? '' : 'https://kairos-api-u6k5.onrender.com';\n        await fetch(`${host}/api/auth/logout`, {\n          method: 'POST',\n          headers: { 'Authorization': `Bearer ${user.accessToken}`, 'Content-Type': 'application/json' },\n        });\n      } catch (e) { /* ignore  just clearing local state */ }\n    }\n    localStorage.removeItem(STORAGE_KEYS.AUTH);\n    // Don't remove user-scoped data  it stays for when they log back in\n    set({\n      user: null, isAuthenticated: false,\n      brokers: [], bots: [], positions: [], orders: [], tradeHistory: [], strategies: [],\n    });\n  },\n\n  // Helper to get current userId for storage\n  _uid: () => get().user?.id || null,\n\n  //  Toast (global helper for components) \n  showToast: (message, type = 'success') => {\n    if (type === 'error') toast.error(String(message), { duration: 4000 });\n    else if (type === 'success') toast.success(String(message), { duration: 3000 });\n    else toast(String(message), { duration: 3000 });\n  },\n\n  //  Navigation \n  currentPage: 'dashboard',\n  setPage: (page) => set({ currentPage: page }),\n\n  //  Brokers \n  brokers: loadUserJSON(STORAGE_KEYS.BROKERS, uid, []),\n  activeBroker: null,\n\n  addBroker: async (broker) => {\n    const derivedPwd = `kairos:broker:${get().user?.email || 'anon'}`;\n    const encrypted = {\n      ...broker,\n      id: Date.now().toString(36),\n      apiKey: await vaultEncrypt(broker.apiKey, derivedPwd),\n      apiSecret: await vaultEncrypt(broker.apiSecret, derivedPwd),\n      passphrase: broker.passphrase ? await vaultEncrypt(broker.passphrase, derivedPwd) : undefined,\n      connected: false,\n      addedAt: new Date().toISOString(),\n    };\n    const updated = [...get().brokers, encrypted];\n    saveUserJSON(STORAGE_KEYS.BROKERS, get()._uid(), updated);\n    set({ brokers: updated });\n    return encrypted;\n  },\n\n  removeBroker: (id) => {\n    const updated = get().brokers.filter(b => b.id !== id);\n    saveUserJSON(STORAGE_KEYS.BROKERS, get()._uid(), updated);\n    set({ brokers: updated, activeBroker: get().activeBroker?.id === id ? null : get().activeBroker });\n  },\n\n  setActiveBroker: (broker) => set({ activeBroker: broker }),\n\n  updateBrokerStatus: (id, connected) => {\n    const updated = get().brokers.map(b => b.id === id ? { ...b, connected } : b);\n    saveUserJSON(STORAGE_KEYS.BROKERS, get()._uid(), updated);\n    set({ brokers: updated });\n  },\n\n  //  Bots \n  bots: loadUserJSON(STORAGE_KEYS.BOTS, uid, []),\n\n  addBot: (bot) => {\n    const newBot = {\n      ...bot,\n      id: Date.now().toString(36),\n      status: 'stopped',\n      trades: 0,\n      pnl: 0,\n      winRate: 0,\n      createdAt: new Date().toISOString(),\n    };\n    const updated = [...get().bots, newBot];\n    saveUserJSON(STORAGE_KEYS.BOTS, get()._uid(), updated);\n    set({ bots: updated });\n    return newBot;\n  },\n\n  updateBot: (id, updates) => {\n    const updated = get().bots.map(b => b.id === id ? { ...b, ...updates } : b);\n    saveUserJSON(STORAGE_KEYS.BOTS, get()._uid(), updated);\n    set({ bots: updated });\n  },\n\n  removeBot: (id) => {\n    const updated = get().bots.filter(b => b.id !== id);\n    saveUserJSON(STORAGE_KEYS.BOTS, get()._uid(), updated);\n    set({ bots: updated });\n  },\n\n  //  Trading \n  selectedPair: 'BTCKAIROS',\n  selectedTimeframe: '1h',\n  currentPrice: null,\n  priceChange24h: null,\n  orderBook: { bids: [], asks: [] },\n  positions: loadUserJSON(STORAGE_KEYS.POSITIONS, uid, []),\n  orders: loadUserJSON(STORAGE_KEYS.ORDERS, uid, []),\n  tradeHistory: loadUserJSON(STORAGE_KEYS.TRADE_HISTORY, uid, []),\n\n  setSelectedPair: (pair) => set({ selectedPair: pair }),\n  setSelectedTimeframe: (tf) => set({ selectedTimeframe: tf }),\n  setCurrentPrice: (price) => set({ currentPrice: price }),\n  setPriceChange24h: (change) => set({ priceChange24h: change }),\n  setOrderBook: (ob) => set({ orderBook: ob }),\n\n  addPosition: (pos) => {\n    const updated = [...get().positions, { ...pos, id: Date.now().toString(36) }];\n    saveUserJSON(STORAGE_KEYS.POSITIONS, get()._uid(), updated);\n    set({ positions: updated });\n  },\n  closePosition: (id) => {\n    const pos = get().positions.find(p => p.id === id);\n    if (pos) {\n      const price = get().currentPrice || pos.entryPrice;\n      const rawPnl = pos.side === 'buy'\n        ? (price - pos.entryPrice) * pos.quantity\n        : (pos.entryPrice - price) * pos.quantity;\n      // Platform fee (0.05% of volume on close)\n      const { adjustedPnl: pnl } = feeService.applyFee(price, pos.quantity, rawPnl);\n      const closedTrade = { ...pos, closedAt: new Date().toISOString(), exitPrice: price, pnl };\n      const updatedPositions = get().positions.filter(p => p.id !== id);\n      const updatedHistory = [...get().tradeHistory, closedTrade];\n      const userId = get()._uid();\n      saveUserJSON(STORAGE_KEYS.POSITIONS, userId, updatedPositions);\n      saveUserJSON(STORAGE_KEYS.TRADE_HISTORY, userId, updatedHistory);\n      set({ positions: updatedPositions, tradeHistory: updatedHistory });\n    }\n  },\n\n  addOrder: (order) => {\n    const updated = [...get().orders, { ...order, id: Date.now().toString(36) }];\n    saveUserJSON(STORAGE_KEYS.ORDERS, get()._uid(), updated);\n    set({ orders: updated });\n  },\n  cancelOrder: (id) => {\n    const updated = get().orders.filter(o => o.id !== id);\n    saveUserJSON(STORAGE_KEYS.ORDERS, get()._uid(), updated);\n    set({ orders: updated });\n  },\n\n  //  Strategies \n  strategies: loadUserJSON(STORAGE_KEYS.STRATEGIES, uid, []),\n\n  seedDefaultStrategies: () => {\n    const FACTORY_VERSION = 3; // bump to force refresh\n    const existing = get().strategies;\n    const prevVer = parseInt(localStorage.getItem('kairos_factory_ver') || '0');\n    if (prevVer >= FACTORY_VERSION && existing.some(s => s.isFactory)) return;\n    // Remove old factory strategies\n    const userOnly = existing.filter(s => !s.isFactory);\n    localStorage.setItem('kairos_factory_ver', String(FACTORY_VERSION));\n\n    const defaults = [\n      {\n        id: 'factory_alpha',\n        name: 'Kairos Alpha v1',\n        type: 'custom_script',\n        isFactory: true,\n        description: 'Bot multi-seal agresivo  RSI zones + MACD momentum + volumen + mean reversion. ptimo en 1m-5m.',\n        code: `// \n// KAIROS ALPHA v1  Multi-Signal Scalper\n// Diseado por Mario Isaac @ Kairos 777\n// Timeframe recomendado: 1m / 5m\n// \n\nconfig({ stopLoss: 1.2, takeProfit: 2.0 });\n\n//  Indicadores \nconst r = rsi(14);\nconst emaFast = ema(8);\nconst emaMid = ema(21);\nconst emaSlow = ema(50);\nconst m = macd(12, 26, 9);\nconst bands = bb(20, 2);\nconst volAvg = avg(volume, 20);\nconst volNow = volume.value;\nconst volSpike = volNow > volAvg * 1.5;\n\n//  Scoring system \nlet bullScore = 0;\nlet bearScore = 0;\n\n// RSI zones\nif (r < 30) bullScore += 3;\nelse if (r < 40) bullScore += 1;\nif (r > 70) bearScore += 3;\nelse if (r > 60) bearScore += 1;\n\n// EMA alignment\nif (emaFast > emaMid && emaMid > emaSlow) bullScore += 2;\nif (emaFast < emaMid && emaMid < emaSlow) bearScore += 2;\n\n// EMA crossovers\nif (crossover(emaFast, emaMid)) bullScore += 2;\nif (crossunder(emaFast, emaMid)) bearScore += 2;\n\n// MACD\nif (m.histogram > 0 && m.histogram > m.histogram.prev(1)) bullScore += 1;\nif (m.histogram < 0 && m.histogram < m.histogram.prev(1)) bearScore += 1;\nif (crossover(m.line, m.signal)) bullScore += 2;\nif (crossunder(m.line, m.signal)) bearScore += 2;\n\n// Bollinger Bands mean reversion\nif (price < bands.lower) bullScore += 2;\nif (price > bands.upper) bearScore += 2;\n\n// Volume confirmation\nif (volSpike) {\n  bullScore += 1;\n  bearScore += 1;\n}\n\n//  Price action \nconst pctMove = percentChange(close, 3);\nif (pctMove < -0.3) bullScore += 1;  // oversold bounce\nif (pctMove > 0.3) bearScore += 1;  // overbought drop\n\nlog(\" Bull: \" + bullScore + \" | Bear: \" + bearScore + \" | RSI: \" + r.toFixed(1) + \" | Vol: \" + (volSpike ? \"SPIKE\" : \"normal\"));\n\n//  Execute trades \nif (bullScore >= 5 && bearScore < 3) {\n  log(\" COMPRA  Score \" + bullScore + \" [RSI:\" + r.toFixed(0) + \" MACD:\" + m.histogram.toFixed(2) + \"]\");\n  buy();\n}\n\nif (bearScore >= 5 && bullScore < 3) {\n  log(\" VENTA  Score \" + bearScore + \" [RSI:\" + r.toFixed(0) + \" MACD:\" + m.histogram.toFixed(2) + \"]\");\n  sell();\n}`,\n        createdAt: new Date().toISOString(),\n      },\n      {\n        id: 'factory_scalper',\n        name: 'Scalper RSI+EMA',\n        type: 'custom_script',\n        isFactory: true,\n        description: 'Scalper con RSI y doble EMA crossover',\n        code: `// Scalper  RSI + EMA cross\nconfig({ stopLoss: 1.5, takeProfit: 2.5 });\n\nconst r = rsi(14);\nconst fast = ema(9);\nconst slow = ema(21);\n\nlog(\"RSI: \" + r.toFixed(1) + \" | EMA9: \" + fast.toFixed(0) + \" | EMA21: \" + slow.toFixed(0));\n\nif (r < 35 && crossover(fast, slow)) { log(\" COMPRA\"); buy(); }\nif (r > 65 && crossunder(fast, slow)) { log(\" VENTA\"); sell(); }\nif (r > 78) { log(\" RSI extremo\"); sell(); }\nif (r < 22) { log(\" RSI extremo bajo\"); buy(); }`,\n        createdAt: new Date().toISOString(),\n      },\n      {\n        id: 'factory_momentum',\n        name: 'Momentum MACD+BB',\n        type: 'custom_script',\n        isFactory: true,\n        description: 'Momentum trading con MACD y Bollinger Bands',\n        code: `// Momentum MACD + Bollinger Bands\nconfig({ stopLoss: 2, takeProfit: 3 });\n\nconst m = macd(12, 26, 9);\nconst bands = bb(20, 2);\nconst r = rsi(14);\n\nlog(\"MACD: \" + m.histogram.toFixed(2) + \" | BB: \" + bands.lower.toFixed(0) + \"-\" + bands.upper.toFixed(0));\n\nif (price < bands.lower && crossover(m.line, m.signal) && r < 40) {\n  log(\" COMPRA  BB inferior + MACD alcista\"); buy();\n}\nif (price > bands.upper && crossunder(m.line, m.signal) && r > 60) {\n  log(\" VENTA  BB superior + MACD bajista\"); sell();\n}`,\n        createdAt: new Date().toISOString(),\n      },\n      {\n        id: 'factory_sniper',\n        name: 'Kairos Sniper 1m',\n        type: 'custom_script',\n        isFactory: true,\n        description: 'Bot ultra-rpido para 1m  detecta micro-reversiones con RSI extremo + volumen. Genera seales frecuentes.',\n        code: `// \n// KAIROS SNIPER  Ultra-Fast 1m Scalper\n// Diseado para timeframe 1m / 5m\n// Genera seales frecuentes para trading activo\n// \n\nconfig({ stopLoss: 0.8, takeProfit: 1.2 })\n\nconst r = rsi(7)\nconst r14 = rsi(14)\nconst fast = ema(5)\nconst mid = ema(13)\nconst slow = ema(34)\nconst m = macd(8, 21, 5)\nconst bands = bb(15, 2)\n\nconst volNow = volume.value\nconst volAvg5 = avg(volume, 5)\nconst volAvg20 = avg(volume, 20)\nconst momentum = percentChange(close, 3)\nconst momentum5 = percentChange(close, 5)\n\nconst trendUp = fast > mid && mid > slow\nconst trendDown = fast < mid && mid < slow\n\nlet go = \"none\"\n\n// RSI EXTREMO  seal rpida\nif (r < 25) go = \"buy\"\nif (r > 75) go = \"sell\"\n\n// MICRO-REVERSAL  RSI rebota desde extremo\nif (r.prev(1) < 20 && r > 25 && momentum > 0) go = \"buy\"\nif (r.prev(1) > 80 && r < 75 && momentum < 0) go = \"sell\"\n\n// EMA CROSS rpido con confirmacin\nif (crossover(fast, mid) && r < 55 && r14 < 50) go = \"buy\"\nif (crossunder(fast, mid) && r > 45 && r14 > 50) go = \"sell\"\n\n// BB SQUEEZE + momentum\nif (price < bands.lower && momentum5 < -0.15) go = \"buy\"\nif (price > bands.upper && momentum5 > 0.15) go = \"sell\"\n\n// MACD cross con volumen\nif (crossover(m.line, m.signal) && volNow > volAvg5) go = \"buy\"\nif (crossunder(m.line, m.signal) && volNow > volAvg5) go = \"sell\"\n\n// FILTRO: no operar contra tendencia fuerte\nif (go === \"buy\" && trendDown && r > 40) go = \"none\"\nif (go === \"sell\" && trendUp && r < 60) go = \"none\"\n\nlog(\" RSI7:\" + r.toFixed(0) + \" EMA:\" + (trendUp ? \"\" : trendDown ? \"\" : \"\") + \" Mom:\" + momentum.toFixed(2) + \"% Vol:\" + (volNow > volAvg20 * 1.3 ? \"\" : \"\"))\n\nif (go === \"buy\") {\n  log(\" SNIPER BUY  RSI:\" + r.toFixed(0) + \" Price:$\" + price.toFixed(2))\n  buy()\n}\nif (go === \"sell\") {\n  log(\" SNIPER SELL  RSI:\" + r.toFixed(0) + \" Price:$\" + price.toFixed(2))\n  sell()\n}`,\n        createdAt: new Date().toISOString(),\n      },\n    ];\n\n    const updated = [...userOnly, ...defaults];\n    saveUserJSON(STORAGE_KEYS.STRATEGIES, get()._uid(), updated);\n    set({ strategies: updated });\n  },\n\n  addStrategy: (strategy) => {\n    const newStrat = { ...strategy, id: Date.now().toString(36), createdAt: new Date().toISOString() };\n    const updated = [...get().strategies, newStrat];\n    saveUserJSON(STORAGE_KEYS.STRATEGIES, get()._uid(), updated);\n    set({ strategies: updated });\n    return newStrat;\n  },\n\n  removeStrategy: (id) => {\n    const updated = get().strategies.filter(s => s.id !== id);\n    saveUserJSON(STORAGE_KEYS.STRATEGIES, get()._uid(), updated);\n    set({ strategies: updated });\n  },\n\n  //  AI \n  aiMessages: [],\n  aiLoading: false,\n\n  addAiMessage: (msg) => set({ aiMessages: [...get().aiMessages, msg] }),\n  setAiLoading: (loading) => set({ aiLoading: loading }),\n  clearAiMessages: () => set({ aiMessages: [] }),\n\n  //  Settings \n  settings: loadUserJSON(STORAGE_KEYS.SETTINGS, uid, {\n    theme: 'dark',\n    language: 'es',\n    notifications: true,\n    soundAlerts: true,\n    maxRiskPerTrade: 2,\n    defaultLeverage: 1,\n  }),\n\n  updateSettings: (updates) => {\n    const updated = { ...get().settings, ...updates };\n    saveUserJSON(STORAGE_KEYS.SETTINGS, get()._uid(), updated);\n    set({ settings: updated });\n  },\n\n  //  UI \n  sidebarOpen: true,\n  aiPanelOpen: false,\n  modalOpen: null,\n\n  toggleSidebar: () => set({ sidebarOpen: !get().sidebarOpen }),\n  toggleAiPanel: () => set({ aiPanelOpen: !get().aiPanelOpen }),\n  setModal: (modal) => set({ modalOpen: modal }),\n}));\n\nexport default useStore;\n","// \n//  Kairos Trade  Centralized API Client\n//  Auto Bearer token  Auto refresh on 401  Auto logout on failure\n// \n\nimport { STORAGE_KEYS } from '../constants';\n\nconst API_HOST = import.meta.env.DEV ? '' : 'https://kairos-api-u6k5.onrender.com';\n\n// Flag to prevent multiple refresh attempts at the same time\nlet isRefreshing = false;\nlet refreshPromise = null;\n\n//  Helpers \n\nfunction getStoredAuth() {\n  try {\n    return JSON.parse(localStorage.getItem(STORAGE_KEYS.AUTH)) || null;\n  } catch {\n    return null;\n  }\n}\n\nfunction updateStoredTokens(accessToken, refreshToken) {\n  const auth = getStoredAuth();\n  if (!auth) return;\n  auth.accessToken = accessToken;\n  if (refreshToken) auth.refreshToken = refreshToken;\n  localStorage.setItem(STORAGE_KEYS.AUTH, JSON.stringify(auth));\n}\n\nfunction clearAuth() {\n  localStorage.removeItem(STORAGE_KEYS.AUTH);\n}\n\n//  Token Refresh \n\nasync function refreshAccessToken() {\n  const auth = getStoredAuth();\n  if (!auth?.refreshToken) throw new Error('No refresh token');\n\n  const res = await fetch(`${API_HOST}/api/auth/refresh`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ refreshToken: auth.refreshToken }),\n  });\n\n  const data = await res.json();\n  if (!res.ok || !data.success) {\n    throw new Error(data.error || 'Token refresh failed');\n  }\n\n  // Update stored tokens\n  updateStoredTokens(data.data.accessToken, data.data.refreshToken);\n  return data.data.accessToken;\n}\n\n// Debounced refresh  only one refresh at a time\nasync function getValidToken() {\n  if (isRefreshing && refreshPromise) {\n    return refreshPromise;\n  }\n\n  const auth = getStoredAuth();\n  if (!auth?.accessToken) return null;\n\n  // Check if token is close to expiry by decoding JWT payload\n  try {\n    const payload = JSON.parse(atob(auth.accessToken.split('.')[1]));\n    const expiresIn = payload.exp * 1000 - Date.now();\n    // Refresh if less than 5 minutes left\n    if (expiresIn < 5 * 60 * 1000) {\n      isRefreshing = true;\n      refreshPromise = refreshAccessToken().finally(() => {\n        isRefreshing = false;\n        refreshPromise = null;\n      });\n      return refreshPromise;\n    }\n  } catch {\n    // If we can't decode, just use the token as-is\n  }\n\n  return auth.accessToken;\n}\n\n//  Core API Method \n\n/**\n * Fetch with auto-retry for network errors (Render cold-start resilience).\n * Retries up to 3 times with escalating delays: 3s  8s  15s (26s total).\n */\nasync function fetchWithRetry(url, options, retries = 3) {\n  const delays = [3000, 8000, 15000];\n  for (let attempt = 0; attempt <= retries; attempt++) {\n    try {\n      return await fetch(url, options);\n    } catch (err) {\n      if (attempt === retries) throw err;\n      await new Promise(r => setTimeout(r, delays[attempt] || 15000));\n    }\n  }\n}\n\n/**\n * Authenticated API request with auto token refresh.\n * \n * @param {string} path     API path (e.g. '/api/auth/me')\n * @param {object} opts     { method, body, headers, noAuth }\n * @returns {Promise<object>}  Parsed JSON response\n */\nasync function apiRequest(path, opts = {}) {\n  const { method = 'GET', body, headers = {}, noAuth = false } = opts;\n\n  const reqHeaders = { 'Content-Type': 'application/json', ...headers };\n\n  // Attach Bearer token unless explicitly noAuth\n  if (!noAuth) {\n    const token = await getValidToken();\n    if (token) {\n      reqHeaders['Authorization'] = `Bearer ${token}`;\n    }\n  }\n\n  let res = await fetchWithRetry(`${API_HOST}${path}`, {\n    method,\n    headers: reqHeaders,\n    ...(body ? { body: JSON.stringify(body) } : {}),\n  });\n\n  // If 401 on authenticated request, try refreshing token once\n  if (res.status === 401 && !noAuth) {\n    try {\n      const newToken = await refreshAccessToken();\n      reqHeaders['Authorization'] = `Bearer ${newToken}`;\n      res = await fetchWithRetry(`${API_HOST}${path}`, {\n        method,\n        headers: reqHeaders,\n        ...(body ? { body: JSON.stringify(body) } : {}),\n      });\n    } catch {\n      // Refresh failed  force logout\n      clearAuth();\n      window.dispatchEvent(new Event('kairos:session-expired'));\n      throw new Error('Sesin expirada. Inicia sesin de nuevo.');\n    }\n  }\n\n  // If still 401 after refresh on authenticated request, force logout\n  if (res.status === 401 && !noAuth) {\n    clearAuth();\n    window.dispatchEvent(new Event('kairos:session-expired'));\n    throw new Error('Sesin expirada. Inicia sesin de nuevo.');\n  }\n\n  const data = await res.json();\n  if (!res.ok) {\n    let errMsg = data.message || data.error || 'Error del servidor';\n    // Sanitize raw database errors so users never see internals\n    if (errMsg.includes('Hrana') || errMsg.includes('stream not found') || errMsg.includes('STREAM_EXPIRED')) {\n      errMsg = 'Error temporal del servidor. Intenta de nuevo en unos segundos.';\n    }\n    const err = new Error(errMsg);\n    err.status = res.status;\n    err.data = data;\n    throw err;\n  }\n\n  return data;\n}\n\n//  Convenience Methods \n\nconst apiClient = {\n  host: API_HOST,\n\n  get: (path, opts) => apiRequest(path, { ...opts, method: 'GET' }),\n  post: (path, body, opts) => apiRequest(path, { ...opts, method: 'POST', body }),\n  put: (path, body, opts) => apiRequest(path, { ...opts, method: 'PUT', body }),\n  delete: (path, opts) => apiRequest(path, { ...opts, method: 'DELETE' }),\n\n  // Unauthenticated request (for login/register)\n  publicPost: (path, body) => apiRequest(path, { method: 'POST', body, noAuth: true }),\n\n  // Validate current session  returns user data or null\n  async validateSession() {\n    try {\n      const auth = getStoredAuth();\n      if (!auth?.accessToken) return null;\n      const data = await apiRequest('/api/auth/me');\n      return data.success ? data.data : null;\n    } catch {\n      return null;\n    }\n  },\n\n  // Refresh token explicitly\n  refreshToken: refreshAccessToken,\n\n  // Get current stored token (without refresh)\n  getToken() {\n    return getStoredAuth()?.accessToken || null;\n  },\n};\n\nexport default apiClient;\n","// Kairos Trade  Spanish translations (default)\nconst es = {\n  //  Sidebar sections \n  sidebar: {\n    kairos: 'Kairos',\n    principal: 'Principal',\n    automation: 'Automatizacin',\n    analytics: 'Analytics',\n    management: 'Gestin',\n  },\n  //  Sidebar items \n  nav: {\n    'kairos-broker': 'Kairos Broker',\n    'kairos-broker-desc': 'Trading con apalancamiento',\n    'kairos-vault': 'Kairos Vault',\n    'kairos-vault-desc': 'Provee liquidez y gana yield',\n    'kairos-treasury': 'Treasury',\n    'kairos-treasury-desc': 'Ingresos por comisiones',\n    'buy-kairos': 'Get KairosCoin',\n    'buy-kairos-desc': 'Con tarjeta de crdito',\n    dashboard: 'Dashboard',\n    'dashboard-desc': 'Panel de control',\n    chart: 'Trading',\n    'chart-desc': 'Grficos en vivo',\n    multichart: 'Multi-Chart',\n    'multichart-desc': 'Vista profesional',\n    heatmap: 'Heatmap',\n    'heatmap-desc': 'Mapa de calor del mercado',\n    simulator: 'Simulador',\n    'simulator-desc': 'Paper trading',\n    bots: 'Bots',\n    'bots-desc': 'Trading automtico',\n    strategies: 'Estrategias',\n    'strategies-desc': 'Crear y gestionar',\n    ai: 'Kairos AI',\n    'ai-desc': 'Asistente IA',\n    portfolio: 'Portfolio',\n    'portfolio-desc': 'P&L y rendimiento',\n    journal: 'Journal',\n    'journal-desc': 'Diario de trades',\n    risk: 'Riesgo',\n    'risk-desc': 'Gestin de riesgo',\n    brokers: 'Brokers',\n    'brokers-desc': 'Conexiones API',\n    history: 'Historial',\n    'history-desc': 'Trades y reportes',\n    alerts: 'Alertas',\n    'alerts-desc': 'Notificaciones',\n    wallet: 'Wallet',\n    settings: 'Ajustes',\n  },\n\n  //  Header \n  header: {\n    spotTrading: 'Spot Trading',\n    connected: 'Conectado',\n    ai: 'AI',\n  },\n\n  //  Dashboard \n  dashboard: {\n    activeBots: 'Bots Activos',\n    brokers: 'Brokers',\n    positions: 'Posiciones',\n    totalPnl: 'P&L Total',\n    trading: 'Trading',\n    tradingDesc: 'Grficos profesionales',\n    simulator: 'Simulador',\n    simulatorDesc: 'Paper trading sin riesgo',\n    kairosAi: 'Kairos AI',\n    kairosAiDesc: 'Asistente inteligente',\n    createBot: 'Crear Bot',\n    createBotDesc: 'Automatiza tu trading',\n    strategies: 'Estrategias',\n    strategiesDesc: 'Crea y gestiona',\n    brokersAction: 'Brokers',\n    brokersActionDesc: 'Conecta tu cuenta',\n    activeBotsSection: 'Bots Activos',\n    running: 'running',\n    viewAll: 'Ver todos',\n    realtimeMarket: 'Mercado en Tiempo Real',\n    viewChart: 'Ver grfico',\n    pair: 'Par',\n    price: 'Precio',\n    change24h: 'Cambio 24h',\n    action: 'Accin',\n    loadingMarket: 'Cargando mercado...',\n    noBotsActive: 'Sin bots activos',\n    trade: 'Operar',\n    profit: 'Ganancia',\n    winRate: 'Win Rate',\n    trades: 'Trades',\n    ago: 'hace',\n  },\n\n  //  Auth \n  auth: {\n    platform: 'Tu Plataforma de Trading',\n    automated: 'Automatizado',\n    platformDesc: 'Conecta 10+ brokers, despliega bots de trading con AI, y opera 33+ pares de crypto  todo desde un solo dashboard profesional.',\n    noSubscription: 'Sin suscripcin, sin lmites. Regstrate en 30 segundos y accede a herramientas de nivel institucional.',\n    verification2fa: 'Verificacin 2FA',\n    enter2faCode: 'Ingresa el cdigo de tu app autenticadora',\n    login: 'Iniciar Sesin',\n    register: 'Registrarse',\n    name: 'Nombre',\n    namePlaceholder: 'Tu nombre completo',\n    email: 'Email',\n    password: 'Contrasea',\n    referralCode: 'Cdigo de Referido',\n    optional: 'opcional',\n    accessPlatform: 'Acceder a la Plataforma',\n    createAccount: 'Crear Cuenta',\n    walletAutoGenerated: 'Tu Kairos Wallet se genera automticamente al registrarte',\n    features: {\n      autoBots: 'Bots Automticos',\n      autoBotsDesc: 'Trading 24/7 con estrategias personalizadas. Grid, DCA, y scripts avanzados.',\n      proCharts: 'Grficos Pro',\n      proChartsDesc: 'Charts en tiempo real con 7+ indicadores tcnicos. Multi-chart y profundidad.',\n      kairosAi: 'Kairos AI',\n      kairosAiDesc: 'Asistente de trading inteligente que analiza tendencias y sugiere estrategias.',\n      brokersIntegrated: '10 Brokers Integrados',\n      brokersIntegratedDesc: 'Binance, Bybit, Coinbase, Kraken, OKX, KuCoin, y ms. Un solo dashboard.',\n      freeKairos: '100 KAIROS Gratis',\n      freeKairosDesc: 'Recibe 100 KAIROS al registrarte + 20 KAIROS por cada amigo que invites.',\n      totalSecurity: 'Seguridad Total',\n      totalSecurityDesc: 'Encriptacin bcrypt, JWT, 2FA. Tu wallet se genera automticamente.',\n    },\n  },\n\n  //  Bots \n  bots: {\n    title: 'Trading Bots',\n    activeOf: 'activos de',\n    total: 'total',\n    newBot: 'Nuevo Bot de Trading',\n    name: 'Nombre',\n    pair: 'Par',\n    timeframe: 'Timeframe',\n    balance: 'Balance ($)',\n    risk: 'Riesgo (%)',\n    trailingStop: 'Trailing Stop',\n    trailingStopDesc: 'SL que se mueve protegiendo ganancias',\n    trailDistance: 'Trail Distance (%)',\n    activation: 'Activacin (%)',\n    strategy: 'Estrategia',\n    selectStrategy: 'Seleccionar estrategia...',\n    createNew: 'Crear Nueva',\n    createStrategy: 'Crear Estrategia',\n    upperPrice: 'Precio Superior ($)',\n    lowerPrice: 'Precio Inferior ($)',\n    gridLevels: 'Niveles de Grid',\n    totalInvestment: 'Inversin Total ($)',\n    perPurchase: '$ por Compra',\n    interval: 'Intervalo (min)',\n    maxPurchases: 'Mx. Compras',\n    rsiFilter: 'Filtro RSI (comprar solo si RSI <',\n    dipFilter: 'Filtro de Cada (comprar cuando baje',\n    brokerReal: 'Broker (ejecucin real)',\n    demo: 'Demo (sin broker)',\n    real: 'Real',\n    realWarning: ' Este bot ejecutar rdenes REALES con dinero real',\n    createBot: 'Crear Bot',\n    cancel: 'Cancelar',\n    start: 'Iniciar',\n    pause: 'Pausar',\n    stop: 'Detener',\n    viewChart: 'Ver Grfico',\n    signalBot: 'Signal Bot',\n    signalBotDesc: 'Indicadores tcnicos predefinidos',\n    scriptBot: 'Script Bot',\n    scriptBotDesc: 'Estrategia personalizada con cdigo',\n    gridBot: 'Grid Bot',\n    gridBotDesc: 'Compra y vende en niveles de precio',\n    dcaBot: 'DCA Bot',\n    dcaBotDesc: 'Inversin a intervalos regulares',\n  },\n\n  //  Trading Panel \n  trading: {\n    order: 'Orden',\n    positions: 'Pos',\n    orders: 'rd',\n    buy: 'Comprar',\n    sell: 'Vender',\n    market: 'Mercado',\n    limit: 'Lmite',\n    amount: 'Cantidad',\n    price: 'Precio',\n    total: 'Total',\n    stopLoss: 'Stop Loss',\n    takeProfit: 'Take Profit',\n    placeOrder: 'Ejecutar Orden',\n    openPanel: 'Operar',\n    hidePanel: 'Ocultar Panel',\n  },\n\n  //  Error Boundary \n  errors: {\n    pageError: 'Algo sali mal',\n    pageErrorDesc: 'Ha ocurrido un error inesperado en esta seccin.',\n    retry: 'Reintentar',\n    goToDashboard: 'Ir al Dashboard',\n    widgetError: 'Error al cargar',\n    widgetRetry: 'Reintentar',\n  },\n\n  //  Common \n  common: {\n    loading: 'Cargando...',\n    save: 'Guardar',\n    cancel: 'Cancelar',\n    delete: 'Eliminar',\n    edit: 'Editar',\n    close: 'Cerrar',\n    confirm: 'Confirmar',\n    search: 'Buscar',\n    noResults: 'Sin resultados',\n    active: 'Activo',\n    paused: 'Pausado',\n    stopped: 'Detenido',\n    enabled: 'Activado',\n    disabled: 'Desactivado',\n    language: 'Idioma',\n    spanish: 'Espaol',\n    english: 'English',\n  },\n};\n\nexport default es;\n","// Kairos Trade  English translations\nconst en = {\n  //  Sidebar sections \n  sidebar: {\n    kairos: 'Kairos',\n    principal: 'Main',\n    automation: 'Automation',\n    analytics: 'Analytics',\n    management: 'Management',\n  },\n  //  Sidebar items \n  nav: {\n    'kairos-broker': 'Kairos Broker',\n    'kairos-broker-desc': 'Leveraged trading',\n    'kairos-vault': 'Kairos Vault',\n    'kairos-vault-desc': 'Provide liquidity & earn yield',\n    'kairos-treasury': 'Treasury',\n    'kairos-treasury-desc': 'Fee revenue dashboard',\n    'buy-kairos': 'Get KairosCoin',\n    'buy-kairos-desc': 'With credit card',\n    dashboard: 'Dashboard',\n    'dashboard-desc': 'Control panel',\n    chart: 'Trading',\n    'chart-desc': 'Live charts',\n    multichart: 'Multi-Chart',\n    'multichart-desc': 'Professional view',\n    heatmap: 'Heatmap',\n    'heatmap-desc': 'Market heatmap',\n    simulator: 'Simulator',\n    'simulator-desc': 'Paper trading',\n    bots: 'Bots',\n    'bots-desc': 'Automated trading',\n    strategies: 'Strategies',\n    'strategies-desc': 'Create & manage',\n    ai: 'Kairos AI',\n    'ai-desc': 'AI assistant',\n    portfolio: 'Portfolio',\n    'portfolio-desc': 'P&L & performance',\n    journal: 'Journal',\n    'journal-desc': 'Trade diary',\n    risk: 'Risk',\n    'risk-desc': 'Risk management',\n    brokers: 'Brokers',\n    'brokers-desc': 'API connections',\n    history: 'History',\n    'history-desc': 'Trades & reports',\n    alerts: 'Alerts',\n    'alerts-desc': 'Notifications',\n    wallet: 'Wallet',\n    settings: 'Settings',\n  },\n\n  //  Header \n  header: {\n    spotTrading: 'Spot Trading',\n    connected: 'Connected',\n    ai: 'AI',\n  },\n\n  //  Dashboard \n  dashboard: {\n    activeBots: 'Active Bots',\n    brokers: 'Brokers',\n    positions: 'Positions',\n    totalPnl: 'Total P&L',\n    trading: 'Trading',\n    tradingDesc: 'Professional charts',\n    simulator: 'Simulator',\n    simulatorDesc: 'Risk-free paper trading',\n    kairosAi: 'Kairos AI',\n    kairosAiDesc: 'Smart assistant',\n    createBot: 'Create Bot',\n    createBotDesc: 'Automate your trading',\n    strategies: 'Strategies',\n    strategiesDesc: 'Create & manage',\n    brokersAction: 'Brokers',\n    brokersActionDesc: 'Connect your account',\n    activeBotsSection: 'Active Bots',\n    running: 'running',\n    viewAll: 'View all',\n    realtimeMarket: 'Real-Time Market',\n    viewChart: 'View chart',\n    pair: 'Pair',\n    price: 'Price',\n    change24h: '24h Change',\n    action: 'Action',\n    loadingMarket: 'Loading market...',\n    noBotsActive: 'No active bots',\n    trade: 'Trade',\n    profit: 'Profit',\n    winRate: 'Win Rate',\n    trades: 'Trades',\n    ago: 'ago',\n  },\n\n  //  Auth \n  auth: {\n    platform: 'Your',\n    automated: 'Automated Trading Platform',\n    platformDesc: 'Connect 10+ brokers, deploy AI trading bots, and trade 33+ crypto pairs  all from one professional dashboard.',\n    noSubscription: 'No subscription, no limits. Sign up in 30 seconds and access institutional-grade tools.',\n    verification2fa: '2FA Verification',\n    enter2faCode: 'Enter the code from your authenticator app',\n    login: 'Log In',\n    register: 'Sign Up',\n    name: 'Name',\n    namePlaceholder: 'Your full name',\n    email: 'Email',\n    password: 'Password',\n    referralCode: 'Referral Code',\n    optional: 'optional',\n    accessPlatform: 'Access Platform',\n    createAccount: 'Create Account',\n    walletAutoGenerated: 'Your Kairos Wallet is automatically generated when you sign up',\n    features: {\n      autoBots: 'Auto Bots',\n      autoBotsDesc: '24/7 trading with custom strategies. Grid, DCA, and advanced scripts.',\n      proCharts: 'Pro Charts',\n      proChartsDesc: 'Real-time charts with 7+ technical indicators. Multi-chart and depth.',\n      kairosAi: 'Kairos AI',\n      kairosAiDesc: 'Smart trading assistant that analyzes trends and suggests strategies.',\n      brokersIntegrated: '10 Integrated Brokers',\n      brokersIntegratedDesc: 'Binance, Bybit, Coinbase, Kraken, OKX, KuCoin, and more. One dashboard.',\n      freeKairos: '100 Free KAIROS',\n      freeKairosDesc: 'Get 100 KAIROS on signup + 20 KAIROS for every referred friend.',\n      totalSecurity: 'Total Security',\n      totalSecurityDesc: 'bcrypt encryption, JWT, 2FA. Your wallet is auto-generated.',\n    },\n  },\n\n  //  Bots \n  bots: {\n    title: 'Trading Bots',\n    activeOf: 'active of',\n    total: 'total',\n    newBot: 'New Trading Bot',\n    name: 'Name',\n    pair: 'Pair',\n    timeframe: 'Timeframe',\n    balance: 'Balance ($)',\n    risk: 'Risk (%)',\n    trailingStop: 'Trailing Stop',\n    trailingStopDesc: 'SL that follows and protects profits',\n    trailDistance: 'Trail Distance (%)',\n    activation: 'Activation (%)',\n    strategy: 'Strategy',\n    selectStrategy: 'Select strategy...',\n    createNew: 'Create New',\n    createStrategy: 'Create Strategy',\n    upperPrice: 'Upper Price ($)',\n    lowerPrice: 'Lower Price ($)',\n    gridLevels: 'Grid Levels',\n    totalInvestment: 'Total Investment ($)',\n    perPurchase: '$ per Purchase',\n    interval: 'Interval (min)',\n    maxPurchases: 'Max Purchases',\n    rsiFilter: 'RSI Filter (buy only if RSI <',\n    dipFilter: 'Dip Filter (buy when it drops',\n    brokerReal: 'Broker (real execution)',\n    demo: 'Demo (no broker)',\n    real: 'Real',\n    realWarning: ' This bot will execute REAL orders with real money',\n    createBot: 'Create Bot',\n    cancel: 'Cancel',\n    start: 'Start',\n    pause: 'Pause',\n    stop: 'Stop',\n    viewChart: 'View Chart',\n    signalBot: 'Signal Bot',\n    signalBotDesc: 'Pre-built technical indicators',\n    scriptBot: 'Script Bot',\n    scriptBotDesc: 'Custom strategy with code',\n    gridBot: 'Grid Bot',\n    gridBotDesc: 'Buy and sell at price levels',\n    dcaBot: 'DCA Bot',\n    dcaBotDesc: 'Regular interval investment',\n  },\n\n  //  Trading Panel \n  trading: {\n    order: 'Order',\n    positions: 'Pos',\n    orders: 'Ord',\n    buy: 'Buy',\n    sell: 'Sell',\n    market: 'Market',\n    limit: 'Limit',\n    amount: 'Amount',\n    price: 'Price',\n    total: 'Total',\n    stopLoss: 'Stop Loss',\n    takeProfit: 'Take Profit',\n    placeOrder: 'Place Order',\n    openPanel: 'Trade',\n    hidePanel: 'Hide Panel',\n  },\n\n  //  Error Boundary \n  errors: {\n    pageError: 'Something went wrong',\n    pageErrorDesc: 'An unexpected error occurred in this section.',\n    retry: 'Retry',\n    goToDashboard: 'Go to Dashboard',\n    widgetError: 'Failed to load',\n    widgetRetry: 'Retry',\n  },\n\n  //  Common \n  common: {\n    loading: 'Loading...',\n    save: 'Save',\n    cancel: 'Cancel',\n    delete: 'Delete',\n    edit: 'Edit',\n    close: 'Close',\n    confirm: 'Confirm',\n    search: 'Search',\n    noResults: 'No results',\n    active: 'Active',\n    paused: 'Paused',\n    stopped: 'Stopped',\n    enabled: 'Enabled',\n    disabled: 'Disabled',\n    language: 'Language',\n    spanish: 'Espaol',\n    english: 'English',\n  },\n};\n\nexport default en;\n","// Kairos Trade  i18n index\nimport es from './es';\nimport en from './en';\n\nexport const translations = { es, en };\n\n/**\n * Get a nested translation value by dot-notation key.\n * e.g. t('sidebar.kairos')  'Kairos'\n * SAFETY: Always returns a string or number  never an object.\n */\nexport function getTranslation(lang, key) {\n  const dict = translations[lang] || translations.es;\n  const parts = key.split('.');\n  let val = dict;\n  for (const p of parts) {\n    val = val?.[p];\n    if (val === undefined) break;\n  }\n  // Fallback to Spanish if key not found in current lang\n  if (val === undefined) {\n    val = translations.es;\n    for (const p of parts) {\n      val = val?.[p];\n      if (val === undefined) break;\n    }\n  }\n  const result = val ?? key;\n  // Guard: never return objects/arrays  they crash React rendering\n  if (typeof result === 'string' || typeof result === 'number') {\n    return result;\n  }\n  console.warn('[i18n] Key resolved to non-primitive:', key, typeof result);\n  return key;\n}\n","// Kairos Trade  useTranslation hook\nimport { useCallback } from 'react';\nimport useStore from '../store/useStore';\nimport { getTranslation } from '../i18n';\n\n/**\n * Returns { t, lang, setLang }\n *  - t('sidebar.kairos')  translated string\n *  - lang  'es' | 'en'\n *  - setLang('en')  switches language\n */\nexport default function useTranslation() {\n  const lang = useStore((s) => s.settings?.language || 'es');\n  const updateSettings = useStore((s) => s.updateSettings);\n\n  const t = useCallback(\n    (key) => {\n      const val = getTranslation(lang, key);\n      // Double safety  ensure JSX always receives a renderable value\n      return (typeof val === 'string' || typeof val === 'number') ? val : String(key);\n    },\n    [lang]\n  );\n\n  const setLang = useCallback(\n    (newLang) => updateSettings({ language: newLang }),\n    [updateSettings]\n  );\n\n  return { t, lang, setLang };\n}\n","// Kairos Trade  Sidebar Navigation (Premium v2.2  i18n + Kairos First)\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useState } from 'react';\nimport {\n  LayoutDashboard, BarChart3, Bot, Link2, Brain, History,\n  Settings, Wallet, LogOut, ChevronLeft, ChevronRight, Zap,\n  Play, Bell, Crown, User, Sparkles, Activity, BookOpen,\n  Shield, Grid3x3, CreditCard, TrendingUp, Landmark\n} from 'lucide-react';\nimport useStore from '../../store/useStore';\nimport { isAdmin } from '../../constants';\nimport useTranslation from '../../hooks/useTranslation';\n\n// Section/item IDs only  labels come from i18n\nconst SECTIONS = [\n  {\n    labelKey: 'kairos',\n    kairos: true,\n    items: [\n      { id: 'kairos-broker', icon: TrendingUp, kairos: true },\n      { id: 'kairos-vault', icon: Landmark, kairos: true },\n      { id: 'kairos-treasury', icon: Crown, kairos: true, adminOnly: true },\n      { id: 'buy-kairos', icon: CreditCard, kairos: true },\n    ],\n  },\n  {\n    labelKey: 'principal',\n    items: [\n      { id: 'dashboard', icon: LayoutDashboard },\n      { id: 'chart', icon: BarChart3 },\n      { id: 'multichart', icon: Grid3x3 },\n      { id: 'heatmap', icon: Activity },\n      { id: 'simulator', icon: Play },\n    ],\n  },\n  {\n    labelKey: 'automation',\n    items: [\n      { id: 'bots', icon: Bot },\n      { id: 'strategies', icon: Zap },\n      { id: 'ai', icon: Sparkles, accent: true },\n    ],\n  },\n  {\n    labelKey: 'analytics',\n    items: [\n      { id: 'portfolio', icon: Activity },\n      { id: 'journal', icon: BookOpen },\n      { id: 'risk', icon: Shield },\n    ],\n  },\n  {\n    labelKey: 'management',\n    items: [\n      { id: 'brokers', icon: Link2 },\n      { id: 'history', icon: History },\n      { id: 'alerts', icon: Bell },\n    ],\n  },\n];\n\nconst BOTTOM_ITEMS = [\n  { id: 'wallet', icon: Wallet },\n  { id: 'settings', icon: Settings },\n];\n\nexport default function Sidebar({ forceMobileOpen }) {\n  const { currentPage, setPage, sidebarOpen, toggleSidebar, bots, brokers, logout, user } = useStore();\n  const [hoveredItem, setHoveredItem] = useState(null);\n  const { t, lang } = useTranslation();\n\n  // On mobile overlay, always show expanded\n  const isExpanded = forceMobileOpen || sidebarOpen;\n\n  const activeBots = bots.filter(b => b.status === 'active').length;\n  const connectedBrokers = brokers.filter(b => b.connected).length;\n  const userIsAdmin = isAdmin(user);\n\n  const getBadge = (id) => {\n    if (id === 'bots') return activeBots;\n    if (id === 'brokers') return connectedBrokers;\n    return 0;\n  };\n\n  const NavItem = ({ item, compact = false }) => {\n    const Icon = item.icon;\n    const isActive = currentPage === item.id;\n    const badge = getBadge(item.id);\n    const isHovered = hoveredItem === item.id;\n    const isKairos = item.kairos;\n    const label = t(`nav.${item.id}`);\n    const desc = t(`nav.${item.id}-desc`);\n\n    return (\n      <div className=\"relative\">\n        <button\n          onClick={() => setPage(item.id)}\n          onMouseEnter={() => setHoveredItem(item.id)}\n          onMouseLeave={() => setHoveredItem(null)}\n          title={!isExpanded ? label : undefined}\n          className={`w-full flex items-center rounded-xl transition-all duration-200 relative group\n            ${isExpanded ? 'px-3 py-3 gap-3.5' : 'px-0 py-3 justify-center'}\n            ${isActive\n              ? 'text-white'\n              : isKairos\n                ? 'text-blue-300/80 hover:text-blue-200'\n                : 'text-[var(--text-dim)] hover:text-[var(--text)]'\n            }`}\n        >\n          {/* Active background */}\n          {isActive && (\n            <div\n              className=\"absolute inset-0 rounded-xl\"\n              style={{\n                background: isKairos\n                  ? 'linear-gradient(135deg, rgba(59,130,246,0.20), rgba(37,99,235,0.10))'\n                  : item.accent\n                    ? 'linear-gradient(135deg, rgba(59,130,246,0.12), rgba(96,165,250,0.06))'\n                    : 'linear-gradient(135deg, rgba(59,130,246,0.08), rgba(59,130,246,0.02))',\n                border: isKairos\n                  ? '1px solid rgba(59,130,246,0.25)'\n                  : '1px solid rgba(59,130,246,0.1)',\n              }}\n            />\n          )}\n\n          {/* Kairos hover glow */}\n          {isKairos && !isActive && isHovered && (\n            <div\n              className=\"absolute inset-0 rounded-xl\"\n              style={{\n                background: 'linear-gradient(135deg, rgba(59,130,246,0.08), rgba(37,99,235,0.04))',\n                border: '1px solid rgba(59,130,246,0.12)',\n              }}\n            />\n          )}\n\n          {/* Active left bar */}\n          {isActive && (\n            <div\n              className=\"absolute left-0 top-1/2 -translate-y-1/2 w-[3px] h-6 rounded-r-full\"\n              style={{ background: isKairos\n                ? 'linear-gradient(180deg, #60A5FA, #2563EB)'\n                : 'linear-gradient(180deg, #60A5FA, #3B82F6)' }}\n            />\n          )}\n\n          {/* Icon container */}\n          <div className={`relative z-10 flex items-center justify-center shrink-0 rounded-lg transition-all duration-200\n            ${isExpanded ? 'w-8 h-8' : 'w-9 h-9'}\n            ${isActive\n              ? isKairos\n                ? 'bg-blue-500/20'\n                : (item.accent ? 'bg-[var(--gold)]/20' : 'bg-white/[0.06]')\n              : isKairos\n                ? 'bg-blue-500/10'\n                : 'bg-transparent group-hover:bg-white/[0.04]'\n            }`}\n          >\n            <Icon\n              size={isExpanded ? 18 : 20}\n              strokeWidth={isActive ? 2 : 1.5}\n              className={`transition-colors ${\n                isKairos\n                  ? (isActive ? 'text-blue-400' : 'text-blue-400/70')\n                  : (isActive && item.accent ? 'text-[var(--gold-light)]' : '')\n              }`}\n            />\n            {badge > 0 && !isExpanded && (\n              <span className=\"absolute -top-0.5 -right-0.5 w-[14px] h-[14px] bg-[var(--gold)] rounded-full text-[8px] font-bold text-white flex items-center justify-center\">\n                {badge}\n              </span>\n            )}\n          </div>\n\n          {/* Label + description */}\n          {isExpanded && (\n            <div className=\"relative z-10 flex-1 min-w-0 text-left\">\n              <div className=\"flex items-center gap-2\">\n                <span className={`text-[14px] truncate leading-tight ${isActive ? 'font-bold' : 'font-medium'} ${isKairos && !isActive ? 'text-blue-300/90' : ''}`}>\n                  {label}\n                </span>\n                {isKairos && (\n                  <span className=\"text-[8px] font-bold bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded-full uppercase tracking-wider\">\n                    Kairos\n                  </span>\n                )}\n                {item.accent && !isKairos && (\n                  <span className=\"text-[8px] font-bold bg-[var(--gold)]/20 text-[var(--gold-light)] px-1.5 py-0.5 rounded-full uppercase tracking-wider\">\n                    Pro\n                  </span>\n                )}\n                {badge > 0 && (\n                  <span className=\"ml-auto text-[10px] font-semibold bg-[var(--gold)]/12 text-[var(--gold)] rounded-full px-2 py-0.5 min-w-[22px] text-center\">\n                    {badge}\n                  </span>\n                )}\n              </div>\n              {!compact && desc && !desc.startsWith('nav.') && (\n                <span className={`text-[11px] leading-tight truncate block mt-0.5 transition-colors\n                  ${isKairos\n                    ? (isActive ? 'text-blue-300/60' : 'text-blue-400/40')\n                    : (isActive ? 'text-[var(--text-dim)]' : 'text-[var(--text-dim)]/50')\n                  }`}>\n                  {desc}\n                </span>\n              )}\n            </div>\n          )}\n        </button>\n\n        {/* Tooltip for collapsed mode */}\n        <AnimatePresence>\n          {!isExpanded && isHovered && (\n            <motion.div\n              initial={{ opacity: 0, x: -4 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -4 }}\n              transition={{ duration: 0.15 }}\n              className=\"absolute left-full ml-3 top-1/2 -translate-y-1/2 z-50 pointer-events-none\"\n            >\n              <div className=\"bg-[var(--dark-3)] border border-[var(--border-light)] px-3 py-2 rounded-lg shadow-xl\">\n                <p className=\"text-xs font-semibold text-[var(--text)] whitespace-nowrap\">{label}</p>\n                {desc && !desc.startsWith('nav.') && <p className=\"text-[10px] text-[var(--text-dim)] whitespace-nowrap\">{desc}</p>}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    );\n  };\n\n  const SectionLabel = ({ label, kairos = false }) => (\n    isExpanded ? (\n      <div className=\"flex items-center gap-2 px-3 mb-2.5 mt-1\">\n        <p className={`text-[11px] font-bold uppercase tracking-[0.14em] whitespace-nowrap\n          ${kairos ? 'text-blue-400/80' : 'text-[var(--text-dim)]/60'}`}>\n          {label}\n        </p>\n        <div className={`flex-1 h-px ${kairos ? 'bg-blue-500/20' : 'bg-[var(--border)]/50'}`} />\n      </div>\n    ) : (\n      <div className={`mx-auto w-6 h-px my-3 ${kairos ? 'bg-blue-500/30' : 'bg-[var(--border)]/60'}`} />\n    )\n  );\n\n  return (\n    <motion.aside\n      animate={{ width: isExpanded ? 300 : 72 }}\n      transition={{ duration: 0.25, ease: [0.4, 0, 0.2, 1] }}\n      className=\"h-full flex flex-col relative shrink-0\"\n      style={{\n        borderRight: '1px solid var(--border)',\n        background: 'linear-gradient(180deg, #0E1015 0%, #08090C 100%)',\n      }}\n    >\n      {/* Logo area */}\n      <div\n        className={`flex items-center shrink-0 ${isExpanded ? 'px-7 gap-3.5 h-[68px]' : 'justify-center h-[68px]'}`}\n        style={{ borderBottom: '1px solid rgba(30,34,45,0.6)' }}\n      >\n        <img src=\"/kairos-logo.png\" alt=\"Kairos\" className=\"w-10 h-10 object-contain shrink-0\" />\n        {isExpanded && (\n          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.1, duration: 0.2 }}>\n            <div className=\"flex flex-col\">\n              <div className=\"flex items-baseline gap-2\">\n                <span className=\"text-[17px] font-bold text-[var(--text)] tracking-wide\">KAIROS</span>\n                <span className=\"text-[11px] font-bold text-[var(--gold)] tracking-widest\">TRADE</span>\n              </div>\n              <span className=\"text-[10px] text-[var(--text-dim)]/60 font-medium tracking-wider\">BY KAIROS 777</span>\n            </div>\n          </motion.div>\n        )}\n      </div>\n\n      {/* User profile card */}\n      {isExpanded && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"mx-5 mt-4 mb-2 p-3.5 rounded-xl\"\n          style={{\n            background: 'linear-gradient(135deg, rgba(59,130,246,0.04), rgba(26,29,38,0.5))',\n            border: '1px solid rgba(59,130,246,0.06)',\n          }}\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-9 h-9 rounded-lg bg-[var(--dark-4)] flex items-center justify-center\">\n              <User size={16} className=\"text-[var(--text-dim)]\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-semibold text-[var(--text)] truncate\">{user?.name || 'Trader'}</p>\n              <div className=\"flex items-center gap-1.5 mt-0.5\">\n                {userIsAdmin ? (\n                  <>\n                    <Shield size={10} className=\"text-emerald-400\" />\n                    <span className=\"text-[10px] font-bold text-emerald-400 uppercase tracking-wider\">Admin</span>\n                  </>\n                ) : (\n                  <>\n                    <Crown size={10} className=\"text-[var(--gold)]\" />\n                    <span className=\"text-[10px] font-bold text-[var(--gold)] uppercase tracking-wider\">{user?.plan === 'enterprise' ? 'Enterprise' : 'Free Plan'}</span>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Main Navigation */}\n      <nav className={`flex-1 overflow-y-auto py-3 ${isExpanded ? 'px-5' : 'px-2'}`}\n        style={{ scrollbarWidth: 'none' }}>\n        {SECTIONS.map((section, si) => {\n          const visibleItems = section.items.filter(item => !item.adminOnly || userIsAdmin);\n          if (visibleItems.length === 0) return null;\n          return (\n            <div key={section.labelKey} className={si > 0 ? 'mt-6' : 'mt-1'}>\n              <SectionLabel label={t(`sidebar.${section.labelKey}`)} kairos={section.kairos} />\n              <div className=\"space-y-1\">\n                {visibleItems.map(item => <NavItem key={item.id} item={item} />)}\n              </div>\n            </div>\n          );\n        })}\n      </nav>\n\n      {/* Bottom section */}\n      <div\n        className={`py-3 ${isExpanded ? 'px-5' : 'px-2'}`}\n        style={{ borderTop: '1px solid rgba(30,34,45,0.6)' }}\n      >\n        <div className=\"space-y-0.5\">\n          {BOTTOM_ITEMS.map(item => <NavItem key={item.id} item={item} compact />)}\n        </div>\n\n        {/* Logout */}\n        <button\n          onClick={logout}\n          onMouseEnter={() => setHoveredItem('logout')}\n          onMouseLeave={() => setHoveredItem(null)}\n          title={!isExpanded ? t('nav.settings') : undefined}\n          className={`w-full flex items-center rounded-xl text-[var(--text-dim)] hover:text-[var(--red)] transition-all duration-200 mt-1 relative\n            ${isExpanded ? 'px-3 py-2.5 gap-3' : 'px-0 py-2.5 justify-center'}\n            hover:bg-[var(--red)]/[0.06]`}\n        >\n          <div className={`flex items-center justify-center shrink-0 rounded-lg ${isExpanded ? 'w-8 h-8' : 'w-9 h-9'}`}>\n            <LogOut size={isExpanded ? 16 : 18} strokeWidth={1.5} />\n          </div>\n          {isExpanded && <span className=\"text-[14px] font-medium\">{lang === 'es' ? 'Cerrar Sesin' : 'Log Out'}</span>}\n\n          {/* Logout tooltip */}\n          <AnimatePresence>\n            {!isExpanded && hoveredItem === 'logout' && (\n              <motion.div\n                initial={{ opacity: 0, x: -4 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -4 }}\n                transition={{ duration: 0.15 }}\n                className=\"absolute left-full ml-3 top-1/2 -translate-y-1/2 z-50 pointer-events-none\"\n              >\n                <div className=\"bg-[var(--dark-3)] border border-[var(--border-light)] px-3 py-2 rounded-lg shadow-xl\">\n                  <p className=\"text-xs font-semibold text-[var(--red)] whitespace-nowrap\">{lang === 'es' ? 'Cerrar Sesin' : 'Log Out'}</p>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </button>\n      </div>\n\n      {/* Collapse toggle  desktop only */}\n      <button\n        onClick={toggleSidebar}\n        className=\"absolute -right-3 top-7 w-6 h-6 bg-[var(--dark-3)] border border-[var(--border)] rounded-full flex items-center justify-center text-[var(--text-dim)] hover:text-[var(--gold)] hover:border-[var(--gold)]/30 hover:bg-[var(--dark-4)] transition-all z-10 shadow-lg hidden md:flex\"\n      >\n        {isExpanded ? <ChevronLeft size={11} /> : <ChevronRight size={11} />}\n      </button>\n    </motion.aside>\n  );\n}\n","// Kairos Trade  Pair Conversion Utility\n// KAIROS is a USD-pegged stablecoin (1 KAIROS = 1 USD)\n// Display: BTCKAIROS, ETHKAIROS, etc.\n// API (Binance): BTCUSDT, ETHUSDT, etc.\n\nconst QUOTE_DISPLAY = 'KAIROS';\nconst QUOTE_API = 'USDT';\n\n/**\n * Convert display pair (BTCKAIROS)  API pair (BTCUSDT)\n */\nexport function toApiPair(displayPair) {\n  if (!displayPair) return 'BTCUSDT';\n  if (displayPair.endsWith(QUOTE_DISPLAY)) {\n    return displayPair.replace(QUOTE_DISPLAY, QUOTE_API);\n  }\n  // Already an API pair or unknown format\n  return displayPair;\n}\n\n/**\n * Convert API pair (BTCUSDT)  display pair (BTCKAIROS)\n */\nexport function toDisplayPair(apiPair) {\n  if (!apiPair) return 'BTCKAIROS';\n  if (apiPair.endsWith(QUOTE_API)) {\n    return apiPair.replace(QUOTE_API, QUOTE_DISPLAY);\n  }\n  return apiPair;\n}\n\n/**\n * Get the base asset from a display pair\n * e.g. BTCKAIROS  BTC, ETHKAIROS  ETH\n */\nexport function getBase(pair) {\n  if (!pair) return 'BTC';\n  if (pair.endsWith(QUOTE_DISPLAY)) return pair.replace(QUOTE_DISPLAY, '');\n  if (pair.endsWith(QUOTE_API)) return pair.replace(QUOTE_API, '');\n  return pair.slice(0, 3);\n}\n\n/**\n * Format pair for display with separator\n * e.g. BTCKAIROS  BTC / KAIROS\n */\nexport function formatPair(pair) {\n  const base = getBase(pair);\n  return `${base} / ${QUOTE_DISPLAY}`;\n}\n\n/**\n * Check if pair is a KAIROS pair\n */\nexport function isKairosPair(pair) {\n  return pair?.endsWith(QUOTE_DISPLAY);\n}\n\nexport const QUOTE = QUOTE_DISPLAY;\n","// Kairos Trade  Top Header Bar (Premium v2.1  i18n + Mobile Responsive)\nimport { Search, Bell, Wifi, WifiOff, Brain, TrendingUp, TrendingDown, Globe, Volume2, Menu, X } from 'lucide-react';\nimport { useState } from 'react';\nimport useStore from '../../store/useStore';\nimport { getBase, formatPair, QUOTE } from '../../utils/pairUtils';\nimport useTranslation from '../../hooks/useTranslation';\n\nexport default function Header({ onMenuToggle, mobileMenuOpen }) {\n  const { selectedPair, currentPrice, priceChange24h, toggleAiPanel, aiPanelOpen, brokers, activeBroker } = useStore();\n  const connected = brokers.some(b => b.connected);\n  const connectedBroker = activeBroker || brokers.find(b => b.connected);\n  const [searchFocused, setSearchFocused] = useState(false);\n  const { t, lang, setLang } = useTranslation();\n\n  return (\n    <header\n      className=\"h-[56px] shrink-0 flex items-center justify-between px-3 md:px-5\"\n      style={{\n        borderBottom: '1px solid rgba(26,29,38,0.6)',\n        background: 'linear-gradient(180deg, rgba(14,16,21,0.95) 0%, rgba(8,9,12,0.95) 100%)',\n        backdropFilter: 'blur(16px)',\n      }}\n    >\n      {/* Left: Hamburger (mobile) + Pair info */}\n      <div className=\"flex items-center gap-2 md:gap-3 min-w-0 flex-1 overflow-hidden\">\n        {/* Mobile hamburger */}\n        <button\n          onClick={onMenuToggle}\n          className=\"md:hidden p-2 -ml-1 rounded-lg text-[var(--text-dim)] hover:text-[var(--text)] hover:bg-white/[0.04] transition-all shrink-0\"\n        >\n          {mobileMenuOpen ? <X size={20} /> : <Menu size={20} />}\n        </button>\n\n        <div className=\"flex items-center gap-2 md:gap-2.5 min-w-0\">\n          {/* Pair badge */}\n          <div className=\"flex items-center gap-1.5 md:gap-2\">\n            <div className=\"w-7 h-7 rounded-lg flex items-center justify-center text-[10px] font-bold shrink-0\"\n              style={{ background: 'linear-gradient(135deg, rgba(59,130,246,0.12), rgba(59,130,246,0.04))', border: '1px solid rgba(59,130,246,0.1)' }}>\n              <span className=\"text-[var(--gold)]\">{getBase(selectedPair).slice(0, 3)}</span>\n            </div>\n            <div className=\"min-w-0\">\n              <h2 className=\"text-[13px] md:text-[14px] font-bold text-[var(--text)] tracking-wide leading-none truncate\">{formatPair(selectedPair)}</h2>\n              <span className=\"text-[9px] text-[var(--text-dim)]/60 font-medium hidden sm:inline\">{t('header.spotTrading')}</span>\n            </div>\n          </div>\n\n          {/* Divider  hide on very small screens */}\n          <div className=\"w-px h-7 bg-[var(--border)]/50 shrink-0 hidden sm:block\" />\n\n          {/* Price */}\n          {currentPrice && (\n            <div className=\"shrink-0\">\n              <span className=\"text-[14px] md:text-[16px] font-mono font-bold text-[var(--text)] leading-none whitespace-nowrap\">\n                ${currentPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n              </span>\n            </div>\n          )}\n\n          {/* Change badge */}\n          {priceChange24h !== null && (\n            <div className={`flex items-center gap-1 text-[10px] md:text-xs font-mono font-semibold px-1.5 md:px-2.5 py-1 rounded-lg\n              ${priceChange24h >= 0\n                ? 'text-[var(--green)] bg-[var(--green)]/[0.08]'\n                : 'text-[var(--red)] bg-[var(--red)]/[0.08]'\n              }`}\n              style={{ border: `1px solid ${priceChange24h >= 0 ? 'rgba(14,203,129,0.12)' : 'rgba(246,70,93,0.12)'}` }}\n            >\n              {priceChange24h >= 0 ? <TrendingUp size={12} /> : <TrendingDown size={12} />}\n              {priceChange24h >= 0 ? '+' : ''}{priceChange24h?.toFixed(2)}%\n            </div>\n          )}\n\n          {/* 24h label  desktop only */}\n          <span className=\"text-[10px] text-[var(--text-dim)]/40 font-medium shrink-0 hidden lg:inline\">24h</span>\n        </div>\n      </div>\n\n      {/* Right: Actions */}\n      <div className=\"flex items-center gap-1.5 md:gap-2 shrink-0 ml-2 md:ml-3\">\n        {/* Connection status  compact on mobile */}\n        <div className={`flex items-center gap-1 md:gap-1.5 text-[11px] px-2 md:px-3 py-1.5 rounded-lg transition-all\n          ${connected\n            ? 'text-[var(--green)] bg-[var(--green)]/[0.06] border border-[var(--green)]/10'\n            : 'text-[var(--text-dim)] bg-white/[0.02] border border-[var(--border)]/50'\n          }`}>\n          {connected ? <Wifi size={12} /> : <WifiOff size={12} />}\n          <span className=\"font-semibold truncate max-w-[60px] md:max-w-[100px] hidden sm:inline\">{connected && connectedBroker ? connectedBroker.name || connectedBroker.broker : 'Demo'}</span>\n          {connected && <span className=\"w-1.5 h-1.5 rounded-full bg-[var(--green)] animate-pulse\" />}\n        </div>\n\n        {/* Language toggle */}\n        <button\n          onClick={() => setLang(lang === 'es' ? 'en' : 'es')}\n          className=\"flex items-center gap-1 px-2 md:px-2.5 py-1.5 rounded-lg text-[11px] font-bold transition-all border text-[var(--text-dim)] hover:text-[var(--text)] bg-white/[0.02] border-[var(--border)]/50 hover:border-[var(--gold)]/20\"\n          title={t('common.language')}\n        >\n          <Globe size={13} />\n          <span className=\"hidden sm:inline\">{lang === 'es' ? 'ES' : 'EN'}</span>\n        </button>\n\n        {/* AI toggle */}\n        <button\n          onClick={toggleAiPanel}\n          className={`flex items-center gap-1 md:gap-1.5 px-2 md:px-3 py-1.5 rounded-lg text-[11px] font-semibold transition-all border\n            ${aiPanelOpen\n              ? 'bg-[var(--gold)]/10 text-[var(--gold)] border-[var(--gold)]/15'\n              : 'text-[var(--text-dim)] hover:text-[var(--text)] bg-white/[0.02] border-[var(--border)]/50 hover:border-[var(--gold)]/20'\n            }`}\n          title=\"Kairos AI\"\n        >\n          <Brain size={13} />\n          <span className=\"hidden sm:inline\">{t('header.ai')}</span>\n          {aiPanelOpen && <span className=\"w-1.5 h-1.5 rounded-full bg-[var(--gold)] animate-pulse\" />}\n        </button>\n\n        {/* Notifications */}\n        <button className=\"p-2 rounded-lg text-[var(--text-dim)] hover:text-[var(--text)] bg-white/[0.02] border border-[var(--border)]/50 hover:border-[var(--border)] transition-all relative\">\n          <Bell size={15} />\n          <span className=\"absolute top-1 right-1 w-2 h-2 bg-[var(--gold)] rounded-full shadow-[0_0_6px_rgba(59,130,246,0.4)]\" />\n        </button>\n      </div>\n    </header>\n  );\n}\n","// Kairos Trade  Error Boundary with Crash Recovery (i18n)\nimport { Component } from 'react';\nimport { AlertTriangle, RefreshCw, Home } from 'lucide-react';\nimport { getTranslation } from '../../i18n';\nimport useStore from '../../store/useStore';\n\nexport default class ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({ errorInfo });\n    // Log to console in dev, could send to monitoring service\n    console.error('ErrorBoundary caught:', error, errorInfo);\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null });\n  };\n\n  handleGoHome = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null });\n    // Reset to dashboard\n    try {\n      useStore.getState().setPage('dashboard');\n    } catch {\n      window.location.reload();\n    }\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const { level = 'page' } = this.props;\n      let t;\n      try {\n        const lang = useStore.getState().settings?.language || 'es';\n        t = (key) => {\n          const val = getTranslation(lang, key);\n          return (typeof val === 'string') ? val : key;\n        };\n      } catch {\n        t = (key) => key;\n      }\n\n      // Inline/widget level  minimal error\n      if (level === 'widget') {\n        return (\n          <div className=\"flex items-center justify-center p-4 rounded-xl border border-[var(--red)]/20 bg-[var(--red)]/[0.04]\">\n            <div className=\"flex items-center gap-3\">\n              <AlertTriangle size={16} className=\"text-[var(--red)] shrink-0\" />\n              <span className=\"text-xs text-[var(--text-dim)]\">{t('errors.widgetError')}</span>\n              <button\n                onClick={this.handleRetry}\n                className=\"flex items-center gap-1.5 text-xs font-semibold text-[var(--gold)] hover:text-[var(--gold-light)] transition-colors\"\n              >\n                <RefreshCw size={12} /> {t('errors.widgetRetry')}\n              </button>\n            </div>\n          </div>\n        );\n      }\n\n      // Page level  full crash recovery screen\n      return (\n        <div className=\"flex-1 flex items-center justify-center p-6\" style={{ background: 'var(--dark)' }}>\n          <div className=\"max-w-md w-full text-center\">\n            {/* Icon */}\n            <div className=\"w-16 h-16 mx-auto mb-6 rounded-2xl flex items-center justify-center\"\n              style={{\n                background: 'linear-gradient(135deg, rgba(255,71,87,0.12), rgba(255,71,87,0.04))',\n                border: '1px solid rgba(255,71,87,0.15)',\n              }}>\n              <AlertTriangle size={28} className=\"text-[var(--red)]\" />\n            </div>\n\n            {/* Title */}\n            <h2 className=\"text-xl font-bold text-[var(--text)] mb-2\">{t('errors.pageError')}</h2>\n            <p className=\"text-sm text-[var(--text-dim)] mb-6 leading-relaxed\">\n              {t('errors.pageErrorDesc')}\n            </p>\n\n            {/* Error detail (collapsed) */}\n            {this.state.error && (\n              <details className=\"mb-6 text-left\">\n                <summary className=\"text-xs text-[var(--text-dim)] cursor-pointer hover:text-[var(--text-secondary)] transition-colors\">\n                  Detalles tcnicos\n                </summary>\n                <pre className=\"mt-2 p-3 rounded-lg text-[10px] text-[var(--red)]/80 overflow-auto max-h-32\"\n                  style={{ background: 'var(--surface)', border: '1px solid var(--border)' }}>\n                  {this.state.error.toString()}\n                  {this.state.errorInfo?.componentStack?.slice(0, 500)}\n                </pre>\n              </details>\n            )}\n\n            {/* Action buttons */}\n            <div className=\"flex items-center justify-center gap-3\">\n              <button\n                onClick={this.handleRetry}\n                className=\"btn-gold px-5 py-2.5 rounded-xl text-sm flex items-center gap-2\"\n              >\n                <RefreshCw size={15} /> {t('errors.retry')}\n              </button>\n              <button\n                onClick={this.handleGoHome}\n                className=\"px-5 py-2.5 rounded-xl text-sm font-semibold text-[var(--text-dim)] hover:text-[var(--text)] transition-colors flex items-center gap-2\"\n                style={{ background: 'var(--surface)', border: '1px solid var(--border)' }}\n              >\n                <Home size={15} /> {t('errors.goToDashboard')}\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","/* Do NOT modify this file; see /src.ts/_admin/update-version.ts */\n/**\n *  The current version of Ethers.\n */\nexport const version = \"6.16.0\";\n//# sourceMappingURL=_version.js.map","/**\n *  Property helper functions.\n *\n *  @_subsection api/utils:Properties  [about-properties]\n */\nfunction checkType(value, type, name) {\n    const types = type.split(\"|\").map(t => t.trim());\n    for (let i = 0; i < types.length; i++) {\n        switch (type) {\n            case \"any\":\n                return;\n            case \"bigint\":\n            case \"boolean\":\n            case \"number\":\n            case \"string\":\n                if (typeof (value) === type) {\n                    return;\n                }\n        }\n    }\n    const error = new Error(`invalid value for type ${type}`);\n    error.code = \"INVALID_ARGUMENT\";\n    error.argument = `value.${name}`;\n    error.value = value;\n    throw error;\n}\n/**\n *  Resolves to a new object that is a copy of %%value%%, but with all\n *  values resolved.\n */\nexport async function resolveProperties(value) {\n    const keys = Object.keys(value);\n    const results = await Promise.all(keys.map((k) => Promise.resolve(value[k])));\n    return results.reduce((accum, v, index) => {\n        accum[keys[index]] = v;\n        return accum;\n    }, {});\n}\n/**\n *  Assigns the %%values%% to %%target%% as read-only values.\n *\n *  It %%types%% is specified, the values are checked.\n */\nexport function defineProperties(target, values, types) {\n    for (let key in values) {\n        let value = values[key];\n        const type = (types ? types[key] : null);\n        if (type) {\n            checkType(value, type, key);\n        }\n        Object.defineProperty(target, key, { enumerable: true, value, writable: false });\n    }\n}\n//# sourceMappingURL=properties.js.map","/**\n *  All errors in ethers include properties to ensure they are both\n *  human-readable (i.e. ``.message``) and machine-readable (i.e. ``.code``).\n *\n *  The [[isError]] function can be used to check the error ``code`` and\n *  provide a type guard for the properties present on that error interface.\n *\n *  @_section: api/utils/errors:Errors  [about-errors]\n */\nimport { version } from \"../_version.js\";\nimport { defineProperties } from \"./properties.js\";\nfunction stringify(value, seen) {\n    if (value == null) {\n        return \"null\";\n    }\n    if (seen == null) {\n        seen = new Set();\n    }\n    if (typeof (value) === \"object\") {\n        if (seen.has(value)) {\n            return \"[Circular]\";\n        }\n        seen.add(value);\n    }\n    if (Array.isArray(value)) {\n        return \"[ \" + (value.map((v) => stringify(v, seen))).join(\", \") + \" ]\";\n    }\n    if (value instanceof Uint8Array) {\n        const HEX = \"0123456789abcdef\";\n        let result = \"0x\";\n        for (let i = 0; i < value.length; i++) {\n            result += HEX[value[i] >> 4];\n            result += HEX[value[i] & 0xf];\n        }\n        return result;\n    }\n    if (typeof (value) === \"object\" && typeof (value.toJSON) === \"function\") {\n        return stringify(value.toJSON(), seen);\n    }\n    switch (typeof (value)) {\n        case \"boolean\":\n        case \"number\":\n        case \"symbol\":\n            return value.toString();\n        case \"bigint\":\n            return BigInt(value).toString();\n        case \"string\":\n            return JSON.stringify(value);\n        case \"object\": {\n            const keys = Object.keys(value);\n            keys.sort();\n            return \"{ \" + keys.map((k) => `${stringify(k, seen)}: ${stringify(value[k], seen)}`).join(\", \") + \" }\";\n        }\n    }\n    return `[ COULD NOT SERIALIZE ]`;\n}\n/**\n *  Returns true if the %%error%% matches an error thrown by ethers\n *  that matches the error %%code%%.\n *\n *  In TypeScript environments, this can be used to check that %%error%%\n *  matches an EthersError type, which means the expected properties will\n *  be set.\n *\n *  @See [ErrorCodes](api:ErrorCode)\n *  @example\n *    try {\n *      // code....\n *    } catch (e) {\n *      if (isError(e, \"CALL_EXCEPTION\")) {\n *          // The Type Guard has validated this object\n *          console.log(e.data);\n *      }\n *    }\n */\nexport function isError(error, code) {\n    return (error && error.code === code);\n}\n/**\n *  Returns true if %%error%% is a [[CallExceptionError].\n */\nexport function isCallException(error) {\n    return isError(error, \"CALL_EXCEPTION\");\n}\n/**\n *  Returns a new Error configured to the format ethers emits errors, with\n *  the %%message%%, [[api:ErrorCode]] %%code%% and additional properties\n *  for the corresponding EthersError.\n *\n *  Each error in ethers includes the version of ethers, a\n *  machine-readable [[ErrorCode]], and depending on %%code%%, additional\n *  required properties. The error message will also include the %%message%%,\n *  ethers version, %%code%% and all additional properties, serialized.\n */\nexport function makeError(message, code, info) {\n    let shortMessage = message;\n    {\n        const details = [];\n        if (info) {\n            if (\"message\" in info || \"code\" in info || \"name\" in info) {\n                throw new Error(`value will overwrite populated values: ${stringify(info)}`);\n            }\n            for (const key in info) {\n                if (key === \"shortMessage\") {\n                    continue;\n                }\n                const value = (info[key]);\n                //                try {\n                details.push(key + \"=\" + stringify(value));\n                //                } catch (error: any) {\n                //                console.log(\"MMM\", error.message);\n                //                    details.push(key + \"=[could not serialize object]\");\n                //                }\n            }\n        }\n        details.push(`code=${code}`);\n        details.push(`version=${version}`);\n        if (details.length) {\n            message += \" (\" + details.join(\", \") + \")\";\n        }\n    }\n    let error;\n    switch (code) {\n        case \"INVALID_ARGUMENT\":\n            error = new TypeError(message);\n            break;\n        case \"NUMERIC_FAULT\":\n        case \"BUFFER_OVERRUN\":\n            error = new RangeError(message);\n            break;\n        default:\n            error = new Error(message);\n    }\n    defineProperties(error, { code });\n    if (info) {\n        Object.assign(error, info);\n    }\n    if (error.shortMessage == null) {\n        defineProperties(error, { shortMessage });\n    }\n    return error;\n}\n/**\n *  Throws an EthersError with %%message%%, %%code%% and additional error\n *  %%info%% when %%check%% is falsish..\n *\n *  @see [[api:makeError]]\n */\nexport function assert(check, message, code, info) {\n    if (!check) {\n        throw makeError(message, code, info);\n    }\n}\n/**\n *  A simple helper to simply ensuring provided arguments match expected\n *  constraints, throwing if not.\n *\n *  In TypeScript environments, the %%check%% has been asserted true, so\n *  any further code does not need additional compile-time checks.\n */\nexport function assertArgument(check, message, name, value) {\n    assert(check, message, \"INVALID_ARGUMENT\", { argument: name, value: value });\n}\nexport function assertArgumentCount(count, expectedCount, message) {\n    if (message == null) {\n        message = \"\";\n    }\n    if (message) {\n        message = \": \" + message;\n    }\n    assert(count >= expectedCount, \"missing argument\" + message, \"MISSING_ARGUMENT\", {\n        count: count,\n        expectedCount: expectedCount\n    });\n    assert(count <= expectedCount, \"too many arguments\" + message, \"UNEXPECTED_ARGUMENT\", {\n        count: count,\n        expectedCount: expectedCount\n    });\n}\nconst _normalizeForms = [\"NFD\", \"NFC\", \"NFKD\", \"NFKC\"].reduce((accum, form) => {\n    try {\n        // General test for normalize\n        /* c8 ignore start */\n        if (\"test\".normalize(form) !== \"test\") {\n            throw new Error(\"bad\");\n        }\n        ;\n        /* c8 ignore stop */\n        if (form === \"NFD\") {\n            const check = String.fromCharCode(0xe9).normalize(\"NFD\");\n            const expected = String.fromCharCode(0x65, 0x0301);\n            /* c8 ignore start */\n            if (check !== expected) {\n                throw new Error(\"broken\");\n            }\n            /* c8 ignore stop */\n        }\n        accum.push(form);\n    }\n    catch (error) { }\n    return accum;\n}, []);\n/**\n *  Throws if the normalization %%form%% is not supported.\n */\nexport function assertNormalize(form) {\n    assert(_normalizeForms.indexOf(form) >= 0, \"platform missing String.prototype.normalize\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"String.prototype.normalize\", info: { form }\n    });\n}\n/**\n *  Many classes use file-scoped values to guard the constructor,\n *  making it effectively private. This facilitates that pattern\n *  by ensuring the %%givenGaurd%% matches the file-scoped %%guard%%,\n *  throwing if not, indicating the %%className%% if provided.\n */\nexport function assertPrivate(givenGuard, guard, className) {\n    if (className == null) {\n        className = \"\";\n    }\n    if (givenGuard !== guard) {\n        let method = className, operation = \"new\";\n        if (className) {\n            method += \".\";\n            operation += \" \" + className;\n        }\n        assert(false, `private constructor; use ${method}from* methods`, \"UNSUPPORTED_OPERATION\", {\n            operation\n        });\n    }\n}\n//# sourceMappingURL=errors.js.map","/**\n *  Some data helpers.\n *\n *\n *  @_subsection api/utils:Data Helpers  [about-data]\n */\nimport { assert, assertArgument } from \"./errors.js\";\nfunction _getBytes(value, name, copy) {\n    if (value instanceof Uint8Array) {\n        if (copy) {\n            return new Uint8Array(value);\n        }\n        return value;\n    }\n    if (typeof (value) === \"string\" && (value.length % 2) === 0 &&\n        value.match(/^0x[0-9a-f]*$/i)) {\n        const result = new Uint8Array((value.length - 2) / 2);\n        let offset = 2;\n        for (let i = 0; i < result.length; i++) {\n            result[i] = parseInt(value.substring(offset, offset + 2), 16);\n            offset += 2;\n        }\n        return result;\n    }\n    assertArgument(false, \"invalid BytesLike value\", name || \"value\", value);\n}\n/**\n *  Get a typed Uint8Array for %%value%%. If already a Uint8Array\n *  the original %%value%% is returned; if a copy is required use\n *  [[getBytesCopy]].\n *\n *  @see: getBytesCopy\n */\nexport function getBytes(value, name) {\n    return _getBytes(value, name, false);\n}\n/**\n *  Get a typed Uint8Array for %%value%%, creating a copy if necessary\n *  to prevent any modifications of the returned value from being\n *  reflected elsewhere.\n *\n *  @see: getBytes\n */\nexport function getBytesCopy(value, name) {\n    return _getBytes(value, name, true);\n}\n/**\n *  Returns true if %%value%% is a valid [[HexString]].\n *\n *  If %%length%% is ``true`` or a //number//, it also checks that\n *  %%value%% is a valid [[DataHexString]] of %%length%% (if a //number//)\n *  bytes of data (e.g. ``0x1234`` is 2 bytes).\n */\nexport function isHexString(value, length) {\n    if (typeof (value) !== \"string\" || !value.match(/^0x[0-9A-Fa-f]*$/)) {\n        return false;\n    }\n    if (typeof (length) === \"number\" && value.length !== 2 + 2 * length) {\n        return false;\n    }\n    if (length === true && (value.length % 2) !== 0) {\n        return false;\n    }\n    return true;\n}\n/**\n *  Returns true if %%value%% is a valid representation of arbitrary\n *  data (i.e. a valid [[DataHexString]] or a Uint8Array).\n */\nexport function isBytesLike(value) {\n    return (isHexString(value, true) || (value instanceof Uint8Array));\n}\nconst HexCharacters = \"0123456789abcdef\";\n/**\n *  Returns a [[DataHexString]] representation of %%data%%.\n */\nexport function hexlify(data) {\n    const bytes = getBytes(data);\n    let result = \"0x\";\n    for (let i = 0; i < bytes.length; i++) {\n        const v = bytes[i];\n        result += HexCharacters[(v & 0xf0) >> 4] + HexCharacters[v & 0x0f];\n    }\n    return result;\n}\n/**\n *  Returns a [[DataHexString]] by concatenating all values\n *  within %%data%%.\n */\nexport function concat(datas) {\n    return \"0x\" + datas.map((d) => hexlify(d).substring(2)).join(\"\");\n}\n/**\n *  Returns the length of %%data%%, in bytes.\n */\nexport function dataLength(data) {\n    if (isHexString(data, true)) {\n        return (data.length - 2) / 2;\n    }\n    return getBytes(data).length;\n}\n/**\n *  Returns a [[DataHexString]] by slicing %%data%% from the %%start%%\n *  offset to the %%end%% offset.\n *\n *  By default %%start%% is 0 and %%end%% is the length of %%data%%.\n */\nexport function dataSlice(data, start, end) {\n    const bytes = getBytes(data);\n    if (end != null && end > bytes.length) {\n        assert(false, \"cannot slice beyond data bounds\", \"BUFFER_OVERRUN\", {\n            buffer: bytes, length: bytes.length, offset: end\n        });\n    }\n    return hexlify(bytes.slice((start == null) ? 0 : start, (end == null) ? bytes.length : end));\n}\n/**\n *  Return the [[DataHexString]] result by stripping all **leading**\n ** zero bytes from %%data%%.\n */\nexport function stripZerosLeft(data) {\n    let bytes = hexlify(data).substring(2);\n    while (bytes.startsWith(\"00\")) {\n        bytes = bytes.substring(2);\n    }\n    return \"0x\" + bytes;\n}\nfunction zeroPad(data, length, left) {\n    const bytes = getBytes(data);\n    assert(length >= bytes.length, \"padding exceeds data length\", \"BUFFER_OVERRUN\", {\n        buffer: new Uint8Array(bytes),\n        length: length,\n        offset: length + 1\n    });\n    const result = new Uint8Array(length);\n    result.fill(0);\n    if (left) {\n        result.set(bytes, length - bytes.length);\n    }\n    else {\n        result.set(bytes, 0);\n    }\n    return hexlify(result);\n}\n/**\n *  Return the [[DataHexString]] of %%data%% padded on the **left**\n *  to %%length%% bytes.\n *\n *  If %%data%% already exceeds %%length%%, a [[BufferOverrunError]] is\n *  thrown.\n *\n *  This pads data the same as **values** are in Solidity\n *  (e.g. ``uint128``).\n */\nexport function zeroPadValue(data, length) {\n    return zeroPad(data, length, true);\n}\n/**\n *  Return the [[DataHexString]] of %%data%% padded on the **right**\n *  to %%length%% bytes.\n *\n *  If %%data%% already exceeds %%length%%, a [[BufferOverrunError]] is\n *  thrown.\n *\n *  This pads data the same as **bytes** are in Solidity\n *  (e.g. ``bytes16``).\n */\nexport function zeroPadBytes(data, length) {\n    return zeroPad(data, length, false);\n}\n//# sourceMappingURL=data.js.map","/**\n *  Some mathematic operations.\n *\n *  @_subsection: api/utils:Math Helpers  [about-maths]\n */\nimport { hexlify, isBytesLike } from \"./data.js\";\nimport { assert, assertArgument } from \"./errors.js\";\nconst BN_0 = BigInt(0);\nconst BN_1 = BigInt(1);\n//const BN_Max256 = (BN_1 << BigInt(256)) - BN_1;\n// IEEE 754 support 53-bits of mantissa\nconst maxValue = 0x1fffffffffffff;\n/**\n *  Convert %%value%% from a twos-compliment representation of %%width%%\n *  bits to its value.\n *\n *  If the highest bit is ``1``, the result will be negative.\n */\nexport function fromTwos(_value, _width) {\n    const value = getUint(_value, \"value\");\n    const width = BigInt(getNumber(_width, \"width\"));\n    assert((value >> width) === BN_0, \"overflow\", \"NUMERIC_FAULT\", {\n        operation: \"fromTwos\", fault: \"overflow\", value: _value\n    });\n    // Top bit set; treat as a negative value\n    if (value >> (width - BN_1)) {\n        const mask = (BN_1 << width) - BN_1;\n        return -(((~value) & mask) + BN_1);\n    }\n    return value;\n}\n/**\n *  Convert %%value%% to a twos-compliment representation of\n *  %%width%% bits.\n *\n *  The result will always be positive.\n */\nexport function toTwos(_value, _width) {\n    let value = getBigInt(_value, \"value\");\n    const width = BigInt(getNumber(_width, \"width\"));\n    const limit = (BN_1 << (width - BN_1));\n    if (value < BN_0) {\n        value = -value;\n        assert(value <= limit, \"too low\", \"NUMERIC_FAULT\", {\n            operation: \"toTwos\", fault: \"overflow\", value: _value\n        });\n        const mask = (BN_1 << width) - BN_1;\n        return ((~value) & mask) + BN_1;\n    }\n    else {\n        assert(value < limit, \"too high\", \"NUMERIC_FAULT\", {\n            operation: \"toTwos\", fault: \"overflow\", value: _value\n        });\n    }\n    return value;\n}\n/**\n *  Mask %%value%% with a bitmask of %%bits%% ones.\n */\nexport function mask(_value, _bits) {\n    const value = getUint(_value, \"value\");\n    const bits = BigInt(getNumber(_bits, \"bits\"));\n    return value & ((BN_1 << bits) - BN_1);\n}\n/**\n *  Gets a BigInt from %%value%%. If it is an invalid value for\n *  a BigInt, then an ArgumentError will be thrown for %%name%%.\n */\nexport function getBigInt(value, name) {\n    switch (typeof (value)) {\n        case \"bigint\": return value;\n        case \"number\":\n            assertArgument(Number.isInteger(value), \"underflow\", name || \"value\", value);\n            assertArgument(value >= -maxValue && value <= maxValue, \"overflow\", name || \"value\", value);\n            return BigInt(value);\n        case \"string\":\n            try {\n                if (value === \"\") {\n                    throw new Error(\"empty string\");\n                }\n                if (value[0] === \"-\" && value[1] !== \"-\") {\n                    return -BigInt(value.substring(1));\n                }\n                return BigInt(value);\n            }\n            catch (e) {\n                assertArgument(false, `invalid BigNumberish string: ${e.message}`, name || \"value\", value);\n            }\n    }\n    assertArgument(false, \"invalid BigNumberish value\", name || \"value\", value);\n}\n/**\n *  Returns %%value%% as a bigint, validating it is valid as a bigint\n *  value and that it is positive.\n */\nexport function getUint(value, name) {\n    const result = getBigInt(value, name);\n    assert(result >= BN_0, \"unsigned value cannot be negative\", \"NUMERIC_FAULT\", {\n        fault: \"overflow\", operation: \"getUint\", value\n    });\n    return result;\n}\nconst Nibbles = \"0123456789abcdef\";\n/*\n * Converts %%value%% to a BigInt. If %%value%% is a Uint8Array, it\n * is treated as Big Endian data.\n */\nexport function toBigInt(value) {\n    if (value instanceof Uint8Array) {\n        let result = \"0x0\";\n        for (const v of value) {\n            result += Nibbles[v >> 4];\n            result += Nibbles[v & 0x0f];\n        }\n        return BigInt(result);\n    }\n    return getBigInt(value);\n}\n/**\n *  Gets a //number// from %%value%%. If it is an invalid value for\n *  a //number//, then an ArgumentError will be thrown for %%name%%.\n */\nexport function getNumber(value, name) {\n    switch (typeof (value)) {\n        case \"bigint\":\n            assertArgument(value >= -maxValue && value <= maxValue, \"overflow\", name || \"value\", value);\n            return Number(value);\n        case \"number\":\n            assertArgument(Number.isInteger(value), \"underflow\", name || \"value\", value);\n            assertArgument(value >= -maxValue && value <= maxValue, \"overflow\", name || \"value\", value);\n            return value;\n        case \"string\":\n            try {\n                if (value === \"\") {\n                    throw new Error(\"empty string\");\n                }\n                return getNumber(BigInt(value), name);\n            }\n            catch (e) {\n                assertArgument(false, `invalid numeric string: ${e.message}`, name || \"value\", value);\n            }\n    }\n    assertArgument(false, \"invalid numeric value\", name || \"value\", value);\n}\n/**\n *  Converts %%value%% to a number. If %%value%% is a Uint8Array, it\n *  is treated as Big Endian data. Throws if the value is not safe.\n */\nexport function toNumber(value) {\n    return getNumber(toBigInt(value));\n}\n/**\n *  Converts %%value%% to a Big Endian hexstring, optionally padded to\n *  %%width%% bytes.\n */\nexport function toBeHex(_value, _width) {\n    const value = getUint(_value, \"value\");\n    let result = value.toString(16);\n    if (_width == null) {\n        // Ensure the value is of even length\n        if (result.length % 2) {\n            result = \"0\" + result;\n        }\n    }\n    else {\n        const width = getNumber(_width, \"width\");\n        // Special case when both value and width are 0 (see: #5025)\n        if (width === 0 && value === BN_0) {\n            return \"0x\";\n        }\n        assert(width * 2 >= result.length, `value exceeds width (${width} bytes)`, \"NUMERIC_FAULT\", {\n            operation: \"toBeHex\",\n            fault: \"overflow\",\n            value: _value\n        });\n        // Pad the value to the required width\n        while (result.length < (width * 2)) {\n            result = \"0\" + result;\n        }\n    }\n    return \"0x\" + result;\n}\n/**\n *  Converts %%value%% to a Big Endian Uint8Array.\n */\nexport function toBeArray(_value, _width) {\n    const value = getUint(_value, \"value\");\n    if (value === BN_0) {\n        const width = (_width != null) ? getNumber(_width, \"width\") : 0;\n        return new Uint8Array(width);\n    }\n    let hex = value.toString(16);\n    if (hex.length % 2) {\n        hex = \"0\" + hex;\n    }\n    if (_width != null) {\n        const width = getNumber(_width, \"width\");\n        while (hex.length < (width * 2)) {\n            hex = \"00\" + hex;\n        }\n        assert((width * 2) === hex.length, `value exceeds width (${width} bytes)`, \"NUMERIC_FAULT\", {\n            operation: \"toBeArray\",\n            fault: \"overflow\",\n            value: _value\n        });\n    }\n    const result = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < result.length; i++) {\n        const offset = i * 2;\n        result[i] = parseInt(hex.substring(offset, offset + 2), 16);\n    }\n    return result;\n}\n/**\n *  Returns a [[HexString]] for %%value%% safe to use as a //Quantity//.\n *\n *  A //Quantity// does not have and leading 0 values unless the value is\n *  the literal value `0x0`. This is most commonly used for JSSON-RPC\n *  numeric values.\n */\nexport function toQuantity(value) {\n    let result = hexlify(isBytesLike(value) ? value : toBeArray(value)).substring(2);\n    while (result.startsWith(\"0\")) {\n        result = result.substring(1);\n    }\n    if (result === \"\") {\n        result = \"0\";\n    }\n    return \"0x\" + result;\n}\n//# sourceMappingURL=maths.js.map","/**\n *  The [Base58 Encoding](link-base58) scheme allows a **numeric** value\n *  to be encoded as a compact string using a radix of 58 using only\n *  alpha-numeric characters. Confusingly similar characters are omitted\n *  (i.e. ``\"l0O\"``).\n *\n *  Note that Base58 encodes a **numeric** value, not arbitrary bytes,\n *  since any zero-bytes on the left would get removed. To mitigate this\n *  issue most schemes that use Base58 choose specific high-order values\n *  to ensure non-zero prefixes.\n *\n *  @_subsection: api/utils:Base58 Encoding [about-base58]\n */\nimport { getBytes } from \"./data.js\";\nimport { assertArgument } from \"./errors.js\";\nimport { toBigInt } from \"./maths.js\";\nconst Alphabet = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";\nlet Lookup = null;\nfunction getAlpha(letter) {\n    if (Lookup == null) {\n        Lookup = {};\n        for (let i = 0; i < Alphabet.length; i++) {\n            Lookup[Alphabet[i]] = BigInt(i);\n        }\n    }\n    const result = Lookup[letter];\n    assertArgument(result != null, `invalid base58 value`, \"letter\", letter);\n    return result;\n}\nconst BN_0 = BigInt(0);\nconst BN_58 = BigInt(58);\n/**\n *  Encode %%value%% as a Base58-encoded string.\n */\nexport function encodeBase58(_value) {\n    const bytes = getBytes(_value);\n    let value = toBigInt(bytes);\n    let result = \"\";\n    while (value) {\n        result = Alphabet[Number(value % BN_58)] + result;\n        value /= BN_58;\n    }\n    // Account for leading padding zeros\n    for (let i = 0; i < bytes.length; i++) {\n        if (bytes[i]) {\n            break;\n        }\n        result = Alphabet[0] + result;\n    }\n    return result;\n}\n/**\n *  Decode the Base58-encoded %%value%%.\n */\nexport function decodeBase58(value) {\n    let result = BN_0;\n    for (let i = 0; i < value.length; i++) {\n        result *= BN_58;\n        result += getAlpha(value[i]);\n    }\n    return result;\n}\n//# sourceMappingURL=base58.js.map","/**\n *  Using strings in Ethereum (or any security-basd system) requires\n *  additional care. These utilities attempt to mitigate some of the\n *  safety issues as well as provide the ability to recover and analyse\n *  strings.\n *\n *  @_subsection api/utils:Strings and UTF-8  [about-strings]\n */\nimport { getBytes } from \"./data.js\";\nimport { assertArgument, assertNormalize } from \"./errors.js\";\nfunction errorFunc(reason, offset, bytes, output, badCodepoint) {\n    assertArgument(false, `invalid codepoint at offset ${offset}; ${reason}`, \"bytes\", bytes);\n}\nfunction ignoreFunc(reason, offset, bytes, output, badCodepoint) {\n    // If there is an invalid prefix (including stray continuation), skip any additional continuation bytes\n    if (reason === \"BAD_PREFIX\" || reason === \"UNEXPECTED_CONTINUE\") {\n        let i = 0;\n        for (let o = offset + 1; o < bytes.length; o++) {\n            if (bytes[o] >> 6 !== 0x02) {\n                break;\n            }\n            i++;\n        }\n        return i;\n    }\n    // This byte runs us past the end of the string, so just jump to the end\n    // (but the first byte was read already read and therefore skipped)\n    if (reason === \"OVERRUN\") {\n        return bytes.length - offset - 1;\n    }\n    // Nothing to skip\n    return 0;\n}\nfunction replaceFunc(reason, offset, bytes, output, badCodepoint) {\n    // Overlong representations are otherwise \"valid\" code points; just non-deistingtished\n    if (reason === \"OVERLONG\") {\n        assertArgument(typeof (badCodepoint) === \"number\", \"invalid bad code point for replacement\", \"badCodepoint\", badCodepoint);\n        output.push(badCodepoint);\n        return 0;\n    }\n    // Put the replacement character into the output\n    output.push(0xfffd);\n    // Otherwise, process as if ignoring errors\n    return ignoreFunc(reason, offset, bytes, output, badCodepoint);\n}\n/**\n *  A handful of popular, built-in UTF-8 error handling strategies.\n *\n *  **``\"error\"``** - throws on ANY illegal UTF-8 sequence or\n *  non-canonical (overlong) codepoints (this is the default)\n *\n *  **``\"ignore\"``** - silently drops any illegal UTF-8 sequence\n *  and accepts non-canonical (overlong) codepoints\n *\n *  **``\"replace\"``** - replace any illegal UTF-8 sequence with the\n *  UTF-8 replacement character (i.e. ``\"\\\\ufffd\"``) and accepts\n *  non-canonical (overlong) codepoints\n *\n *  @returns: Record<\"error\" | \"ignore\" | \"replace\", Utf8ErrorFunc>\n */\nexport const Utf8ErrorFuncs = Object.freeze({\n    error: errorFunc,\n    ignore: ignoreFunc,\n    replace: replaceFunc\n});\n// http://stackoverflow.com/questions/13356493/decode-utf-8-with-javascript#13691499\nfunction getUtf8CodePoints(_bytes, onError) {\n    if (onError == null) {\n        onError = Utf8ErrorFuncs.error;\n    }\n    const bytes = getBytes(_bytes, \"bytes\");\n    const result = [];\n    let i = 0;\n    // Invalid bytes are ignored\n    while (i < bytes.length) {\n        const c = bytes[i++];\n        // 0xxx xxxx\n        if (c >> 7 === 0) {\n            result.push(c);\n            continue;\n        }\n        // Multibyte; how many bytes left for this character?\n        let extraLength = null;\n        let overlongMask = null;\n        // 110x xxxx 10xx xxxx\n        if ((c & 0xe0) === 0xc0) {\n            extraLength = 1;\n            overlongMask = 0x7f;\n            // 1110 xxxx 10xx xxxx 10xx xxxx\n        }\n        else if ((c & 0xf0) === 0xe0) {\n            extraLength = 2;\n            overlongMask = 0x7ff;\n            // 1111 0xxx 10xx xxxx 10xx xxxx 10xx xxxx\n        }\n        else if ((c & 0xf8) === 0xf0) {\n            extraLength = 3;\n            overlongMask = 0xffff;\n        }\n        else {\n            if ((c & 0xc0) === 0x80) {\n                i += onError(\"UNEXPECTED_CONTINUE\", i - 1, bytes, result);\n            }\n            else {\n                i += onError(\"BAD_PREFIX\", i - 1, bytes, result);\n            }\n            continue;\n        }\n        // Do we have enough bytes in our data?\n        if (i - 1 + extraLength >= bytes.length) {\n            i += onError(\"OVERRUN\", i - 1, bytes, result);\n            continue;\n        }\n        // Remove the length prefix from the char\n        let res = c & ((1 << (8 - extraLength - 1)) - 1);\n        for (let j = 0; j < extraLength; j++) {\n            let nextChar = bytes[i];\n            // Invalid continuation byte\n            if ((nextChar & 0xc0) != 0x80) {\n                i += onError(\"MISSING_CONTINUE\", i, bytes, result);\n                res = null;\n                break;\n            }\n            ;\n            res = (res << 6) | (nextChar & 0x3f);\n            i++;\n        }\n        // See above loop for invalid continuation byte\n        if (res === null) {\n            continue;\n        }\n        // Maximum code point\n        if (res > 0x10ffff) {\n            i += onError(\"OUT_OF_RANGE\", i - 1 - extraLength, bytes, result, res);\n            continue;\n        }\n        // Reserved for UTF-16 surrogate halves\n        if (res >= 0xd800 && res <= 0xdfff) {\n            i += onError(\"UTF16_SURROGATE\", i - 1 - extraLength, bytes, result, res);\n            continue;\n        }\n        // Check for overlong sequences (more bytes than needed)\n        if (res <= overlongMask) {\n            i += onError(\"OVERLONG\", i - 1 - extraLength, bytes, result, res);\n            continue;\n        }\n        result.push(res);\n    }\n    return result;\n}\n// http://stackoverflow.com/questions/18729405/how-to-convert-utf8-string-to-byte-array\n/**\n *  Returns the UTF-8 byte representation of %%str%%.\n *\n *  If %%form%% is specified, the string is normalized.\n */\nexport function toUtf8Bytes(str, form) {\n    assertArgument(typeof (str) === \"string\", \"invalid string value\", \"str\", str);\n    if (form != null) {\n        assertNormalize(form);\n        str = str.normalize(form);\n    }\n    let result = [];\n    for (let i = 0; i < str.length; i++) {\n        const c = str.charCodeAt(i);\n        if (c < 0x80) {\n            result.push(c);\n        }\n        else if (c < 0x800) {\n            result.push((c >> 6) | 0xc0);\n            result.push((c & 0x3f) | 0x80);\n        }\n        else if ((c & 0xfc00) == 0xd800) {\n            i++;\n            const c2 = str.charCodeAt(i);\n            assertArgument(i < str.length && ((c2 & 0xfc00) === 0xdc00), \"invalid surrogate pair\", \"str\", str);\n            // Surrogate Pair\n            const pair = 0x10000 + ((c & 0x03ff) << 10) + (c2 & 0x03ff);\n            result.push((pair >> 18) | 0xf0);\n            result.push(((pair >> 12) & 0x3f) | 0x80);\n            result.push(((pair >> 6) & 0x3f) | 0x80);\n            result.push((pair & 0x3f) | 0x80);\n        }\n        else {\n            result.push((c >> 12) | 0xe0);\n            result.push(((c >> 6) & 0x3f) | 0x80);\n            result.push((c & 0x3f) | 0x80);\n        }\n    }\n    return new Uint8Array(result);\n}\n;\n//export \nfunction _toUtf8String(codePoints) {\n    return codePoints.map((codePoint) => {\n        if (codePoint <= 0xffff) {\n            return String.fromCharCode(codePoint);\n        }\n        codePoint -= 0x10000;\n        return String.fromCharCode((((codePoint >> 10) & 0x3ff) + 0xd800), ((codePoint & 0x3ff) + 0xdc00));\n    }).join(\"\");\n}\n/**\n *  Returns the string represented by the UTF-8 data %%bytes%%.\n *\n *  When %%onError%% function is specified, it is called on UTF-8\n *  errors allowing recovery using the [[Utf8ErrorFunc]] API.\n *  (default: [error](Utf8ErrorFuncs))\n */\nexport function toUtf8String(bytes, onError) {\n    return _toUtf8String(getUtf8CodePoints(bytes, onError));\n}\n/**\n *  Returns the UTF-8 code-points for %%str%%.\n *\n *  If %%form%% is specified, the string is normalized.\n */\nexport function toUtf8CodePoints(str, form) {\n    return getUtf8CodePoints(toUtf8Bytes(str, form));\n}\n//# sourceMappingURL=utf8.js.map","//See: https://github.com/ethereum/wiki/wiki/RLP\nimport { hexlify } from \"./data.js\";\nimport { assert, assertArgument } from \"./errors.js\";\nimport { getBytes } from \"./data.js\";\nfunction hexlifyByte(value) {\n    let result = value.toString(16);\n    while (result.length < 2) {\n        result = \"0\" + result;\n    }\n    return \"0x\" + result;\n}\nfunction unarrayifyInteger(data, offset, length) {\n    let result = 0;\n    for (let i = 0; i < length; i++) {\n        result = (result * 256) + data[offset + i];\n    }\n    return result;\n}\nfunction _decodeChildren(data, offset, childOffset, length) {\n    const result = [];\n    while (childOffset < offset + 1 + length) {\n        const decoded = _decode(data, childOffset);\n        result.push(decoded.result);\n        childOffset += decoded.consumed;\n        assert(childOffset <= offset + 1 + length, \"child data too short\", \"BUFFER_OVERRUN\", {\n            buffer: data, length, offset\n        });\n    }\n    return { consumed: (1 + length), result: result };\n}\n// returns { consumed: number, result: Object }\nfunction _decode(data, offset) {\n    assert(data.length !== 0, \"data too short\", \"BUFFER_OVERRUN\", {\n        buffer: data, length: 0, offset: 1\n    });\n    const checkOffset = (offset) => {\n        assert(offset <= data.length, \"data short segment too short\", \"BUFFER_OVERRUN\", {\n            buffer: data, length: data.length, offset\n        });\n    };\n    // Array with extra length prefix\n    if (data[offset] >= 0xf8) {\n        const lengthLength = data[offset] - 0xf7;\n        checkOffset(offset + 1 + lengthLength);\n        const length = unarrayifyInteger(data, offset + 1, lengthLength);\n        checkOffset(offset + 1 + lengthLength + length);\n        return _decodeChildren(data, offset, offset + 1 + lengthLength, lengthLength + length);\n    }\n    else if (data[offset] >= 0xc0) {\n        const length = data[offset] - 0xc0;\n        checkOffset(offset + 1 + length);\n        return _decodeChildren(data, offset, offset + 1, length);\n    }\n    else if (data[offset] >= 0xb8) {\n        const lengthLength = data[offset] - 0xb7;\n        checkOffset(offset + 1 + lengthLength);\n        const length = unarrayifyInteger(data, offset + 1, lengthLength);\n        checkOffset(offset + 1 + lengthLength + length);\n        const result = hexlify(data.slice(offset + 1 + lengthLength, offset + 1 + lengthLength + length));\n        return { consumed: (1 + lengthLength + length), result: result };\n    }\n    else if (data[offset] >= 0x80) {\n        const length = data[offset] - 0x80;\n        checkOffset(offset + 1 + length);\n        const result = hexlify(data.slice(offset + 1, offset + 1 + length));\n        return { consumed: (1 + length), result: result };\n    }\n    return { consumed: 1, result: hexlifyByte(data[offset]) };\n}\n/**\n *  Decodes %%data%% into the structured data it represents.\n */\nexport function decodeRlp(_data) {\n    const data = getBytes(_data, \"data\");\n    const decoded = _decode(data, 0);\n    assertArgument(decoded.consumed === data.length, \"unexpected junk after rlp payload\", \"data\", _data);\n    return decoded.result;\n}\n//# sourceMappingURL=rlp-decode.js.map","//See: https://github.com/ethereum/wiki/wiki/RLP\nimport { getBytes } from \"./data.js\";\nfunction arrayifyInteger(value) {\n    const result = [];\n    while (value) {\n        result.unshift(value & 0xff);\n        value >>= 8;\n    }\n    return result;\n}\nfunction _encode(object) {\n    if (Array.isArray(object)) {\n        let payload = [];\n        object.forEach(function (child) {\n            payload = payload.concat(_encode(child));\n        });\n        if (payload.length <= 55) {\n            payload.unshift(0xc0 + payload.length);\n            return payload;\n        }\n        const length = arrayifyInteger(payload.length);\n        length.unshift(0xf7 + length.length);\n        return length.concat(payload);\n    }\n    const data = Array.prototype.slice.call(getBytes(object, \"object\"));\n    if (data.length === 1 && data[0] <= 0x7f) {\n        return data;\n    }\n    else if (data.length <= 55) {\n        data.unshift(0x80 + data.length);\n        return data;\n    }\n    const length = arrayifyInteger(data.length);\n    length.unshift(0xb7 + length.length);\n    return length.concat(data);\n}\nconst nibbles = \"0123456789abcdef\";\n/**\n *  Encodes %%object%% as an RLP-encoded [[DataHexString]].\n */\nexport function encodeRlp(object) {\n    let result = \"0x\";\n    for (const v of _encode(object)) {\n        result += nibbles[v >> 4];\n        result += nibbles[v & 0xf];\n    }\n    return result;\n}\n//# sourceMappingURL=rlp-encode.js.map","/**\n *  Explain UUID and link to RFC here.\n *\n *  @_subsection: api/utils:UUID  [about-uuid]\n */\nimport { getBytes, hexlify } from \"./data.js\";\n/**\n *  Returns the version 4 [[link-uuid]] for the %%randomBytes%%.\n *\n *  @see: https://www.ietf.org/rfc/rfc4122.txt (Section 4.4)\n */\nexport function uuidV4(randomBytes) {\n    const bytes = getBytes(randomBytes, \"randomBytes\");\n    // Section: 4.1.3:\n    // - time_hi_and_version[12:16] = 0b0100\n    bytes[6] = (bytes[6] & 0x0f) | 0x40;\n    // Section 4.4\n    // - clock_seq_hi_and_reserved[6] = 0b0\n    // - clock_seq_hi_and_reserved[7] = 0b1\n    bytes[8] = (bytes[8] & 0x3f) | 0x80;\n    const value = hexlify(bytes);\n    return [\n        value.substring(2, 10),\n        value.substring(10, 14),\n        value.substring(14, 18),\n        value.substring(18, 22),\n        value.substring(22, 34),\n    ].join(\"-\");\n}\n//# sourceMappingURL=uuid.js.map","function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nfunction bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new Error('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nfunction hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexport { number, bool, bytes, hash, exists, output };\nconst assert = { number, bool, bytes, hash, exists, output };\nexport default assert;\n//# sourceMappingURL=_assert.js.map","export const crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\nconst u8a = (a) => a instanceof Uint8Array;\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const len = hex.length;\n    if (len % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + len);\n    const array = new Uint8Array(len / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!u8a(data))\n        throw new Error(`expected Uint8Array, got ${typeof data}`);\n    return data;\n}\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays) {\n    const r = new Uint8Array(arrays.reduce((sum, a) => sum + a.length, 0));\n    let pad = 0; // walk through each item, ensure they have proper type\n    arrays.forEach((a) => {\n        if (!u8a(a))\n            throw new Error('Uint8Array expected');\n        r.set(a, pad);\n        pad += a.length;\n    });\n    return r;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nconst toStr = {}.toString;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && toStr.call(opts) !== '[object Object]')\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport function wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","import { hash as assertHash, bytes as assertBytes, exists as assertExists } from './_assert.js';\nimport { Hash, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nexport class HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        assertHash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        assertExists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        assertExists(this);\n        assertBytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","import { hash as assertHash, number as assertNumber } from './_assert.js';\nimport { hmac } from './hmac.js';\nimport { createView, toBytes, checkOpts, asyncLoop } from './utils.js';\n// Common prologue and epilogue for sync/async functions\nfunction pbkdf2Init(hash, _password, _salt, _opts) {\n    assertHash(hash);\n    const opts = checkOpts({ dkLen: 32, asyncTick: 10 }, _opts);\n    const { c, dkLen, asyncTick } = opts;\n    assertNumber(c);\n    assertNumber(dkLen);\n    assertNumber(asyncTick);\n    if (c < 1)\n        throw new Error('PBKDF2: iterations (c) should be >= 1');\n    const password = toBytes(_password);\n    const salt = toBytes(_salt);\n    // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n    const DK = new Uint8Array(dkLen);\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    const PRF = hmac.create(hash, password);\n    const PRFSalt = PRF._cloneInto().update(salt);\n    return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\nfunction pbkdf2Output(PRF, PRFSalt, DK, prfW, u) {\n    PRF.destroy();\n    PRFSalt.destroy();\n    if (prfW)\n        prfW.destroy();\n    u.fill(0);\n    return DK;\n}\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n */\nexport function pbkdf2(hash, password, salt, opts) {\n    const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = createView(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 +  + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        for (let ui = 1; ui < c; ui++) {\n            // Uc = PRF(Password, Uc1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        }\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexport async function pbkdf2Async(hash, password, salt, opts) {\n    const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = createView(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 +  + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        await asyncLoop(c - 1, asyncTick, () => {\n            // Uc = PRF(Password, Uc1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        });\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\n//# sourceMappingURL=pbkdf2.js.map","import { exists, output } from './_assert.js';\nimport { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        exists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        exists(this);\n        output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n//# sourceMappingURL=_sha2.js.map","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// SHA2-256 need to try 2^128 hashes to execute birthday attack.\n// BTC network is doing 2^67 hashes/sec as per early 2023.\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = /* @__PURE__ */ new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = /* @__PURE__ */ wrapConstructor(() => new SHA256());\nexport const sha224 = /* @__PURE__ */ wrapConstructor(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","const U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nconst rotr32L = (h, _l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nexport { fromBig, split, toBig, shrSH, shrSL, rotrSH, rotrSL, rotrBH, rotrBL, rotr32H, rotr32L, rotlSH, rotlSL, rotlBH, rotlBL, add, add3L, add3H, add4L, add4H, add5H, add5L, };\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = /* @__PURE__ */ (() => u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nexport class SHA512 extends SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexport const sha512 = /* @__PURE__ */ wrapConstructor(() => new SHA512());\nexport const sha512_224 = /* @__PURE__ */ wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = /* @__PURE__ */ wrapConstructor(() => new SHA512_256());\nexport const sha384 = /* @__PURE__ */ wrapConstructor(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","/* Browser Crypto Shims */\nimport { hmac } from \"@noble/hashes/hmac\";\nimport { pbkdf2 } from \"@noble/hashes/pbkdf2\";\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { sha512 } from \"@noble/hashes/sha512\";\nimport { assert, assertArgument } from \"../utils/index.js\";\nfunction getGlobal() {\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('unable to locate global object');\n}\n;\nconst anyGlobal = getGlobal();\nconst crypto = anyGlobal.crypto || anyGlobal.msCrypto;\nexport function createHash(algo) {\n    switch (algo) {\n        case \"sha256\": return sha256.create();\n        case \"sha512\": return sha512.create();\n    }\n    assertArgument(false, \"invalid hashing algorithm name\", \"algorithm\", algo);\n}\nexport function createHmac(_algo, key) {\n    const algo = ({ sha256, sha512 }[_algo]);\n    assertArgument(algo != null, \"invalid hmac algorithm\", \"algorithm\", _algo);\n    return hmac.create(algo, key);\n}\nexport function pbkdf2Sync(password, salt, iterations, keylen, _algo) {\n    const algo = ({ sha256, sha512 }[_algo]);\n    assertArgument(algo != null, \"invalid pbkdf2 algorithm\", \"algorithm\", _algo);\n    return pbkdf2(algo, password, salt, { c: iterations, dkLen: keylen });\n}\nexport function randomBytes(length) {\n    assert(crypto != null, \"platform does not support secure random numbers\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"randomBytes\"\n    });\n    assertArgument(Number.isInteger(length) && length > 0 && length <= 1024, \"invalid length\", \"length\", length);\n    const result = new Uint8Array(length);\n    crypto.getRandomValues(result);\n    return result;\n}\n//# sourceMappingURL=crypto-browser.js.map","/**\n *  An **HMAC** enables verification that a given key was used\n *  to authenticate a payload.\n *\n *  See: [[link-wiki-hmac]]\n *\n *  @_subsection: api/crypto:HMAC  [about-hmac]\n */\nimport { createHmac } from \"./crypto.js\";\nimport { getBytes, hexlify } from \"../utils/index.js\";\nlet locked = false;\nconst _computeHmac = function (algorithm, key, data) {\n    return createHmac(algorithm, key).update(data).digest();\n};\nlet __computeHmac = _computeHmac;\n/**\n *  Return the HMAC for %%data%% using the %%key%% key with the underlying\n *  %%algo%% used for compression.\n *\n *  @example:\n *    key = id(\"some-secret\")\n *\n *    // Compute the HMAC\n *    computeHmac(\"sha256\", key, \"0x1337\")\n *    //_result:\n *\n *    // To compute the HMAC of UTF-8 data, the data must be\n *    // converted to UTF-8 bytes\n *    computeHmac(\"sha256\", key, toUtf8Bytes(\"Hello World\"))\n *    //_result:\n *\n */\nexport function computeHmac(algorithm, _key, _data) {\n    const key = getBytes(_key, \"key\");\n    const data = getBytes(_data, \"data\");\n    return hexlify(__computeHmac(algorithm, key, data));\n}\ncomputeHmac._ = _computeHmac;\ncomputeHmac.lock = function () { locked = true; };\ncomputeHmac.register = function (func) {\n    if (locked) {\n        throw new Error(\"computeHmac is locked\");\n    }\n    __computeHmac = func;\n};\nObject.freeze(computeHmac);\n//# sourceMappingURL=hmac.js.map","import { bytes, exists, number, output } from './_assert.js';\nimport { rotlBH, rotlBL, rotlSH, rotlSL, split } from './_u64.js';\nimport { Hash, u32, toBytes, wrapConstructor, wrapXOFConstructorWithOpts, } from './utils.js';\n// SHA3 (keccak) is based on a new design: basically, the internal state is bigger than output size.\n// It's called a sponge function.\n// Various per round constants calculations\nconst [SHA3_PI, SHA3_ROTL, _SHA3_IOTA] = [[], [], []];\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\nconst _7n = /* @__PURE__ */ BigInt(7);\nconst _256n = /* @__PURE__ */ BigInt(256);\nconst _0x71n = /* @__PURE__ */ BigInt(0x71);\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << /* @__PURE__ */ BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst [SHA3_IOTA_H, SHA3_IOTA_L] = /* @__PURE__ */ split(_SHA3_IOTA, true);\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? rotlBH(h, l, s) : rotlSH(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? rotlBL(h, l, s) : rotlSL(h, l, s));\n// Same as keccakf1600, but allows to skip some rounds\nexport function keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta \n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho () and Pi ()\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi ()\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota ()\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    B.fill(0);\n}\nexport class Keccak extends Hash {\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        super();\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        this.pos = 0;\n        this.posOut = 0;\n        this.finished = false;\n        this.destroyed = false;\n        // Can be passed from user as dkLen\n        number(outputLen);\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        if (0 >= this.blockLen || this.blockLen >= 200)\n            throw new Error('Sha3 supports only keccak-f1600 function');\n        this.state = new Uint8Array(200);\n        this.state32 = u32(this.state);\n    }\n    keccak() {\n        keccakP(this.state32, this.rounds);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        exists(this);\n        const { blockLen, state } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        exists(this, false);\n        bytes(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        number(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        output(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        this.state.fill(0);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to || (to = new Keccak(blockLen, suffix, outputLen, enableXOF, rounds));\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nconst gen = (suffix, blockLen, outputLen) => wrapConstructor(() => new Keccak(blockLen, suffix, outputLen));\nexport const sha3_224 = /* @__PURE__ */ gen(0x06, 144, 224 / 8);\n/**\n * SHA3-256 hash function\n * @param message - that would be hashed\n */\nexport const sha3_256 = /* @__PURE__ */ gen(0x06, 136, 256 / 8);\nexport const sha3_384 = /* @__PURE__ */ gen(0x06, 104, 384 / 8);\nexport const sha3_512 = /* @__PURE__ */ gen(0x06, 72, 512 / 8);\nexport const keccak_224 = /* @__PURE__ */ gen(0x01, 144, 224 / 8);\n/**\n * keccak-256 hash function. Different from SHA3-256.\n * @param message - that would be hashed\n */\nexport const keccak_256 = /* @__PURE__ */ gen(0x01, 136, 256 / 8);\nexport const keccak_384 = /* @__PURE__ */ gen(0x01, 104, 384 / 8);\nexport const keccak_512 = /* @__PURE__ */ gen(0x01, 72, 512 / 8);\nconst genShake = (suffix, blockLen, outputLen) => wrapXOFConstructorWithOpts((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true));\nexport const shake128 = /* @__PURE__ */ genShake(0x1f, 168, 128 / 8);\nexport const shake256 = /* @__PURE__ */ genShake(0x1f, 136, 256 / 8);\n//# sourceMappingURL=sha3.js.map","/**\n *  Cryptographic hashing functions\n *\n *  @_subsection: api/crypto:Hash Functions [about-crypto-hashing]\n */\nimport { keccak_256 } from \"@noble/hashes/sha3\";\nimport { getBytes, hexlify } from \"../utils/index.js\";\nlet locked = false;\nconst _keccak256 = function (data) {\n    return keccak_256(data);\n};\nlet __keccak256 = _keccak256;\n/**\n *  Compute the cryptographic KECCAK256 hash of %%data%%.\n *\n *  The %%data%% **must** be a data representation, to compute the\n *  hash of UTF-8 data use the [[id]] function.\n *\n *  @returns DataHexstring\n *  @example:\n *    keccak256(\"0x\")\n *    //_result:\n *\n *    keccak256(\"0x1337\")\n *    //_result:\n *\n *    keccak256(new Uint8Array([ 0x13, 0x37 ]))\n *    //_result:\n *\n *    // Strings are assumed to be DataHexString, otherwise it will\n *    // throw. To hash UTF-8 data, see the note above.\n *    keccak256(\"Hello World\")\n *    //_error:\n */\nexport function keccak256(_data) {\n    const data = getBytes(_data, \"data\");\n    return hexlify(__keccak256(data));\n}\nkeccak256._ = _keccak256;\nkeccak256.lock = function () { locked = true; };\nkeccak256.register = function (func) {\n    if (locked) {\n        throw new TypeError(\"keccak256 is locked\");\n    }\n    __keccak256 = func;\n};\nObject.freeze(keccak256);\n//# sourceMappingURL=keccak.js.map","import { SHA2 } from './_sha2.js';\nimport { wrapConstructor } from './utils.js';\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\nconst Rho = /* @__PURE__ */ new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]);\nconst Id = /* @__PURE__ */ Uint8Array.from({ length: 16 }, (_, i) => i);\nconst Pi = /* @__PURE__ */ Id.map((i) => (9 * i + 5) % 16);\nlet idxL = [Id];\nlet idxR = [Pi];\nfor (let i = 0; i < 4; i++)\n    for (let j of [idxL, idxR])\n        j.push(j[i].map((k) => Rho[k]));\nconst shifts = /* @__PURE__ */ [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => new Uint8Array(i));\nconst shiftsL = /* @__PURE__ */ idxL.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst shiftsR = /* @__PURE__ */ idxR.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst Kl = /* @__PURE__ */ new Uint32Array([\n    0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e,\n]);\nconst Kr = /* @__PURE__ */ new Uint32Array([\n    0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000,\n]);\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | (word >>> (32 - shift));\n// It's called f() in spec.\nfunction f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    else if (group === 1)\n        return (x & y) | (~x & z);\n    else if (group === 2)\n        return (x | ~y) ^ z;\n    else if (group === 3)\n        return (x & z) | (y & ~z);\n    else\n        return x ^ (y | ~z);\n}\n// Temporary buffer, not used to store anything between runs\nconst BUF = /* @__PURE__ */ new Uint32Array(16);\nexport class RIPEMD160 extends SHA2 {\n    constructor() {\n        super(64, 20, 8, true);\n        this.h0 = 0x67452301 | 0;\n        this.h1 = 0xefcdab89 | 0;\n        this.h2 = 0x98badcfe | 0;\n        this.h3 = 0x10325476 | 0;\n        this.h4 = 0xc3d2e1f0 | 0;\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            BUF[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl[group], hbr = Kr[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL[group], sr = shiftsR[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = (rotl(al + f(group, bl, cl, dl) + BUF[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = rotl(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = (rotl(ar + f(rGroup, br, cr, dr) + BUF[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = rotl(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        BUF.fill(0);\n    }\n    destroy() {\n        this.destroyed = true;\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\n/**\n * RIPEMD-160 - a hash function from 1990s.\n * @param message - msg that would be hashed\n */\nexport const ripemd160 = /* @__PURE__ */ wrapConstructor(() => new RIPEMD160());\n//# sourceMappingURL=ripemd160.js.map","import { ripemd160 as noble_ripemd160 } from \"@noble/hashes/ripemd160\";\nimport { getBytes, hexlify } from \"../utils/index.js\";\nlet locked = false;\nconst _ripemd160 = function (data) {\n    return noble_ripemd160(data);\n};\nlet __ripemd160 = _ripemd160;\n/**\n *  Compute the cryptographic RIPEMD-160 hash of %%data%%.\n *\n *  @_docloc: api/crypto:Hash Functions\n *  @returns DataHexstring\n *\n *  @example:\n *    ripemd160(\"0x\")\n *    //_result:\n *\n *    ripemd160(\"0x1337\")\n *    //_result:\n *\n *    ripemd160(new Uint8Array([ 0x13, 0x37 ]))\n *    //_result:\n *\n */\nexport function ripemd160(_data) {\n    const data = getBytes(_data, \"data\");\n    return hexlify(__ripemd160(data));\n}\nripemd160._ = _ripemd160;\nripemd160.lock = function () { locked = true; };\nripemd160.register = function (func) {\n    if (locked) {\n        throw new TypeError(\"ripemd160 is locked\");\n    }\n    __ripemd160 = func;\n};\nObject.freeze(ripemd160);\n//# sourceMappingURL=ripemd160.js.map","/**\n *  A **Password-Based Key-Derivation Function** is designed to create\n *  a sequence of bytes suitible as a **key** from a human-rememberable\n *  password.\n *\n *  @_subsection: api/crypto:Passwords  [about-pbkdf]\n */\nimport { pbkdf2Sync } from \"./crypto.js\";\nimport { getBytes, hexlify } from \"../utils/index.js\";\nlet locked = false;\nconst _pbkdf2 = function (password, salt, iterations, keylen, algo) {\n    return pbkdf2Sync(password, salt, iterations, keylen, algo);\n};\nlet __pbkdf2 = _pbkdf2;\n/**\n *  Return the [[link-pbkdf2]] for %%keylen%% bytes for %%password%% using\n *  the %%salt%% and using %%iterations%% of %%algo%%.\n *\n *  This PBKDF is outdated and should not be used in new projects, but is\n *  required to decrypt older files.\n *\n *  @example:\n *    // The password must be converted to bytes, and it is generally\n *    // best practices to ensure the string has been normalized. Many\n *    // formats explicitly indicate the normalization form to use.\n *    password = \"hello\"\n *    passwordBytes = toUtf8Bytes(password, \"NFKC\")\n *\n *    salt = id(\"some-salt\")\n *\n *    // Compute the PBKDF2\n *    pbkdf2(passwordBytes, salt, 1024, 16, \"sha256\")\n *    //_result:\n */\nexport function pbkdf2(_password, _salt, iterations, keylen, algo) {\n    const password = getBytes(_password, \"password\");\n    const salt = getBytes(_salt, \"salt\");\n    return hexlify(__pbkdf2(password, salt, iterations, keylen, algo));\n}\npbkdf2._ = _pbkdf2;\npbkdf2.lock = function () { locked = true; };\npbkdf2.register = function (func) {\n    if (locked) {\n        throw new Error(\"pbkdf2 is locked\");\n    }\n    __pbkdf2 = func;\n};\nObject.freeze(pbkdf2);\n//# sourceMappingURL=pbkdf2.js.map","/**\n *  A **Cryptographically Secure Random Value** is one that has been\n *  generated with additional care take to prevent side-channels\n *  from allowing others to detect it and prevent others from through\n *  coincidence generate the same values.\n *\n *  @_subsection: api/crypto:Random Values  [about-crypto-random]\n */\nimport { randomBytes as crypto_random } from \"./crypto.js\";\nlet locked = false;\nconst _randomBytes = function (length) {\n    return new Uint8Array(crypto_random(length));\n};\nlet __randomBytes = _randomBytes;\n/**\n *  Return %%length%% bytes of cryptographically secure random data.\n *\n *  @example:\n *    randomBytes(8)\n *    //_result:\n */\nexport function randomBytes(length) {\n    return __randomBytes(length);\n}\nrandomBytes._ = _randomBytes;\nrandomBytes.lock = function () { locked = true; };\nrandomBytes.register = function (func) {\n    if (locked) {\n        throw new Error(\"randomBytes is locked\");\n    }\n    __randomBytes = func;\n};\nObject.freeze(randomBytes);\n//# sourceMappingURL=random.js.map","import { number as assertNumber } from './_assert.js';\nimport { sha256 } from './sha256.js';\nimport { pbkdf2 } from './pbkdf2.js';\nimport { asyncLoop, checkOpts, u32 } from './utils.js';\n// RFC 7914 Scrypt KDF\n// Left rotate for uint32\nconst rotl = (a, b) => (a << b) | (a >>> (32 - b));\n// The main Scrypt loop: uses Salsa extensively.\n// Six versions of the function were tried, this is the fastest one.\n// prettier-ignore\nfunction XorAndSalsa(prev, pi, input, ii, out, oi) {\n    // Based on https://cr.yp.to/salsa20.html\n    // Xor blocks\n    let y00 = prev[pi++] ^ input[ii++], y01 = prev[pi++] ^ input[ii++];\n    let y02 = prev[pi++] ^ input[ii++], y03 = prev[pi++] ^ input[ii++];\n    let y04 = prev[pi++] ^ input[ii++], y05 = prev[pi++] ^ input[ii++];\n    let y06 = prev[pi++] ^ input[ii++], y07 = prev[pi++] ^ input[ii++];\n    let y08 = prev[pi++] ^ input[ii++], y09 = prev[pi++] ^ input[ii++];\n    let y10 = prev[pi++] ^ input[ii++], y11 = prev[pi++] ^ input[ii++];\n    let y12 = prev[pi++] ^ input[ii++], y13 = prev[pi++] ^ input[ii++];\n    let y14 = prev[pi++] ^ input[ii++], y15 = prev[pi++] ^ input[ii++];\n    // Save state to temporary variables (salsa)\n    let x00 = y00, x01 = y01, x02 = y02, x03 = y03, x04 = y04, x05 = y05, x06 = y06, x07 = y07, x08 = y08, x09 = y09, x10 = y10, x11 = y11, x12 = y12, x13 = y13, x14 = y14, x15 = y15;\n    // Main loop (salsa)\n    for (let i = 0; i < 8; i += 2) {\n        x04 ^= rotl(x00 + x12 | 0, 7);\n        x08 ^= rotl(x04 + x00 | 0, 9);\n        x12 ^= rotl(x08 + x04 | 0, 13);\n        x00 ^= rotl(x12 + x08 | 0, 18);\n        x09 ^= rotl(x05 + x01 | 0, 7);\n        x13 ^= rotl(x09 + x05 | 0, 9);\n        x01 ^= rotl(x13 + x09 | 0, 13);\n        x05 ^= rotl(x01 + x13 | 0, 18);\n        x14 ^= rotl(x10 + x06 | 0, 7);\n        x02 ^= rotl(x14 + x10 | 0, 9);\n        x06 ^= rotl(x02 + x14 | 0, 13);\n        x10 ^= rotl(x06 + x02 | 0, 18);\n        x03 ^= rotl(x15 + x11 | 0, 7);\n        x07 ^= rotl(x03 + x15 | 0, 9);\n        x11 ^= rotl(x07 + x03 | 0, 13);\n        x15 ^= rotl(x11 + x07 | 0, 18);\n        x01 ^= rotl(x00 + x03 | 0, 7);\n        x02 ^= rotl(x01 + x00 | 0, 9);\n        x03 ^= rotl(x02 + x01 | 0, 13);\n        x00 ^= rotl(x03 + x02 | 0, 18);\n        x06 ^= rotl(x05 + x04 | 0, 7);\n        x07 ^= rotl(x06 + x05 | 0, 9);\n        x04 ^= rotl(x07 + x06 | 0, 13);\n        x05 ^= rotl(x04 + x07 | 0, 18);\n        x11 ^= rotl(x10 + x09 | 0, 7);\n        x08 ^= rotl(x11 + x10 | 0, 9);\n        x09 ^= rotl(x08 + x11 | 0, 13);\n        x10 ^= rotl(x09 + x08 | 0, 18);\n        x12 ^= rotl(x15 + x14 | 0, 7);\n        x13 ^= rotl(x12 + x15 | 0, 9);\n        x14 ^= rotl(x13 + x12 | 0, 13);\n        x15 ^= rotl(x14 + x13 | 0, 18);\n    }\n    // Write output (salsa)\n    out[oi++] = (y00 + x00) | 0;\n    out[oi++] = (y01 + x01) | 0;\n    out[oi++] = (y02 + x02) | 0;\n    out[oi++] = (y03 + x03) | 0;\n    out[oi++] = (y04 + x04) | 0;\n    out[oi++] = (y05 + x05) | 0;\n    out[oi++] = (y06 + x06) | 0;\n    out[oi++] = (y07 + x07) | 0;\n    out[oi++] = (y08 + x08) | 0;\n    out[oi++] = (y09 + x09) | 0;\n    out[oi++] = (y10 + x10) | 0;\n    out[oi++] = (y11 + x11) | 0;\n    out[oi++] = (y12 + x12) | 0;\n    out[oi++] = (y13 + x13) | 0;\n    out[oi++] = (y14 + x14) | 0;\n    out[oi++] = (y15 + x15) | 0;\n}\nfunction BlockMix(input, ii, out, oi, r) {\n    // The block B is r 128-byte chunks (which is equivalent of 2r 64-byte chunks)\n    let head = oi + 0;\n    let tail = oi + 16 * r;\n    for (let i = 0; i < 16; i++)\n        out[tail + i] = input[ii + (2 * r - 1) * 16 + i]; // X  B[2r1]\n    for (let i = 0; i < r; i++, head += 16, ii += 16) {\n        // We write odd & even Yi at same time. Even: 0bXXXXX0 Odd:  0bXXXXX1\n        XorAndSalsa(out, tail, input, ii, out, head); // head[i] = Salsa(blockIn[2*i] ^ tail[i-1])\n        if (i > 0)\n            tail += 16; // First iteration overwrites tmp value in tail\n        XorAndSalsa(out, head, input, (ii += 16), out, tail); // tail[i] = Salsa(blockIn[2*i+1] ^ head[i])\n    }\n}\n// Common prologue and epilogue for sync/async functions\nfunction scryptInit(password, salt, _opts) {\n    // Maxmem - 1GB+1KB by default\n    const opts = checkOpts({\n        dkLen: 32,\n        asyncTick: 10,\n        maxmem: 1024 ** 3 + 1024,\n    }, _opts);\n    const { N, r, p, dkLen, asyncTick, maxmem, onProgress } = opts;\n    assertNumber(N);\n    assertNumber(r);\n    assertNumber(p);\n    assertNumber(dkLen);\n    assertNumber(asyncTick);\n    assertNumber(maxmem);\n    if (onProgress !== undefined && typeof onProgress !== 'function')\n        throw new Error('progressCb should be function');\n    const blockSize = 128 * r;\n    const blockSize32 = blockSize / 4;\n    if (N <= 1 || (N & (N - 1)) !== 0 || N >= 2 ** (blockSize / 8) || N > 2 ** 32) {\n        // NOTE: we limit N to be less than 2**32 because of 32 bit variant of Integrify function\n        // There is no JS engines that allows alocate more than 4GB per single Uint8Array for now, but can change in future.\n        throw new Error('Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32');\n    }\n    if (p < 0 || p > ((2 ** 32 - 1) * 32) / blockSize) {\n        throw new Error('Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)');\n    }\n    if (dkLen < 0 || dkLen > (2 ** 32 - 1) * 32) {\n        throw new Error('Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32');\n    }\n    const memUsed = blockSize * (N + p);\n    if (memUsed > maxmem) {\n        throw new Error(`Scrypt: parameters too large, ${memUsed} (128 * r * (N + p)) > ${maxmem} (maxmem)`);\n    }\n    // [B0...Bp1]  PBKDF2HMAC-SHA256(Passphrase, Salt, 1, blockSize*ParallelizationFactor)\n    // Since it has only one iteration there is no reason to use async variant\n    const B = pbkdf2(sha256, password, salt, { c: 1, dkLen: blockSize * p });\n    const B32 = u32(B);\n    // Re-used between parallel iterations. Array(iterations) of B\n    const V = u32(new Uint8Array(blockSize * N));\n    const tmp = u32(new Uint8Array(blockSize));\n    let blockMixCb = () => { };\n    if (onProgress) {\n        const totalBlockMix = 2 * N * p;\n        // Invoke callback if progress changes from 10.01 to 10.02\n        // Allows to draw smooth progress bar on up to 8K screen\n        const callbackPer = Math.max(Math.floor(totalBlockMix / 10000), 1);\n        let blockMixCnt = 0;\n        blockMixCb = () => {\n            blockMixCnt++;\n            if (onProgress && (!(blockMixCnt % callbackPer) || blockMixCnt === totalBlockMix))\n                onProgress(blockMixCnt / totalBlockMix);\n        };\n    }\n    return { N, r, p, dkLen, blockSize32, V, B32, B, tmp, blockMixCb, asyncTick };\n}\nfunction scryptOutput(password, dkLen, B, V, tmp) {\n    const res = pbkdf2(sha256, password, B, { c: 1, dkLen });\n    B.fill(0);\n    V.fill(0);\n    tmp.fill(0);\n    return res;\n}\n/**\n * Scrypt KDF from RFC 7914.\n * @param password - pass\n * @param salt - salt\n * @param opts - parameters\n * - `N` is cpu/mem work factor (power of 2 e.g. 2**18)\n * - `r` is block size (8 is common), fine-tunes sequential memory read size and performance\n * - `p` is parallelization factor (1 is common)\n * - `dkLen` is output key length in bytes e.g. 32.\n * - `asyncTick` - (default: 10) max time in ms for which async function can block execution\n * - `maxmem` - (default: `1024 ** 3 + 1024` aka 1GB+1KB). A limit that the app could use for scrypt\n * - `onProgress` - callback function that would be executed for progress report\n * @returns Derived key\n */\nexport function scrypt(password, salt, opts) {\n    const { N, r, p, dkLen, blockSize32, V, B32, B, tmp, blockMixCb } = scryptInit(password, salt, opts);\n    for (let pi = 0; pi < p; pi++) {\n        const Pi = blockSize32 * pi;\n        for (let i = 0; i < blockSize32; i++)\n            V[i] = B32[Pi + i]; // V[0] = B[i]\n        for (let i = 0, pos = 0; i < N - 1; i++) {\n            BlockMix(V, pos, V, (pos += blockSize32), r); // V[i] = BlockMix(V[i-1]);\n            blockMixCb();\n        }\n        BlockMix(V, (N - 1) * blockSize32, B32, Pi, r); // Process last element\n        blockMixCb();\n        for (let i = 0; i < N; i++) {\n            // First u32 of the last 64-byte block (u32 is LE)\n            const j = B32[Pi + blockSize32 - 16] % N; // j = Integrify(X) % iterations\n            for (let k = 0; k < blockSize32; k++)\n                tmp[k] = B32[Pi + k] ^ V[j * blockSize32 + k]; // tmp = B ^ V[j]\n            BlockMix(tmp, 0, B32, Pi, r); // B = BlockMix(B ^ V[j])\n            blockMixCb();\n        }\n    }\n    return scryptOutput(password, dkLen, B, V, tmp);\n}\n/**\n * Scrypt KDF from RFC 7914.\n */\nexport async function scryptAsync(password, salt, opts) {\n    const { N, r, p, dkLen, blockSize32, V, B32, B, tmp, blockMixCb, asyncTick } = scryptInit(password, salt, opts);\n    for (let pi = 0; pi < p; pi++) {\n        const Pi = blockSize32 * pi;\n        for (let i = 0; i < blockSize32; i++)\n            V[i] = B32[Pi + i]; // V[0] = B[i]\n        let pos = 0;\n        await asyncLoop(N - 1, asyncTick, () => {\n            BlockMix(V, pos, V, (pos += blockSize32), r); // V[i] = BlockMix(V[i-1]);\n            blockMixCb();\n        });\n        BlockMix(V, (N - 1) * blockSize32, B32, Pi, r); // Process last element\n        blockMixCb();\n        await asyncLoop(N, asyncTick, () => {\n            // First u32 of the last 64-byte block (u32 is LE)\n            const j = B32[Pi + blockSize32 - 16] % N; // j = Integrify(X) % iterations\n            for (let k = 0; k < blockSize32; k++)\n                tmp[k] = B32[Pi + k] ^ V[j * blockSize32 + k]; // tmp = B ^ V[j]\n            BlockMix(tmp, 0, B32, Pi, r); // B = BlockMix(B ^ V[j])\n            blockMixCb();\n        });\n    }\n    return scryptOutput(password, dkLen, B, V, tmp);\n}\n//# sourceMappingURL=scrypt.js.map","import { scrypt as _nobleSync, scryptAsync as _nobleAsync } from \"@noble/hashes/scrypt\";\nimport { getBytes, hexlify as H } from \"../utils/index.js\";\nlet lockedSync = false, lockedAsync = false;\nconst _scryptAsync = async function (passwd, salt, N, r, p, dkLen, onProgress) {\n    return await _nobleAsync(passwd, salt, { N, r, p, dkLen, onProgress });\n};\nconst _scryptSync = function (passwd, salt, N, r, p, dkLen) {\n    return _nobleSync(passwd, salt, { N, r, p, dkLen });\n};\nlet __scryptAsync = _scryptAsync;\nlet __scryptSync = _scryptSync;\n/**\n *  The [[link-wiki-scrypt]] uses a memory and cpu hard method of\n *  derivation to increase the resource cost to brute-force a password\n *  for a given key.\n *\n *  This means this algorithm is intentionally slow, and can be tuned to\n *  become slower. As computation and memory speed improve over time,\n *  increasing the difficulty maintains the cost of an attacker.\n *\n *  For example, if a target time of 5 seconds is used, a legitimate user\n *  which knows their password requires only 5 seconds to unlock their\n *  account. A 6 character password has 68 billion possibilities, which\n *  would require an attacker to invest over 10,000 years of CPU time. This\n *  is of course a crude example (as password generally aren't random),\n *  but demonstrates to value of imposing large costs to decryption.\n *\n *  For this reason, if building a UI which involved decrypting or\n *  encrypting datsa using scrypt, it is recommended to use a\n *  [[ProgressCallback]] (as event short periods can seem lik an eternity\n *  if the UI freezes). Including the phrase //\"decrypting\"// in the UI\n *  can also help, assuring the user their waiting is for a good reason.\n *\n *  @_docloc: api/crypto:Passwords\n *\n *  @example:\n *    // The password must be converted to bytes, and it is generally\n *    // best practices to ensure the string has been normalized. Many\n *    // formats explicitly indicate the normalization form to use.\n *    password = \"hello\"\n *    passwordBytes = toUtf8Bytes(password, \"NFKC\")\n *\n *    salt = id(\"some-salt\")\n *\n *    // Compute the scrypt\n *    scrypt(passwordBytes, salt, 1024, 8, 1, 16)\n *    //_result:\n */\nexport async function scrypt(_passwd, _salt, N, r, p, dkLen, progress) {\n    const passwd = getBytes(_passwd, \"passwd\");\n    const salt = getBytes(_salt, \"salt\");\n    return H(await __scryptAsync(passwd, salt, N, r, p, dkLen, progress));\n}\nscrypt._ = _scryptAsync;\nscrypt.lock = function () { lockedAsync = true; };\nscrypt.register = function (func) {\n    if (lockedAsync) {\n        throw new Error(\"scrypt is locked\");\n    }\n    __scryptAsync = func;\n};\nObject.freeze(scrypt);\n/**\n *  Provides a synchronous variant of [[scrypt]].\n *\n *  This will completely lock up and freeze the UI in a browser and will\n *  prevent any event loop from progressing. For this reason, it is\n *  preferred to use the [async variant](scrypt).\n *\n *  @_docloc: api/crypto:Passwords\n *\n *  @example:\n *    // The password must be converted to bytes, and it is generally\n *    // best practices to ensure the string has been normalized. Many\n *    // formats explicitly indicate the normalization form to use.\n *    password = \"hello\"\n *    passwordBytes = toUtf8Bytes(password, \"NFKC\")\n *\n *    salt = id(\"some-salt\")\n *\n *    // Compute the scrypt\n *    scryptSync(passwordBytes, salt, 1024, 8, 1, 16)\n *    //_result:\n */\nexport function scryptSync(_passwd, _salt, N, r, p, dkLen) {\n    const passwd = getBytes(_passwd, \"passwd\");\n    const salt = getBytes(_salt, \"salt\");\n    return H(__scryptSync(passwd, salt, N, r, p, dkLen));\n}\nscryptSync._ = _scryptSync;\nscryptSync.lock = function () { lockedSync = true; };\nscryptSync.register = function (func) {\n    if (lockedSync) {\n        throw new Error(\"scryptSync is locked\");\n    }\n    __scryptSync = func;\n};\nObject.freeze(scryptSync);\n//# sourceMappingURL=scrypt.js.map","import { createHash } from \"./crypto.js\";\nimport { getBytes, hexlify } from \"../utils/index.js\";\nconst _sha256 = function (data) {\n    return createHash(\"sha256\").update(data).digest();\n};\nconst _sha512 = function (data) {\n    return createHash(\"sha512\").update(data).digest();\n};\nlet __sha256 = _sha256;\nlet __sha512 = _sha512;\nlet locked256 = false, locked512 = false;\n/**\n *  Compute the cryptographic SHA2-256 hash of %%data%%.\n *\n *  @_docloc: api/crypto:Hash Functions\n *  @returns DataHexstring\n *\n *  @example:\n *    sha256(\"0x\")\n *    //_result:\n *\n *    sha256(\"0x1337\")\n *    //_result:\n *\n *    sha256(new Uint8Array([ 0x13, 0x37 ]))\n *    //_result:\n *\n */\nexport function sha256(_data) {\n    const data = getBytes(_data, \"data\");\n    return hexlify(__sha256(data));\n}\nsha256._ = _sha256;\nsha256.lock = function () { locked256 = true; };\nsha256.register = function (func) {\n    if (locked256) {\n        throw new Error(\"sha256 is locked\");\n    }\n    __sha256 = func;\n};\nObject.freeze(sha256);\n/**\n *  Compute the cryptographic SHA2-512 hash of %%data%%.\n *\n *  @_docloc: api/crypto:Hash Functions\n *  @returns DataHexstring\n *\n *  @example:\n *    sha512(\"0x\")\n *    //_result:\n *\n *    sha512(\"0x1337\")\n *    //_result:\n *\n *    sha512(new Uint8Array([ 0x13, 0x37 ]))\n *    //_result:\n */\nexport function sha512(_data) {\n    const data = getBytes(_data, \"data\");\n    return hexlify(__sha512(data));\n}\nsha512._ = _sha512;\nsha512.lock = function () { locked512 = true; };\nsha512.register = function (func) {\n    if (locked512) {\n        throw new Error(\"sha512 is locked\");\n    }\n    __sha512 = func;\n};\nObject.freeze(sha256);\n//# sourceMappingURL=sha2.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// 100 lines of code in the file are duplicated from noble-hashes (utils).\n// This is OK: `abstract` directory does not use noble-hashes.\n// User may opt-in into using different hashing library. This way, noble-hashes\n// won't be included into their bundle.\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst u8a = (a) => a instanceof Uint8Array;\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexport function numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nexport function hexToNumber(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // Big Endian\n    return BigInt(hex === '' ? '0' : `0x${hex}`);\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const len = hex.length;\n    if (len % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + len);\n    const array = new Uint8Array(len / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// BE: Big Endian, LE: Little Endian\nexport function bytesToNumberBE(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nexport function bytesToNumberLE(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\nexport function numberToBytesBE(n, len) {\n    return hexToBytes(n.toString(16).padStart(len * 2, '0'));\n}\nexport function numberToBytesLE(n, len) {\n    return numberToBytesBE(n, len).reverse();\n}\n// Unpadded, rarely used\nexport function numberToVarBytesBE(n) {\n    return hexToBytes(numberToHexUnpadded(n));\n}\n/**\n * Takes hex string or Uint8Array, converts to Uint8Array.\n * Validates output length.\n * Will throw error for other types.\n * @param title descriptive title for an error e.g. 'private key'\n * @param hex hex string or Uint8Array\n * @param expectedLength optional, will compare to result array's length\n * @returns\n */\nexport function ensureBytes(title, hex, expectedLength) {\n    let res;\n    if (typeof hex === 'string') {\n        try {\n            res = hexToBytes(hex);\n        }\n        catch (e) {\n            throw new Error(`${title} must be valid hex string, got \"${hex}\". Cause: ${e}`);\n        }\n    }\n    else if (u8a(hex)) {\n        // Uint8Array.from() instead of hash.slice() because node.js Buffer\n        // is instance of Uint8Array, and its slice() creates **mutable** copy\n        res = Uint8Array.from(hex);\n    }\n    else {\n        throw new Error(`${title} must be hex string or Uint8Array`);\n    }\n    const len = res.length;\n    if (typeof expectedLength === 'number' && len !== expectedLength)\n        throw new Error(`${title} expected ${expectedLength} bytes, got ${len}`);\n    return res;\n}\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays) {\n    const r = new Uint8Array(arrays.reduce((sum, a) => sum + a.length, 0));\n    let pad = 0; // walk through each item, ensure they have proper type\n    arrays.forEach((a) => {\n        if (!u8a(a))\n            throw new Error('Uint8Array expected');\n        r.set(a, pad);\n        pad += a.length;\n    });\n    return r;\n}\nexport function equalBytes(b1, b2) {\n    // We don't care about timing attacks here\n    if (b1.length !== b2.length)\n        return false;\n    for (let i = 0; i < b1.length; i++)\n        if (b1[i] !== b2[i])\n            return false;\n    return true;\n}\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n// Bit operations\n/**\n * Calculates amount of bits in a bigint.\n * Same as `n.toString(2).length`\n */\nexport function bitLen(n) {\n    let len;\n    for (len = 0; n > _0n; n >>= _1n, len += 1)\n        ;\n    return len;\n}\n/**\n * Gets single bit at position.\n * NOTE: first bit position is 0 (same as arrays)\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\n */\nexport function bitGet(n, pos) {\n    return (n >> BigInt(pos)) & _1n;\n}\n/**\n * Sets single bit at position.\n */\nexport const bitSet = (n, pos, value) => {\n    return n | ((value ? _1n : _0n) << BigInt(pos));\n};\n/**\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\n */\nexport const bitMask = (n) => (_2n << BigInt(n - 1)) - _1n;\n// DRBG\nconst u8n = (data) => new Uint8Array(data); // creates Uint8Array\nconst u8fr = (arr) => Uint8Array.from(arr); // another shortcut\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg(hashLen, qByteLen, hmacFn) {\n    if (typeof hashLen !== 'number' || hashLen < 2)\n        throw new Error('hashLen must be a number');\n    if (typeof qByteLen !== 'number' || qByteLen < 2)\n        throw new Error('qByteLen must be a number');\n    if (typeof hmacFn !== 'function')\n        throw new Error('hmacFn must be a function');\n    // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n    let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n    let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n    let i = 0; // Iterations counter, will throw when over 1000\n    const reset = () => {\n        v.fill(1);\n        k.fill(0);\n        i = 0;\n    };\n    const h = (...b) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n    const reseed = (seed = u8n()) => {\n        // HMAC-DRBG reseed() function. Steps D-G\n        k = h(u8fr([0x00]), seed); // k = hmac(k || v || 0x00 || seed)\n        v = h(); // v = hmac(k || v)\n        if (seed.length === 0)\n            return;\n        k = h(u8fr([0x01]), seed); // k = hmac(k || v || 0x01 || seed)\n        v = h(); // v = hmac(k || v)\n    };\n    const gen = () => {\n        // HMAC-DRBG generate() function\n        if (i++ >= 1000)\n            throw new Error('drbg: tried 1000 values');\n        let len = 0;\n        const out = [];\n        while (len < qByteLen) {\n            v = h();\n            const sl = v.slice();\n            out.push(sl);\n            len += v.length;\n        }\n        return concatBytes(...out);\n    };\n    const genUntil = (seed, pred) => {\n        reset();\n        reseed(seed); // Steps D-G\n        let res = undefined; // Step H: grind until k is in [1..n-1]\n        while (!(res = pred(gen())))\n            reseed();\n        reset();\n        return res;\n    };\n    return genUntil;\n}\n// Validating curves and fields\nconst validatorFns = {\n    bigint: (val) => typeof val === 'bigint',\n    function: (val) => typeof val === 'function',\n    boolean: (val) => typeof val === 'boolean',\n    string: (val) => typeof val === 'string',\n    stringOrUint8Array: (val) => typeof val === 'string' || val instanceof Uint8Array,\n    isSafeInteger: (val) => Number.isSafeInteger(val),\n    array: (val) => Array.isArray(val),\n    field: (val, object) => object.Fp.isValid(val),\n    hash: (val) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n};\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\nexport function validateObject(object, validators, optValidators = {}) {\n    const checkField = (fieldName, type, isOptional) => {\n        const checkVal = validatorFns[type];\n        if (typeof checkVal !== 'function')\n            throw new Error(`Invalid validator \"${type}\", expected function`);\n        const val = object[fieldName];\n        if (isOptional && val === undefined)\n            return;\n        if (!checkVal(val, object)) {\n            throw new Error(`Invalid param ${String(fieldName)}=${val} (${typeof val}), expected ${type}`);\n        }\n    };\n    for (const [fieldName, type] of Object.entries(validators))\n        checkField(fieldName, type, false);\n    for (const [fieldName, type] of Object.entries(optValidators))\n        checkField(fieldName, type, true);\n    return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n//# sourceMappingURL=utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Utilities for modular arithmetics and finite fields\nimport { bitMask, numberToBytesBE, numberToBytesLE, bytesToNumberBE, bytesToNumberLE, ensureBytes, validateObject, } from './utils.js';\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _4n = BigInt(4), _5n = BigInt(5), _8n = BigInt(8);\n// prettier-ignore\nconst _9n = BigInt(9), _16n = BigInt(16);\n// Calculates a modulo b\nexport function mod(a, b) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently raise num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\n */\n// TODO: use field version && remove\nexport function pow(num, power, modulo) {\n    if (modulo <= _0n || power < _0n)\n        throw new Error('Expected power/modulo > 0');\n    if (modulo === _1n)\n        return _0n;\n    let res = _1n;\n    while (power > _0n) {\n        if (power & _1n)\n            res = (res * num) % modulo;\n        num = (num * num) % modulo;\n        power >>= _1n;\n    }\n    return res;\n}\n// Does x ^ (2 ^ power) mod p. pow2(30, 4) == 30 ^ (2 ^ 4)\nexport function pow2(x, power, modulo) {\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= modulo;\n    }\n    return res;\n}\n// Inverses number over modulo\nexport function invert(number, modulo) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    // Euclidean GCD https://brilliant.org/wiki/extended-euclidean-algorithm/\n    // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n    let a = mod(number, modulo);\n    let b = modulo;\n    // prettier-ignore\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        // JIT applies optimization if those two lines follow each other\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        // prettier-ignore\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\n/**\n * Tonelli-Shanks square root search algorithm.\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\n * Will start an infinite loop if field order P is not prime.\n * @param P field order\n * @returns function that takes field Fp (created from P) and number n\n */\nexport function tonelliShanks(P) {\n    // Legendre constant: used to calculate Legendre symbol (a | p),\n    // which denotes the value of a^((p-1)/2) (mod p).\n    // (a | p)  1    if a is a square (mod p)\n    // (a | p)  -1   if a is not a square (mod p)\n    // (a | p)  0    if a  0 (mod p)\n    const legendreC = (P - _1n) / _2n;\n    let Q, S, Z;\n    // Step 1: By factoring out powers of 2 from p - 1,\n    // find q and s such that p - 1 = q*(2^s) with q odd\n    for (Q = P - _1n, S = 0; Q % _2n === _0n; Q /= _2n, S++)\n        ;\n    // Step 2: Select a non-square z such that (z | p)  -1 and set c  zq\n    for (Z = _2n; Z < P && pow(Z, legendreC, P) !== P - _1n; Z++)\n        ;\n    // Fast-path\n    if (S === 1) {\n        const p1div4 = (P + _1n) / _4n;\n        return function tonelliFast(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Slow-path\n    const Q1div2 = (Q + _1n) / _2n;\n    return function tonelliSlow(Fp, n) {\n        // Step 0: Check that n is indeed a square: (n | p) should not be  -1\n        if (Fp.pow(n, legendreC) === Fp.neg(Fp.ONE))\n            throw new Error('Cannot find square root');\n        let r = S;\n        // TODO: will fail at Fp2/etc\n        let g = Fp.pow(Fp.mul(Fp.ONE, Z), Q); // will update both x and b\n        let x = Fp.pow(n, Q1div2); // first guess at the square root\n        let b = Fp.pow(n, Q); // first guess at the fudge factor\n        while (!Fp.eql(b, Fp.ONE)) {\n            if (Fp.eql(b, Fp.ZERO))\n                return Fp.ZERO; // https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm (4. If t = 0, return r = 0)\n            // Find m such b^(2^m)==1\n            let m = 1;\n            for (let t2 = Fp.sqr(b); m < r; m++) {\n                if (Fp.eql(t2, Fp.ONE))\n                    break;\n                t2 = Fp.sqr(t2); // t2 *= t2\n            }\n            // NOTE: r-m-1 can be bigger than 32, need to convert to bigint before shift, otherwise there will be overflow\n            const ge = Fp.pow(g, _1n << BigInt(r - m - 1)); // ge = 2^(r-m-1)\n            g = Fp.sqr(ge); // g = ge * ge\n            x = Fp.mul(x, ge); // x *= ge\n            b = Fp.mul(b, g); // b *= g\n            r = m;\n        }\n        return x;\n    };\n}\nexport function FpSqrt(P) {\n    // NOTE: different algorithms can give different roots, it is up to user to decide which one they want.\n    // For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n    // P  3 (mod 4)\n    // n = n^((P+1)/4)\n    if (P % _4n === _3n) {\n        // Not all roots possible!\n        // const ORDER =\n        //   0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n        // const NUM = 72057594037927816n;\n        const p1div4 = (P + _1n) / _4n;\n        return function sqrt3mod4(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            // Throw if root**2 != n\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Atkin algorithm for q  5 (mod 8), https://eprint.iacr.org/2012/685.pdf (page 10)\n    if (P % _8n === _5n) {\n        const c1 = (P - _5n) / _8n;\n        return function sqrt5mod8(Fp, n) {\n            const n2 = Fp.mul(n, _2n);\n            const v = Fp.pow(n2, c1);\n            const nv = Fp.mul(n, v);\n            const i = Fp.mul(Fp.mul(nv, _2n), v);\n            const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // P  9 (mod 16)\n    if (P % _16n === _9n) {\n        // NOTE: tonelli is too slow for bls-Fp2 calculations even on start\n        // Means we cannot use sqrt for constants at all!\n        //\n        // const c1 = Fp.sqrt(Fp.negate(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n        // const c2 = Fp.sqrt(c1);                //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n        // const c3 = Fp.sqrt(Fp.negate(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n        // const c4 = (P + _7n) / _16n;           //  4. c4 = (q + 7) / 16        # Integer arithmetic\n        // sqrt = (x) => {\n        //   let tv1 = Fp.pow(x, c4);             //  1. tv1 = x^c4\n        //   let tv2 = Fp.mul(c1, tv1);           //  2. tv2 = c1 * tv1\n        //   const tv3 = Fp.mul(c2, tv1);         //  3. tv3 = c2 * tv1\n        //   let tv4 = Fp.mul(c3, tv1);           //  4. tv4 = c3 * tv1\n        //   const e1 = Fp.equals(Fp.square(tv2), x); //  5.  e1 = (tv2^2) == x\n        //   const e2 = Fp.equals(Fp.square(tv3), x); //  6.  e2 = (tv3^2) == x\n        //   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n        //   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n        //   const e3 = Fp.equals(Fp.square(tv2), x); //  9.  e3 = (tv2^2) == x\n        //   return Fp.cmov(tv1, tv2, e3); //  10.  z = CMOV(tv1, tv2, e3)  # Select the sqrt from tv1 and tv2\n        // }\n    }\n    // Other cases: Tonelli-Shanks algorithm\n    return tonelliShanks(P);\n}\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num, modulo) => (mod(num, modulo) & _1n) === _1n;\n// prettier-ignore\nconst FIELD_FIELDS = [\n    'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n    'eql', 'add', 'sub', 'mul', 'pow', 'div',\n    'addN', 'subN', 'mulN', 'sqrN'\n];\nexport function validateField(field) {\n    const initial = {\n        ORDER: 'bigint',\n        MASK: 'bigint',\n        BYTES: 'isSafeInteger',\n        BITS: 'isSafeInteger',\n    };\n    const opts = FIELD_FIELDS.reduce((map, val) => {\n        map[val] = 'function';\n        return map;\n    }, initial);\n    return validateObject(field, opts);\n}\n// Generic field functions\n/**\n * Same as `pow` but for Fp: non-constant-time.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n */\nexport function FpPow(f, num, power) {\n    // Should have same speed as pow for bigints\n    // TODO: benchmark!\n    if (power < _0n)\n        throw new Error('Expected power > 0');\n    if (power === _0n)\n        return f.ONE;\n    if (power === _1n)\n        return num;\n    let p = f.ONE;\n    let d = num;\n    while (power > _0n) {\n        if (power & _1n)\n            p = f.mul(p, d);\n        d = f.sqr(d);\n        power >>= _1n;\n    }\n    return p;\n}\n/**\n * Efficiently invert an array of Field elements.\n * `inv(0)` will return `undefined` here: make sure to throw an error.\n */\nexport function FpInvertBatch(f, nums) {\n    const tmp = new Array(nums.length);\n    // Walk from first to last, multiply them by each other MOD p\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = acc;\n        return f.mul(acc, num);\n    }, f.ONE);\n    // Invert last element\n    const inverted = f.inv(lastMultiplied);\n    // Walk from last to first, multiply them by inverted each other MOD p\n    nums.reduceRight((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = f.mul(acc, tmp[i]);\n        return f.mul(acc, num);\n    }, inverted);\n    return tmp;\n}\nexport function FpDiv(f, lhs, rhs) {\n    return f.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, f.ORDER) : f.inv(rhs));\n}\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare(f) {\n    const legendreConst = (f.ORDER - _1n) / _2n; // Integer arithmetic\n    return (x) => {\n        const p = f.pow(x, legendreConst);\n        return f.eql(p, f.ZERO) || f.eql(p, f.ONE);\n    };\n}\n// CURVE.n lengths\nexport function nLength(n, nBitLength) {\n    // Bit size, byte size of CURVE.n\n    const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n    const nByteLength = Math.ceil(_nBitLength / 8);\n    return { nBitLength: _nBitLength, nByteLength };\n}\n/**\n * Initializes a finite field over prime. **Non-primes are not supported.**\n * Do not init in loop: slow. Very fragile: always run a benchmark on a change.\n * Major performance optimizations:\n * * a) denormalized operations like mulN instead of mul\n * * b) same object shape: never add or remove keys\n * * c) Object.freeze\n * @param ORDER prime positive bigint\n * @param bitLen how many bits the field consumes\n * @param isLE (def: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(ORDER, bitLen, isLE = false, redef = {}) {\n    if (ORDER <= _0n)\n        throw new Error(`Expected Field ORDER > 0, got ${ORDER}`);\n    const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, bitLen);\n    if (BYTES > 2048)\n        throw new Error('Field lengths over 2048 bytes are not supported');\n    const sqrtP = FpSqrt(ORDER);\n    const f = Object.freeze({\n        ORDER,\n        BITS,\n        BYTES,\n        MASK: bitMask(BITS),\n        ZERO: _0n,\n        ONE: _1n,\n        create: (num) => mod(num, ORDER),\n        isValid: (num) => {\n            if (typeof num !== 'bigint')\n                throw new Error(`Invalid field element: expected bigint, got ${typeof num}`);\n            return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n        },\n        is0: (num) => num === _0n,\n        isOdd: (num) => (num & _1n) === _1n,\n        neg: (num) => mod(-num, ORDER),\n        eql: (lhs, rhs) => lhs === rhs,\n        sqr: (num) => mod(num * num, ORDER),\n        add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n        sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n        mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n        pow: (num, power) => FpPow(f, num, power),\n        div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n        // Same as above, but doesn't normalize\n        sqrN: (num) => num * num,\n        addN: (lhs, rhs) => lhs + rhs,\n        subN: (lhs, rhs) => lhs - rhs,\n        mulN: (lhs, rhs) => lhs * rhs,\n        inv: (num) => invert(num, ORDER),\n        sqrt: redef.sqrt || ((n) => sqrtP(f, n)),\n        invertBatch: (lst) => FpInvertBatch(f, lst),\n        // TODO: do we really need constant cmov?\n        // We don't have const-time bigints anyway, so probably will be not very useful\n        cmov: (a, b, c) => (c ? b : a),\n        toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n        fromBytes: (bytes) => {\n            if (bytes.length !== BYTES)\n                throw new Error(`Fp.fromBytes: expected ${BYTES}, got ${bytes.length}`);\n            return isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n        },\n    });\n    return Object.freeze(f);\n}\nexport function FpSqrtOdd(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? root : Fp.neg(root);\n}\nexport function FpSqrtEven(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\n * Which makes it slightly more biased, less secure.\n * @deprecated use mapKeyToField instead\n */\nexport function hashToPrivateScalar(hash, groupOrder, isLE = false) {\n    hash = ensureBytes('privateHash', hash);\n    const hashLen = hash.length;\n    const minLen = nLength(groupOrder).nByteLength + 8;\n    if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n        throw new Error(`hashToPrivateScalar: expected ${minLen}-1024 bytes of input, got ${hashLen}`);\n    const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n    return mod(num, groupOrder - _1n) + _1n;\n}\n/**\n * Returns total number of bytes consumed by the field element.\n * For example, 32 bytes for usual 256-bit weierstrass curve.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of field\n */\nexport function getFieldBytesLength(fieldOrder) {\n    if (typeof fieldOrder !== 'bigint')\n        throw new Error('field order must be bigint');\n    const bitLength = fieldOrder.toString(2).length;\n    return Math.ceil(bitLength / 8);\n}\n/**\n * Returns minimal amount of bytes that can be safely reduced\n * by field order.\n * Should be 2^-128 for 128-bit curve such as P256.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of target hash\n */\nexport function getMinHashLength(fieldOrder) {\n    const length = getFieldBytesLength(fieldOrder);\n    return length + Math.ceil(length / 2);\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being negligible.\n * Needs at least 48 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\n * @param hash hash output from SHA3 or a similar function\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\n * @param isLE interpret hash bytes as LE num\n * @returns valid private scalar\n */\nexport function mapHashToField(key, fieldOrder, isLE = false) {\n    const len = key.length;\n    const fieldLen = getFieldBytesLength(fieldOrder);\n    const minLen = getMinHashLength(fieldOrder);\n    // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\n    if (len < 16 || len < minLen || len > 1024)\n        throw new Error(`expected ${minLen}-1024 bytes of input, got ${len}`);\n    const num = isLE ? bytesToNumberBE(key) : bytesToNumberLE(key);\n    // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n    const reduced = mod(num, fieldOrder - _1n) + _1n;\n    return isLE ? numberToBytesLE(reduced, fieldLen) : numberToBytesBE(reduced, fieldLen);\n}\n//# sourceMappingURL=modular.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Abelian group utilities\nimport { validateField, nLength } from './modular.js';\nimport { validateObject } from './utils.js';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n// Elliptic curve multiplication of Point by scalar. Fragile.\n// Scalars should always be less than curve order: this should be checked inside of a curve itself.\n// Creates precomputation tables for fast multiplication:\n// - private scalar is split by fixed size windows of W bits\n// - every window point is collected from window's table & added to accumulator\n// - since windows are different, same point inside tables won't be accessed more than once per calc\n// - each multiplication is 'Math.ceil(CURVE_ORDER / ) + 1' point additions (fixed for any scalar)\n// - +1 window is neccessary for wNAF\n// - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n// TODO: Research returning 2d JS array of windows, instead of a single window. This would allow\n// windows to be in different memory locations\nexport function wNAF(c, bits) {\n    const constTimeNegate = (condition, item) => {\n        const neg = item.negate();\n        return condition ? neg : item;\n    };\n    const opts = (W) => {\n        const windows = Math.ceil(bits / W) + 1; // +1, because\n        const windowSize = 2 ** (W - 1); // -1 because we skip zero\n        return { windows, windowSize };\n    };\n    return {\n        constTimeNegate,\n        // non-const time multiplication ladder\n        unsafeLadder(elm, n) {\n            let p = c.ZERO;\n            let d = elm;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        },\n        /**\n         * Creates a wNAF precomputation window. Used for caching.\n         * Default window size is set by `utils.precompute()` and is equal to 8.\n         * Number of precomputed points depends on the curve size:\n         * 2^(1) * (Math.ceil( / ) + 1), where:\n         * -  is the window size\n         * -  is the bitlength of the curve order.\n         * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n         * @returns precomputed point tables flattened to a single array\n         */\n        precomputeWindow(elm, W) {\n            const { windows, windowSize } = opts(W);\n            const points = [];\n            let p = elm;\n            let base = p;\n            for (let window = 0; window < windows; window++) {\n                base = p;\n                points.push(base);\n                // =1, because we skip zero\n                for (let i = 1; i < windowSize; i++) {\n                    base = base.add(p);\n                    points.push(base);\n                }\n                p = base.double();\n            }\n            return points;\n        },\n        /**\n         * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @returns real and fake (for const-time) points\n         */\n        wNAF(W, precomputes, n) {\n            // TODO: maybe check that scalar is less than group order? wNAF behavious is undefined otherwise\n            // But need to carefully remove other checks before wNAF. ORDER == bits here\n            const { windows, windowSize } = opts(W);\n            let p = c.ZERO;\n            let f = c.BASE;\n            const mask = BigInt(2 ** W - 1); // Create mask with W ones: 0b1111 for W=4 etc.\n            const maxNumber = 2 ** W;\n            const shiftBy = BigInt(W);\n            for (let window = 0; window < windows; window++) {\n                const offset = window * windowSize;\n                // Extract W bits.\n                let wbits = Number(n & mask);\n                // Shift number by W bits.\n                n >>= shiftBy;\n                // If the bits are bigger than max size, we'll split those.\n                // +224 => 256 - 32\n                if (wbits > windowSize) {\n                    wbits -= maxNumber;\n                    n += _1n;\n                }\n                // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n                // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n                // there is negate now: it is possible that negated element from low value\n                // would be the same as high element, which will create carry into next window.\n                // It's not obvious how this can fail, but still worth investigating later.\n                // Check if we're onto Zero point.\n                // Add random point inside current window to f.\n                const offset1 = offset;\n                const offset2 = offset + Math.abs(wbits) - 1; // -1 because we skip zero\n                const cond1 = window % 2 !== 0;\n                const cond2 = wbits < 0;\n                if (wbits === 0) {\n                    // The most important part for const-time getPublicKey\n                    f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n                }\n                else {\n                    p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n                }\n            }\n            // JIT-compiler should not eliminate f here, since it will later be used in normalizeZ()\n            // Even if the variable is still unused, there are some checks which will\n            // throw an exception, so compiler needs to prove they won't happen, which is hard.\n            // At this point there is a way to F be infinity-point even if p is not,\n            // which makes it less const-time: around 1 bigint multiply.\n            return { p, f };\n        },\n        wNAFCached(P, precomputesMap, n, transform) {\n            // @ts-ignore\n            const W = P._WINDOW_SIZE || 1;\n            // Calculate precomputes on a first run, reuse them after\n            let comp = precomputesMap.get(P);\n            if (!comp) {\n                comp = this.precomputeWindow(P, W);\n                if (W !== 1) {\n                    precomputesMap.set(P, transform(comp));\n                }\n            }\n            return this.wNAF(W, comp, n);\n        },\n    };\n}\nexport function validateBasic(curve) {\n    validateField(curve.Fp);\n    validateObject(curve, {\n        n: 'bigint',\n        h: 'bigint',\n        Gx: 'field',\n        Gy: 'field',\n    }, {\n        nBitLength: 'isSafeInteger',\n        nByteLength: 'isSafeInteger',\n    });\n    // Set defaults\n    return Object.freeze({\n        ...nLength(curve.n, curve.nBitLength),\n        ...curve,\n        ...{ p: curve.Fp.ORDER },\n    });\n}\n//# sourceMappingURL=curve.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Short Weierstrass curve. The formula is: y = x + ax + b\nimport * as mod from './modular.js';\nimport * as ut from './utils.js';\nimport { ensureBytes } from './utils.js';\nimport { wNAF, validateBasic } from './curve.js';\nfunction validatePointOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        a: 'field',\n        b: 'field',\n    }, {\n        allowedPrivateKeyLengths: 'array',\n        wrapPrivateKey: 'boolean',\n        isTorsionFree: 'function',\n        clearCofactor: 'function',\n        allowInfinityPoint: 'boolean',\n        fromBytes: 'function',\n        toBytes: 'function',\n    });\n    const { endo, Fp, a } = opts;\n    if (endo) {\n        if (!Fp.eql(a, Fp.ZERO)) {\n            throw new Error('Endomorphism can only be defined for Koblitz curves that have a=0');\n        }\n        if (typeof endo !== 'object' ||\n            typeof endo.beta !== 'bigint' ||\n            typeof endo.splitScalar !== 'function') {\n            throw new Error('Expected endomorphism with beta: bigint and splitScalar: function');\n        }\n    }\n    return Object.freeze({ ...opts });\n}\n// ASN.1 DER encoding utilities\nconst { bytesToNumberBE: b2n, hexToBytes: h2b } = ut;\nexport const DER = {\n    // asn.1 DER encoding utils\n    Err: class DERErr extends Error {\n        constructor(m = '') {\n            super(m);\n        }\n    },\n    _parseInt(data) {\n        const { Err: E } = DER;\n        if (data.length < 2 || data[0] !== 0x02)\n            throw new E('Invalid signature integer tag');\n        const len = data[1];\n        const res = data.subarray(2, len + 2);\n        if (!len || res.length !== len)\n            throw new E('Invalid signature integer: wrong length');\n        // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n        // since we always use positive integers here. It must always be empty:\n        // - add zero byte if exists\n        // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n        if (res[0] & 0b10000000)\n            throw new E('Invalid signature integer: negative');\n        if (res[0] === 0x00 && !(res[1] & 0b10000000))\n            throw new E('Invalid signature integer: unnecessary leading zero');\n        return { d: b2n(res), l: data.subarray(len + 2) }; // d is data, l is left\n    },\n    toSig(hex) {\n        // parse DER signature\n        const { Err: E } = DER;\n        const data = typeof hex === 'string' ? h2b(hex) : hex;\n        if (!(data instanceof Uint8Array))\n            throw new Error('ui8a expected');\n        let l = data.length;\n        if (l < 2 || data[0] != 0x30)\n            throw new E('Invalid signature tag');\n        if (data[1] !== l - 2)\n            throw new E('Invalid signature: incorrect length');\n        const { d: r, l: sBytes } = DER._parseInt(data.subarray(2));\n        const { d: s, l: rBytesLeft } = DER._parseInt(sBytes);\n        if (rBytesLeft.length)\n            throw new E('Invalid signature: left bytes after parsing');\n        return { r, s };\n    },\n    hexFromSig(sig) {\n        // Add leading zero if first byte has negative bit enabled. More details in '_parseInt'\n        const slice = (s) => (Number.parseInt(s[0], 16) & 0b1000 ? '00' + s : s);\n        const h = (num) => {\n            const hex = num.toString(16);\n            return hex.length & 1 ? `0${hex}` : hex;\n        };\n        const s = slice(h(sig.s));\n        const r = slice(h(sig.r));\n        const shl = s.length / 2;\n        const rhl = r.length / 2;\n        const sl = h(shl);\n        const rl = h(rhl);\n        return `30${h(rhl + shl + 4)}02${rl}${r}02${sl}${s}`;\n    },\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\nexport function weierstrassPoints(opts) {\n    const CURVE = validatePointOpts(opts);\n    const { Fp } = CURVE; // All curves has same field / group length as for now, but they can differ\n    const toBytes = CURVE.toBytes ||\n        ((_c, point, _isCompressed) => {\n            const a = point.toAffine();\n            return ut.concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n        });\n    const fromBytes = CURVE.fromBytes ||\n        ((bytes) => {\n            // const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n            const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n            const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n            return { x, y };\n        });\n    /**\n     * y = x + ax + b: Short weierstrass curve formula\n     * @returns y\n     */\n    function weierstrassEquation(x) {\n        const { a, b } = CURVE;\n        const x2 = Fp.sqr(x); // x * x\n        const x3 = Fp.mul(x2, x); // x2 * x\n        return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n    }\n    // Validate whether the passed curve params are valid.\n    // We check if curve equation works for generator point.\n    // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n    // ProjectivePoint class has not been initialized yet.\n    if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx)))\n        throw new Error('bad generator point: equation left != right');\n    // Valid group elements reside in range 1..n-1\n    function isWithinCurveOrder(num) {\n        return typeof num === 'bigint' && _0n < num && num < CURVE.n;\n    }\n    function assertGE(num) {\n        if (!isWithinCurveOrder(num))\n            throw new Error('Expected valid bigint: 0 < bigint < curve.n');\n    }\n    // Validates if priv key is valid and converts it to bigint.\n    // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n    function normPrivateKeyToScalar(key) {\n        const { allowedPrivateKeyLengths: lengths, nByteLength, wrapPrivateKey, n } = CURVE;\n        if (lengths && typeof key !== 'bigint') {\n            if (key instanceof Uint8Array)\n                key = ut.bytesToHex(key);\n            // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n            if (typeof key !== 'string' || !lengths.includes(key.length))\n                throw new Error('Invalid key');\n            key = key.padStart(nByteLength * 2, '0');\n        }\n        let num;\n        try {\n            num =\n                typeof key === 'bigint'\n                    ? key\n                    : ut.bytesToNumberBE(ensureBytes('private key', key, nByteLength));\n        }\n        catch (error) {\n            throw new Error(`private key must be ${nByteLength} bytes, hex or bigint, not ${typeof key}`);\n        }\n        if (wrapPrivateKey)\n            num = mod.mod(num, n); // disabled by default, enabled for BLS\n        assertGE(num); // num in range [1..N-1]\n        return num;\n    }\n    const pointPrecomputes = new Map();\n    function assertPrjPoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ProjectivePoint expected');\n    }\n    /**\n     * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z)  (x=x/z, y=y/z)\n     * Default Point works in 2d / affine coordinates: (x, y)\n     * We're doing calculations in projective, because its operations don't require costly inversion.\n     */\n    class Point {\n        constructor(px, py, pz) {\n            this.px = px;\n            this.py = py;\n            this.pz = pz;\n            if (px == null || !Fp.isValid(px))\n                throw new Error('x required');\n            if (py == null || !Fp.isValid(py))\n                throw new Error('y required');\n            if (pz == null || !Fp.isValid(pz))\n                throw new Error('z required');\n        }\n        // Does not validate if the point is on-curve.\n        // Use fromHex instead, or call assertValidity() later.\n        static fromAffine(p) {\n            const { x, y } = p || {};\n            if (!p || !Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('invalid affine point');\n            if (p instanceof Point)\n                throw new Error('projective point not allowed');\n            const is0 = (i) => Fp.eql(i, Fp.ZERO);\n            // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n            if (is0(x) && is0(y))\n                return Point.ZERO;\n            return new Point(x, y, Fp.ONE);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        /**\n         * Takes a bunch of Projective Points but executes only one\n         * inversion on all of them. Inversion is very slow operation,\n         * so this improves performance massively.\n         * Optimization: converts a list of projective points to a list of identical points with Z=1.\n         */\n        static normalizeZ(points) {\n            const toInv = Fp.invertBatch(points.map((p) => p.pz));\n            return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n        }\n        /**\n         * Converts hash string or Uint8Array to Point.\n         * @param hex short/long ECDSA hex\n         */\n        static fromHex(hex) {\n            const P = Point.fromAffine(fromBytes(ensureBytes('pointHex', hex)));\n            P.assertValidity();\n            return P;\n        }\n        // Multiplies generator point by privateKey.\n        static fromPrivateKey(privateKey) {\n            return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            this._WINDOW_SIZE = windowSize;\n            pointPrecomputes.delete(this);\n        }\n        // A point on curve is valid if it conforms to equation.\n        assertValidity() {\n            if (this.is0()) {\n                // (0, 1, 0) aka ZERO is invalid in most contexts.\n                // In BLS, ZERO can be serialized, so we allow it.\n                // (0, 0, 0) is wrong representation of ZERO and is always invalid.\n                if (CURVE.allowInfinityPoint && !Fp.is0(this.py))\n                    return;\n                throw new Error('bad point: ZERO');\n            }\n            // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n            const { x, y } = this.toAffine();\n            // Check if x, y are valid field elements\n            if (!Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('bad point: x or y not FE');\n            const left = Fp.sqr(y); // y\n            const right = weierstrassEquation(x); // x + ax + b\n            if (!Fp.eql(left, right))\n                throw new Error('bad point: equation left != right');\n            if (!this.isTorsionFree())\n                throw new Error('bad point: not in prime-order subgroup');\n        }\n        hasEvenY() {\n            const { y } = this.toAffine();\n            if (Fp.isOdd)\n                return !Fp.isOdd(y);\n            throw new Error(\"Field doesn't support isOdd\");\n        }\n        /**\n         * Compare one point to another.\n         */\n        equals(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n            const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n            return U1 && U2;\n        }\n        /**\n         * Flips point to one corresponding to (x, -y) in Affine coordinates.\n         */\n        negate() {\n            return new Point(this.px, Fp.neg(this.py), this.pz);\n        }\n        // Renes-Costello-Batina exception-free doubling formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 3\n        // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n        double() {\n            const { a, b } = CURVE;\n            const b3 = Fp.mul(b, _3n);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            let t0 = Fp.mul(X1, X1); // step 1\n            let t1 = Fp.mul(Y1, Y1);\n            let t2 = Fp.mul(Z1, Z1);\n            let t3 = Fp.mul(X1, Y1);\n            t3 = Fp.add(t3, t3); // step 5\n            Z3 = Fp.mul(X1, Z1);\n            Z3 = Fp.add(Z3, Z3);\n            X3 = Fp.mul(a, Z3);\n            Y3 = Fp.mul(b3, t2);\n            Y3 = Fp.add(X3, Y3); // step 10\n            X3 = Fp.sub(t1, Y3);\n            Y3 = Fp.add(t1, Y3);\n            Y3 = Fp.mul(X3, Y3);\n            X3 = Fp.mul(t3, X3);\n            Z3 = Fp.mul(b3, Z3); // step 15\n            t2 = Fp.mul(a, t2);\n            t3 = Fp.sub(t0, t2);\n            t3 = Fp.mul(a, t3);\n            t3 = Fp.add(t3, Z3);\n            Z3 = Fp.add(t0, t0); // step 20\n            t0 = Fp.add(Z3, t0);\n            t0 = Fp.add(t0, t2);\n            t0 = Fp.mul(t0, t3);\n            Y3 = Fp.add(Y3, t0);\n            t2 = Fp.mul(Y1, Z1); // step 25\n            t2 = Fp.add(t2, t2);\n            t0 = Fp.mul(t2, t3);\n            X3 = Fp.sub(X3, t0);\n            Z3 = Fp.mul(t2, t1);\n            Z3 = Fp.add(Z3, Z3); // step 30\n            Z3 = Fp.add(Z3, Z3);\n            return new Point(X3, Y3, Z3);\n        }\n        // Renes-Costello-Batina exception-free addition formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 1\n        // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n        add(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            const a = CURVE.a;\n            const b3 = Fp.mul(CURVE.b, _3n);\n            let t0 = Fp.mul(X1, X2); // step 1\n            let t1 = Fp.mul(Y1, Y2);\n            let t2 = Fp.mul(Z1, Z2);\n            let t3 = Fp.add(X1, Y1);\n            let t4 = Fp.add(X2, Y2); // step 5\n            t3 = Fp.mul(t3, t4);\n            t4 = Fp.add(t0, t1);\n            t3 = Fp.sub(t3, t4);\n            t4 = Fp.add(X1, Z1);\n            let t5 = Fp.add(X2, Z2); // step 10\n            t4 = Fp.mul(t4, t5);\n            t5 = Fp.add(t0, t2);\n            t4 = Fp.sub(t4, t5);\n            t5 = Fp.add(Y1, Z1);\n            X3 = Fp.add(Y2, Z2); // step 15\n            t5 = Fp.mul(t5, X3);\n            X3 = Fp.add(t1, t2);\n            t5 = Fp.sub(t5, X3);\n            Z3 = Fp.mul(a, t4);\n            X3 = Fp.mul(b3, t2); // step 20\n            Z3 = Fp.add(X3, Z3);\n            X3 = Fp.sub(t1, Z3);\n            Z3 = Fp.add(t1, Z3);\n            Y3 = Fp.mul(X3, Z3);\n            t1 = Fp.add(t0, t0); // step 25\n            t1 = Fp.add(t1, t0);\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.mul(b3, t4);\n            t1 = Fp.add(t1, t2);\n            t2 = Fp.sub(t0, t2); // step 30\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.add(t4, t2);\n            t0 = Fp.mul(t1, t4);\n            Y3 = Fp.add(Y3, t0);\n            t0 = Fp.mul(t5, t4); // step 35\n            X3 = Fp.mul(t3, X3);\n            X3 = Fp.sub(X3, t0);\n            t0 = Fp.mul(t3, t1);\n            Z3 = Fp.mul(t5, Z3);\n            Z3 = Fp.add(Z3, t0); // step 40\n            return new Point(X3, Y3, Z3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        wNAF(n) {\n            return wnaf.wNAFCached(this, pointPrecomputes, n, (comp) => {\n                const toInv = Fp.invertBatch(comp.map((p) => p.pz));\n                return comp.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n            });\n        }\n        /**\n         * Non-constant-time multiplication. Uses double-and-add algorithm.\n         * It's faster, but should only be used when you don't care about\n         * an exposed private key e.g. sig verification, which works over *public* keys.\n         */\n        multiplyUnsafe(n) {\n            const I = Point.ZERO;\n            if (n === _0n)\n                return I;\n            assertGE(n); // Will throw on 0\n            if (n === _1n)\n                return this;\n            const { endo } = CURVE;\n            if (!endo)\n                return wnaf.unsafeLadder(this, n);\n            // Apply endomorphism\n            let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let k1p = I;\n            let k2p = I;\n            let d = this;\n            while (k1 > _0n || k2 > _0n) {\n                if (k1 & _1n)\n                    k1p = k1p.add(d);\n                if (k2 & _1n)\n                    k2p = k2p.add(d);\n                d = d.double();\n                k1 >>= _1n;\n                k2 >>= _1n;\n            }\n            if (k1neg)\n                k1p = k1p.negate();\n            if (k2neg)\n                k2p = k2p.negate();\n            k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n            return k1p.add(k2p);\n        }\n        /**\n         * Constant time multiplication.\n         * Uses wNAF method. Windowed method may be 10% faster,\n         * but takes 2x longer to generate and consumes 2x memory.\n         * Uses precomputes when available.\n         * Uses endomorphism for Koblitz curves.\n         * @param scalar by which the point would be multiplied\n         * @returns New point\n         */\n        multiply(scalar) {\n            assertGE(scalar);\n            let n = scalar;\n            let point, fake; // Fake point is used to const-time mult\n            const { endo } = CURVE;\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n                let { p: k1p, f: f1p } = this.wNAF(k1);\n                let { p: k2p, f: f2p } = this.wNAF(k2);\n                k1p = wnaf.constTimeNegate(k1neg, k1p);\n                k2p = wnaf.constTimeNegate(k2neg, k2p);\n                k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n                point = k1p.add(k2p);\n                fake = f1p.add(f2p);\n            }\n            else {\n                const { p, f } = this.wNAF(n);\n                point = p;\n                fake = f;\n            }\n            // Normalize `z` for both points, but return only real one\n            return Point.normalizeZ([point, fake])[0];\n        }\n        /**\n         * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n         * Not using Strauss-Shamir trick: precomputation tables are faster.\n         * The trick could be useful if both P and Q are not G (not in our case).\n         * @returns non-zero affine point\n         */\n        multiplyAndAddUnsafe(Q, a, b) {\n            const G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n            const mul = (P, a // Select faster multiply() method\n            ) => (a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a));\n            const sum = mul(this, a).add(mul(Q, b));\n            return sum.is0() ? undefined : sum;\n        }\n        // Converts Projective point to affine (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        // (x, y, z)  (x=x/z, y=y/z)\n        toAffine(iz) {\n            const { px: x, py: y, pz: z } = this;\n            const is0 = this.is0();\n            // If invZ was 0, we return zero point. However we still want to execute\n            // all operations, so we replace invZ with a random number, 1.\n            if (iz == null)\n                iz = is0 ? Fp.ONE : Fp.inv(z);\n            const ax = Fp.mul(x, iz);\n            const ay = Fp.mul(y, iz);\n            const zz = Fp.mul(z, iz);\n            if (is0)\n                return { x: Fp.ZERO, y: Fp.ZERO };\n            if (!Fp.eql(zz, Fp.ONE))\n                throw new Error('invZ was invalid');\n            return { x: ax, y: ay };\n        }\n        isTorsionFree() {\n            const { h: cofactor, isTorsionFree } = CURVE;\n            if (cofactor === _1n)\n                return true; // No subgroups, always torsion-free\n            if (isTorsionFree)\n                return isTorsionFree(Point, this);\n            throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n        }\n        clearCofactor() {\n            const { h: cofactor, clearCofactor } = CURVE;\n            if (cofactor === _1n)\n                return this; // Fast-path\n            if (clearCofactor)\n                return clearCofactor(Point, this);\n            return this.multiplyUnsafe(CURVE.h);\n        }\n        toRawBytes(isCompressed = true) {\n            this.assertValidity();\n            return toBytes(Point, this, isCompressed);\n        }\n        toHex(isCompressed = true) {\n            return ut.bytesToHex(this.toRawBytes(isCompressed));\n        }\n    }\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n    const _bits = CURVE.nBitLength;\n    const wnaf = wNAF(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n    // Validate if generator point is on curve\n    return {\n        CURVE,\n        ProjectivePoint: Point,\n        normPrivateKeyToScalar,\n        weierstrassEquation,\n        isWithinCurveOrder,\n    };\n}\nfunction validateOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        hash: 'hash',\n        hmac: 'function',\n        randomBytes: 'function',\n    }, {\n        bits2int: 'function',\n        bits2int_modN: 'function',\n        lowS: 'boolean',\n    });\n    return Object.freeze({ lowS: true, ...opts });\n}\nexport function weierstrass(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { Fp, n: CURVE_ORDER } = CURVE;\n    const compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n    const uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n    function isValidFieldElement(num) {\n        return _0n < num && num < Fp.ORDER; // 0 is banned since it's not invertible FE\n    }\n    function modN(a) {\n        return mod.mod(a, CURVE_ORDER);\n    }\n    function invN(a) {\n        return mod.invert(a, CURVE_ORDER);\n    }\n    const { ProjectivePoint: Point, normPrivateKeyToScalar, weierstrassEquation, isWithinCurveOrder, } = weierstrassPoints({\n        ...CURVE,\n        toBytes(_c, point, isCompressed) {\n            const a = point.toAffine();\n            const x = Fp.toBytes(a.x);\n            const cat = ut.concatBytes;\n            if (isCompressed) {\n                return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n            }\n            else {\n                return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n            }\n        },\n        fromBytes(bytes) {\n            const len = bytes.length;\n            const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // this.assertValidity() is done inside of fromHex\n            if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n                const x = ut.bytesToNumberBE(tail);\n                if (!isValidFieldElement(x))\n                    throw new Error('Point is not on curve');\n                const y2 = weierstrassEquation(x); // y = x + ax + b\n                let y = Fp.sqrt(y2); // y = y ^ (p+1)/4\n                const isYOdd = (y & _1n) === _1n;\n                // ECDSA\n                const isHeadOdd = (head & 1) === 1;\n                if (isHeadOdd !== isYOdd)\n                    y = Fp.neg(y);\n                return { x, y };\n            }\n            else if (len === uncompressedLen && head === 0x04) {\n                const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n                const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n                return { x, y };\n            }\n            else {\n                throw new Error(`Point of length ${len} was invalid. Expected ${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes`);\n            }\n        },\n    });\n    const numToNByteStr = (num) => ut.bytesToHex(ut.numberToBytesBE(num, CURVE.nByteLength));\n    function isBiggerThanHalfOrder(number) {\n        const HALF = CURVE_ORDER >> _1n;\n        return number > HALF;\n    }\n    function normalizeS(s) {\n        return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n    }\n    // slice bytes num\n    const slcNum = (b, from, to) => ut.bytesToNumberBE(b.slice(from, to));\n    /**\n     * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n     */\n    class Signature {\n        constructor(r, s, recovery) {\n            this.r = r;\n            this.s = s;\n            this.recovery = recovery;\n            this.assertValidity();\n        }\n        // pair (bytes of r, bytes of s)\n        static fromCompact(hex) {\n            const l = CURVE.nByteLength;\n            hex = ensureBytes('compactSignature', hex, l * 2);\n            return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n        }\n        // DER encoded ECDSA signature\n        // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n        static fromDER(hex) {\n            const { r, s } = DER.toSig(ensureBytes('DER', hex));\n            return new Signature(r, s);\n        }\n        assertValidity() {\n            // can use assertGE here\n            if (!isWithinCurveOrder(this.r))\n                throw new Error('r must be 0 < r < CURVE.n');\n            if (!isWithinCurveOrder(this.s))\n                throw new Error('s must be 0 < s < CURVE.n');\n        }\n        addRecoveryBit(recovery) {\n            return new Signature(this.r, this.s, recovery);\n        }\n        recoverPublicKey(msgHash) {\n            const { r, s, recovery: rec } = this;\n            const h = bits2int_modN(ensureBytes('msgHash', msgHash)); // Truncate hash\n            if (rec == null || ![0, 1, 2, 3].includes(rec))\n                throw new Error('recovery id invalid');\n            const radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n            if (radj >= Fp.ORDER)\n                throw new Error('recovery id 2 or 3 invalid');\n            const prefix = (rec & 1) === 0 ? '02' : '03';\n            const R = Point.fromHex(prefix + numToNByteStr(radj));\n            const ir = invN(radj); // r^-1\n            const u1 = modN(-h * ir); // -hr^-1\n            const u2 = modN(s * ir); // sr^-1\n            const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n            if (!Q)\n                throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n            Q.assertValidity();\n            return Q;\n        }\n        // Signatures should be low-s, to prevent malleability.\n        hasHighS() {\n            return isBiggerThanHalfOrder(this.s);\n        }\n        normalizeS() {\n            return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n        }\n        // DER-encoded\n        toDERRawBytes() {\n            return ut.hexToBytes(this.toDERHex());\n        }\n        toDERHex() {\n            return DER.hexFromSig({ r: this.r, s: this.s });\n        }\n        // padded bytes of r, then padded bytes of s\n        toCompactRawBytes() {\n            return ut.hexToBytes(this.toCompactHex());\n        }\n        toCompactHex() {\n            return numToNByteStr(this.r) + numToNByteStr(this.s);\n        }\n    }\n    const utils = {\n        isValidPrivateKey(privateKey) {\n            try {\n                normPrivateKeyToScalar(privateKey);\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        },\n        normPrivateKeyToScalar: normPrivateKeyToScalar,\n        /**\n         * Produces cryptographically secure private key from random of size\n         * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n         */\n        randomPrivateKey: () => {\n            const length = mod.getMinHashLength(CURVE.n);\n            return mod.mapHashToField(CURVE.randomBytes(length), CURVE.n);\n        },\n        /**\n         * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n         * Allows to massively speed-up `point.multiply(scalar)`.\n         * @returns cached point\n         * @example\n         * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n         * fast.multiply(privKey); // much faster ECDH now\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            point._setWindowSize(windowSize);\n            point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n            return point;\n        },\n    };\n    /**\n     * Computes public key for a private key. Checks for validity of the private key.\n     * @param privateKey private key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns Public key, full when isCompressed=false; short when isCompressed=true\n     */\n    function getPublicKey(privateKey, isCompressed = true) {\n        return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n    }\n    /**\n     * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n     */\n    function isProbPub(item) {\n        const arr = item instanceof Uint8Array;\n        const str = typeof item === 'string';\n        const len = (arr || str) && item.length;\n        if (arr)\n            return len === compressedLen || len === uncompressedLen;\n        if (str)\n            return len === 2 * compressedLen || len === 2 * uncompressedLen;\n        if (item instanceof Point)\n            return true;\n        return false;\n    }\n    /**\n     * ECDH (Elliptic Curve Diffie Hellman).\n     * Computes shared public key from private key and public key.\n     * Checks: 1) private key validity 2) shared key is on-curve.\n     * Does NOT hash the result.\n     * @param privateA private key\n     * @param publicB different public key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns shared public key\n     */\n    function getSharedSecret(privateA, publicB, isCompressed = true) {\n        if (isProbPub(privateA))\n            throw new Error('first arg must be private key');\n        if (!isProbPub(publicB))\n            throw new Error('second arg must be public key');\n        const b = Point.fromHex(publicB); // check for being on-curve\n        return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n    }\n    // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n    // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n    // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n    // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n    const bits2int = CURVE.bits2int ||\n        function (bytes) {\n            // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n            // for some cases, since bytes.length * 8 is not actual bitLength.\n            const num = ut.bytesToNumberBE(bytes); // check for == u8 done here\n            const delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n            return delta > 0 ? num >> BigInt(delta) : num;\n        };\n    const bits2int_modN = CURVE.bits2int_modN ||\n        function (bytes) {\n            return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n        };\n    // NOTE: pads output with zero as per spec\n    const ORDER_MASK = ut.bitMask(CURVE.nBitLength);\n    /**\n     * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n     */\n    function int2octets(num) {\n        if (typeof num !== 'bigint')\n            throw new Error('bigint expected');\n        if (!(_0n <= num && num < ORDER_MASK))\n            throw new Error(`bigint expected < 2^${CURVE.nBitLength}`);\n        // works with order, can have different size than numToField!\n        return ut.numberToBytesBE(num, CURVE.nByteLength);\n    }\n    // Steps A, D of RFC6979 3.2\n    // Creates RFC6979 seed; converts msg/privKey to numbers.\n    // Used only in sign, not in verify.\n    // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order, this will be wrong at least for P521.\n    // Also it can be bigger for P224 + SHA256\n    function prepSig(msgHash, privateKey, opts = defaultSigOpts) {\n        if (['recovered', 'canonical'].some((k) => k in opts))\n            throw new Error('sign() legacy options not supported');\n        const { hash, randomBytes } = CURVE;\n        let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n        if (lowS == null)\n            lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n        msgHash = ensureBytes('msgHash', msgHash);\n        if (prehash)\n            msgHash = ensureBytes('prehashed msgHash', hash(msgHash));\n        // We can't later call bits2octets, since nested bits2int is broken for curves\n        // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n        // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n        const h1int = bits2int_modN(msgHash);\n        const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n        const seedArgs = [int2octets(d), int2octets(h1int)];\n        // extraEntropy. RFC6979 3.6: additional k' (optional).\n        if (ent != null) {\n            // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n            const e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n            seedArgs.push(ensureBytes('extraEntropy', e)); // check for being bytes\n        }\n        const seed = ut.concatBytes(...seedArgs); // Step D of RFC6979 3.2\n        const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n        // Converts signature params into point w r/s, checks result for validity.\n        function k2sig(kBytes) {\n            // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n            const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n            if (!isWithinCurveOrder(k))\n                return; // Important: all mod() calls here must be done over N\n            const ik = invN(k); // k^-1 mod n\n            const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n            const r = modN(q.x); // r = q.x mod n\n            if (r === _0n)\n                return;\n            // Can use scalar blinding b^-1(bm + bdr) where b  [1,q1] according to\n            // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n            // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n            const s = modN(ik * modN(m + r * d)); // Not using blinding here\n            if (s === _0n)\n                return;\n            let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n            let normS = s;\n            if (lowS && isBiggerThanHalfOrder(s)) {\n                normS = normalizeS(s); // if lowS was passed, ensure s is always\n                recovery ^= 1; // // in the bottom half of N\n            }\n            return new Signature(r, normS, recovery); // use normS, not s\n        }\n        return { seed, k2sig };\n    }\n    const defaultSigOpts = { lowS: CURVE.lowS, prehash: false };\n    const defaultVerOpts = { lowS: CURVE.lowS, prehash: false };\n    /**\n     * Signs message hash with a private key.\n     * ```\n     * sign(m, d, k) where\n     *   (x, y) = G  k\n     *   r = x mod n\n     *   s = (m + dr)/k mod n\n     * ```\n     * @param msgHash NOT message. msg needs to be hashed to `msgHash`, or use `prehash`.\n     * @param privKey private key\n     * @param opts lowS for non-malleable sigs. extraEntropy for mixing randomness into k. prehash will hash first arg.\n     * @returns signature with recovery param\n     */\n    function sign(msgHash, privKey, opts = defaultSigOpts) {\n        const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n        const C = CURVE;\n        const drbg = ut.createHmacDrbg(C.hash.outputLen, C.nByteLength, C.hmac);\n        return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    }\n    // Enable precomputes. Slows down first publicKey computation by 20ms.\n    Point.BASE._setWindowSize(8);\n    // utils.precompute(8, ProjectivePoint.BASE)\n    /**\n     * Verifies a signature against message hash and public key.\n     * Rejects lowS signatures by default: to override,\n     * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n     *\n     * ```\n     * verify(r, s, h, P) where\n     *   U1 = hs^-1 mod n\n     *   U2 = rs^-1 mod n\n     *   R = U1G - U2P\n     *   mod(R.x, n) == r\n     * ```\n     */\n    function verify(signature, msgHash, publicKey, opts = defaultVerOpts) {\n        const sg = signature;\n        msgHash = ensureBytes('msgHash', msgHash);\n        publicKey = ensureBytes('publicKey', publicKey);\n        if ('strict' in opts)\n            throw new Error('options.strict was renamed to lowS');\n        const { lowS, prehash } = opts;\n        let _sig = undefined;\n        let P;\n        try {\n            if (typeof sg === 'string' || sg instanceof Uint8Array) {\n                // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n                // Since DER can also be 2*nByteLength bytes, we check for it first.\n                try {\n                    _sig = Signature.fromDER(sg);\n                }\n                catch (derError) {\n                    if (!(derError instanceof DER.Err))\n                        throw derError;\n                    _sig = Signature.fromCompact(sg);\n                }\n            }\n            else if (typeof sg === 'object' && typeof sg.r === 'bigint' && typeof sg.s === 'bigint') {\n                const { r, s } = sg;\n                _sig = new Signature(r, s);\n            }\n            else {\n                throw new Error('PARSE');\n            }\n            P = Point.fromHex(publicKey);\n        }\n        catch (error) {\n            if (error.message === 'PARSE')\n                throw new Error(`signature must be Signature instance, Uint8Array or hex string`);\n            return false;\n        }\n        if (lowS && _sig.hasHighS())\n            return false;\n        if (prehash)\n            msgHash = CURVE.hash(msgHash);\n        const { r, s } = _sig;\n        const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n        const is = invN(s); // s^-1\n        const u1 = modN(h * is); // u1 = hs^-1 mod n\n        const u2 = modN(r * is); // u2 = rs^-1 mod n\n        const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)?.toAffine(); // R = u1G + u2P\n        if (!R)\n            return false;\n        const v = modN(R.x);\n        return v === r;\n    }\n    return {\n        CURVE,\n        getPublicKey,\n        getSharedSecret,\n        sign,\n        verify,\n        ProjectivePoint: Point,\n        Signature,\n        utils,\n    };\n}\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nexport function SWUFpSqrtRatio(Fp, Z) {\n    // Generic implementation\n    const q = Fp.ORDER;\n    let l = _0n;\n    for (let o = q - _1n; o % _2n === _0n; o /= _2n)\n        l += _1n;\n    const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n    // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n    // 2n ** c1 == 2n << (c1-1)\n    const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\n    const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n    const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n    const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n    const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n    const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n    const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n    const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n    let sqrtRatio = (u, v) => {\n        let tv1 = c6; // 1. tv1 = c6\n        let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n        let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n        tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n        let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n        tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n        tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n        tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n        tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n        let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n        tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n        let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n        tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n        tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n        tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n        tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n        // 17. for i in (c1, c1 - 1, ..., 2):\n        for (let i = c1; i > _1n; i--) {\n            let tv5 = i - _2n; // 18.    tv5 = i - 2\n            tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\n            let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n            const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n            tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n            tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n            tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n            tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n            tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n        }\n        return { isValid: isQR, value: tv3 };\n    };\n    if (Fp.ORDER % _4n === _3n) {\n        // sqrt_ratio_3mod4(u, v)\n        const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n        const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n        sqrtRatio = (u, v) => {\n            let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n            const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n            tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n            let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n            y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n            const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n            const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n            const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n            let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n            return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n        };\n    }\n    // No curves uses that\n    // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n    return sqrtRatio;\n}\n/**\n * Simplified Shallue-van de Woestijne-Ulas Method\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\n */\nexport function mapToCurveSimpleSWU(Fp, opts) {\n    mod.validateField(Fp);\n    if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z))\n        throw new Error('mapToCurveSimpleSWU: invalid opts');\n    const sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n    if (!Fp.isOdd)\n        throw new Error('Fp.isOdd is not implemented!');\n    // Input: u, an element of F.\n    // Output: (x, y), a point on E.\n    return (u) => {\n        // prettier-ignore\n        let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n        tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n        tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n        tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n        tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n        tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n        tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n        tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n        tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n        tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n        tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n        tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n        tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n        tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n        tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n        tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n        tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n        x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n        const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n        y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n        y = Fp.mul(y, value); // 20.   y = y * y1\n        x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n        y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n        const e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n        y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n        x = Fp.div(x, tv4); // 25.   x = x / tv4\n        return { x, y };\n    };\n}\n//# sourceMappingURL=weierstrass.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac } from '@noble/hashes/hmac';\nimport { concatBytes, randomBytes } from '@noble/hashes/utils';\nimport { weierstrass } from './abstract/weierstrass.js';\n// connects noble-curves to noble-hashes\nexport function getHash(hash) {\n    return {\n        hash,\n        hmac: (key, ...msgs) => hmac(hash, key, concatBytes(...msgs)),\n        randomBytes,\n    };\n}\nexport function createCurve(curveDef, defHash) {\n    const create = (hash) => weierstrass({ ...curveDef, ...getHash(hash) });\n    return Object.freeze({ ...create(defHash), create });\n}\n//# sourceMappingURL=_shortw_utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha256';\nimport { randomBytes } from '@noble/hashes/utils';\nimport { Field, mod, pow2 } from './abstract/modular.js';\nimport { mapToCurveSimpleSWU } from './abstract/weierstrass.js';\nimport { bytesToNumberBE, concatBytes, ensureBytes, numberToBytesBE } from './abstract/utils.js';\nimport { createHasher, isogenyMap } from './abstract/hash-to-curve.js';\nimport { createCurve } from './_shortw_utils.js';\nconst secp256k1P = BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f');\nconst secp256k1N = BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141');\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst divNearest = (a, b) => (a + b / _2n) / b;\n/**\n * n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y) {\n    const P = secp256k1P;\n    // prettier-ignore\n    const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n    // prettier-ignore\n    const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n    const b2 = (y * y * y) % P; // x^3, 11\n    const b3 = (b2 * b2 * y) % P; // x^7\n    const b6 = (pow2(b3, _3n, P) * b3) % P;\n    const b9 = (pow2(b6, _3n, P) * b3) % P;\n    const b11 = (pow2(b9, _2n, P) * b2) % P;\n    const b22 = (pow2(b11, _11n, P) * b11) % P;\n    const b44 = (pow2(b22, _22n, P) * b22) % P;\n    const b88 = (pow2(b44, _44n, P) * b44) % P;\n    const b176 = (pow2(b88, _88n, P) * b88) % P;\n    const b220 = (pow2(b176, _44n, P) * b44) % P;\n    const b223 = (pow2(b220, _3n, P) * b3) % P;\n    const t1 = (pow2(b223, _23n, P) * b22) % P;\n    const t2 = (pow2(t1, _6n, P) * b2) % P;\n    const root = pow2(t2, _2n, P);\n    if (!Fp.eql(Fp.sqr(root), y))\n        throw new Error('Cannot find square root');\n    return root;\n}\nconst Fp = Field(secp256k1P, undefined, undefined, { sqrt: sqrtMod });\nexport const secp256k1 = createCurve({\n    a: BigInt(0),\n    b: BigInt(7),\n    Fp,\n    n: secp256k1N,\n    // Base point (x, y) aka generator point\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    h: BigInt(1),\n    lowS: true,\n    /**\n     * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n     * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n     * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n     * Explanation: https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066\n     */\n    endo: {\n        beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n        splitScalar: (k) => {\n            const n = secp256k1N;\n            const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n            const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n            const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n            const b2 = a1;\n            const POW_2_128 = BigInt('0x100000000000000000000000000000000'); // (2n**128n).toString(16)\n            const c1 = divNearest(b2 * k, n);\n            const c2 = divNearest(-b1 * k, n);\n            let k1 = mod(k - c1 * a1 - c2 * a2, n);\n            let k2 = mod(-c1 * b1 - c2 * b2, n);\n            const k1neg = k1 > POW_2_128;\n            const k2neg = k2 > POW_2_128;\n            if (k1neg)\n                k1 = n - k1;\n            if (k2neg)\n                k2 = n - k2;\n            if (k1 > POW_2_128 || k2 > POW_2_128) {\n                throw new Error('splitScalar: Endomorphism failed, k=' + k);\n            }\n            return { k1neg, k1, k2neg, k2 };\n        },\n    },\n}, sha256);\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\nconst _0n = BigInt(0);\nconst fe = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1P;\nconst ge = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1N;\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES = {};\nfunction taggedHash(tag, ...messages) {\n    let tagP = TAGGED_HASH_PREFIXES[tag];\n    if (tagP === undefined) {\n        const tagH = sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n        tagP = concatBytes(tagH, tagH);\n        TAGGED_HASH_PREFIXES[tag] = tagP;\n    }\n    return sha256(concatBytes(tagP, ...messages));\n}\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point) => point.toRawBytes(true).slice(1);\nconst numTo32b = (n) => numberToBytesBE(n, 32);\nconst modP = (x) => mod(x, secp256k1P);\nconst modN = (x) => mod(x, secp256k1N);\nconst Point = secp256k1.ProjectivePoint;\nconst GmulAdd = (Q, a, b) => Point.BASE.multiplyAndAddUnsafe(Q, a, b);\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv) {\n    let d_ = secp256k1.utils.normPrivateKeyToScalar(priv); // same method executed in fromPrivateKey\n    let p = Point.fromPrivateKey(d_); // P = d'G; 0 < d' < n check is done inside\n    const scalar = p.hasEvenY() ? d_ : modN(-d_);\n    return { scalar: scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x) {\n    if (!fe(x))\n        throw new Error('bad x: need 0 < x < p'); // Fail if x  p.\n    const xx = modP(x * x);\n    const c = modP(xx * x + BigInt(7)); // Let c = x + 7 mod p.\n    let y = sqrtMod(c); // Let y = c^(p+1)/4 mod p.\n    if (y % _2n !== _0n)\n        y = modP(-y); // Return the unique point P such that x(P) = x and\n    const p = new Point(x, y, _1n); // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n    p.assertValidity();\n    return p;\n}\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args) {\n    return modN(bytesToNumberBE(taggedHash('BIP0340/challenge', ...args)));\n}\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(privateKey) {\n    return schnorrGetExtPubKey(privateKey).bytes; // d'=int(sk). Fail if d'=0 or d'n. Ret bytes(d'G)\n}\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message, privateKey, auxRand = randomBytes(32)) {\n    const m = ensureBytes('message', message);\n    const { bytes: px, scalar: d } = schnorrGetExtPubKey(privateKey); // checks for isWithinCurveOrder\n    const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n    const t = numTo32b(d ^ bytesToNumberBE(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n    const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n    const k_ = modN(bytesToNumberBE(rand)); // Let k' = int(rand) mod n\n    if (k_ === _0n)\n        throw new Error('sign failed: k is zero'); // Fail if k' = 0.\n    const { bytes: rx, scalar: k } = schnorrGetExtPubKey(k_); // Let R = k'G.\n    const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n    const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n    sig.set(rx, 0);\n    sig.set(numTo32b(modN(k + e * d)), 32);\n    // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n    if (!schnorrVerify(sig, m, px))\n        throw new Error('sign: Invalid signature produced');\n    return sig;\n}\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature, message, publicKey) {\n    const sig = ensureBytes('signature', signature, 64);\n    const m = ensureBytes('message', message);\n    const pub = ensureBytes('publicKey', publicKey, 32);\n    try {\n        const P = lift_x(bytesToNumberBE(pub)); // P = lift_x(int(pk)); fail if that fails\n        const r = bytesToNumberBE(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r  p.\n        if (!fe(r))\n            return false;\n        const s = bytesToNumberBE(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s  n.\n        if (!ge(s))\n            return false;\n        const e = challenge(numTo32b(r), pointToBytes(P), m); // int(challenge(bytes(r)||bytes(P)||m))%n\n        const R = GmulAdd(P, s, modN(-e)); // R = sG - eP\n        if (!R || !R.hasEvenY() || R.toAffine().x !== r)\n            return false; // -eP == (n-e)P\n        return true; // Fail if is_infinite(R) / not has_even_y(R) / x(R)  r.\n    }\n    catch (error) {\n        return false;\n    }\n}\nexport const schnorr = /* @__PURE__ */ (() => ({\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    utils: {\n        randomPrivateKey: secp256k1.utils.randomPrivateKey,\n        lift_x,\n        pointToBytes,\n        numberToBytesBE,\n        bytesToNumberBE,\n        taggedHash,\n        mod,\n    },\n}))();\nconst isoMap = /* @__PURE__ */ (() => isogenyMap(Fp, [\n    // xNum\n    [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n    ],\n    // xDen\n    [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n    // yNum\n    [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n    ],\n    // yDen\n    [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n].map((i) => i.map((j) => BigInt(j)))))();\nconst mapSWU = /* @__PURE__ */ (() => mapToCurveSimpleSWU(Fp, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fp.create(BigInt('-11')),\n}))();\nconst htf = /* @__PURE__ */ (() => createHasher(secp256k1.ProjectivePoint, (scalars) => {\n    const { x, y } = mapSWU(Fp.create(scalars[0]));\n    return isoMap(x, y);\n}, {\n    DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n    encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n    p: Fp.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha256,\n}))();\nexport const hashToCurve = /* @__PURE__ */ (() => htf.hashToCurve)();\nexport const encodeToCurve = /* @__PURE__ */ (() => htf.encodeToCurve)();\n//# sourceMappingURL=secp256k1.js.map","/**\n *  A constant for the zero address.\n *\n *  (**i.e.** ``\"0x0000000000000000000000000000000000000000\"``)\n */\nexport const ZeroAddress = \"0x0000000000000000000000000000000000000000\";\n//# sourceMappingURL=addresses.js.map","/**\n *  A constant for the zero hash.\n *\n *  (**i.e.** ``\"0x0000000000000000000000000000000000000000000000000000000000000000\"``)\n */\nexport const ZeroHash = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n//# sourceMappingURL=hashes.js.map","// NFKC (composed)             // (decomposed)\n/**\n *  A constant for the ether symbol (normalized using NFKC).\n *\n *  (**i.e.** ``\"\\\\u039e\"``)\n */\nexport const EtherSymbol = \"\\u039e\"; // \"\\uD835\\uDF63\";\n/**\n *  A constant for the [[link-eip-191]] personal message prefix.\n *\n *  (**i.e.** ``\"\\\\x19Ethereum Signed Message:\\\\n\"``)\n */\nexport const MessagePrefix = \"\\x19Ethereum Signed Message:\\n\";\n//# sourceMappingURL=strings.js.map","import { ZeroHash } from \"../constants/index.js\";\nimport { concat, dataLength, getBigInt, getBytes, getNumber, hexlify, toBeArray, isHexString, zeroPadValue, assertArgument, assertPrivate } from \"../utils/index.js\";\n// Constants\nconst BN_0 = BigInt(0);\nconst BN_1 = BigInt(1);\nconst BN_2 = BigInt(2);\nconst BN_27 = BigInt(27);\nconst BN_28 = BigInt(28);\nconst BN_35 = BigInt(35);\nconst BN_N = BigInt(\"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141\");\nconst BN_N_2 = BN_N / BN_2; // Must be integer (floor) division; do NOT shifts\nconst inspect = Symbol.for(\"nodejs.util.inspect.custom\");\nconst _guard = {};\nfunction toUint256(value) {\n    return zeroPadValue(toBeArray(value), 32);\n}\n/**\n *  A Signature  @TODO\n *\n *\n *  @_docloc: api/crypto:Signing\n */\nexport class Signature {\n    #r;\n    #s;\n    #v;\n    #networkV;\n    /**\n     *  The ``r`` value for a signature.\n     *\n     *  This represents the ``x`` coordinate of a \"reference\" or\n     *  challenge point, from which the ``y`` can be computed.\n     */\n    get r() { return this.#r; }\n    set r(value) {\n        assertArgument(dataLength(value) === 32, \"invalid r\", \"value\", value);\n        this.#r = hexlify(value);\n    }\n    /**\n     *  The ``s`` value for a signature.\n     */\n    get s() {\n        assertArgument(parseInt(this.#s.substring(0, 3)) < 8, \"non-canonical s; use ._s\", \"s\", this.#s);\n        return this.#s;\n    }\n    set s(_value) {\n        assertArgument(dataLength(_value) === 32, \"invalid s\", \"value\", _value);\n        this.#s = hexlify(_value);\n    }\n    /**\n     *  Return the s value, unchecked for EIP-2 compliance.\n     *\n     *  This should generally not be used and is for situations where\n     *  a non-canonical S value might be relevant, such as Frontier blocks\n     *  that were mined prior to EIP-2 or invalid Authorization List\n     *  signatures.\n     */\n    get _s() { return this.#s; }\n    /**\n     *  Returns true if the Signature is valid for [[link-eip-2]] signatures.\n     */\n    isValid() {\n        const s = BigInt(this.#s);\n        return (s <= BN_N_2);\n    }\n    /**\n     *  The ``v`` value for a signature.\n     *\n     *  Since a given ``x`` value for ``r`` has two possible values for\n     *  its correspondin ``y``, the ``v`` indicates which of the two ``y``\n     *  values to use.\n     *\n     *  It is normalized to the values ``27`` or ``28`` for legacy\n     *  purposes.\n     */\n    get v() { return this.#v; }\n    set v(value) {\n        const v = getNumber(value, \"value\");\n        assertArgument(v === 27 || v === 28, \"invalid v\", \"v\", value);\n        this.#v = v;\n    }\n    /**\n     *  The EIP-155 ``v`` for legacy transactions. For non-legacy\n     *  transactions, this value is ``null``.\n     */\n    get networkV() { return this.#networkV; }\n    /**\n     *  The chain ID for EIP-155 legacy transactions. For non-legacy\n     *  transactions, this value is ``null``.\n     */\n    get legacyChainId() {\n        const v = this.networkV;\n        if (v == null) {\n            return null;\n        }\n        return Signature.getChainId(v);\n    }\n    /**\n     *  The ``yParity`` for the signature.\n     *\n     *  See ``v`` for more details on how this value is used.\n     */\n    get yParity() {\n        return (this.v === 27) ? 0 : 1;\n    }\n    /**\n     *  The [[link-eip-2098]] compact representation of the ``yParity``\n     *  and ``s`` compacted into a single ``bytes32``.\n     */\n    get yParityAndS() {\n        // The EIP-2098 compact representation\n        const yParityAndS = getBytes(this.s);\n        if (this.yParity) {\n            yParityAndS[0] |= 0x80;\n        }\n        return hexlify(yParityAndS);\n    }\n    /**\n     *  The [[link-eip-2098]] compact representation.\n     */\n    get compactSerialized() {\n        return concat([this.r, this.yParityAndS]);\n    }\n    /**\n     *  The serialized representation.\n     */\n    get serialized() {\n        return concat([this.r, this.s, (this.yParity ? \"0x1c\" : \"0x1b\")]);\n    }\n    /**\n     *  @private\n     */\n    constructor(guard, r, s, v) {\n        assertPrivate(guard, _guard, \"Signature\");\n        this.#r = r;\n        this.#s = s;\n        this.#v = v;\n        this.#networkV = null;\n    }\n    /**\n     *  Returns the canonical signature.\n     *\n     *  This is only necessary when dealing with legacy transaction which\n     *  did not enforce canonical S values (i.e. [[link-eip-2]]. Most\n     *  developers should never require this.\n     */\n    getCanonical() {\n        if (this.isValid()) {\n            return this;\n        }\n        // Compute the canonical signature; s' = N - s, v = !v\n        const s = BN_N - BigInt(this._s);\n        const v = (55 - this.v);\n        const result = new Signature(_guard, this.r, toUint256(s), v);\n        // Populate the networkV if necessary\n        if (this.networkV) {\n            result.#networkV = this.networkV;\n        }\n        return result;\n    }\n    /**\n     *  Returns a new identical [[Signature]].\n     */\n    clone() {\n        const clone = new Signature(_guard, this.r, this._s, this.v);\n        if (this.networkV) {\n            clone.#networkV = this.networkV;\n        }\n        return clone;\n    }\n    /**\n     *  Returns a representation that is compatible with ``JSON.stringify``.\n     */\n    toJSON() {\n        const networkV = this.networkV;\n        return {\n            _type: \"signature\",\n            networkV: ((networkV != null) ? networkV.toString() : null),\n            r: this.r, s: this._s, v: this.v,\n        };\n    }\n    [inspect]() {\n        return this.toString();\n    }\n    toString() {\n        if (this.isValid()) {\n            return `Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`;\n        }\n        return `Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`;\n    }\n    /**\n     *  Compute the chain ID from the ``v`` in a legacy EIP-155 transactions.\n     *\n     *  @example:\n     *    Signature.getChainId(45)\n     *    //_result:\n     *\n     *    Signature.getChainId(46)\n     *    //_result:\n     */\n    static getChainId(v) {\n        const bv = getBigInt(v, \"v\");\n        // The v is not an EIP-155 v, so it is the unspecified chain ID\n        if ((bv == BN_27) || (bv == BN_28)) {\n            return BN_0;\n        }\n        // Bad value for an EIP-155 v\n        assertArgument(bv >= BN_35, \"invalid EIP-155 v\", \"v\", v);\n        return (bv - BN_35) / BN_2;\n    }\n    /**\n     *  Compute the ``v`` for a chain ID for a legacy EIP-155 transactions.\n     *\n     *  Legacy transactions which use [[link-eip-155]] hijack the ``v``\n     *  property to include the chain ID.\n     *\n     *  @example:\n     *    Signature.getChainIdV(5, 27)\n     *    //_result:\n     *\n     *    Signature.getChainIdV(5, 28)\n     *    //_result:\n     *\n     */\n    static getChainIdV(chainId, v) {\n        return (getBigInt(chainId) * BN_2) + BigInt(35 + v - 27);\n    }\n    /**\n     *  Compute the normalized legacy transaction ``v`` from a ``yParirty``,\n     *  a legacy transaction ``v`` or a legacy [[link-eip-155]] transaction.\n     *\n     *  @example:\n     *    // The values 0 and 1 imply v is actually yParity\n     *    Signature.getNormalizedV(0)\n     *    //_result:\n     *\n     *    // Legacy non-EIP-1559 transaction (i.e. 27 or 28)\n     *    Signature.getNormalizedV(27)\n     *    //_result:\n     *\n     *    // Legacy EIP-155 transaction (i.e. >= 35)\n     *    Signature.getNormalizedV(46)\n     *    //_result:\n     *\n     *    // Invalid values throw\n     *    Signature.getNormalizedV(5)\n     *    //_error:\n     */\n    static getNormalizedV(v) {\n        const bv = getBigInt(v);\n        if (bv === BN_0 || bv === BN_27) {\n            return 27;\n        }\n        if (bv === BN_1 || bv === BN_28) {\n            return 28;\n        }\n        assertArgument(bv >= BN_35, \"invalid v\", \"v\", v);\n        // Otherwise, EIP-155 v means odd is 27 and even is 28\n        return (bv & BN_1) ? 27 : 28;\n    }\n    /**\n     *  Creates a new [[Signature]].\n     *\n     *  If no %%sig%% is provided, a new [[Signature]] is created\n     *  with default values.\n     *\n     *  If %%sig%% is a string, it is parsed.\n     */\n    static from(sig) {\n        function assertError(check, message) {\n            assertArgument(check, message, \"signature\", sig);\n        }\n        ;\n        if (sig == null) {\n            return new Signature(_guard, ZeroHash, ZeroHash, 27);\n        }\n        if (typeof (sig) === \"string\") {\n            const bytes = getBytes(sig, \"signature\");\n            if (bytes.length === 64) {\n                const r = hexlify(bytes.slice(0, 32));\n                const s = bytes.slice(32, 64);\n                const v = (s[0] & 0x80) ? 28 : 27;\n                s[0] &= 0x7f;\n                return new Signature(_guard, r, hexlify(s), v);\n            }\n            if (bytes.length === 65) {\n                const r = hexlify(bytes.slice(0, 32));\n                const s = hexlify(bytes.slice(32, 64));\n                const v = Signature.getNormalizedV(bytes[64]);\n                return new Signature(_guard, r, s, v);\n            }\n            assertError(false, \"invalid raw signature length\");\n        }\n        if (sig instanceof Signature) {\n            return sig.clone();\n        }\n        // Get r\n        const _r = sig.r;\n        assertError(_r != null, \"missing r\");\n        const r = toUint256(_r);\n        // Get s; by any means necessary (we check consistency below)\n        const s = (function (s, yParityAndS) {\n            if (s != null) {\n                return toUint256(s);\n            }\n            if (yParityAndS != null) {\n                assertError(isHexString(yParityAndS, 32), \"invalid yParityAndS\");\n                const bytes = getBytes(yParityAndS);\n                bytes[0] &= 0x7f;\n                return hexlify(bytes);\n            }\n            assertError(false, \"missing s\");\n        })(sig.s, sig.yParityAndS);\n        // Get v; by any means necessary (we check consistency below)\n        const { networkV, v } = (function (_v, yParityAndS, yParity) {\n            if (_v != null) {\n                const v = getBigInt(_v);\n                return {\n                    networkV: ((v >= BN_35) ? v : undefined),\n                    v: Signature.getNormalizedV(v)\n                };\n            }\n            if (yParityAndS != null) {\n                assertError(isHexString(yParityAndS, 32), \"invalid yParityAndS\");\n                return { v: ((getBytes(yParityAndS)[0] & 0x80) ? 28 : 27) };\n            }\n            if (yParity != null) {\n                switch (getNumber(yParity, \"sig.yParity\")) {\n                    case 0: return { v: 27 };\n                    case 1: return { v: 28 };\n                }\n                assertError(false, \"invalid yParity\");\n            }\n            assertError(false, \"missing v\");\n        })(sig.v, sig.yParityAndS, sig.yParity);\n        const result = new Signature(_guard, r, s, v);\n        if (networkV) {\n            result.#networkV = networkV;\n        }\n        // If multiple of v, yParity, yParityAndS we given, check they match\n        assertError(sig.yParity == null || getNumber(sig.yParity, \"sig.yParity\") === result.yParity, \"yParity mismatch\");\n        assertError(sig.yParityAndS == null || sig.yParityAndS === result.yParityAndS, \"yParityAndS mismatch\");\n        return result;\n    }\n}\n//# sourceMappingURL=signature.js.map","/**\n *  Add details about signing here.\n *\n *  @_subsection: api/crypto:Signing  [about-signing]\n */\nimport { secp256k1 } from \"@noble/curves/secp256k1\";\nimport { concat, dataLength, getBytes, getBytesCopy, hexlify, toBeHex, assertArgument } from \"../utils/index.js\";\nimport { Signature } from \"./signature.js\";\n/**\n *  A **SigningKey** provides high-level access to the elliptic curve\n *  cryptography (ECC) operations and key management.\n */\nexport class SigningKey {\n    #privateKey;\n    /**\n     *  Creates a new **SigningKey** for %%privateKey%%.\n     */\n    constructor(privateKey) {\n        assertArgument(dataLength(privateKey) === 32, \"invalid private key\", \"privateKey\", \"[REDACTED]\");\n        this.#privateKey = hexlify(privateKey);\n    }\n    /**\n     *  The private key.\n     */\n    get privateKey() { return this.#privateKey; }\n    /**\n     *  The uncompressed public key.\n     *\n     * This will always begin with the prefix ``0x04`` and be 132\n     * characters long (the ``0x`` prefix and 130 hexadecimal nibbles).\n     */\n    get publicKey() { return SigningKey.computePublicKey(this.#privateKey); }\n    /**\n     *  The compressed public key.\n     *\n     *  This will always begin with either the prefix ``0x02`` or ``0x03``\n     *  and be 68 characters long (the ``0x`` prefix and 33 hexadecimal\n     *  nibbles)\n     */\n    get compressedPublicKey() { return SigningKey.computePublicKey(this.#privateKey, true); }\n    /**\n     *  Return the signature of the signed %%digest%%.\n     */\n    sign(digest) {\n        assertArgument(dataLength(digest) === 32, \"invalid digest length\", \"digest\", digest);\n        const sig = secp256k1.sign(getBytesCopy(digest), getBytesCopy(this.#privateKey), {\n            lowS: true\n        });\n        return Signature.from({\n            r: toBeHex(sig.r, 32),\n            s: toBeHex(sig.s, 32),\n            v: (sig.recovery ? 0x1c : 0x1b)\n        });\n    }\n    /**\n     *  Returns the [[link-wiki-ecdh]] shared secret between this\n     *  private key and the %%other%% key.\n     *\n     *  The %%other%% key may be any type of key, a raw public key,\n     *  a compressed/uncompressed pubic key or aprivate key.\n     *\n     *  Best practice is usually to use a cryptographic hash on the\n     *  returned value before using it as a symetric secret.\n     *\n     *  @example:\n     *    sign1 = new SigningKey(id(\"some-secret-1\"))\n     *    sign2 = new SigningKey(id(\"some-secret-2\"))\n     *\n     *    // Notice that privA.computeSharedSecret(pubB)...\n     *    sign1.computeSharedSecret(sign2.publicKey)\n     *    //_result:\n     *\n     *    // ...is equal to privB.computeSharedSecret(pubA).\n     *    sign2.computeSharedSecret(sign1.publicKey)\n     *    //_result:\n     */\n    computeSharedSecret(other) {\n        const pubKey = SigningKey.computePublicKey(other);\n        return hexlify(secp256k1.getSharedSecret(getBytesCopy(this.#privateKey), getBytes(pubKey), false));\n    }\n    /**\n     *  Compute the public key for %%key%%, optionally %%compressed%%.\n     *\n     *  The %%key%% may be any type of key, a raw public key, a\n     *  compressed/uncompressed public key or private key.\n     *\n     *  @example:\n     *    sign = new SigningKey(id(\"some-secret\"));\n     *\n     *    // Compute the uncompressed public key for a private key\n     *    SigningKey.computePublicKey(sign.privateKey)\n     *    //_result:\n     *\n     *    // Compute the compressed public key for a private key\n     *    SigningKey.computePublicKey(sign.privateKey, true)\n     *    //_result:\n     *\n     *    // Compute the uncompressed public key\n     *    SigningKey.computePublicKey(sign.publicKey, false);\n     *    //_result:\n     *\n     *    // Compute the Compressed a public key\n     *    SigningKey.computePublicKey(sign.publicKey, true);\n     *    //_result:\n     */\n    static computePublicKey(key, compressed) {\n        let bytes = getBytes(key, \"key\");\n        // private key\n        if (bytes.length === 32) {\n            const pubKey = secp256k1.getPublicKey(bytes, !!compressed);\n            return hexlify(pubKey);\n        }\n        // raw public key; use uncompressed key with 0x04 prefix\n        if (bytes.length === 64) {\n            const pub = new Uint8Array(65);\n            pub[0] = 0x04;\n            pub.set(bytes, 1);\n            bytes = pub;\n        }\n        const point = secp256k1.ProjectivePoint.fromHex(bytes);\n        return hexlify(point.toRawBytes(compressed));\n    }\n    /**\n     *  Returns the public key for the private key which produced the\n     *  %%signature%% for the given %%digest%%.\n     *\n     *  @example:\n     *    key = new SigningKey(id(\"some-secret\"))\n     *    digest = id(\"hello world\")\n     *    sig = key.sign(digest)\n     *\n     *    // Notice the signer public key...\n     *    key.publicKey\n     *    //_result:\n     *\n     *    // ...is equal to the recovered public key\n     *    SigningKey.recoverPublicKey(digest, sig)\n     *    //_result:\n     *\n     */\n    static recoverPublicKey(digest, signature) {\n        assertArgument(dataLength(digest) === 32, \"invalid digest length\", \"digest\", digest);\n        const sig = Signature.from(signature);\n        let secpSig = secp256k1.Signature.fromCompact(getBytesCopy(concat([sig.r, sig.s])));\n        secpSig = secpSig.addRecoveryBit(sig.yParity);\n        const pubKey = secpSig.recoverPublicKey(getBytesCopy(digest));\n        assertArgument(pubKey != null, \"invalid signature for digest\", \"signature\", signature);\n        return \"0x\" + pubKey.toHex(false);\n    }\n    /**\n     *  Returns the point resulting from adding the ellipic curve points\n     *  %%p0%% and %%p1%%.\n     *\n     *  This is not a common function most developers should require, but\n     *  can be useful for certain privacy-specific techniques.\n     *\n     *  For example, it is used by [[HDNodeWallet]] to compute child\n     *  addresses from parent public keys and chain codes.\n     */\n    static addPoints(p0, p1, compressed) {\n        const pub0 = secp256k1.ProjectivePoint.fromHex(SigningKey.computePublicKey(p0).substring(2));\n        const pub1 = secp256k1.ProjectivePoint.fromHex(SigningKey.computePublicKey(p1).substring(2));\n        return \"0x\" + pub0.add(pub1).toHex(!!compressed);\n    }\n}\n//# sourceMappingURL=signing-key.js.map","import { keccak256 } from \"../crypto/index.js\";\nimport { getBytes, assertArgument } from \"../utils/index.js\";\nconst BN_0 = BigInt(0);\nconst BN_36 = BigInt(36);\nfunction getChecksumAddress(address) {\n    //    if (!isHexString(address, 20)) {\n    //        logger.throwArgumentError(\"invalid address\", \"address\", address);\n    //    }\n    address = address.toLowerCase();\n    const chars = address.substring(2).split(\"\");\n    const expanded = new Uint8Array(40);\n    for (let i = 0; i < 40; i++) {\n        expanded[i] = chars[i].charCodeAt(0);\n    }\n    const hashed = getBytes(keccak256(expanded));\n    for (let i = 0; i < 40; i += 2) {\n        if ((hashed[i >> 1] >> 4) >= 8) {\n            chars[i] = chars[i].toUpperCase();\n        }\n        if ((hashed[i >> 1] & 0x0f) >= 8) {\n            chars[i + 1] = chars[i + 1].toUpperCase();\n        }\n    }\n    return \"0x\" + chars.join(\"\");\n}\n// See: https://en.wikipedia.org/wiki/International_Bank_Account_Number\n// Create lookup table\nconst ibanLookup = {};\nfor (let i = 0; i < 10; i++) {\n    ibanLookup[String(i)] = String(i);\n}\nfor (let i = 0; i < 26; i++) {\n    ibanLookup[String.fromCharCode(65 + i)] = String(10 + i);\n}\n// How many decimal digits can we process? (for 64-bit float, this is 15)\n// i.e. Math.floor(Math.log10(Number.MAX_SAFE_INTEGER));\nconst safeDigits = 15;\nfunction ibanChecksum(address) {\n    address = address.toUpperCase();\n    address = address.substring(4) + address.substring(0, 2) + \"00\";\n    let expanded = address.split(\"\").map((c) => { return ibanLookup[c]; }).join(\"\");\n    // Javascript can handle integers safely up to 15 (decimal) digits\n    while (expanded.length >= safeDigits) {\n        let block = expanded.substring(0, safeDigits);\n        expanded = parseInt(block, 10) % 97 + expanded.substring(block.length);\n    }\n    let checksum = String(98 - (parseInt(expanded, 10) % 97));\n    while (checksum.length < 2) {\n        checksum = \"0\" + checksum;\n    }\n    return checksum;\n}\n;\nconst Base36 = (function () {\n    ;\n    const result = {};\n    for (let i = 0; i < 36; i++) {\n        const key = \"0123456789abcdefghijklmnopqrstuvwxyz\"[i];\n        result[key] = BigInt(i);\n    }\n    return result;\n})();\nfunction fromBase36(value) {\n    value = value.toLowerCase();\n    let result = BN_0;\n    for (let i = 0; i < value.length; i++) {\n        result = result * BN_36 + Base36[value[i]];\n    }\n    return result;\n}\n/**\n *  Returns a normalized and checksumed address for %%address%%.\n *  This accepts non-checksum addresses, checksum addresses and\n *  [[getIcapAddress]] formats.\n *\n *  The checksum in Ethereum uses the capitalization (upper-case\n *  vs lower-case) of the characters within an address to encode\n *  its checksum, which offers, on average, a checksum of 15-bits.\n *\n *  If %%address%% contains both upper-case and lower-case, it is\n *  assumed to already be a checksum address and its checksum is\n *  validated, and if the address fails its expected checksum an\n *  error is thrown.\n *\n *  If you wish the checksum of %%address%% to be ignore, it should\n *  be converted to lower-case (i.e. ``.toLowercase()``) before\n *  being passed in. This should be a very rare situation though,\n *  that you wish to bypass the safegaurds in place to protect\n *  against an address that has been incorrectly copied from another\n *  source.\n *\n *  @example:\n *    // Adds the checksum (via upper-casing specific letters)\n *    getAddress(\"0x8ba1f109551bd432803012645ac136ddd64dba72\")\n *    //_result:\n *\n *    // Converts ICAP address and adds checksum\n *    getAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK36\");\n *    //_result:\n *\n *    // Throws an error if an address contains mixed case,\n *    // but the checksum fails\n *    getAddress(\"0x8Ba1f109551bD432803012645Ac136ddd64DBA72\")\n *    //_error:\n */\nexport function getAddress(address) {\n    assertArgument(typeof (address) === \"string\", \"invalid address\", \"address\", address);\n    if (address.match(/^(0x)?[0-9a-fA-F]{40}$/)) {\n        // Missing the 0x prefix\n        if (!address.startsWith(\"0x\")) {\n            address = \"0x\" + address;\n        }\n        const result = getChecksumAddress(address);\n        // It is a checksummed address with a bad checksum\n        assertArgument(!address.match(/([A-F].*[a-f])|([a-f].*[A-F])/) || result === address, \"bad address checksum\", \"address\", address);\n        return result;\n    }\n    // Maybe ICAP? (we only support direct mode)\n    if (address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)) {\n        // It is an ICAP address with a bad checksum\n        assertArgument(address.substring(2, 4) === ibanChecksum(address), \"bad icap checksum\", \"address\", address);\n        let result = fromBase36(address.substring(4)).toString(16);\n        while (result.length < 40) {\n            result = \"0\" + result;\n        }\n        return getChecksumAddress(\"0x\" + result);\n    }\n    assertArgument(false, \"invalid address\", \"address\", address);\n}\n/**\n *  The [ICAP Address format](link-icap) format is an early checksum\n *  format which attempts to be compatible with the banking\n *  industry [IBAN format](link-wiki-iban) for bank accounts.\n *\n *  It is no longer common or a recommended format.\n *\n *  @example:\n *    getIcapAddress(\"0x8ba1f109551bd432803012645ac136ddd64dba72\");\n *    //_result:\n *\n *    getIcapAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK36\");\n *    //_result:\n *\n *    // Throws an error if the ICAP checksum is wrong\n *    getIcapAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK37\");\n *    //_error:\n */\nexport function getIcapAddress(address) {\n    //let base36 = _base16To36(getAddress(address).substring(2)).toUpperCase();\n    let base36 = BigInt(getAddress(address)).toString(36).toUpperCase();\n    while (base36.length < 30) {\n        base36 = \"0\" + base36;\n    }\n    return \"XE\" + ibanChecksum(\"XE00\" + base36) + base36;\n}\n//# sourceMappingURL=address.js.map","import { assert, assertArgument } from \"../utils/index.js\";\nimport { getAddress } from \"./address.js\";\n/**\n *  Returns true if %%value%% is an object which implements the\n *  [[Addressable]] interface.\n *\n *  @example:\n *    // Wallets and AbstractSigner sub-classes\n *    isAddressable(Wallet.createRandom())\n *    //_result:\n *\n *    // Contracts\n *    contract = new Contract(\"dai.tokens.ethers.eth\", [ ], provider)\n *    isAddressable(contract)\n *    //_result:\n */\nexport function isAddressable(value) {\n    return (value && typeof (value.getAddress) === \"function\");\n}\n/**\n *  Returns true if %%value%% is a valid address.\n *\n *  @example:\n *    // Valid address\n *    isAddress(\"0x8ba1f109551bD432803012645Ac136ddd64DBA72\")\n *    //_result:\n *\n *    // Valid ICAP address\n *    isAddress(\"XE65GB6LDNXYOFTX0NSV3FUWKOWIXAMJK36\")\n *    //_result:\n *\n *    // Invalid checksum\n *    isAddress(\"0x8Ba1f109551bD432803012645Ac136ddd64DBa72\")\n *    //_result:\n *\n *    // Invalid ICAP checksum\n *    isAddress(\"0x8Ba1f109551bD432803012645Ac136ddd64DBA72\")\n *    //_result:\n *\n *    // Not an address (an ENS name requires a provided and an\n *    // asynchronous API to access)\n *    isAddress(\"ricmoo.eth\")\n *    //_result:\n */\nexport function isAddress(value) {\n    try {\n        getAddress(value);\n        return true;\n    }\n    catch (error) { }\n    return false;\n}\nasync function checkAddress(target, promise) {\n    const result = await promise;\n    if (result == null || result === \"0x0000000000000000000000000000000000000000\") {\n        assert(typeof (target) !== \"string\", \"unconfigured name\", \"UNCONFIGURED_NAME\", { value: target });\n        assertArgument(false, \"invalid AddressLike value; did not resolve to a value address\", \"target\", target);\n    }\n    return getAddress(result);\n}\n/**\n *  Resolves to an address for the %%target%%, which may be any\n *  supported address type, an [[Addressable]] or a Promise which\n *  resolves to an address.\n *\n *  If an ENS name is provided, but that name has not been correctly\n *  configured a [[UnconfiguredNameError]] is thrown.\n *\n *  @example:\n *    addr = \"0x6B175474E89094C44Da98b954EedeAC495271d0F\"\n *\n *    // Addresses are return synchronously\n *    resolveAddress(addr, provider)\n *    //_result:\n *\n *    // Address promises are resolved asynchronously\n *    resolveAddress(Promise.resolve(addr))\n *    //_result:\n *\n *    // ENS names are resolved asynchronously\n *    resolveAddress(\"dai.tokens.ethers.eth\", provider)\n *    //_result:\n *\n *    // Addressable objects are resolved asynchronously\n *    contract = new Contract(addr, [ ])\n *    resolveAddress(contract, provider)\n *    //_result:\n *\n *    // Unconfigured ENS names reject\n *    resolveAddress(\"nothing-here.ricmoo.eth\", provider)\n *    //_error:\n *\n *    // ENS names require a NameResolver object passed in\n *    // (notice the provider was omitted)\n *    resolveAddress(\"nothing-here.ricmoo.eth\")\n *    //_error:\n */\nexport function resolveAddress(target, resolver) {\n    if (typeof (target) === \"string\") {\n        if (target.match(/^0x[0-9a-f]{40}$/i)) {\n            return getAddress(target);\n        }\n        assert(resolver != null, \"ENS resolution requires a provider\", \"UNSUPPORTED_OPERATION\", { operation: \"resolveName\" });\n        return checkAddress(target, resolver.resolveName(target));\n    }\n    else if (isAddressable(target)) {\n        return checkAddress(target, target.getAddress());\n    }\n    else if (target && typeof (target.then) === \"function\") {\n        return checkAddress(target, target);\n    }\n    assertArgument(false, \"unsupported addressable value\", \"target\", target);\n}\n//# sourceMappingURL=checks.js.map","import { getAddress } from \"../address/index.js\";\nimport { assertArgument, isHexString } from \"../utils/index.js\";\nfunction accessSetify(addr, storageKeys) {\n    return {\n        address: getAddress(addr),\n        storageKeys: storageKeys.map((storageKey, index) => {\n            assertArgument(isHexString(storageKey, 32), \"invalid slot\", `storageKeys[${index}]`, storageKey);\n            return storageKey.toLowerCase();\n        })\n    };\n}\n/**\n *  Returns a [[AccessList]] from any ethers-supported access-list structure.\n */\nexport function accessListify(value) {\n    if (Array.isArray(value)) {\n        return value.map((set, index) => {\n            if (Array.isArray(set)) {\n                assertArgument(set.length === 2, \"invalid slot set\", `value[${index}]`, set);\n                return accessSetify(set[0], set[1]);\n            }\n            assertArgument(set != null && typeof (set) === \"object\", \"invalid address-slot set\", \"value\", value);\n            return accessSetify(set.address, set.storageKeys);\n        });\n    }\n    assertArgument(value != null && typeof (value) === \"object\", \"invalid access list\", \"value\", value);\n    const result = Object.keys(value).map((addr) => {\n        const storageKeys = value[addr].reduce((accum, storageKey) => {\n            accum[storageKey] = true;\n            return accum;\n        }, {});\n        return accessSetify(addr, Object.keys(storageKeys).sort());\n    });\n    result.sort((a, b) => (a.address.localeCompare(b.address)));\n    return result;\n}\n//# sourceMappingURL=accesslist.js.map","import { getAddress } from \"../address/index.js\";\nimport { Signature } from \"../crypto/index.js\";\nimport { getBigInt } from \"../utils/index.js\";\nexport function authorizationify(auth) {\n    return {\n        address: getAddress(auth.address),\n        nonce: getBigInt((auth.nonce != null) ? auth.nonce : 0),\n        chainId: getBigInt((auth.chainId != null) ? auth.chainId : 0),\n        signature: Signature.from(auth.signature)\n    };\n}\n//# sourceMappingURL=authorization.js.map","import { getAddress } from \"../address/index.js\";\nimport { keccak256, SigningKey } from \"../crypto/index.js\";\n/**\n *  Returns the address for the %%key%%.\n *\n *  The key may be any standard form of public key or a private key.\n */\nexport function computeAddress(key) {\n    let pubkey;\n    if (typeof (key) === \"string\") {\n        pubkey = SigningKey.computePublicKey(key, false);\n    }\n    else {\n        pubkey = key.publicKey;\n    }\n    return getAddress(keccak256(\"0x\" + pubkey.substring(4)).substring(26));\n}\n/**\n *  Returns the recovered address for the private key that was\n *  used to sign %%digest%% that resulted in %%signature%%.\n */\nexport function recoverAddress(digest, signature) {\n    return computeAddress(SigningKey.recoverPublicKey(digest, signature));\n}\n//# sourceMappingURL=address.js.map","import { getAddress } from \"../address/index.js\";\nimport { ZeroAddress } from \"../constants/addresses.js\";\nimport { keccak256, sha256, Signature, SigningKey } from \"../crypto/index.js\";\nimport { concat, decodeRlp, encodeRlp, getBytes, getBigInt, getNumber, hexlify, assert, assertArgument, isBytesLike, isHexString, toBeArray, zeroPadValue } from \"../utils/index.js\";\nimport { accessListify } from \"./accesslist.js\";\nimport { authorizationify } from \"./authorization.js\";\nimport { recoverAddress } from \"./address.js\";\nconst BN_0 = BigInt(0);\nconst BN_2 = BigInt(2);\nconst BN_27 = BigInt(27);\nconst BN_28 = BigInt(28);\nconst BN_35 = BigInt(35);\nconst BN_MAX_UINT = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\nconst inspect = Symbol.for(\"nodejs.util.inspect.custom\");\nconst BLOB_SIZE = 4096 * 32;\nconst CELL_COUNT = 128;\n/**\n *  Returns a BLOb proof as its cells for [[link-eip-7594]] BLOb.\n *\n *  The default %%cellCount%% is 128.\n */\nexport function splitBlobCells(_proof, cellCount) {\n    if (cellCount == null) {\n        cellCount = CELL_COUNT;\n    }\n    const cellProofs = [];\n    const proof = getBytes(_proof);\n    const cellSize = proof.length / cellCount;\n    for (let i = 0; i < proof.length; i += cellSize) {\n        cellProofs.push(hexlify(proof.subarray(i, i + cellSize)));\n    }\n    return cellProofs;\n}\nfunction getKzgLibrary(kzg) {\n    const blobToKzgCommitment = (blob) => {\n        if (\"computeBlobProof\" in kzg) {\n            // micro-ecc-signer; check for computeBlobProof since this API\n            // expects a string while the kzg-wasm below expects a Unit8Array\n            if (\"blobToKzgCommitment\" in kzg && typeof (kzg.blobToKzgCommitment) === \"function\") {\n                return getBytes(kzg.blobToKzgCommitment(hexlify(blob)));\n            }\n        }\n        else if (\"blobToKzgCommitment\" in kzg && typeof (kzg.blobToKzgCommitment) === \"function\") {\n            // kzg-wasm <0.5.0; blobToKzgCommitment(Uint8Array) => Uint8Array\n            return getBytes(kzg.blobToKzgCommitment(blob));\n        }\n        // kzg-wasm >= 0.5.0; blobToKZGCommitment(string) => string\n        if (\"blobToKZGCommitment\" in kzg && typeof (kzg.blobToKZGCommitment) === \"function\") {\n            return getBytes(kzg.blobToKZGCommitment(hexlify(blob)));\n        }\n        assertArgument(false, \"unsupported KZG library\", \"kzg\", kzg);\n    };\n    const computeBlobKzgProof = (blob, commitment) => {\n        // micro-ecc-signer\n        if (\"computeBlobProof\" in kzg && typeof (kzg.computeBlobProof) === \"function\") {\n            return getBytes(kzg.computeBlobProof(hexlify(blob), hexlify(commitment)));\n        }\n        // kzg-wasm <0.5.0; computeBlobKzgProof(Uint8Array, Uint8Array) => Uint8Array\n        if (\"computeBlobKzgProof\" in kzg && typeof (kzg.computeBlobKzgProof) === \"function\") {\n            return kzg.computeBlobKzgProof(blob, commitment);\n        }\n        // kzg-wasm >= 0.5.0; computeBlobKZGProof(string, string) => string\n        if (\"computeBlobKZGProof\" in kzg && typeof (kzg.computeBlobKZGProof) === \"function\") {\n            return getBytes(kzg.computeBlobKZGProof(hexlify(blob), hexlify(commitment)));\n        }\n        assertArgument(false, \"unsupported KZG library\", \"kzg\", kzg);\n    };\n    return { blobToKzgCommitment, computeBlobKzgProof };\n}\nfunction getVersionedHash(version, hash) {\n    let versioned = version.toString(16);\n    while (versioned.length < 2) {\n        versioned = \"0\" + versioned;\n    }\n    versioned += sha256(hash).substring(4);\n    return \"0x\" + versioned;\n}\nfunction handleAddress(value) {\n    if (value === \"0x\") {\n        return null;\n    }\n    return getAddress(value);\n}\nfunction handleAccessList(value, param) {\n    try {\n        return accessListify(value);\n    }\n    catch (error) {\n        assertArgument(false, error.message, param, value);\n    }\n}\nfunction handleAuthorizationList(value, param) {\n    try {\n        if (!Array.isArray(value)) {\n            throw new Error(\"authorizationList: invalid array\");\n        }\n        const result = [];\n        for (let i = 0; i < value.length; i++) {\n            const auth = value[i];\n            if (!Array.isArray(auth)) {\n                throw new Error(`authorization[${i}]: invalid array`);\n            }\n            if (auth.length !== 6) {\n                throw new Error(`authorization[${i}]: wrong length`);\n            }\n            if (!auth[1]) {\n                throw new Error(`authorization[${i}]: null address`);\n            }\n            result.push({\n                address: handleAddress(auth[1]),\n                nonce: handleUint(auth[2], \"nonce\"),\n                chainId: handleUint(auth[0], \"chainId\"),\n                signature: Signature.from({\n                    yParity: handleNumber(auth[3], \"yParity\"),\n                    r: zeroPadValue(auth[4], 32),\n                    s: zeroPadValue(auth[5], 32)\n                })\n            });\n        }\n        return result;\n    }\n    catch (error) {\n        assertArgument(false, error.message, param, value);\n    }\n}\nfunction handleNumber(_value, param) {\n    if (_value === \"0x\") {\n        return 0;\n    }\n    return getNumber(_value, param);\n}\nfunction handleUint(_value, param) {\n    if (_value === \"0x\") {\n        return BN_0;\n    }\n    const value = getBigInt(_value, param);\n    assertArgument(value <= BN_MAX_UINT, \"value exceeds uint size\", param, value);\n    return value;\n}\nfunction formatNumber(_value, name) {\n    const value = getBigInt(_value, \"value\");\n    const result = toBeArray(value);\n    assertArgument(result.length <= 32, `value too large`, `tx.${name}`, value);\n    return result;\n}\nfunction formatAccessList(value) {\n    return accessListify(value).map((set) => [set.address, set.storageKeys]);\n}\nfunction formatAuthorizationList(value) {\n    return value.map((a) => {\n        return [\n            formatNumber(a.chainId, \"chainId\"),\n            a.address,\n            formatNumber(a.nonce, \"nonce\"),\n            formatNumber(a.signature.yParity, \"yParity\"),\n            toBeArray(a.signature.r),\n            toBeArray(a.signature._s)\n        ];\n    });\n}\nfunction formatHashes(value, param) {\n    assertArgument(Array.isArray(value), `invalid ${param}`, \"value\", value);\n    for (let i = 0; i < value.length; i++) {\n        assertArgument(isHexString(value[i], 32), \"invalid ${ param } hash\", `value[${i}]`, value[i]);\n    }\n    return value;\n}\nfunction _parseLegacy(data) {\n    const fields = decodeRlp(data);\n    assertArgument(Array.isArray(fields) && (fields.length === 9 || fields.length === 6), \"invalid field count for legacy transaction\", \"data\", data);\n    const tx = {\n        type: 0,\n        nonce: handleNumber(fields[0], \"nonce\"),\n        gasPrice: handleUint(fields[1], \"gasPrice\"),\n        gasLimit: handleUint(fields[2], \"gasLimit\"),\n        to: handleAddress(fields[3]),\n        value: handleUint(fields[4], \"value\"),\n        data: hexlify(fields[5]),\n        chainId: BN_0\n    };\n    // Legacy unsigned transaction\n    if (fields.length === 6) {\n        return tx;\n    }\n    const v = handleUint(fields[6], \"v\");\n    const r = handleUint(fields[7], \"r\");\n    const s = handleUint(fields[8], \"s\");\n    if (r === BN_0 && s === BN_0) {\n        // EIP-155 unsigned transaction\n        tx.chainId = v;\n    }\n    else {\n        // Compute the EIP-155 chain ID (or 0 for legacy)\n        let chainId = (v - BN_35) / BN_2;\n        if (chainId < BN_0) {\n            chainId = BN_0;\n        }\n        tx.chainId = chainId;\n        // Signed Legacy Transaction\n        assertArgument(chainId !== BN_0 || (v === BN_27 || v === BN_28), \"non-canonical legacy v\", \"v\", fields[6]);\n        tx.signature = Signature.from({\n            r: zeroPadValue(fields[7], 32),\n            s: zeroPadValue(fields[8], 32),\n            v\n        });\n        //tx.hash = keccak256(data);\n    }\n    return tx;\n}\nfunction _serializeLegacy(tx, sig) {\n    const fields = [\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.gasPrice || 0, \"gasPrice\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n    ];\n    let chainId = BN_0;\n    if (tx.chainId != BN_0) {\n        // A chainId was provided; if non-zero we'll use EIP-155\n        chainId = getBigInt(tx.chainId, \"tx.chainId\");\n        // We have a chainId in the tx and an EIP-155 v in the signature,\n        // make sure they agree with each other\n        assertArgument(!sig || sig.networkV == null || sig.legacyChainId === chainId, \"tx.chainId/sig.v mismatch\", \"sig\", sig);\n    }\n    else if (tx.signature) {\n        // No explicit chainId, but EIP-155 have a derived implicit chainId\n        const legacy = tx.signature.legacyChainId;\n        if (legacy != null) {\n            chainId = legacy;\n        }\n    }\n    // Requesting an unsigned transaction\n    if (!sig) {\n        // We have an EIP-155 transaction (chainId was specified and non-zero)\n        if (chainId !== BN_0) {\n            fields.push(toBeArray(chainId));\n            fields.push(\"0x\");\n            fields.push(\"0x\");\n        }\n        return encodeRlp(fields);\n    }\n    // @TODO: We should probably check that tx.signature, chainId, and sig\n    //        match but that logic could break existing code, so schedule\n    //        this for the next major bump.\n    // Compute the EIP-155 v\n    let v = BigInt(27 + sig.yParity);\n    if (chainId !== BN_0) {\n        v = Signature.getChainIdV(chainId, sig.v);\n    }\n    else if (BigInt(sig.v) !== v) {\n        assertArgument(false, \"tx.chainId/sig.v mismatch\", \"sig\", sig);\n    }\n    // Add the signature\n    fields.push(toBeArray(v));\n    fields.push(toBeArray(sig.r));\n    fields.push(toBeArray(sig._s));\n    return encodeRlp(fields);\n}\nfunction _parseEipSignature(tx, fields) {\n    let yParity;\n    try {\n        yParity = handleNumber(fields[0], \"yParity\");\n        if (yParity !== 0 && yParity !== 1) {\n            throw new Error(\"bad yParity\");\n        }\n    }\n    catch (error) {\n        assertArgument(false, \"invalid yParity\", \"yParity\", fields[0]);\n    }\n    const r = zeroPadValue(fields[1], 32);\n    const s = zeroPadValue(fields[2], 32);\n    const signature = Signature.from({ r, s, yParity });\n    tx.signature = signature;\n}\nfunction _parseEip1559(data) {\n    const fields = decodeRlp(getBytes(data).slice(1));\n    assertArgument(Array.isArray(fields) && (fields.length === 9 || fields.length === 12), \"invalid field count for transaction type: 2\", \"data\", hexlify(data));\n    const tx = {\n        type: 2,\n        chainId: handleUint(fields[0], \"chainId\"),\n        nonce: handleNumber(fields[1], \"nonce\"),\n        maxPriorityFeePerGas: handleUint(fields[2], \"maxPriorityFeePerGas\"),\n        maxFeePerGas: handleUint(fields[3], \"maxFeePerGas\"),\n        gasPrice: null,\n        gasLimit: handleUint(fields[4], \"gasLimit\"),\n        to: handleAddress(fields[5]),\n        value: handleUint(fields[6], \"value\"),\n        data: hexlify(fields[7]),\n        accessList: handleAccessList(fields[8], \"accessList\"),\n    };\n    // Unsigned EIP-1559 Transaction\n    if (fields.length === 9) {\n        return tx;\n    }\n    //tx.hash = keccak256(data);\n    _parseEipSignature(tx, fields.slice(9));\n    return tx;\n}\nfunction _serializeEip1559(tx, sig) {\n    const fields = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n        formatNumber(tx.maxFeePerGas || 0, \"maxFeePerGas\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || [])\n    ];\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"yParity\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n    }\n    return concat([\"0x02\", encodeRlp(fields)]);\n}\nfunction _parseEip2930(data) {\n    const fields = decodeRlp(getBytes(data).slice(1));\n    assertArgument(Array.isArray(fields) && (fields.length === 8 || fields.length === 11), \"invalid field count for transaction type: 1\", \"data\", hexlify(data));\n    const tx = {\n        type: 1,\n        chainId: handleUint(fields[0], \"chainId\"),\n        nonce: handleNumber(fields[1], \"nonce\"),\n        gasPrice: handleUint(fields[2], \"gasPrice\"),\n        gasLimit: handleUint(fields[3], \"gasLimit\"),\n        to: handleAddress(fields[4]),\n        value: handleUint(fields[5], \"value\"),\n        data: hexlify(fields[6]),\n        accessList: handleAccessList(fields[7], \"accessList\")\n    };\n    // Unsigned EIP-2930 Transaction\n    if (fields.length === 8) {\n        return tx;\n    }\n    //tx.hash = keccak256(data);\n    _parseEipSignature(tx, fields.slice(8));\n    return tx;\n}\nfunction _serializeEip2930(tx, sig) {\n    const fields = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.gasPrice || 0, \"gasPrice\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || [])\n    ];\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"recoveryParam\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n    }\n    return concat([\"0x01\", encodeRlp(fields)]);\n}\nfunction _parseEip4844(data) {\n    let fields = decodeRlp(getBytes(data).slice(1));\n    let typeName = \"3\";\n    let blobWrapperVersion = null;\n    let blobs = null;\n    // Parse the network format\n    if (fields.length === 4 && Array.isArray(fields[0])) {\n        // EIP-4844 format with sidecar\n        typeName = \"3 (network format)\";\n        const fBlobs = fields[1], fCommits = fields[2], fProofs = fields[3];\n        assertArgument(Array.isArray(fBlobs), \"invalid network format: blobs not an array\", \"fields[1]\", fBlobs);\n        assertArgument(Array.isArray(fCommits), \"invalid network format: commitments not an array\", \"fields[2]\", fCommits);\n        assertArgument(Array.isArray(fProofs), \"invalid network format: proofs not an array\", \"fields[3]\", fProofs);\n        assertArgument(fBlobs.length === fCommits.length, \"invalid network format: blobs/commitments length mismatch\", \"fields\", fields);\n        assertArgument(fBlobs.length === fProofs.length, \"invalid network format: blobs/proofs length mismatch\", \"fields\", fields);\n        blobs = [];\n        for (let i = 0; i < fields[1].length; i++) {\n            blobs.push({\n                data: fBlobs[i],\n                commitment: fCommits[i],\n                proof: fProofs[i],\n            });\n        }\n        fields = fields[0];\n    }\n    else if (fields.length === 5 && Array.isArray(fields[0])) {\n        // EIP-7594 format with sidecar\n        typeName = \"3 (EIP-7594 network format)\";\n        blobWrapperVersion = getNumber(fields[1]);\n        const fBlobs = fields[2], fCommits = fields[3], fProofs = fields[4];\n        assertArgument(blobWrapperVersion === 1, `unsupported EIP-7594 network format version: ${blobWrapperVersion}`, \"fields[1]\", blobWrapperVersion);\n        assertArgument(Array.isArray(fBlobs), \"invalid EIP-7594 network format: blobs not an array\", \"fields[2]\", fBlobs);\n        assertArgument(Array.isArray(fCommits), \"invalid EIP-7594 network format: commitments not an array\", \"fields[3]\", fCommits);\n        assertArgument(Array.isArray(fProofs), \"invalid EIP-7594 network format: proofs not an array\", \"fields[4]\", fProofs);\n        assertArgument(fBlobs.length === fCommits.length, \"invalid network format: blobs/commitments length mismatch\", \"fields\", fields);\n        assertArgument(fBlobs.length * CELL_COUNT === fProofs.length, \"invalid network format: blobs/proofs length mismatch\", \"fields\", fields);\n        blobs = [];\n        for (let i = 0; i < fBlobs.length; i++) {\n            const proof = [];\n            for (let j = 0; j < CELL_COUNT; j++) {\n                proof.push(fProofs[(i * CELL_COUNT) + j]);\n            }\n            blobs.push({\n                data: fBlobs[i],\n                commitment: fCommits[i],\n                proof: concat(proof)\n            });\n        }\n        fields = fields[0];\n    }\n    assertArgument(Array.isArray(fields) && (fields.length === 11 || fields.length === 14), `invalid field count for transaction type: ${typeName}`, \"data\", hexlify(data));\n    const tx = {\n        type: 3,\n        chainId: handleUint(fields[0], \"chainId\"),\n        nonce: handleNumber(fields[1], \"nonce\"),\n        maxPriorityFeePerGas: handleUint(fields[2], \"maxPriorityFeePerGas\"),\n        maxFeePerGas: handleUint(fields[3], \"maxFeePerGas\"),\n        gasPrice: null,\n        gasLimit: handleUint(fields[4], \"gasLimit\"),\n        to: handleAddress(fields[5]),\n        value: handleUint(fields[6], \"value\"),\n        data: hexlify(fields[7]),\n        accessList: handleAccessList(fields[8], \"accessList\"),\n        maxFeePerBlobGas: handleUint(fields[9], \"maxFeePerBlobGas\"),\n        blobVersionedHashes: fields[10],\n        blobWrapperVersion\n    };\n    if (blobs) {\n        tx.blobs = blobs;\n    }\n    assertArgument(tx.to != null, `invalid address for transaction type: ${typeName}`, \"data\", data);\n    assertArgument(Array.isArray(tx.blobVersionedHashes), \"invalid blobVersionedHashes: must be an array\", \"data\", data);\n    for (let i = 0; i < tx.blobVersionedHashes.length; i++) {\n        assertArgument(isHexString(tx.blobVersionedHashes[i], 32), `invalid blobVersionedHash at index ${i}: must be length 32`, \"data\", data);\n    }\n    // Unsigned EIP-4844 Transaction\n    if (fields.length === 11) {\n        return tx;\n    }\n    // @TODO: Do we need to do this? This is only called internally\n    // and used to verify hashes; it might save time to not do this\n    //tx.hash = keccak256(concat([ \"0x03\", encodeRlp(fields) ]));\n    _parseEipSignature(tx, fields.slice(11));\n    return tx;\n}\nfunction _serializeEip4844(tx, sig, blobs) {\n    const fields = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n        formatNumber(tx.maxFeePerGas || 0, \"maxFeePerGas\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || ZeroAddress),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || []),\n        formatNumber(tx.maxFeePerBlobGas || 0, \"maxFeePerBlobGas\"),\n        formatHashes(tx.blobVersionedHashes || [], \"blobVersionedHashes\")\n    ];\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"yParity\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n        // We have blobs; return the network wrapped format\n        if (blobs) {\n            // Use EIP-7594\n            if (tx.blobWrapperVersion != null) {\n                const wrapperVersion = toBeArray(tx.blobWrapperVersion);\n                const cellProofs = [];\n                for (const { proof } of blobs) {\n                    const p = getBytes(proof);\n                    const cellSize = p.length / CELL_COUNT;\n                    for (let i = 0; i < p.length; i += cellSize) {\n                        cellProofs.push(p.subarray(i, i + cellSize));\n                    }\n                }\n                return concat([\n                    \"0x03\",\n                    encodeRlp([\n                        fields,\n                        wrapperVersion,\n                        blobs.map((b) => b.data),\n                        blobs.map((b) => b.commitment),\n                        cellProofs\n                    ])\n                ]);\n            }\n            // Fall back onto classic EIP-4844 behavior\n            return concat([\n                \"0x03\",\n                encodeRlp([\n                    fields,\n                    blobs.map((b) => b.data),\n                    blobs.map((b) => b.commitment),\n                    blobs.map((b) => b.proof),\n                ])\n            ]);\n        }\n    }\n    return concat([\"0x03\", encodeRlp(fields)]);\n}\nfunction _parseEip7702(data) {\n    const fields = decodeRlp(getBytes(data).slice(1));\n    assertArgument(Array.isArray(fields) && (fields.length === 10 || fields.length === 13), \"invalid field count for transaction type: 4\", \"data\", hexlify(data));\n    const tx = {\n        type: 4,\n        chainId: handleUint(fields[0], \"chainId\"),\n        nonce: handleNumber(fields[1], \"nonce\"),\n        maxPriorityFeePerGas: handleUint(fields[2], \"maxPriorityFeePerGas\"),\n        maxFeePerGas: handleUint(fields[3], \"maxFeePerGas\"),\n        gasPrice: null,\n        gasLimit: handleUint(fields[4], \"gasLimit\"),\n        to: handleAddress(fields[5]),\n        value: handleUint(fields[6], \"value\"),\n        data: hexlify(fields[7]),\n        accessList: handleAccessList(fields[8], \"accessList\"),\n        authorizationList: handleAuthorizationList(fields[9], \"authorizationList\"),\n    };\n    // Unsigned EIP-7702 Transaction\n    if (fields.length === 10) {\n        return tx;\n    }\n    _parseEipSignature(tx, fields.slice(10));\n    return tx;\n}\nfunction _serializeEip7702(tx, sig) {\n    const fields = [\n        formatNumber(tx.chainId, \"chainId\"),\n        formatNumber(tx.nonce, \"nonce\"),\n        formatNumber(tx.maxPriorityFeePerGas || 0, \"maxPriorityFeePerGas\"),\n        formatNumber(tx.maxFeePerGas || 0, \"maxFeePerGas\"),\n        formatNumber(tx.gasLimit, \"gasLimit\"),\n        (tx.to || \"0x\"),\n        formatNumber(tx.value, \"value\"),\n        tx.data,\n        formatAccessList(tx.accessList || []),\n        formatAuthorizationList(tx.authorizationList || [])\n    ];\n    if (sig) {\n        fields.push(formatNumber(sig.yParity, \"yParity\"));\n        fields.push(toBeArray(sig.r));\n        fields.push(toBeArray(sig.s));\n    }\n    return concat([\"0x04\", encodeRlp(fields)]);\n}\n/**\n *  A **Transaction** describes an operation to be executed on\n *  Ethereum by an Externally Owned Account (EOA). It includes\n *  who (the [[to]] address), what (the [[data]]) and how much (the\n *  [[value]] in ether) the operation should entail.\n *\n *  @example:\n *    tx = new Transaction()\n *    //_result:\n *\n *    tx.data = \"0x1234\";\n *    //_result:\n */\nexport class Transaction {\n    #type;\n    #to;\n    #data;\n    #nonce;\n    #gasLimit;\n    #gasPrice;\n    #maxPriorityFeePerGas;\n    #maxFeePerGas;\n    #value;\n    #chainId;\n    #sig;\n    #accessList;\n    #maxFeePerBlobGas;\n    #blobVersionedHashes;\n    #kzg;\n    #blobs;\n    #auths;\n    #blobWrapperVersion;\n    /**\n     *  The transaction type.\n     *\n     *  If null, the type will be automatically inferred based on\n     *  explicit properties.\n     */\n    get type() { return this.#type; }\n    set type(value) {\n        switch (value) {\n            case null:\n                this.#type = null;\n                break;\n            case 0:\n            case \"legacy\":\n                this.#type = 0;\n                break;\n            case 1:\n            case \"berlin\":\n            case \"eip-2930\":\n                this.#type = 1;\n                break;\n            case 2:\n            case \"london\":\n            case \"eip-1559\":\n                this.#type = 2;\n                break;\n            case 3:\n            case \"cancun\":\n            case \"eip-4844\":\n                this.#type = 3;\n                break;\n            case 4:\n            case \"pectra\":\n            case \"eip-7702\":\n                this.#type = 4;\n                break;\n            default:\n                assertArgument(false, \"unsupported transaction type\", \"type\", value);\n        }\n    }\n    /**\n     *  The name of the transaction type.\n     */\n    get typeName() {\n        switch (this.type) {\n            case 0: return \"legacy\";\n            case 1: return \"eip-2930\";\n            case 2: return \"eip-1559\";\n            case 3: return \"eip-4844\";\n            case 4: return \"eip-7702\";\n        }\n        return null;\n    }\n    /**\n     *  The ``to`` address for the transaction or ``null`` if the\n     *  transaction is an ``init`` transaction.\n     */\n    get to() {\n        const value = this.#to;\n        if (value == null && this.type === 3) {\n            return ZeroAddress;\n        }\n        return value;\n    }\n    set to(value) {\n        this.#to = (value == null) ? null : getAddress(value);\n    }\n    /**\n     *  The transaction nonce.\n     */\n    get nonce() { return this.#nonce; }\n    set nonce(value) { this.#nonce = getNumber(value, \"value\"); }\n    /**\n     *  The gas limit.\n     */\n    get gasLimit() { return this.#gasLimit; }\n    set gasLimit(value) { this.#gasLimit = getBigInt(value); }\n    /**\n     *  The gas price.\n     *\n     *  On legacy networks this defines the fee that will be paid. On\n     *  EIP-1559 networks, this should be ``null``.\n     */\n    get gasPrice() {\n        const value = this.#gasPrice;\n        if (value == null && (this.type === 0 || this.type === 1)) {\n            return BN_0;\n        }\n        return value;\n    }\n    set gasPrice(value) {\n        this.#gasPrice = (value == null) ? null : getBigInt(value, \"gasPrice\");\n    }\n    /**\n     *  The maximum priority fee per unit of gas to pay. On legacy\n     *  networks this should be ``null``.\n     */\n    get maxPriorityFeePerGas() {\n        const value = this.#maxPriorityFeePerGas;\n        if (value == null) {\n            if (this.type === 2 || this.type === 3) {\n                return BN_0;\n            }\n            return null;\n        }\n        return value;\n    }\n    set maxPriorityFeePerGas(value) {\n        this.#maxPriorityFeePerGas = (value == null) ? null : getBigInt(value, \"maxPriorityFeePerGas\");\n    }\n    /**\n     *  The maximum total fee per unit of gas to pay. On legacy\n     *  networks this should be ``null``.\n     */\n    get maxFeePerGas() {\n        const value = this.#maxFeePerGas;\n        if (value == null) {\n            if (this.type === 2 || this.type === 3) {\n                return BN_0;\n            }\n            return null;\n        }\n        return value;\n    }\n    set maxFeePerGas(value) {\n        this.#maxFeePerGas = (value == null) ? null : getBigInt(value, \"maxFeePerGas\");\n    }\n    /**\n     *  The transaction data. For ``init`` transactions this is the\n     *  deployment code.\n     */\n    get data() { return this.#data; }\n    set data(value) { this.#data = hexlify(value); }\n    /**\n     *  The amount of ether (in wei) to send in this transactions.\n     */\n    get value() { return this.#value; }\n    set value(value) {\n        this.#value = getBigInt(value, \"value\");\n    }\n    /**\n     *  The chain ID this transaction is valid on.\n     */\n    get chainId() { return this.#chainId; }\n    set chainId(value) { this.#chainId = getBigInt(value); }\n    /**\n     *  If signed, the signature for this transaction.\n     */\n    get signature() { return this.#sig || null; }\n    set signature(value) {\n        this.#sig = (value == null) ? null : Signature.from(value);\n    }\n    isValid() {\n        const sig = this.signature;\n        if (sig && !sig.isValid()) {\n            return false;\n        }\n        const auths = this.authorizationList;\n        if (auths) {\n            for (const auth of auths) {\n                if (!auth.signature.isValid()) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    /**\n     *  The access list.\n     *\n     *  An access list permits discounted (but pre-paid) access to\n     *  bytecode and state variable access within contract execution.\n     */\n    get accessList() {\n        const value = this.#accessList || null;\n        if (value == null) {\n            if (this.type === 1 || this.type === 2 || this.type === 3) {\n                // @TODO: in v7, this should assign the value or become\n                // a live object itself, otherwise mutation is inconsistent\n                return [];\n            }\n            return null;\n        }\n        return value;\n    }\n    set accessList(value) {\n        this.#accessList = (value == null) ? null : accessListify(value);\n    }\n    get authorizationList() {\n        const value = this.#auths || null;\n        if (value == null) {\n            if (this.type === 4) {\n                // @TODO: in v7, this should become a live object itself,\n                // otherwise mutation is inconsistent\n                return [];\n            }\n        }\n        return value;\n    }\n    set authorizationList(auths) {\n        this.#auths = (auths == null) ? null : auths.map((a) => authorizationify(a));\n    }\n    /**\n     *  The max fee per blob gas for Cancun transactions.\n     */\n    get maxFeePerBlobGas() {\n        const value = this.#maxFeePerBlobGas;\n        if (value == null && this.type === 3) {\n            return BN_0;\n        }\n        return value;\n    }\n    set maxFeePerBlobGas(value) {\n        this.#maxFeePerBlobGas = (value == null) ? null : getBigInt(value, \"maxFeePerBlobGas\");\n    }\n    /**\n     *  The BLOb versioned hashes for Cancun transactions.\n     */\n    get blobVersionedHashes() {\n        // @TODO: Mutation is inconsistent; if unset, the returned value\n        // cannot mutate the object, if set it can\n        let value = this.#blobVersionedHashes;\n        if (value == null && this.type === 3) {\n            return [];\n        }\n        return value;\n    }\n    set blobVersionedHashes(value) {\n        if (value != null) {\n            assertArgument(Array.isArray(value), \"blobVersionedHashes must be an Array\", \"value\", value);\n            value = value.slice();\n            for (let i = 0; i < value.length; i++) {\n                assertArgument(isHexString(value[i], 32), \"invalid blobVersionedHash\", `value[${i}]`, value[i]);\n            }\n        }\n        this.#blobVersionedHashes = value;\n    }\n    /**\n     *  The BLObs for the Transaction, if any.\n     *\n     *  If ``blobs`` is non-``null``, then the [[seriailized]]\n     *  will return the network formatted sidecar, otherwise it\n     *  will return the standard [[link-eip-2718]] payload. The\n     *  [[unsignedSerialized]] is unaffected regardless.\n     *\n     *  When setting ``blobs``, either fully valid [[Blob]] objects\n     *  may be specified (i.e. correctly padded, with correct\n     *  committments and proofs) or a raw [[BytesLike]] may\n     *  be provided.\n     *\n     *  If raw [[BytesLike]] are provided, the [[kzg]] property **must**\n     *  be already set. The blob will be correctly padded and the\n     *  [[KzgLibrary]] will be used to compute the committment and\n     *  proof for the blob.\n     *\n     *  A BLOb is a sequence of field elements, each of which must\n     *  be within the BLS field modulo, so some additional processing\n     *  may be required to encode arbitrary data to ensure each 32 byte\n     *  field is within the valid range.\n     *\n     *  Setting this automatically populates [[blobVersionedHashes]],\n     *  overwriting any existing values. Setting this to ``null``\n     *  does **not** remove the [[blobVersionedHashes]], leaving them\n     *  present.\n     */\n    get blobs() {\n        if (this.#blobs == null) {\n            return null;\n        }\n        return this.#blobs.map((b) => Object.assign({}, b));\n    }\n    set blobs(_blobs) {\n        if (_blobs == null) {\n            this.#blobs = null;\n            return;\n        }\n        const blobs = [];\n        const versionedHashes = [];\n        for (let i = 0; i < _blobs.length; i++) {\n            const blob = _blobs[i];\n            if (isBytesLike(blob)) {\n                assert(this.#kzg, \"adding a raw blob requires a KZG library\", \"UNSUPPORTED_OPERATION\", {\n                    operation: \"set blobs()\"\n                });\n                let data = getBytes(blob);\n                assertArgument(data.length <= BLOB_SIZE, \"blob is too large\", `blobs[${i}]`, blob);\n                // Pad blob if necessary\n                if (data.length !== BLOB_SIZE) {\n                    const padded = new Uint8Array(BLOB_SIZE);\n                    padded.set(data);\n                    data = padded;\n                }\n                const commit = this.#kzg.blobToKzgCommitment(data);\n                const proof = hexlify(this.#kzg.computeBlobKzgProof(data, commit));\n                blobs.push({\n                    data: hexlify(data),\n                    commitment: hexlify(commit),\n                    proof\n                });\n                versionedHashes.push(getVersionedHash(1, commit));\n            }\n            else {\n                const data = hexlify(blob.data);\n                const commitment = hexlify(blob.commitment);\n                const proof = hexlify(blob.proof);\n                blobs.push({ data, commitment, proof });\n                versionedHashes.push(getVersionedHash(1, commitment));\n            }\n        }\n        this.#blobs = blobs;\n        this.#blobVersionedHashes = versionedHashes;\n    }\n    get kzg() { return this.#kzg; }\n    set kzg(kzg) {\n        if (kzg == null) {\n            this.#kzg = null;\n        }\n        else {\n            this.#kzg = getKzgLibrary(kzg);\n        }\n    }\n    get blobWrapperVersion() {\n        return this.#blobWrapperVersion;\n    }\n    set blobWrapperVersion(value) {\n        this.#blobWrapperVersion = value;\n    }\n    /**\n     *  Creates a new Transaction with default values.\n     */\n    constructor() {\n        this.#type = null;\n        this.#to = null;\n        this.#nonce = 0;\n        this.#gasLimit = BN_0;\n        this.#gasPrice = null;\n        this.#maxPriorityFeePerGas = null;\n        this.#maxFeePerGas = null;\n        this.#data = \"0x\";\n        this.#value = BN_0;\n        this.#chainId = BN_0;\n        this.#sig = null;\n        this.#accessList = null;\n        this.#maxFeePerBlobGas = null;\n        this.#blobVersionedHashes = null;\n        this.#kzg = null;\n        this.#blobs = null;\n        this.#auths = null;\n        this.#blobWrapperVersion = null;\n    }\n    /**\n     *  The transaction hash, if signed. Otherwise, ``null``.\n     */\n    get hash() {\n        if (this.signature == null) {\n            return null;\n        }\n        return keccak256(this.#getSerialized(true, false));\n    }\n    /**\n     *  The pre-image hash of this transaction.\n     *\n     *  This is the digest that a [[Signer]] must sign to authorize\n     *  this transaction.\n     */\n    get unsignedHash() {\n        return keccak256(this.unsignedSerialized);\n    }\n    /**\n     *  The sending address, if signed. Otherwise, ``null``.\n     */\n    get from() {\n        if (this.signature == null) {\n            return null;\n        }\n        return recoverAddress(this.unsignedHash, this.signature.getCanonical());\n    }\n    /**\n     *  The public key of the sender, if signed. Otherwise, ``null``.\n     */\n    get fromPublicKey() {\n        if (this.signature == null) {\n            return null;\n        }\n        return SigningKey.recoverPublicKey(this.unsignedHash, this.signature.getCanonical());\n    }\n    /**\n     *  Returns true if signed.\n     *\n     *  This provides a Type Guard that properties requiring a signed\n     *  transaction are non-null.\n     */\n    isSigned() {\n        return this.signature != null;\n    }\n    #getSerialized(signed, sidecar) {\n        assert(!signed || this.signature != null, \"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized\", \"UNSUPPORTED_OPERATION\", { operation: \".serialized\" });\n        const sig = signed ? this.signature : null;\n        switch (this.inferType()) {\n            case 0:\n                return _serializeLegacy(this, sig);\n            case 1:\n                return _serializeEip2930(this, sig);\n            case 2:\n                return _serializeEip1559(this, sig);\n            case 3:\n                return _serializeEip4844(this, sig, sidecar ? this.blobs : null);\n            case 4:\n                return _serializeEip7702(this, sig);\n        }\n        assert(false, \"unsupported transaction type\", \"UNSUPPORTED_OPERATION\", { operation: \".serialized\" });\n    }\n    /**\n     *  The serialized transaction.\n     *\n     *  This throws if the transaction is unsigned. For the pre-image,\n     *  use [[unsignedSerialized]].\n     */\n    get serialized() {\n        return this.#getSerialized(true, true);\n    }\n    /**\n     *  The transaction pre-image.\n     *\n     *  The hash of this is the digest which needs to be signed to\n     *  authorize this transaction.\n     */\n    get unsignedSerialized() {\n        return this.#getSerialized(false, false);\n    }\n    /**\n     *  Return the most \"likely\" type; currently the highest\n     *  supported transaction type.\n     */\n    inferType() {\n        const types = this.inferTypes();\n        // Prefer London (EIP-1559) over Cancun (BLOb)\n        if (types.indexOf(2) >= 0) {\n            return 2;\n        }\n        // Return the highest inferred type\n        return (types.pop());\n    }\n    /**\n     *  Validates the explicit properties and returns a list of compatible\n     *  transaction types.\n     */\n    inferTypes() {\n        // Checks that there are no conflicting properties set\n        const hasGasPrice = this.gasPrice != null;\n        const hasFee = (this.maxFeePerGas != null || this.maxPriorityFeePerGas != null);\n        const hasAccessList = (this.accessList != null);\n        const hasBlob = (this.#maxFeePerBlobGas != null || this.#blobVersionedHashes);\n        //if (hasGasPrice && hasFee) {\n        //    throw new Error(\"transaction cannot have gasPrice and maxFeePerGas\");\n        //}\n        if (this.maxFeePerGas != null && this.maxPriorityFeePerGas != null) {\n            assert(this.maxFeePerGas >= this.maxPriorityFeePerGas, \"priorityFee cannot be more than maxFee\", \"BAD_DATA\", { value: this });\n        }\n        //if (this.type === 2 && hasGasPrice) {\n        //    throw new Error(\"eip-1559 transaction cannot have gasPrice\");\n        //}\n        assert(!hasFee || (this.type !== 0 && this.type !== 1), \"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas\", \"BAD_DATA\", { value: this });\n        assert(this.type !== 0 || !hasAccessList, \"legacy transaction cannot have accessList\", \"BAD_DATA\", { value: this });\n        const types = [];\n        // Explicit type\n        if (this.type != null) {\n            types.push(this.type);\n        }\n        else {\n            if (this.authorizationList && this.authorizationList.length) {\n                types.push(4);\n            }\n            else if (hasFee) {\n                types.push(2);\n            }\n            else if (hasGasPrice) {\n                types.push(1);\n                if (!hasAccessList) {\n                    types.push(0);\n                }\n            }\n            else if (hasAccessList) {\n                types.push(1);\n                types.push(2);\n            }\n            else if (hasBlob && this.to) {\n                types.push(3);\n            }\n            else {\n                types.push(0);\n                types.push(1);\n                types.push(2);\n                types.push(3);\n            }\n        }\n        types.sort();\n        return types;\n    }\n    /**\n     *  Returns true if this transaction is a legacy transaction (i.e.\n     *  ``type === 0``).\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isLegacy() {\n        return (this.type === 0);\n    }\n    /**\n     *  Returns true if this transaction is berlin hardform transaction (i.e.\n     *  ``type === 1``).\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isBerlin() {\n        return (this.type === 1);\n    }\n    /**\n     *  Returns true if this transaction is london hardform transaction (i.e.\n     *  ``type === 2``).\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isLondon() {\n        return (this.type === 2);\n    }\n    /**\n     *  Returns true if this transaction is an [[link-eip-4844]] BLOB\n     *  transaction.\n     *\n     *  This provides a Type Guard that the related properties are\n     *  non-null.\n     */\n    isCancun() {\n        return (this.type === 3);\n    }\n    /**\n     *  Create a copy of this transaciton.\n     */\n    clone() {\n        return Transaction.from(this);\n    }\n    /**\n     *  Return a JSON-friendly object.\n     */\n    toJSON() {\n        const s = (v) => {\n            if (v == null) {\n                return null;\n            }\n            return v.toString();\n        };\n        return {\n            type: this.type,\n            to: this.to,\n            //            from: this.from,\n            data: this.data,\n            nonce: this.nonce,\n            gasLimit: s(this.gasLimit),\n            gasPrice: s(this.gasPrice),\n            maxPriorityFeePerGas: s(this.maxPriorityFeePerGas),\n            maxFeePerGas: s(this.maxFeePerGas),\n            value: s(this.value),\n            chainId: s(this.chainId),\n            sig: this.signature ? this.signature.toJSON() : null,\n            accessList: this.accessList\n        };\n    }\n    [inspect]() {\n        return this.toString();\n    }\n    toString() {\n        const output = [];\n        const add = (key) => {\n            let value = this[key];\n            if (typeof (value) === \"string\") {\n                value = JSON.stringify(value);\n            }\n            output.push(`${key}: ${value}`);\n        };\n        if (this.type) {\n            add(\"type\");\n        }\n        add(\"to\");\n        add(\"data\");\n        add(\"nonce\");\n        add(\"gasLimit\");\n        add(\"value\");\n        if (this.chainId != null) {\n            add(\"chainId\");\n        }\n        if (this.signature) {\n            add(\"from\");\n            output.push(`signature: ${this.signature.toString()}`);\n        }\n        // @TODO: accessList\n        // @TODO: blobs (might make output huge; maybe just include a flag?)\n        const auths = this.authorizationList;\n        if (auths) {\n            const outputAuths = [];\n            for (const auth of auths) {\n                const o = [];\n                o.push(`address: ${JSON.stringify(auth.address)}`);\n                if (auth.nonce != null) {\n                    o.push(`nonce: ${auth.nonce}`);\n                }\n                if (auth.chainId != null) {\n                    o.push(`chainId: ${auth.chainId}`);\n                }\n                if (auth.signature) {\n                    o.push(`signature: ${auth.signature.toString()}`);\n                }\n                outputAuths.push(`Authorization { ${o.join(\", \")} }`);\n            }\n            output.push(`authorizations: [ ${outputAuths.join(\", \")} ]`);\n        }\n        return `Transaction { ${output.join(\", \")} }`;\n    }\n    /**\n     *  Create a **Transaction** from a serialized transaction or a\n     *  Transaction-like object.\n     */\n    static from(tx) {\n        if (tx == null) {\n            return new Transaction();\n        }\n        if (typeof (tx) === \"string\") {\n            const payload = getBytes(tx);\n            if (payload[0] >= 0x7f) { // @TODO: > vs >= ??\n                return Transaction.from(_parseLegacy(payload));\n            }\n            switch (payload[0]) {\n                case 1: return Transaction.from(_parseEip2930(payload));\n                case 2: return Transaction.from(_parseEip1559(payload));\n                case 3: return Transaction.from(_parseEip4844(payload));\n                case 4: return Transaction.from(_parseEip7702(payload));\n            }\n            assert(false, \"unsupported transaction type\", \"UNSUPPORTED_OPERATION\", { operation: \"from\" });\n        }\n        const result = new Transaction();\n        if (tx.type != null) {\n            result.type = tx.type;\n        }\n        if (tx.to != null) {\n            result.to = tx.to;\n        }\n        if (tx.nonce != null) {\n            result.nonce = tx.nonce;\n        }\n        if (tx.gasLimit != null) {\n            result.gasLimit = tx.gasLimit;\n        }\n        if (tx.gasPrice != null) {\n            result.gasPrice = tx.gasPrice;\n        }\n        if (tx.maxPriorityFeePerGas != null) {\n            result.maxPriorityFeePerGas = tx.maxPriorityFeePerGas;\n        }\n        if (tx.maxFeePerGas != null) {\n            result.maxFeePerGas = tx.maxFeePerGas;\n        }\n        if (tx.maxFeePerBlobGas != null) {\n            result.maxFeePerBlobGas = tx.maxFeePerBlobGas;\n        }\n        if (tx.data != null) {\n            result.data = tx.data;\n        }\n        if (tx.value != null) {\n            result.value = tx.value;\n        }\n        if (tx.chainId != null) {\n            result.chainId = tx.chainId;\n        }\n        if (tx.signature != null) {\n            result.signature = Signature.from(tx.signature);\n        }\n        if (tx.accessList != null) {\n            result.accessList = tx.accessList;\n        }\n        if (tx.authorizationList != null) {\n            result.authorizationList = tx.authorizationList;\n        }\n        // This will get overwritten by blobs, if present\n        if (tx.blobVersionedHashes != null) {\n            result.blobVersionedHashes = tx.blobVersionedHashes;\n        }\n        // Make sure we assign the kzg before assigning blobs, which\n        // require the library in the event raw blob data is provided.\n        if (tx.kzg != null) {\n            result.kzg = tx.kzg;\n        }\n        if (tx.blobWrapperVersion != null) {\n            result.blobWrapperVersion = tx.blobWrapperVersion;\n        }\n        if (tx.blobs != null) {\n            result.blobs = tx.blobs;\n        }\n        if (tx.hash != null) {\n            assertArgument(result.isSigned(), \"unsigned transaction cannot define '.hash'\", \"tx\", tx);\n            assertArgument(result.hash === tx.hash, \"hash mismatch\", \"tx\", tx);\n        }\n        if (tx.from != null) {\n            assertArgument(result.isSigned(), \"unsigned transaction cannot define '.from'\", \"tx\", tx);\n            assertArgument(result.from.toLowerCase() === (tx.from || \"\").toLowerCase(), \"from mismatch\", \"tx\", tx);\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=transaction.js.map","import { getAddress } from \"../address/index.js\";\nimport { keccak256 } from \"../crypto/index.js\";\nimport { recoverAddress } from \"../transaction/index.js\";\nimport { assertArgument, concat, encodeRlp, toBeArray } from \"../utils/index.js\";\n/**\n *  Computes the [[link-eip-7702]] authorization digest to sign.\n */\nexport function hashAuthorization(auth) {\n    assertArgument(typeof (auth.address) === \"string\", \"invalid address for hashAuthorization\", \"auth.address\", auth);\n    return keccak256(concat([\n        \"0x05\", encodeRlp([\n            (auth.chainId != null) ? toBeArray(auth.chainId) : \"0x\",\n            getAddress(auth.address),\n            (auth.nonce != null) ? toBeArray(auth.nonce) : \"0x\",\n        ])\n    ]));\n}\n/**\n *  Return the address of the private key that produced\n *  the signature %%sig%% during signing for %%message%%.\n */\nexport function verifyAuthorization(auth, sig) {\n    return recoverAddress(hashAuthorization(auth), sig);\n}\n//# sourceMappingURL=authorization.js.map","import { keccak256 } from \"../crypto/index.js\";\nimport { toUtf8Bytes } from \"../utils/index.js\";\n/**\n *  A simple hashing function which operates on UTF-8 strings to\n *  compute an 32-byte identifier.\n *\n *  This simply computes the [UTF-8 bytes](toUtf8Bytes) and computes\n *  the [[keccak256]].\n *\n *  @example:\n *    id(\"hello world\")\n *    //_result:\n */\nexport function id(value) {\n    return keccak256(toUtf8Bytes(value));\n}\n//# sourceMappingURL=id.js.map","import { keccak256 } from \"../crypto/index.js\";\nimport { MessagePrefix } from \"../constants/index.js\";\nimport { recoverAddress } from \"../transaction/index.js\";\nimport { concat, toUtf8Bytes } from \"../utils/index.js\";\n/**\n *  Computes the [[link-eip-191]] personal-sign message digest to sign.\n *\n *  This prefixes the message with [[MessagePrefix]] and the decimal length\n *  of %%message%% and computes the [[keccak256]] digest.\n *\n *  If %%message%% is a string, it is converted to its UTF-8 bytes\n *  first. To compute the digest of a [[DataHexString]], it must be converted\n *  to [bytes](getBytes).\n *\n *  @example:\n *    hashMessage(\"Hello World\")\n *    //_result:\n *\n *    // Hashes the SIX (6) string characters, i.e.\n *    // [ \"0\", \"x\", \"4\", \"2\", \"4\", \"3\" ]\n *    hashMessage(\"0x4243\")\n *    //_result:\n *\n *    // Hashes the TWO (2) bytes [ 0x42, 0x43 ]...\n *    hashMessage(getBytes(\"0x4243\"))\n *    //_result:\n *\n *    // ...which is equal to using data\n *    hashMessage(new Uint8Array([ 0x42, 0x43 ]))\n *    //_result:\n *\n */\nexport function hashMessage(message) {\n    if (typeof (message) === \"string\") {\n        message = toUtf8Bytes(message);\n    }\n    return keccak256(concat([\n        toUtf8Bytes(MessagePrefix),\n        toUtf8Bytes(String(message.length)),\n        message\n    ]));\n}\n/**\n *  Return the address of the private key that produced\n *  the signature %%sig%% during signing for %%message%%.\n */\nexport function verifyMessage(message, sig) {\n    const digest = hashMessage(message);\n    return recoverAddress(digest, sig);\n}\n//# sourceMappingURL=message.js.map","//import { TypedDataDomain, TypedDataField } from \"@ethersproject/providerabstract-signer\";\nimport { getAddress } from \"../address/index.js\";\nimport { keccak256 } from \"../crypto/index.js\";\nimport { recoverAddress } from \"../transaction/index.js\";\nimport { concat, defineProperties, getBigInt, getBytes, hexlify, isHexString, mask, toBeHex, toQuantity, toTwos, zeroPadValue, assertArgument } from \"../utils/index.js\";\nimport { id } from \"./id.js\";\nconst padding = new Uint8Array(32);\npadding.fill(0);\nconst BN__1 = BigInt(-1);\nconst BN_0 = BigInt(0);\nconst BN_1 = BigInt(1);\nconst BN_MAX_UINT256 = BigInt(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n;\n;\nfunction hexPadRight(value) {\n    const bytes = getBytes(value);\n    const padOffset = bytes.length % 32;\n    if (padOffset) {\n        return concat([bytes, padding.slice(padOffset)]);\n    }\n    return hexlify(bytes);\n}\nconst hexTrue = toBeHex(BN_1, 32);\nconst hexFalse = toBeHex(BN_0, 32);\nconst domainFieldTypes = {\n    name: \"string\",\n    version: \"string\",\n    chainId: \"uint256\",\n    verifyingContract: \"address\",\n    salt: \"bytes32\"\n};\nconst domainFieldNames = [\n    \"name\", \"version\", \"chainId\", \"verifyingContract\", \"salt\"\n];\nfunction checkString(key) {\n    return function (value) {\n        assertArgument(typeof (value) === \"string\", `invalid domain value for ${JSON.stringify(key)}`, `domain.${key}`, value);\n        return value;\n    };\n}\nconst domainChecks = {\n    name: checkString(\"name\"),\n    version: checkString(\"version\"),\n    chainId: function (_value) {\n        const value = getBigInt(_value, \"domain.chainId\");\n        assertArgument(value >= 0, \"invalid chain ID\", \"domain.chainId\", _value);\n        if (Number.isSafeInteger(value)) {\n            return Number(value);\n        }\n        return toQuantity(value);\n    },\n    verifyingContract: function (value) {\n        try {\n            return getAddress(value).toLowerCase();\n        }\n        catch (error) { }\n        assertArgument(false, `invalid domain value \"verifyingContract\"`, \"domain.verifyingContract\", value);\n    },\n    salt: function (value) {\n        const bytes = getBytes(value, \"domain.salt\");\n        assertArgument(bytes.length === 32, `invalid domain value \"salt\"`, \"domain.salt\", value);\n        return hexlify(bytes);\n    }\n};\nfunction getBaseEncoder(type) {\n    // intXX and uintXX\n    {\n        const match = type.match(/^(u?)int(\\d+)$/);\n        if (match) {\n            const signed = (match[1] === \"\");\n            const width = parseInt(match[2]);\n            assertArgument(width % 8 === 0 && width !== 0 && width <= 256 && match[2] === String(width), \"invalid numeric width\", \"type\", type);\n            const boundsUpper = mask(BN_MAX_UINT256, signed ? (width - 1) : width);\n            const boundsLower = signed ? ((boundsUpper + BN_1) * BN__1) : BN_0;\n            return function (_value) {\n                const value = getBigInt(_value, \"value\");\n                assertArgument(value >= boundsLower && value <= boundsUpper, `value out-of-bounds for ${type}`, \"value\", value);\n                return toBeHex(signed ? toTwos(value, 256) : value, 32);\n            };\n        }\n    }\n    // bytesXX\n    {\n        const match = type.match(/^bytes(\\d+)$/);\n        if (match) {\n            const width = parseInt(match[1]);\n            assertArgument(width !== 0 && width <= 32 && match[1] === String(width), \"invalid bytes width\", \"type\", type);\n            return function (value) {\n                const bytes = getBytes(value);\n                assertArgument(bytes.length === width, `invalid length for ${type}`, \"value\", value);\n                return hexPadRight(value);\n            };\n        }\n    }\n    switch (type) {\n        case \"address\": return function (value) {\n            return zeroPadValue(getAddress(value), 32);\n        };\n        case \"bool\": return function (value) {\n            return ((!value) ? hexFalse : hexTrue);\n        };\n        case \"bytes\": return function (value) {\n            return keccak256(value);\n        };\n        case \"string\": return function (value) {\n            return id(value);\n        };\n    }\n    return null;\n}\nfunction encodeType(name, fields) {\n    return `${name}(${fields.map(({ name, type }) => (type + \" \" + name)).join(\",\")})`;\n}\n// foo[][3] => { base: \"foo\", index: \"[][3]\", array: {\n//     base: \"foo\", prefix: \"foo[]\", count: 3 } }\nfunction splitArray(type) {\n    const match = type.match(/^([^\\x5b]*)((\\x5b\\d*\\x5d)*)(\\x5b(\\d*)\\x5d)$/);\n    if (match) {\n        return {\n            base: match[1],\n            index: (match[2] + match[4]),\n            array: {\n                base: match[1],\n                prefix: (match[1] + match[2]),\n                count: (match[5] ? parseInt(match[5]) : -1),\n            }\n        };\n    }\n    return { base: type };\n}\n/**\n *  A **TypedDataEncode** prepares and encodes [[link-eip-712]] payloads\n *  for signed typed data.\n *\n *  This is useful for those that wish to compute various components of a\n *  typed data hash, primary types, or sub-components, but generally the\n *  higher level [[Signer-signTypedData]] is more useful.\n */\nexport class TypedDataEncoder {\n    /**\n     *  The primary type for the structured [[types]].\n     *\n     *  This is derived automatically from the [[types]], since no\n     *  recursion is possible, once the DAG for the types is consturcted\n     *  internally, the primary type must be the only remaining type with\n     *  no parent nodes.\n     */\n    primaryType;\n    #types;\n    /**\n     *  The types.\n     */\n    get types() {\n        return JSON.parse(this.#types);\n    }\n    #fullTypes;\n    #encoderCache;\n    /**\n     *  Create a new **TypedDataEncoder** for %%types%%.\n     *\n     *  This performs all necessary checking that types are valid and\n     *  do not violate the [[link-eip-712]] structural constraints as\n     *  well as computes the [[primaryType]].\n     */\n    constructor(_types) {\n        this.#fullTypes = new Map();\n        this.#encoderCache = new Map();\n        // Link struct types to their direct child structs\n        const links = new Map();\n        // Link structs to structs which contain them as a child\n        const parents = new Map();\n        // Link all subtypes within a given struct\n        const subtypes = new Map();\n        const types = {};\n        Object.keys(_types).forEach((type) => {\n            types[type] = _types[type].map(({ name, type }) => {\n                // Normalize the base type (unless name conflict)\n                let { base, index } = splitArray(type);\n                if (base === \"int\" && !_types[\"int\"]) {\n                    base = \"int256\";\n                }\n                if (base === \"uint\" && !_types[\"uint\"]) {\n                    base = \"uint256\";\n                }\n                return { name, type: (base + (index || \"\")) };\n            });\n            links.set(type, new Set());\n            parents.set(type, []);\n            subtypes.set(type, new Set());\n        });\n        this.#types = JSON.stringify(types);\n        for (const name in types) {\n            const uniqueNames = new Set();\n            for (const field of types[name]) {\n                // Check each field has a unique name\n                assertArgument(!uniqueNames.has(field.name), `duplicate variable name ${JSON.stringify(field.name)} in ${JSON.stringify(name)}`, \"types\", _types);\n                uniqueNames.add(field.name);\n                // Get the base type (drop any array specifiers)\n                const baseType = splitArray(field.type).base;\n                assertArgument(baseType !== name, `circular type reference to ${JSON.stringify(baseType)}`, \"types\", _types);\n                // Is this a base encoding type?\n                const encoder = getBaseEncoder(baseType);\n                if (encoder) {\n                    continue;\n                }\n                assertArgument(parents.has(baseType), `unknown type ${JSON.stringify(baseType)}`, \"types\", _types);\n                // Add linkage\n                parents.get(baseType).push(name);\n                links.get(name).add(baseType);\n            }\n        }\n        // Deduce the primary type\n        const primaryTypes = Array.from(parents.keys()).filter((n) => (parents.get(n).length === 0));\n        assertArgument(primaryTypes.length !== 0, \"missing primary type\", \"types\", _types);\n        assertArgument(primaryTypes.length === 1, `ambiguous primary types or unused types: ${primaryTypes.map((t) => (JSON.stringify(t))).join(\", \")}`, \"types\", _types);\n        defineProperties(this, { primaryType: primaryTypes[0] });\n        // Check for circular type references\n        function checkCircular(type, found) {\n            assertArgument(!found.has(type), `circular type reference to ${JSON.stringify(type)}`, \"types\", _types);\n            found.add(type);\n            for (const child of links.get(type)) {\n                if (!parents.has(child)) {\n                    continue;\n                }\n                // Recursively check children\n                checkCircular(child, found);\n                // Mark all ancestors as having this decendant\n                for (const subtype of found) {\n                    subtypes.get(subtype).add(child);\n                }\n            }\n            found.delete(type);\n        }\n        checkCircular(this.primaryType, new Set());\n        // Compute each fully describe type\n        for (const [name, set] of subtypes) {\n            const st = Array.from(set);\n            st.sort();\n            this.#fullTypes.set(name, encodeType(name, types[name]) + st.map((t) => encodeType(t, types[t])).join(\"\"));\n        }\n    }\n    /**\n     *  Returnthe encoder for the specific %%type%%.\n     */\n    getEncoder(type) {\n        let encoder = this.#encoderCache.get(type);\n        if (!encoder) {\n            encoder = this.#getEncoder(type);\n            this.#encoderCache.set(type, encoder);\n        }\n        return encoder;\n    }\n    #getEncoder(type) {\n        // Basic encoder type (address, bool, uint256, etc)\n        {\n            const encoder = getBaseEncoder(type);\n            if (encoder) {\n                return encoder;\n            }\n        }\n        // Array\n        const array = splitArray(type).array;\n        if (array) {\n            const subtype = array.prefix;\n            const subEncoder = this.getEncoder(subtype);\n            return (value) => {\n                assertArgument(array.count === -1 || array.count === value.length, `array length mismatch; expected length ${array.count}`, \"value\", value);\n                let result = value.map(subEncoder);\n                if (this.#fullTypes.has(subtype)) {\n                    result = result.map(keccak256);\n                }\n                return keccak256(concat(result));\n            };\n        }\n        // Struct\n        const fields = this.types[type];\n        if (fields) {\n            const encodedType = id(this.#fullTypes.get(type));\n            return (value) => {\n                const values = fields.map(({ name, type }) => {\n                    const result = this.getEncoder(type)(value[name]);\n                    if (this.#fullTypes.has(type)) {\n                        return keccak256(result);\n                    }\n                    return result;\n                });\n                values.unshift(encodedType);\n                return concat(values);\n            };\n        }\n        assertArgument(false, `unknown type: ${type}`, \"type\", type);\n    }\n    /**\n     *  Return the full type for %%name%%.\n     */\n    encodeType(name) {\n        const result = this.#fullTypes.get(name);\n        assertArgument(result, `unknown type: ${JSON.stringify(name)}`, \"name\", name);\n        return result;\n    }\n    /**\n     *  Return the encoded %%value%% for the %%type%%.\n     */\n    encodeData(type, value) {\n        return this.getEncoder(type)(value);\n    }\n    /**\n     *  Returns the hash of %%value%% for the type of %%name%%.\n     */\n    hashStruct(name, value) {\n        return keccak256(this.encodeData(name, value));\n    }\n    /**\n     *  Return the fulled encoded %%value%% for the [[types]].\n     */\n    encode(value) {\n        return this.encodeData(this.primaryType, value);\n    }\n    /**\n     *  Return the hash of the fully encoded %%value%% for the [[types]].\n     */\n    hash(value) {\n        return this.hashStruct(this.primaryType, value);\n    }\n    /**\n     *  @_ignore:\n     */\n    _visit(type, value, callback) {\n        // Basic encoder type (address, bool, uint256, etc)\n        {\n            const encoder = getBaseEncoder(type);\n            if (encoder) {\n                return callback(type, value);\n            }\n        }\n        // Array\n        const array = splitArray(type).array;\n        if (array) {\n            assertArgument(array.count === -1 || array.count === value.length, `array length mismatch; expected length ${array.count}`, \"value\", value);\n            return value.map((v) => this._visit(array.prefix, v, callback));\n        }\n        // Struct\n        const fields = this.types[type];\n        if (fields) {\n            return fields.reduce((accum, { name, type }) => {\n                accum[name] = this._visit(type, value[name], callback);\n                return accum;\n            }, {});\n        }\n        assertArgument(false, `unknown type: ${type}`, \"type\", type);\n    }\n    /**\n     *  Call %%calback%% for each value in %%value%%, passing the type and\n     *  component within %%value%%.\n     *\n     *  This is useful for replacing addresses or other transformation that\n     *  may be desired on each component, based on its type.\n     */\n    visit(value, callback) {\n        return this._visit(this.primaryType, value, callback);\n    }\n    /**\n     *  Create a new **TypedDataEncoder** for %%types%%.\n     */\n    static from(types) {\n        return new TypedDataEncoder(types);\n    }\n    /**\n     *  Return the primary type for %%types%%.\n     */\n    static getPrimaryType(types) {\n        return TypedDataEncoder.from(types).primaryType;\n    }\n    /**\n     *  Return the hashed struct for %%value%% using %%types%% and %%name%%.\n     */\n    static hashStruct(name, types, value) {\n        return TypedDataEncoder.from(types).hashStruct(name, value);\n    }\n    /**\n     *  Return the domain hash for %%domain%%.\n     */\n    static hashDomain(domain) {\n        const domainFields = [];\n        for (const name in domain) {\n            if (domain[name] == null) {\n                continue;\n            }\n            const type = domainFieldTypes[name];\n            assertArgument(type, `invalid typed-data domain key: ${JSON.stringify(name)}`, \"domain\", domain);\n            domainFields.push({ name, type });\n        }\n        domainFields.sort((a, b) => {\n            return domainFieldNames.indexOf(a.name) - domainFieldNames.indexOf(b.name);\n        });\n        return TypedDataEncoder.hashStruct(\"EIP712Domain\", { EIP712Domain: domainFields }, domain);\n    }\n    /**\n     *  Return the fully encoded [[link-eip-712]] %%value%% for %%types%% with %%domain%%.\n     */\n    static encode(domain, types, value) {\n        return concat([\n            \"0x1901\",\n            TypedDataEncoder.hashDomain(domain),\n            TypedDataEncoder.from(types).hash(value)\n        ]);\n    }\n    /**\n     *  Return the hash of the fully encoded [[link-eip-712]] %%value%% for %%types%% with %%domain%%.\n     */\n    static hash(domain, types, value) {\n        return keccak256(TypedDataEncoder.encode(domain, types, value));\n    }\n    // Replaces all address types with ENS names with their looked up address\n    /**\n     * Resolves to the value from resolving all addresses in %%value%% for\n     * %%types%% and the %%domain%%.\n     */\n    static async resolveNames(domain, types, value, resolveName) {\n        // Make a copy to isolate it from the object passed in\n        domain = Object.assign({}, domain);\n        // Allow passing null to ignore value\n        for (const key in domain) {\n            if (domain[key] == null) {\n                delete domain[key];\n            }\n        }\n        // Look up all ENS names\n        const ensCache = {};\n        // Do we need to look up the domain's verifyingContract?\n        if (domain.verifyingContract && !isHexString(domain.verifyingContract, 20)) {\n            ensCache[domain.verifyingContract] = \"0x\";\n        }\n        // We are going to use the encoder to visit all the base values\n        const encoder = TypedDataEncoder.from(types);\n        // Get a list of all the addresses\n        encoder.visit(value, (type, value) => {\n            if (type === \"address\" && !isHexString(value, 20)) {\n                ensCache[value] = \"0x\";\n            }\n            return value;\n        });\n        // Lookup each name\n        for (const name in ensCache) {\n            ensCache[name] = await resolveName(name);\n        }\n        // Replace the domain verifyingContract if needed\n        if (domain.verifyingContract && ensCache[domain.verifyingContract]) {\n            domain.verifyingContract = ensCache[domain.verifyingContract];\n        }\n        // Replace all ENS names with their address\n        value = encoder.visit(value, (type, value) => {\n            if (type === \"address\" && ensCache[value]) {\n                return ensCache[value];\n            }\n            return value;\n        });\n        return { domain, value };\n    }\n    /**\n     *  Returns the JSON-encoded payload expected by nodes which implement\n     *  the JSON-RPC [[link-eip-712]] method.\n     */\n    static getPayload(domain, types, value) {\n        // Validate the domain fields\n        TypedDataEncoder.hashDomain(domain);\n        // Derive the EIP712Domain Struct reference type\n        const domainValues = {};\n        const domainTypes = [];\n        domainFieldNames.forEach((name) => {\n            const value = domain[name];\n            if (value == null) {\n                return;\n            }\n            domainValues[name] = domainChecks[name](value);\n            domainTypes.push({ name, type: domainFieldTypes[name] });\n        });\n        const encoder = TypedDataEncoder.from(types);\n        // Get the normalized types\n        types = encoder.types;\n        const typesWithDomain = Object.assign({}, types);\n        assertArgument(typesWithDomain.EIP712Domain == null, \"types must not contain EIP712Domain type\", \"types.EIP712Domain\", types);\n        typesWithDomain.EIP712Domain = domainTypes;\n        // Validate the data structures and types\n        encoder.encode(value);\n        return {\n            types: typesWithDomain,\n            domain: domainValues,\n            primaryType: encoder.primaryType,\n            message: encoder.visit(value, (type, value) => {\n                // bytes\n                if (type.match(/^bytes(\\d*)/)) {\n                    return hexlify(getBytes(value));\n                }\n                // uint or int\n                if (type.match(/^u?int/)) {\n                    return getBigInt(value).toString();\n                }\n                switch (type) {\n                    case \"address\":\n                        return value.toLowerCase();\n                    case \"bool\":\n                        return !!value;\n                    case \"string\":\n                        assertArgument(typeof (value) === \"string\", \"invalid string\", \"value\", value);\n                        return value;\n                }\n                assertArgument(false, \"unsupported type\", \"type\", type);\n            })\n        };\n    }\n}\n/**\n *  Compute the address used to sign the typed data for the %%signature%%.\n */\nexport function verifyTypedData(domain, types, value, signature) {\n    return recoverAddress(TypedDataEncoder.hash(domain, types, value), signature);\n}\n//# sourceMappingURL=typed-data.js.map","//import { resolveAddress } from \"@ethersproject/address\";\nimport { defineProperties, getBigInt, getNumber, hexlify, isBytesLike, resolveProperties, assert, assertArgument, isError, makeError } from \"../utils/index.js\";\nimport { accessListify } from \"../transaction/index.js\";\nconst BN_0 = BigInt(0);\n// -----------------------\nfunction getValue(value) {\n    if (value == null) {\n        return null;\n    }\n    return value;\n}\nfunction toJson(value) {\n    if (value == null) {\n        return null;\n    }\n    return value.toString();\n}\n// @TODO? <T extends FeeData = { }> implements Required<T>\n/**\n *  A **FeeData** wraps all the fee-related values associated with\n *  the network.\n */\nexport class FeeData {\n    /**\n     *  The gas price for legacy networks.\n     */\n    gasPrice;\n    /**\n     *  The maximum fee to pay per gas.\n     *\n     *  The base fee per gas is defined by the network and based on\n     *  congestion, increasing the cost during times of heavy load\n     *  and lowering when less busy.\n     *\n     *  The actual fee per gas will be the base fee for the block\n     *  and the priority fee, up to the max fee per gas.\n     *\n     *  This will be ``null`` on legacy networks (i.e. [pre-EIP-1559](link-eip-1559))\n     */\n    maxFeePerGas;\n    /**\n     *  The additional amout to pay per gas to encourage a validator\n     *  to include the transaction.\n     *\n     *  The purpose of this is to compensate the validator for the\n     *  adjusted risk for including a given transaction.\n     *\n     *  This will be ``null`` on legacy networks (i.e. [pre-EIP-1559](link-eip-1559))\n     */\n    maxPriorityFeePerGas;\n    /**\n     *  Creates a new FeeData for %%gasPrice%%, %%maxFeePerGas%% and\n     *  %%maxPriorityFeePerGas%%.\n     */\n    constructor(gasPrice, maxFeePerGas, maxPriorityFeePerGas) {\n        defineProperties(this, {\n            gasPrice: getValue(gasPrice),\n            maxFeePerGas: getValue(maxFeePerGas),\n            maxPriorityFeePerGas: getValue(maxPriorityFeePerGas)\n        });\n    }\n    /**\n     *  Returns a JSON-friendly value.\n     */\n    toJSON() {\n        const { gasPrice, maxFeePerGas, maxPriorityFeePerGas } = this;\n        return {\n            _type: \"FeeData\",\n            gasPrice: toJson(gasPrice),\n            maxFeePerGas: toJson(maxFeePerGas),\n            maxPriorityFeePerGas: toJson(maxPriorityFeePerGas),\n        };\n    }\n}\n;\n/**\n *  Returns a copy of %%req%% with all properties coerced to their strict\n *  types.\n */\nexport function copyRequest(req) {\n    const result = {};\n    // These could be addresses, ENS names or Addressables\n    if (req.to) {\n        result.to = req.to;\n    }\n    if (req.from) {\n        result.from = req.from;\n    }\n    if (req.data) {\n        result.data = hexlify(req.data);\n    }\n    const bigIntKeys = \"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value\".split(/,/);\n    for (const key of bigIntKeys) {\n        if (!(key in req) || req[key] == null) {\n            continue;\n        }\n        result[key] = getBigInt(req[key], `request.${key}`);\n    }\n    const numberKeys = \"type,nonce\".split(/,/);\n    for (const key of numberKeys) {\n        if (!(key in req) || req[key] == null) {\n            continue;\n        }\n        result[key] = getNumber(req[key], `request.${key}`);\n    }\n    if (req.accessList) {\n        result.accessList = accessListify(req.accessList);\n    }\n    if (req.authorizationList) {\n        result.authorizationList = req.authorizationList.slice();\n    }\n    if (\"blockTag\" in req) {\n        result.blockTag = req.blockTag;\n    }\n    if (\"enableCcipRead\" in req) {\n        result.enableCcipRead = !!req.enableCcipRead;\n    }\n    if (\"customData\" in req) {\n        result.customData = req.customData;\n    }\n    if (\"blobVersionedHashes\" in req && req.blobVersionedHashes) {\n        result.blobVersionedHashes = req.blobVersionedHashes.slice();\n    }\n    if (\"kzg\" in req) {\n        result.kzg = req.kzg;\n    }\n    if (\"blobWrapperVersion\" in req) {\n        result.blobWrapperVersion = req.blobWrapperVersion;\n    }\n    if (\"blobs\" in req && req.blobs) {\n        result.blobs = req.blobs.map((b) => {\n            if (isBytesLike(b)) {\n                return hexlify(b);\n            }\n            return Object.assign({}, b);\n        });\n    }\n    return result;\n}\n/**\n *  A **Block** represents the data associated with a full block on\n *  Ethereum.\n */\nexport class Block {\n    /**\n     *  The provider connected to the block used to fetch additional details\n     *  if necessary.\n     */\n    provider;\n    /**\n     *  The block number, sometimes called the block height. This is a\n     *  sequential number that is one higher than the parent block.\n     */\n    number;\n    /**\n     *  The block hash.\n     *\n     *  This hash includes all properties, so can be safely used to identify\n     *  an exact set of block properties.\n     */\n    hash;\n    /**\n     *  The timestamp for this block, which is the number of seconds since\n     *  epoch that this block was included.\n     */\n    timestamp;\n    /**\n     *  The block hash of the parent block.\n     */\n    parentHash;\n    /**\n     *  The hash tree root of the parent beacon block for the given\n     *  execution block. See [[link-eip-4788]].\n     */\n    parentBeaconBlockRoot;\n    /**\n     *  The nonce.\n     *\n     *  On legacy networks, this is the random number inserted which\n     *  permitted the difficulty target to be reached.\n     */\n    nonce;\n    /**\n     *  The difficulty target.\n     *\n     *  On legacy networks, this is the proof-of-work target required\n     *  for a block to meet the protocol rules to be included.\n     *\n     *  On modern networks, this is a random number arrived at using\n     *  randao.  @TODO: Find links?\n     */\n    difficulty;\n    /**\n     *  The total gas limit for this block.\n     */\n    gasLimit;\n    /**\n     *  The total gas used in this block.\n     */\n    gasUsed;\n    /**\n     *  The root hash for the global state after applying changes\n     *  in this block.\n     */\n    stateRoot;\n    /**\n     *  The hash of the transaction receipts trie.\n     */\n    receiptsRoot;\n    /**\n     *  The total amount of blob gas consumed by the transactions\n     *  within the block. See [[link-eip-4844]].\n     */\n    blobGasUsed;\n    /**\n     *  The running total of blob gas consumed in excess of the\n     *  target, prior to the block. See [[link-eip-4844]].\n     */\n    excessBlobGas;\n    /**\n     *  The miner coinbase address, wihch receives any subsidies for\n     *  including this block.\n     */\n    miner;\n    /**\n     *  The latest RANDAO mix of the post beacon state of\n     *  the previous block.\n     */\n    prevRandao;\n    /**\n     *  Any extra data the validator wished to include.\n     */\n    extraData;\n    /**\n     *  The base fee per gas that all transactions in this block were\n     *  charged.\n     *\n     *  This adjusts after each block, depending on how congested the network\n     *  is.\n     */\n    baseFeePerGas;\n    #transactions;\n    /**\n     *  Create a new **Block** object.\n     *\n     *  This should generally not be necessary as the unless implementing a\n     *  low-level library.\n     */\n    constructor(block, provider) {\n        this.#transactions = block.transactions.map((tx) => {\n            if (typeof (tx) !== \"string\") {\n                return new TransactionResponse(tx, provider);\n            }\n            return tx;\n        });\n        defineProperties(this, {\n            provider,\n            hash: getValue(block.hash),\n            number: block.number,\n            timestamp: block.timestamp,\n            parentHash: block.parentHash,\n            parentBeaconBlockRoot: block.parentBeaconBlockRoot,\n            nonce: block.nonce,\n            difficulty: block.difficulty,\n            gasLimit: block.gasLimit,\n            gasUsed: block.gasUsed,\n            blobGasUsed: block.blobGasUsed,\n            excessBlobGas: block.excessBlobGas,\n            miner: block.miner,\n            prevRandao: getValue(block.prevRandao),\n            extraData: block.extraData,\n            baseFeePerGas: getValue(block.baseFeePerGas),\n            stateRoot: block.stateRoot,\n            receiptsRoot: block.receiptsRoot,\n        });\n    }\n    /**\n     *  Returns the list of transaction hashes, in the order\n     *  they were executed within the block.\n     */\n    get transactions() {\n        return this.#transactions.map((tx) => {\n            if (typeof (tx) === \"string\") {\n                return tx;\n            }\n            return tx.hash;\n        });\n    }\n    /**\n     *  Returns the complete transactions, in the order they\n     *  were executed within the block.\n     *\n     *  This is only available for blocks which prefetched\n     *  transactions, by passing ``true`` to %%prefetchTxs%%\n     *  into [[Provider-getBlock]].\n     */\n    get prefetchedTransactions() {\n        const txs = this.#transactions.slice();\n        // Doesn't matter...\n        if (txs.length === 0) {\n            return [];\n        }\n        // Make sure we prefetched the transactions\n        assert(typeof (txs[0]) === \"object\", \"transactions were not prefetched with block request\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"transactionResponses()\"\n        });\n        return txs;\n    }\n    /**\n     *  Returns a JSON-friendly value.\n     */\n    toJSON() {\n        const { baseFeePerGas, difficulty, extraData, gasLimit, gasUsed, hash, miner, prevRandao, nonce, number, parentHash, parentBeaconBlockRoot, stateRoot, receiptsRoot, timestamp, transactions } = this;\n        return {\n            _type: \"Block\",\n            baseFeePerGas: toJson(baseFeePerGas),\n            difficulty: toJson(difficulty),\n            extraData,\n            gasLimit: toJson(gasLimit),\n            gasUsed: toJson(gasUsed),\n            blobGasUsed: toJson(this.blobGasUsed),\n            excessBlobGas: toJson(this.excessBlobGas),\n            hash, miner, prevRandao, nonce, number, parentHash, timestamp,\n            parentBeaconBlockRoot, stateRoot, receiptsRoot,\n            transactions,\n        };\n    }\n    [Symbol.iterator]() {\n        let index = 0;\n        const txs = this.transactions;\n        return {\n            next: () => {\n                if (index < this.length) {\n                    return {\n                        value: txs[index++], done: false\n                    };\n                }\n                return { value: undefined, done: true };\n            }\n        };\n    }\n    /**\n     *  The number of transactions in this block.\n     */\n    get length() { return this.#transactions.length; }\n    /**\n     *  The [[link-js-date]] this block was included at.\n     */\n    get date() {\n        if (this.timestamp == null) {\n            return null;\n        }\n        return new Date(this.timestamp * 1000);\n    }\n    /**\n     *  Get the transaction at %%indexe%% within this block.\n     */\n    async getTransaction(indexOrHash) {\n        // Find the internal value by its index or hash\n        let tx = undefined;\n        if (typeof (indexOrHash) === \"number\") {\n            tx = this.#transactions[indexOrHash];\n        }\n        else {\n            const hash = indexOrHash.toLowerCase();\n            for (const v of this.#transactions) {\n                if (typeof (v) === \"string\") {\n                    if (v !== hash) {\n                        continue;\n                    }\n                    tx = v;\n                    break;\n                }\n                else {\n                    if (v.hash !== hash) {\n                        continue;\n                    }\n                    tx = v;\n                    break;\n                }\n            }\n        }\n        if (tx == null) {\n            throw new Error(\"no such tx\");\n        }\n        if (typeof (tx) === \"string\") {\n            return (await this.provider.getTransaction(tx));\n        }\n        else {\n            return tx;\n        }\n    }\n    /**\n     *  If a **Block** was fetched with a request to include the transactions\n     *  this will allow synchronous access to those transactions.\n     *\n     *  If the transactions were not prefetched, this will throw.\n     */\n    getPrefetchedTransaction(indexOrHash) {\n        const txs = this.prefetchedTransactions;\n        if (typeof (indexOrHash) === \"number\") {\n            return txs[indexOrHash];\n        }\n        indexOrHash = indexOrHash.toLowerCase();\n        for (const tx of txs) {\n            if (tx.hash === indexOrHash) {\n                return tx;\n            }\n        }\n        assertArgument(false, \"no matching transaction\", \"indexOrHash\", indexOrHash);\n    }\n    /**\n     *  Returns true if this block been mined. This provides a type guard\n     *  for all properties on a [[MinedBlock]].\n     */\n    isMined() { return !!this.hash; }\n    /**\n     *  Returns true if this block is an [[link-eip-2930]] block.\n     */\n    isLondon() {\n        return !!this.baseFeePerGas;\n    }\n    /**\n     *  @_ignore:\n     */\n    orphanedEvent() {\n        if (!this.isMined()) {\n            throw new Error(\"\");\n        }\n        return createOrphanedBlockFilter(this);\n    }\n}\n//////////////////////\n// Log\n/**\n *  A **Log** in Ethereum represents an event that has been included in a\n *  transaction using the ``LOG*`` opcodes, which are most commonly used by\n *  Solidity's emit for announcing events.\n */\nexport class Log {\n    /**\n     *  The provider connected to the log used to fetch additional details\n     *  if necessary.\n     */\n    provider;\n    /**\n     *  The transaction hash of the transaction this log occurred in. Use the\n     *  [[Log-getTransaction]] to get the [[TransactionResponse]].\n     */\n    transactionHash;\n    /**\n     *  The block hash of the block this log occurred in. Use the\n     *  [[Log-getBlock]] to get the [[Block]].\n     */\n    blockHash;\n    /**\n     *  The block number of the block this log occurred in. It is preferred\n     *  to use the [[Block-hash]] when fetching the related [[Block]],\n     *  since in the case of an orphaned block, the block at that height may\n     *  have changed.\n     */\n    blockNumber;\n    /**\n     *  If the **Log** represents a block that was removed due to an orphaned\n     *  block, this will be true.\n     *\n     *  This can only happen within an orphan event listener.\n     */\n    removed;\n    /**\n     *  The address of the contract that emitted this log.\n     */\n    address;\n    /**\n     *  The data included in this log when it was emitted.\n     */\n    data;\n    /**\n     *  The indexed topics included in this log when it was emitted.\n     *\n     *  All topics are included in the bloom filters, so they can be\n     *  efficiently filtered using the [[Provider-getLogs]] method.\n     */\n    topics;\n    /**\n     *  The index within the block this log occurred at. This is generally\n     *  not useful to developers, but can be used with the various roots\n     *  to proof inclusion within a block.\n     */\n    index;\n    /**\n     *  The index within the transaction of this log.\n     */\n    transactionIndex;\n    /**\n     *  @_ignore:\n     */\n    constructor(log, provider) {\n        this.provider = provider;\n        const topics = Object.freeze(log.topics.slice());\n        defineProperties(this, {\n            transactionHash: log.transactionHash,\n            blockHash: log.blockHash,\n            blockNumber: log.blockNumber,\n            removed: log.removed,\n            address: log.address,\n            data: log.data,\n            topics,\n            index: log.index,\n            transactionIndex: log.transactionIndex,\n        });\n    }\n    /**\n     *  Returns a JSON-compatible object.\n     */\n    toJSON() {\n        const { address, blockHash, blockNumber, data, index, removed, topics, transactionHash, transactionIndex } = this;\n        return {\n            _type: \"log\",\n            address, blockHash, blockNumber, data, index,\n            removed, topics, transactionHash, transactionIndex\n        };\n    }\n    /**\n     *  Returns the block that this log occurred in.\n     */\n    async getBlock() {\n        const block = await this.provider.getBlock(this.blockHash);\n        assert(!!block, \"failed to find transaction\", \"UNKNOWN_ERROR\", {});\n        return block;\n    }\n    /**\n     *  Returns the transaction that this log occurred in.\n     */\n    async getTransaction() {\n        const tx = await this.provider.getTransaction(this.transactionHash);\n        assert(!!tx, \"failed to find transaction\", \"UNKNOWN_ERROR\", {});\n        return tx;\n    }\n    /**\n     *  Returns the transaction receipt fot the transaction that this\n     *  log occurred in.\n     */\n    async getTransactionReceipt() {\n        const receipt = await this.provider.getTransactionReceipt(this.transactionHash);\n        assert(!!receipt, \"failed to find transaction receipt\", \"UNKNOWN_ERROR\", {});\n        return receipt;\n    }\n    /**\n     *  @_ignore:\n     */\n    removedEvent() {\n        return createRemovedLogFilter(this);\n    }\n}\n//////////////////////\n// Transaction Receipt\n/*\nexport interface LegacyTransactionReceipt {\n    byzantium: false;\n    status: null;\n    root: string;\n}\n\nexport interface ByzantiumTransactionReceipt {\n    byzantium: true;\n    status: number;\n    root: null;\n}\n*/\n/**\n *  A **TransactionReceipt** includes additional information about a\n *  transaction that is only available after it has been mined.\n */\nexport class TransactionReceipt {\n    /**\n     *  The provider connected to the log used to fetch additional details\n     *  if necessary.\n     */\n    provider;\n    /**\n     *  The address the transaction was sent to.\n     */\n    to;\n    /**\n     *  The sender of the transaction.\n     */\n    from;\n    /**\n     *  The address of the contract if the transaction was directly\n     *  responsible for deploying one.\n     *\n     *  This is non-null **only** if the ``to`` is empty and the ``data``\n     *  was successfully executed as initcode.\n     */\n    contractAddress;\n    /**\n     *  The transaction hash.\n     */\n    hash;\n    /**\n     *  The index of this transaction within the block transactions.\n     */\n    index;\n    /**\n     *  The block hash of the [[Block]] this transaction was included in.\n     */\n    blockHash;\n    /**\n     *  The block number of the [[Block]] this transaction was included in.\n     */\n    blockNumber;\n    /**\n     *  The bloom filter bytes that represent all logs that occurred within\n     *  this transaction. This is generally not useful for most developers,\n     *  but can be used to validate the included logs.\n     */\n    logsBloom;\n    /**\n     *  The actual amount of gas used by this transaction.\n     *\n     *  When creating a transaction, the amount of gas that will be used can\n     *  only be approximated, but the sender must pay the gas fee for the\n     *  entire gas limit. After the transaction, the difference is refunded.\n     */\n    gasUsed;\n    /**\n     *  The gas used for BLObs. See [[link-eip-4844]].\n     */\n    blobGasUsed;\n    /**\n     *  The amount of gas used by all transactions within the block for this\n     *  and all transactions with a lower ``index``.\n     *\n     *  This is generally not useful for developers but can be used to\n     *  validate certain aspects of execution.\n     */\n    cumulativeGasUsed;\n    /**\n     *  The actual gas price used during execution.\n     *\n     *  Due to the complexity of [[link-eip-1559]] this value can only\n     *  be caluclated after the transaction has been mined, snce the base\n     *  fee is protocol-enforced.\n     */\n    gasPrice;\n    /**\n     *  The price paid per BLOB in gas. See [[link-eip-4844]].\n     */\n    blobGasPrice;\n    /**\n     *  The [[link-eip-2718]] transaction type.\n     */\n    type;\n    //readonly byzantium!: boolean;\n    /**\n     *  The status of this transaction, indicating success (i.e. ``1``) or\n     *  a revert (i.e. ``0``).\n     *\n     *  This is available in post-byzantium blocks, but some backends may\n     *  backfill this value.\n     */\n    status;\n    /**\n     *  The root hash of this transaction.\n     *\n     *  This is no present and was only included in pre-byzantium blocks, but\n     *  could be used to validate certain parts of the receipt.\n     */\n    root;\n    #logs;\n    /**\n     *  @_ignore:\n     */\n    constructor(tx, provider) {\n        this.#logs = Object.freeze(tx.logs.map((log) => {\n            return new Log(log, provider);\n        }));\n        let gasPrice = BN_0;\n        if (tx.effectiveGasPrice != null) {\n            gasPrice = tx.effectiveGasPrice;\n        }\n        else if (tx.gasPrice != null) {\n            gasPrice = tx.gasPrice;\n        }\n        defineProperties(this, {\n            provider,\n            to: tx.to,\n            from: tx.from,\n            contractAddress: tx.contractAddress,\n            hash: tx.hash,\n            index: tx.index,\n            blockHash: tx.blockHash,\n            blockNumber: tx.blockNumber,\n            logsBloom: tx.logsBloom,\n            gasUsed: tx.gasUsed,\n            cumulativeGasUsed: tx.cumulativeGasUsed,\n            blobGasUsed: tx.blobGasUsed,\n            gasPrice,\n            blobGasPrice: tx.blobGasPrice,\n            type: tx.type,\n            //byzantium: tx.byzantium,\n            status: tx.status,\n            root: tx.root\n        });\n    }\n    /**\n     *  The logs for this transaction.\n     */\n    get logs() { return this.#logs; }\n    /**\n     *  Returns a JSON-compatible representation.\n     */\n    toJSON() {\n        const { to, from, contractAddress, hash, index, blockHash, blockNumber, logsBloom, logs, //byzantium, \n        status, root } = this;\n        return {\n            _type: \"TransactionReceipt\",\n            blockHash, blockNumber,\n            //byzantium, \n            contractAddress,\n            cumulativeGasUsed: toJson(this.cumulativeGasUsed),\n            from,\n            gasPrice: toJson(this.gasPrice),\n            blobGasUsed: toJson(this.blobGasUsed),\n            blobGasPrice: toJson(this.blobGasPrice),\n            gasUsed: toJson(this.gasUsed),\n            hash, index, logs, logsBloom, root, status, to\n        };\n    }\n    /**\n     *  @_ignore:\n     */\n    get length() { return this.logs.length; }\n    [Symbol.iterator]() {\n        let index = 0;\n        return {\n            next: () => {\n                if (index < this.length) {\n                    return { value: this.logs[index++], done: false };\n                }\n                return { value: undefined, done: true };\n            }\n        };\n    }\n    /**\n     *  The total fee for this transaction, in wei.\n     */\n    get fee() {\n        return this.gasUsed * this.gasPrice;\n    }\n    /**\n     *  Resolves to the block this transaction occurred in.\n     */\n    async getBlock() {\n        const block = await this.provider.getBlock(this.blockHash);\n        if (block == null) {\n            throw new Error(\"TODO\");\n        }\n        return block;\n    }\n    /**\n     *  Resolves to the transaction this transaction occurred in.\n     */\n    async getTransaction() {\n        const tx = await this.provider.getTransaction(this.hash);\n        if (tx == null) {\n            throw new Error(\"TODO\");\n        }\n        return tx;\n    }\n    /**\n     *  Resolves to the return value of the execution of this transaction.\n     *\n     *  Support for this feature is limited, as it requires an archive node\n     *  with the ``debug_`` or ``trace_`` API enabled.\n     */\n    async getResult() {\n        return (await this.provider.getTransactionResult(this.hash));\n    }\n    /**\n     *  Resolves to the number of confirmations this transaction has.\n     */\n    async confirmations() {\n        return (await this.provider.getBlockNumber()) - this.blockNumber + 1;\n    }\n    /**\n     *  @_ignore:\n     */\n    removedEvent() {\n        return createRemovedTransactionFilter(this);\n    }\n    /**\n     *  @_ignore:\n     */\n    reorderedEvent(other) {\n        assert(!other || other.isMined(), \"unmined 'other' transction cannot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"reorderedEvent(other)\" });\n        return createReorderedTransactionFilter(this, other);\n    }\n}\n/**\n *  A **TransactionResponse** includes all properties about a transaction\n *  that was sent to the network, which may or may not be included in a\n *  block.\n *\n *  The [[TransactionResponse-isMined]] can be used to check if the\n *  transaction has been mined as well as type guard that the otherwise\n *  possibly ``null`` properties are defined.\n */\nexport class TransactionResponse {\n    /**\n     *  The provider this is connected to, which will influence how its\n     *  methods will resolve its async inspection methods.\n     */\n    provider;\n    /**\n     *  The block number of the block that this transaction was included in.\n     *\n     *  This is ``null`` for pending transactions.\n     */\n    blockNumber;\n    /**\n     *  The blockHash of the block that this transaction was included in.\n     *\n     *  This is ``null`` for pending transactions.\n     */\n    blockHash;\n    /**\n     *  The index within the block that this transaction resides at.\n     */\n    index;\n    /**\n     *  The transaction hash.\n     */\n    hash;\n    /**\n     *  The [[link-eip-2718]] transaction envelope type. This is\n     *  ``0`` for legacy transactions types.\n     */\n    type;\n    /**\n     *  The receiver of this transaction.\n     *\n     *  If ``null``, then the transaction is an initcode transaction.\n     *  This means the result of executing the [[data]] will be deployed\n     *  as a new contract on chain (assuming it does not revert) and the\n     *  address may be computed using [[getCreateAddress]].\n     */\n    to;\n    /**\n     *  The sender of this transaction. It is implicitly computed\n     *  from the transaction pre-image hash (as the digest) and the\n     *  [[signature]] using ecrecover.\n     */\n    from;\n    /**\n     *  The nonce, which is used to prevent replay attacks and offer\n     *  a method to ensure transactions from a given sender are explicitly\n     *  ordered.\n     *\n     *  When sending a transaction, this must be equal to the number of\n     *  transactions ever sent by [[from]].\n     */\n    nonce;\n    /**\n     *  The maximum units of gas this transaction can consume. If execution\n     *  exceeds this, the entries transaction is reverted and the sender\n     *  is charged for the full amount, despite not state changes being made.\n     */\n    gasLimit;\n    /**\n     *  The gas price can have various values, depending on the network.\n     *\n     *  In modern networks, for transactions that are included this is\n     *  the //effective gas price// (the fee per gas that was actually\n     *  charged), while for transactions that have not been included yet\n     *  is the [[maxFeePerGas]].\n     *\n     *  For legacy transactions, or transactions on legacy networks, this\n     *  is the fee that will be charged per unit of gas the transaction\n     *  consumes.\n     */\n    gasPrice;\n    /**\n     *  The maximum priority fee (per unit of gas) to allow a\n     *  validator to charge the sender. This is inclusive of the\n     *  [[maxFeeFeePerGas]].\n     */\n    maxPriorityFeePerGas;\n    /**\n     *  The maximum fee (per unit of gas) to allow this transaction\n     *  to charge the sender.\n     */\n    maxFeePerGas;\n    /**\n     *  The [[link-eip-4844]] max fee per BLOb gas.\n     */\n    maxFeePerBlobGas;\n    /**\n     *  The data.\n     */\n    data;\n    /**\n     *  The value, in wei. Use [[formatEther]] to format this value\n     *  as ether.\n     */\n    value;\n    /**\n     *  The chain ID.\n     */\n    chainId;\n    /**\n     *  The signature.\n     */\n    signature;\n    /**\n     *  The [[link-eip-2930]] access list for transaction types that\n     *  support it, otherwise ``null``.\n     */\n    accessList;\n    /**\n     *  The [[link-eip-4844]] BLOb versioned hashes.\n     */\n    blobVersionedHashes;\n    /**\n     *  The [[link-eip-7702]] authorizations (if any).\n     */\n    authorizationList;\n    #startBlock;\n    /**\n     *  @_ignore:\n     */\n    constructor(tx, provider) {\n        this.provider = provider;\n        this.blockNumber = (tx.blockNumber != null) ? tx.blockNumber : null;\n        this.blockHash = (tx.blockHash != null) ? tx.blockHash : null;\n        this.hash = tx.hash;\n        this.index = tx.index;\n        this.type = tx.type;\n        this.from = tx.from;\n        this.to = tx.to || null;\n        this.gasLimit = tx.gasLimit;\n        this.nonce = tx.nonce;\n        this.data = tx.data;\n        this.value = tx.value;\n        this.gasPrice = tx.gasPrice;\n        this.maxPriorityFeePerGas = (tx.maxPriorityFeePerGas != null) ? tx.maxPriorityFeePerGas : null;\n        this.maxFeePerGas = (tx.maxFeePerGas != null) ? tx.maxFeePerGas : null;\n        this.maxFeePerBlobGas = (tx.maxFeePerBlobGas != null) ? tx.maxFeePerBlobGas : null;\n        this.chainId = tx.chainId;\n        this.signature = tx.signature;\n        this.accessList = (tx.accessList != null) ? tx.accessList : null;\n        this.blobVersionedHashes = (tx.blobVersionedHashes != null) ? tx.blobVersionedHashes : null;\n        this.authorizationList = (tx.authorizationList != null) ? tx.authorizationList : null;\n        this.#startBlock = -1;\n    }\n    /**\n     *  Returns a JSON-compatible representation of this transaction.\n     */\n    toJSON() {\n        const { blockNumber, blockHash, index, hash, type, to, from, nonce, data, signature, accessList, blobVersionedHashes } = this;\n        return {\n            _type: \"TransactionResponse\",\n            accessList, blockNumber, blockHash,\n            blobVersionedHashes,\n            chainId: toJson(this.chainId),\n            data, from,\n            gasLimit: toJson(this.gasLimit),\n            gasPrice: toJson(this.gasPrice),\n            hash,\n            maxFeePerGas: toJson(this.maxFeePerGas),\n            maxPriorityFeePerGas: toJson(this.maxPriorityFeePerGas),\n            maxFeePerBlobGas: toJson(this.maxFeePerBlobGas),\n            nonce, signature, to, index, type,\n            value: toJson(this.value),\n        };\n    }\n    /**\n     *  Resolves to the Block that this transaction was included in.\n     *\n     *  This will return null if the transaction has not been included yet.\n     */\n    async getBlock() {\n        let blockNumber = this.blockNumber;\n        if (blockNumber == null) {\n            const tx = await this.getTransaction();\n            if (tx) {\n                blockNumber = tx.blockNumber;\n            }\n        }\n        if (blockNumber == null) {\n            return null;\n        }\n        const block = this.provider.getBlock(blockNumber);\n        if (block == null) {\n            throw new Error(\"TODO\");\n        }\n        return block;\n    }\n    /**\n     *  Resolves to this transaction being re-requested from the\n     *  provider. This can be used if you have an unmined transaction\n     *  and wish to get an up-to-date populated instance.\n     */\n    async getTransaction() {\n        return this.provider.getTransaction(this.hash);\n    }\n    /**\n     *  Resolve to the number of confirmations this transaction has.\n     */\n    async confirmations() {\n        if (this.blockNumber == null) {\n            const { tx, blockNumber } = await resolveProperties({\n                tx: this.getTransaction(),\n                blockNumber: this.provider.getBlockNumber()\n            });\n            // Not mined yet...\n            if (tx == null || tx.blockNumber == null) {\n                return 0;\n            }\n            return blockNumber - tx.blockNumber + 1;\n        }\n        const blockNumber = await this.provider.getBlockNumber();\n        return blockNumber - this.blockNumber + 1;\n    }\n    /**\n     *  Resolves once this transaction has been mined and has\n     *  %%confirms%% blocks including it (default: ``1``) with an\n     *  optional %%timeout%%.\n     *\n     *  This can resolve to ``null`` only if %%confirms%% is ``0``\n     *  and the transaction has not been mined, otherwise this will\n     *  wait until enough confirmations have completed.\n     */\n    async wait(_confirms, _timeout) {\n        const confirms = (_confirms == null) ? 1 : _confirms;\n        const timeout = (_timeout == null) ? 0 : _timeout;\n        let startBlock = this.#startBlock;\n        let nextScan = -1;\n        let stopScanning = (startBlock === -1) ? true : false;\n        const checkReplacement = async () => {\n            // Get the current transaction count for this sender\n            if (stopScanning) {\n                return null;\n            }\n            const { blockNumber, nonce } = await resolveProperties({\n                blockNumber: this.provider.getBlockNumber(),\n                nonce: this.provider.getTransactionCount(this.from)\n            });\n            // No transaction or our nonce has not been mined yet; but we\n            // can start scanning later when we do start\n            if (nonce < this.nonce) {\n                startBlock = blockNumber;\n                return;\n            }\n            // We were mined; no replacement\n            if (stopScanning) {\n                return null;\n            }\n            const mined = await this.getTransaction();\n            if (mined && mined.blockNumber != null) {\n                return;\n            }\n            // We were replaced; start scanning for that transaction\n            // Starting to scan; look back a few extra blocks for safety\n            if (nextScan === -1) {\n                nextScan = startBlock - 3;\n                if (nextScan < this.#startBlock) {\n                    nextScan = this.#startBlock;\n                }\n            }\n            while (nextScan <= blockNumber) {\n                // Get the next block to scan\n                if (stopScanning) {\n                    return null;\n                }\n                const block = await this.provider.getBlock(nextScan, true);\n                // This should not happen; but we'll try again shortly\n                if (block == null) {\n                    return;\n                }\n                // We were mined; no replacement\n                for (const hash of block) {\n                    if (hash === this.hash) {\n                        return;\n                    }\n                }\n                // Search for the transaction that replaced us\n                for (let i = 0; i < block.length; i++) {\n                    const tx = await block.getTransaction(i);\n                    if (tx.from === this.from && tx.nonce === this.nonce) {\n                        // Get the receipt\n                        if (stopScanning) {\n                            return null;\n                        }\n                        const receipt = await this.provider.getTransactionReceipt(tx.hash);\n                        // This should not happen; but we'll try again shortly\n                        if (receipt == null) {\n                            return;\n                        }\n                        // We will retry this on the next block (this case could be optimized)\n                        if ((blockNumber - receipt.blockNumber + 1) < confirms) {\n                            return;\n                        }\n                        // The reason we were replaced\n                        let reason = \"replaced\";\n                        if (tx.data === this.data && tx.to === this.to && tx.value === this.value) {\n                            reason = \"repriced\";\n                        }\n                        else if (tx.data === \"0x\" && tx.from === tx.to && tx.value === BN_0) {\n                            reason = \"cancelled\";\n                        }\n                        assert(false, \"transaction was replaced\", \"TRANSACTION_REPLACED\", {\n                            cancelled: (reason === \"replaced\" || reason === \"cancelled\"),\n                            reason,\n                            replacement: tx.replaceableTransaction(startBlock),\n                            hash: tx.hash,\n                            receipt\n                        });\n                    }\n                }\n                nextScan++;\n            }\n            return;\n        };\n        const checkReceipt = (receipt) => {\n            if (receipt == null || receipt.status !== 0) {\n                return receipt;\n            }\n            assert(false, \"transaction execution reverted\", \"CALL_EXCEPTION\", {\n                action: \"sendTransaction\",\n                data: null, reason: null, invocation: null, revert: null,\n                transaction: {\n                    to: receipt.to,\n                    from: receipt.from,\n                    data: \"\" // @TODO: in v7, split out sendTransaction properties\n                }, receipt\n            });\n        };\n        const receipt = await this.provider.getTransactionReceipt(this.hash);\n        if (confirms === 0) {\n            return checkReceipt(receipt);\n        }\n        if (receipt) {\n            if (confirms === 1 || (await receipt.confirmations()) >= confirms) {\n                return checkReceipt(receipt);\n            }\n        }\n        else {\n            // Check for a replacement; throws if a replacement was found\n            await checkReplacement();\n            // Allow null only when the confirms is 0\n            if (confirms === 0) {\n                return null;\n            }\n        }\n        const waiter = new Promise((resolve, reject) => {\n            // List of things to cancel when we have a result (one way or the other)\n            const cancellers = [];\n            const cancel = () => { cancellers.forEach((c) => c()); };\n            // On cancel, stop scanning for replacements\n            cancellers.push(() => { stopScanning = true; });\n            // Set up any timeout requested\n            if (timeout > 0) {\n                const timer = setTimeout(() => {\n                    cancel();\n                    reject(makeError(\"wait for transaction timeout\", \"TIMEOUT\"));\n                }, timeout);\n                cancellers.push(() => { clearTimeout(timer); });\n            }\n            const txListener = async (receipt) => {\n                // Done; return it!\n                if ((await receipt.confirmations()) >= confirms) {\n                    cancel();\n                    try {\n                        resolve(checkReceipt(receipt));\n                    }\n                    catch (error) {\n                        reject(error);\n                    }\n                }\n            };\n            cancellers.push(() => { this.provider.off(this.hash, txListener); });\n            this.provider.on(this.hash, txListener);\n            // We support replacement detection; start checking\n            if (startBlock >= 0) {\n                const replaceListener = async () => {\n                    try {\n                        // Check for a replacement; this throws only if one is found\n                        await checkReplacement();\n                    }\n                    catch (error) {\n                        // We were replaced (with enough confirms); re-throw the error\n                        if (isError(error, \"TRANSACTION_REPLACED\")) {\n                            cancel();\n                            reject(error);\n                            return;\n                        }\n                    }\n                    // Rescheudle a check on the next block\n                    if (!stopScanning) {\n                        this.provider.once(\"block\", replaceListener);\n                    }\n                };\n                cancellers.push(() => { this.provider.off(\"block\", replaceListener); });\n                this.provider.once(\"block\", replaceListener);\n            }\n        });\n        return await waiter;\n    }\n    /**\n     *  Returns ``true`` if this transaction has been included.\n     *\n     *  This is effective only as of the time the TransactionResponse\n     *  was instantiated. To get up-to-date information, use\n     *  [[getTransaction]].\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  non-null property values for properties that are null for\n     *  unmined transactions.\n     */\n    isMined() {\n        return (this.blockHash != null);\n    }\n    /**\n     *  Returns true if the transaction is a legacy (i.e. ``type == 0``)\n     *  transaction.\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  the ``null``-ness for hardfork-specific properties set correctly.\n     */\n    isLegacy() {\n        return (this.type === 0);\n    }\n    /**\n     *  Returns true if the transaction is a Berlin (i.e. ``type == 1``)\n     *  transaction. See [[link-eip-2070]].\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  the ``null``-ness for hardfork-specific properties set correctly.\n     */\n    isBerlin() {\n        return (this.type === 1);\n    }\n    /**\n     *  Returns true if the transaction is a London (i.e. ``type == 2``)\n     *  transaction. See [[link-eip-1559]].\n     *\n     *  This provides a Type Guard that this transaction will have\n     *  the ``null``-ness for hardfork-specific properties set correctly.\n     */\n    isLondon() {\n        return (this.type === 2);\n    }\n    /**\n     *  Returns true if hte transaction is a Cancun (i.e. ``type == 3``)\n     *  transaction. See [[link-eip-4844]].\n     */\n    isCancun() {\n        return (this.type === 3);\n    }\n    /**\n     *  Returns a filter which can be used to listen for orphan events\n     *  that evict this transaction.\n     */\n    removedEvent() {\n        assert(this.isMined(), \"unmined transaction canot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" });\n        return createRemovedTransactionFilter(this);\n    }\n    /**\n     *  Returns a filter which can be used to listen for orphan events\n     *  that re-order this event against %%other%%.\n     */\n    reorderedEvent(other) {\n        assert(this.isMined(), \"unmined transaction canot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" });\n        assert(!other || other.isMined(), \"unmined 'other' transaction canot be orphaned\", \"UNSUPPORTED_OPERATION\", { operation: \"removeEvent()\" });\n        return createReorderedTransactionFilter(this, other);\n    }\n    /**\n     *  Returns a new TransactionResponse instance which has the ability to\n     *  detect (and throw an error) if the transaction is replaced, which\n     *  will begin scanning at %%startBlock%%.\n     *\n     *  This should generally not be used by developers and is intended\n     *  primarily for internal use. Setting an incorrect %%startBlock%% can\n     *  have devastating performance consequences if used incorrectly.\n     */\n    replaceableTransaction(startBlock) {\n        assertArgument(Number.isInteger(startBlock) && startBlock >= 0, \"invalid startBlock\", \"startBlock\", startBlock);\n        const tx = new TransactionResponse(this, this.provider);\n        tx.#startBlock = startBlock;\n        return tx;\n    }\n}\nfunction createOrphanedBlockFilter(block) {\n    return { orphan: \"drop-block\", hash: block.hash, number: block.number };\n}\nfunction createReorderedTransactionFilter(tx, other) {\n    return { orphan: \"reorder-transaction\", tx, other };\n}\nfunction createRemovedTransactionFilter(tx) {\n    return { orphan: \"drop-transaction\", tx };\n}\nfunction createRemovedLogFilter(log) {\n    return { orphan: \"drop-log\", log: {\n            transactionHash: log.transactionHash,\n            blockHash: log.blockHash,\n            blockNumber: log.blockNumber,\n            address: log.address,\n            data: log.data,\n            topics: Object.freeze(log.topics.slice()),\n            index: log.index\n        } };\n}\n//# sourceMappingURL=provider.js.map","/**\n *  Generally the [[Wallet]] and [[JsonRpcSigner]] and their sub-classes\n *  are sufficient for most developers, but this is provided to\n *  fascilitate more complex Signers.\n *\n *  @_section: api/providers/abstract-signer: Subclassing Signer [abstract-signer]\n */\nimport { resolveAddress } from \"../address/index.js\";\nimport { Transaction } from \"../transaction/index.js\";\nimport { defineProperties, getBigInt, resolveProperties, assert, assertArgument } from \"../utils/index.js\";\nimport { copyRequest } from \"./provider.js\";\nfunction checkProvider(signer, operation) {\n    if (signer.provider) {\n        return signer.provider;\n    }\n    assert(false, \"missing provider\", \"UNSUPPORTED_OPERATION\", { operation });\n}\nasync function populate(signer, tx) {\n    let pop = copyRequest(tx);\n    if (pop.to != null) {\n        pop.to = resolveAddress(pop.to, signer);\n    }\n    if (pop.from != null) {\n        const from = pop.from;\n        pop.from = Promise.all([\n            signer.getAddress(),\n            resolveAddress(from, signer)\n        ]).then(([address, from]) => {\n            assertArgument(address.toLowerCase() === from.toLowerCase(), \"transaction from mismatch\", \"tx.from\", from);\n            return address;\n        });\n    }\n    else {\n        pop.from = signer.getAddress();\n    }\n    return await resolveProperties(pop);\n}\n/**\n *  An **AbstractSigner** includes most of teh functionality required\n *  to get a [[Signer]] working as expected, but requires a few\n *  Signer-specific methods be overridden.\n *\n */\nexport class AbstractSigner {\n    /**\n     *  The provider this signer is connected to.\n     */\n    provider;\n    /**\n     *  Creates a new Signer connected to %%provider%%.\n     */\n    constructor(provider) {\n        defineProperties(this, { provider: (provider || null) });\n    }\n    async getNonce(blockTag) {\n        return checkProvider(this, \"getTransactionCount\").getTransactionCount(await this.getAddress(), blockTag);\n    }\n    async populateCall(tx) {\n        const pop = await populate(this, tx);\n        return pop;\n    }\n    async populateTransaction(tx) {\n        const provider = checkProvider(this, \"populateTransaction\");\n        const pop = await populate(this, tx);\n        if (pop.nonce == null) {\n            pop.nonce = await this.getNonce(\"pending\");\n        }\n        if (pop.gasLimit == null) {\n            pop.gasLimit = await this.estimateGas(pop);\n        }\n        // Populate the chain ID\n        const network = await (this.provider).getNetwork();\n        if (pop.chainId != null) {\n            const chainId = getBigInt(pop.chainId);\n            assertArgument(chainId === network.chainId, \"transaction chainId mismatch\", \"tx.chainId\", tx.chainId);\n        }\n        else {\n            pop.chainId = network.chainId;\n        }\n        // Do not allow mixing pre-eip-1559 and eip-1559 properties\n        const hasEip1559 = (pop.maxFeePerGas != null || pop.maxPriorityFeePerGas != null);\n        if (pop.gasPrice != null && (pop.type === 2 || hasEip1559)) {\n            assertArgument(false, \"eip-1559 transaction do not support gasPrice\", \"tx\", tx);\n        }\n        else if ((pop.type === 0 || pop.type === 1) && hasEip1559) {\n            assertArgument(false, \"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas\", \"tx\", tx);\n        }\n        if ((pop.type === 2 || pop.type == null) && (pop.maxFeePerGas != null && pop.maxPriorityFeePerGas != null)) {\n            // Fully-formed EIP-1559 transaction (skip getFeeData)\n            pop.type = 2;\n        }\n        else if (pop.type === 0 || pop.type === 1) {\n            // Explicit Legacy or EIP-2930 transaction\n            // We need to get fee data to determine things\n            const feeData = await provider.getFeeData();\n            assert(feeData.gasPrice != null, \"network does not support gasPrice\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"getGasPrice\"\n            });\n            // Populate missing gasPrice\n            if (pop.gasPrice == null) {\n                pop.gasPrice = feeData.gasPrice;\n            }\n        }\n        else {\n            // We need to get fee data to determine things\n            const feeData = await provider.getFeeData();\n            if (pop.type == null) {\n                // We need to auto-detect the intended type of this transaction...\n                if (feeData.maxFeePerGas != null && feeData.maxPriorityFeePerGas != null) {\n                    // The network supports EIP-1559!\n                    // Upgrade transaction from null to eip-1559\n                    if (pop.authorizationList && pop.authorizationList.length) {\n                        pop.type = 4;\n                    }\n                    else {\n                        pop.type = 2;\n                    }\n                    if (pop.gasPrice != null) {\n                        // Using legacy gasPrice property on an eip-1559 network,\n                        // so use gasPrice as both fee properties\n                        const gasPrice = pop.gasPrice;\n                        delete pop.gasPrice;\n                        pop.maxFeePerGas = gasPrice;\n                        pop.maxPriorityFeePerGas = gasPrice;\n                    }\n                    else {\n                        // Populate missing fee data\n                        if (pop.maxFeePerGas == null) {\n                            pop.maxFeePerGas = feeData.maxFeePerGas;\n                        }\n                        if (pop.maxPriorityFeePerGas == null) {\n                            pop.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\n                        }\n                    }\n                }\n                else if (feeData.gasPrice != null) {\n                    // Network doesn't support EIP-1559...\n                    // ...but they are trying to use EIP-1559 properties\n                    assert(!hasEip1559, \"network does not support EIP-1559\", \"UNSUPPORTED_OPERATION\", {\n                        operation: \"populateTransaction\"\n                    });\n                    // Populate missing fee data\n                    if (pop.gasPrice == null) {\n                        pop.gasPrice = feeData.gasPrice;\n                    }\n                    // Explicitly set untyped transaction to legacy\n                    // @TODO: Maybe this shold allow type 1?\n                    pop.type = 0;\n                }\n                else {\n                    // getFeeData has failed us.\n                    assert(false, \"failed to get consistent fee data\", \"UNSUPPORTED_OPERATION\", {\n                        operation: \"signer.getFeeData\"\n                    });\n                }\n            }\n            else if (pop.type === 2 || pop.type === 3 || pop.type === 4) {\n                // Explicitly using EIP-1559 or EIP-4844\n                // Populate missing fee data\n                if (pop.maxFeePerGas == null) {\n                    pop.maxFeePerGas = feeData.maxFeePerGas;\n                }\n                if (pop.maxPriorityFeePerGas == null) {\n                    pop.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\n                }\n            }\n        }\n        //@TOOD: Don't await all over the place; save them up for\n        // the end for better batching\n        return await resolveProperties(pop);\n    }\n    async populateAuthorization(_auth) {\n        const auth = Object.assign({}, _auth);\n        // Add a chain ID if not explicitly set to 0\n        if (auth.chainId == null) {\n            auth.chainId = (await checkProvider(this, \"getNetwork\").getNetwork()).chainId;\n        }\n        // @TODO: Take chain ID into account when populating noce?\n        if (auth.nonce == null) {\n            auth.nonce = await this.getNonce();\n        }\n        return auth;\n    }\n    async estimateGas(tx) {\n        return checkProvider(this, \"estimateGas\").estimateGas(await this.populateCall(tx));\n    }\n    async call(tx) {\n        return checkProvider(this, \"call\").call(await this.populateCall(tx));\n    }\n    async resolveName(name) {\n        const provider = checkProvider(this, \"resolveName\");\n        return await provider.resolveName(name);\n    }\n    async sendTransaction(tx) {\n        const provider = checkProvider(this, \"sendTransaction\");\n        const pop = await this.populateTransaction(tx);\n        delete pop.from;\n        const txObj = Transaction.from(pop);\n        return await provider.broadcastTransaction(await this.signTransaction(txObj));\n    }\n    // @TODO: in v7 move this to be abstract\n    authorize(authorization) {\n        assert(false, \"authorization not implemented for this signer\", \"UNSUPPORTED_OPERATION\", { operation: \"authorize\" });\n    }\n}\n/**\n *  A **VoidSigner** is a class designed to allow an address to be used\n *  in any API which accepts a Signer, but for which there are no\n *  credentials available to perform any actual signing.\n *\n *  This for example allow impersonating an account for the purpose of\n *  static calls or estimating gas, but does not allow sending transactions.\n */\nexport class VoidSigner extends AbstractSigner {\n    /**\n     *  The signer address.\n     */\n    address;\n    /**\n     *  Creates a new **VoidSigner** with %%address%% attached to\n     *  %%provider%%.\n     */\n    constructor(address, provider) {\n        super(provider);\n        defineProperties(this, { address });\n    }\n    async getAddress() { return this.address; }\n    connect(provider) {\n        return new VoidSigner(this.address, provider);\n    }\n    #throwUnsupported(suffix, operation) {\n        assert(false, `VoidSigner cannot sign ${suffix}`, \"UNSUPPORTED_OPERATION\", { operation });\n    }\n    async signTransaction(tx) {\n        this.#throwUnsupported(\"transactions\", \"signTransaction\");\n    }\n    async signMessage(message) {\n        this.#throwUnsupported(\"messages\", \"signMessage\");\n    }\n    async signTypedData(domain, types, value) {\n        this.#throwUnsupported(\"typed-data\", \"signTypedData\");\n    }\n}\n//# sourceMappingURL=abstract-signer.js.map","import { getAddress, resolveAddress } from \"../address/index.js\";\nimport { hashAuthorization, hashMessage, TypedDataEncoder } from \"../hash/index.js\";\nimport { AbstractSigner, copyRequest } from \"../providers/index.js\";\nimport { computeAddress, Transaction } from \"../transaction/index.js\";\nimport { defineProperties, getBigInt, resolveProperties, assert, assertArgument } from \"../utils/index.js\";\n/**\n *  The **BaseWallet** is a stream-lined implementation of a\n *  [[Signer]] that operates with a private key.\n *\n *  It is preferred to use the [[Wallet]] class, as it offers\n *  additional functionality and simplifies loading a variety\n *  of JSON formats, Mnemonic Phrases, etc.\n *\n *  This class may be of use for those attempting to implement\n *  a minimal Signer.\n */\nexport class BaseWallet extends AbstractSigner {\n    /**\n     *  The wallet address.\n     */\n    address;\n    #signingKey;\n    /**\n     *  Creates a new BaseWallet for %%privateKey%%, optionally\n     *  connected to %%provider%%.\n     *\n     *  If %%provider%% is not specified, only offline methods can\n     *  be used.\n     */\n    constructor(privateKey, provider) {\n        super(provider);\n        assertArgument(privateKey && typeof (privateKey.sign) === \"function\", \"invalid private key\", \"privateKey\", \"[ REDACTED ]\");\n        this.#signingKey = privateKey;\n        const address = computeAddress(this.signingKey.publicKey);\n        defineProperties(this, { address });\n    }\n    // Store private values behind getters to reduce visibility\n    // in console.log\n    /**\n     *  The [[SigningKey]] used for signing payloads.\n     */\n    get signingKey() { return this.#signingKey; }\n    /**\n     *  The private key for this wallet.\n     */\n    get privateKey() { return this.signingKey.privateKey; }\n    async getAddress() { return this.address; }\n    connect(provider) {\n        return new BaseWallet(this.#signingKey, provider);\n    }\n    async signTransaction(tx) {\n        tx = copyRequest(tx);\n        // Replace any Addressable or ENS name with an address\n        const { to, from } = await resolveProperties({\n            to: (tx.to ? resolveAddress(tx.to, this) : undefined),\n            from: (tx.from ? resolveAddress(tx.from, this) : undefined)\n        });\n        if (to != null) {\n            tx.to = to;\n        }\n        if (from != null) {\n            tx.from = from;\n        }\n        if (tx.from != null) {\n            assertArgument(getAddress((tx.from)) === this.address, \"transaction from address mismatch\", \"tx.from\", tx.from);\n            delete tx.from;\n        }\n        // Build the transaction\n        const btx = Transaction.from(tx);\n        btx.signature = this.signingKey.sign(btx.unsignedHash);\n        return btx.serialized;\n    }\n    async signMessage(message) {\n        return this.signMessageSync(message);\n    }\n    // @TODO: Add a secialized signTx and signTyped sync that enforces\n    // all parameters are known?\n    /**\n     *  Returns the signature for %%message%% signed with this wallet.\n     */\n    signMessageSync(message) {\n        return this.signingKey.sign(hashMessage(message)).serialized;\n    }\n    /**\n     *  Returns the Authorization for %%auth%%.\n     */\n    authorizeSync(auth) {\n        assertArgument(typeof (auth.address) === \"string\", \"invalid address for authorizeSync\", \"auth.address\", auth);\n        const signature = this.signingKey.sign(hashAuthorization(auth));\n        return Object.assign({}, {\n            address: getAddress(auth.address),\n            nonce: getBigInt(auth.nonce || 0),\n            chainId: getBigInt(auth.chainId || 0),\n        }, { signature });\n    }\n    /**\n     *  Resolves to the Authorization for %%auth%%.\n     */\n    async authorize(auth) {\n        auth = Object.assign({}, auth, {\n            address: await resolveAddress(auth.address, this)\n        });\n        return this.authorizeSync(await this.populateAuthorization(auth));\n    }\n    async signTypedData(domain, types, value) {\n        // Populate any ENS names\n        const populated = await TypedDataEncoder.resolveNames(domain, types, value, async (name) => {\n            // @TODO: this should use resolveName; addresses don't\n            //        need a provider\n            assert(this.provider != null, \"cannot resolve ENS names without a provider\", \"UNSUPPORTED_OPERATION\", {\n                operation: \"resolveName\",\n                info: { name }\n            });\n            const address = await this.provider.resolveName(name);\n            assert(address != null, \"unconfigured ENS name\", \"UNCONFIGURED_NAME\", {\n                value: name\n            });\n            return address;\n        });\n        return this.signingKey.sign(TypedDataEncoder.hash(populated.domain, types, populated.value)).serialized;\n    }\n}\n//# sourceMappingURL=base-wallet.js.map","import { assertArgument } from \"../utils/index.js\";\nconst subsChrs = \" !#$%&'()*+,-./<=>?@[]^_`{|}~\";\nconst Word = /^[a-z]*$/i;\nfunction unfold(words, sep) {\n    let initial = 97;\n    return words.reduce((accum, word) => {\n        if (word === sep) {\n            initial++;\n        }\n        else if (word.match(Word)) {\n            accum.push(String.fromCharCode(initial) + word);\n        }\n        else {\n            initial = 97;\n            accum.push(word);\n        }\n        return accum;\n    }, []);\n}\n/**\n *  @_ignore\n */\nexport function decode(data, subs) {\n    // Replace all the substitutions with their expanded form\n    for (let i = subsChrs.length - 1; i >= 0; i--) {\n        data = data.split(subsChrs[i]).join(subs.substring(2 * i, 2 * i + 2));\n    }\n    // Get all tle clumps; each suffix, first-increment and second-increment\n    const clumps = [];\n    const leftover = data.replace(/(:|([0-9])|([A-Z][a-z]*))/g, (all, item, semi, word) => {\n        if (semi) {\n            for (let i = parseInt(semi); i >= 0; i--) {\n                clumps.push(\";\");\n            }\n        }\n        else {\n            clumps.push(item.toLowerCase());\n        }\n        return \"\";\n    });\n    /* c8 ignore start */\n    if (leftover) {\n        throw new Error(`leftovers: ${JSON.stringify(leftover)}`);\n    }\n    /* c8 ignore stop */\n    return unfold(unfold(clumps, \";\"), \":\");\n}\n/**\n *  @_ignore\n */\nexport function decodeOwl(data) {\n    assertArgument(data[0] === \"0\", \"unsupported auwl data\", \"data\", data);\n    return decode(data.substring(1 + 2 * subsChrs.length), data.substring(1, 1 + 2 * subsChrs.length));\n}\n//# sourceMappingURL=decode-owl.js.map","import { defineProperties } from \"../utils/index.js\";\n/**\n *  A Wordlist represents a collection of language-specific\n *  words used to encode and devoce [[link-bip-39]] encoded data\n *  by mapping words to 11-bit values and vice versa.\n */\nexport class Wordlist {\n    locale;\n    /**\n     *  Creates a new Wordlist instance.\n     *\n     *  Sub-classes MUST call this if they provide their own constructor,\n     *  passing in the locale string of the language.\n     *\n     *  Generally there is no need to create instances of a Wordlist,\n     *  since each language-specific Wordlist creates an instance and\n     *  there is no state kept internally, so they are safe to share.\n     */\n    constructor(locale) {\n        defineProperties(this, { locale });\n    }\n    /**\n     *  Sub-classes may override this to provide a language-specific\n     *  method for spliting %%phrase%% into individual words.\n     *\n     *  By default, %%phrase%% is split using any sequences of\n     *  white-space as defined by regular expressions (i.e. ``/\\s+/``).\n     */\n    split(phrase) {\n        return phrase.toLowerCase().split(/\\s+/g);\n    }\n    /**\n     *  Sub-classes may override this to provider a language-specific\n     *  method for joining %%words%% into a phrase.\n     *\n     *  By default, %%words%% are joined by a single space.\n     */\n    join(words) {\n        return words.join(\" \");\n    }\n}\n//# sourceMappingURL=wordlist.js.map","// Use the encode-latin.js script to create the necessary\n// data files to be consumed by this class\nimport { id } from \"../hash/index.js\";\nimport { assertArgument } from \"../utils/index.js\";\nimport { decodeOwl } from \"./decode-owl.js\";\nimport { Wordlist } from \"./wordlist.js\";\n/**\n *  An OWL format Wordlist is an encoding method that exploits\n *  the general locality of alphabetically sorted words to\n *  achieve a simple but effective means of compression.\n *\n *  This class is generally not useful to most developers as\n *  it is used mainly internally to keep Wordlists for languages\n *  based on ASCII-7 small.\n *\n *  If necessary, there are tools within the ``generation/`` folder\n *  to create the necessary data.\n */\nexport class WordlistOwl extends Wordlist {\n    #data;\n    #checksum;\n    /**\n     *  Creates a new Wordlist for %%locale%% using the OWL %%data%%\n     *  and validated against the %%checksum%%.\n     */\n    constructor(locale, data, checksum) {\n        super(locale);\n        this.#data = data;\n        this.#checksum = checksum;\n        this.#words = null;\n    }\n    /**\n     *  The OWL-encoded data.\n     */\n    get _data() { return this.#data; }\n    /**\n     *  Decode all the words for the wordlist.\n     */\n    _decodeWords() {\n        return decodeOwl(this.#data);\n    }\n    #words;\n    #loadWords() {\n        if (this.#words == null) {\n            const words = this._decodeWords();\n            // Verify the computed list matches the official list\n            const checksum = id(words.join(\"\\n\") + \"\\n\");\n            /* c8 ignore start */\n            if (checksum !== this.#checksum) {\n                throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);\n            }\n            /* c8 ignore stop */\n            this.#words = words;\n        }\n        return this.#words;\n    }\n    getWord(index) {\n        const words = this.#loadWords();\n        assertArgument(index >= 0 && index < words.length, `invalid word index: ${index}`, \"index\", index);\n        return words[index];\n    }\n    getWordIndex(word) {\n        return this.#loadWords().indexOf(word);\n    }\n}\n//# sourceMappingURL=wordlist-owl.js.map","import { WordlistOwl } from \"./wordlist-owl.js\";\nconst words = \"0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO\";\nconst checksum = \"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60\";\nlet wordlist = null;\n/**\n *  The [[link-bip39-en]] for [mnemonic phrases](link-bip-39).\n *\n *  @_docloc: api/wordlists\n */\nexport class LangEn extends WordlistOwl {\n    /**\n     *  Creates a new instance of the English language Wordlist.\n     *\n     *  This should be unnecessary most of the time as the exported\n     *  [[langEn]] should suffice.\n     *\n     *  @_ignore:\n     */\n    constructor() { super(\"en\", words, checksum); }\n    /**\n     *  Returns a singleton instance of a ``LangEn``, creating it\n     *  if this is the first time being called.\n     */\n    static wordlist() {\n        if (wordlist == null) {\n            wordlist = new LangEn();\n        }\n        return wordlist;\n    }\n}\n//# sourceMappingURL=lang-en.js.map","import { pbkdf2, sha256 } from \"../crypto/index.js\";\nimport { defineProperties, getBytes, hexlify, assertNormalize, assertPrivate, assertArgument, toUtf8Bytes } from \"../utils/index.js\";\nimport { LangEn } from \"../wordlists/lang-en.js\";\n// Returns a byte with the MSB bits set\nfunction getUpperMask(bits) {\n    return ((1 << bits) - 1) << (8 - bits) & 0xff;\n}\n// Returns a byte with the LSB bits set\nfunction getLowerMask(bits) {\n    return ((1 << bits) - 1) & 0xff;\n}\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    assertNormalize(\"NFKD\");\n    if (wordlist == null) {\n        wordlist = LangEn.wordlist();\n    }\n    const words = wordlist.split(mnemonic);\n    assertArgument((words.length % 3) === 0 && words.length >= 12 && words.length <= 24, \"invalid mnemonic length\", \"mnemonic\", \"[ REDACTED ]\");\n    const entropy = new Uint8Array(Math.ceil(11 * words.length / 8));\n    let offset = 0;\n    for (let i = 0; i < words.length; i++) {\n        let index = wordlist.getWordIndex(words[i].normalize(\"NFKD\"));\n        assertArgument(index >= 0, `invalid mnemonic word at index ${i}`, \"mnemonic\", \"[ REDACTED ]\");\n        for (let bit = 0; bit < 11; bit++) {\n            if (index & (1 << (10 - bit))) {\n                entropy[offset >> 3] |= (1 << (7 - (offset % 8)));\n            }\n            offset++;\n        }\n    }\n    const entropyBits = 32 * words.length / 3;\n    const checksumBits = words.length / 3;\n    const checksumMask = getUpperMask(checksumBits);\n    const checksum = getBytes(sha256(entropy.slice(0, entropyBits / 8)))[0] & checksumMask;\n    assertArgument(checksum === (entropy[entropy.length - 1] & checksumMask), \"invalid mnemonic checksum\", \"mnemonic\", \"[ REDACTED ]\");\n    return hexlify(entropy.slice(0, entropyBits / 8));\n}\nfunction entropyToMnemonic(entropy, wordlist) {\n    assertArgument((entropy.length % 4) === 0 && entropy.length >= 16 && entropy.length <= 32, \"invalid entropy size\", \"entropy\", \"[ REDACTED ]\");\n    if (wordlist == null) {\n        wordlist = LangEn.wordlist();\n    }\n    const indices = [0];\n    let remainingBits = 11;\n    for (let i = 0; i < entropy.length; i++) {\n        // Consume the whole byte (with still more to go)\n        if (remainingBits > 8) {\n            indices[indices.length - 1] <<= 8;\n            indices[indices.length - 1] |= entropy[i];\n            remainingBits -= 8;\n            // This byte will complete an 11-bit index\n        }\n        else {\n            indices[indices.length - 1] <<= remainingBits;\n            indices[indices.length - 1] |= entropy[i] >> (8 - remainingBits);\n            // Start the next word\n            indices.push(entropy[i] & getLowerMask(8 - remainingBits));\n            remainingBits += 3;\n        }\n    }\n    // Compute the checksum bits\n    const checksumBits = entropy.length / 4;\n    const checksum = parseInt(sha256(entropy).substring(2, 4), 16) & getUpperMask(checksumBits);\n    // Shift the checksum into the word indices\n    indices[indices.length - 1] <<= checksumBits;\n    indices[indices.length - 1] |= (checksum >> (8 - checksumBits));\n    return wordlist.join(indices.map((index) => wordlist.getWord(index)));\n}\nconst _guard = {};\n/**\n *  A **Mnemonic** wraps all properties required to compute [[link-bip-39]]\n *  seeds and convert between phrases and entropy.\n */\nexport class Mnemonic {\n    /**\n     *  The mnemonic phrase of 12, 15, 18, 21 or 24 words.\n     *\n     *  Use the [[wordlist]] ``split`` method to get the individual words.\n     */\n    phrase;\n    /**\n     *  The password used for this mnemonic. If no password is used this\n     *  is the empty string (i.e. ``\"\"``) as per the specification.\n     */\n    password;\n    /**\n     *  The wordlist for this mnemonic.\n     */\n    wordlist;\n    /**\n     *  The underlying entropy which the mnemonic encodes.\n     */\n    entropy;\n    /**\n     *  @private\n     */\n    constructor(guard, entropy, phrase, password, wordlist) {\n        if (password == null) {\n            password = \"\";\n        }\n        if (wordlist == null) {\n            wordlist = LangEn.wordlist();\n        }\n        assertPrivate(guard, _guard, \"Mnemonic\");\n        defineProperties(this, { phrase, password, wordlist, entropy });\n    }\n    /**\n     *  Returns the seed for the mnemonic.\n     */\n    computeSeed() {\n        const salt = toUtf8Bytes(\"mnemonic\" + this.password, \"NFKD\");\n        return pbkdf2(toUtf8Bytes(this.phrase, \"NFKD\"), salt, 2048, 64, \"sha512\");\n    }\n    /**\n     *  Creates a new Mnemonic for the %%phrase%%.\n     *\n     *  The default %%password%% is the empty string and the default\n     *  wordlist is the [English wordlists](LangEn).\n     */\n    static fromPhrase(phrase, password, wordlist) {\n        // Normalize the case and space; throws if invalid\n        const entropy = mnemonicToEntropy(phrase, wordlist);\n        phrase = entropyToMnemonic(getBytes(entropy), wordlist);\n        return new Mnemonic(_guard, entropy, phrase, password, wordlist);\n    }\n    /**\n     *  Create a new **Mnemonic** from the %%entropy%%.\n     *\n     *  The default %%password%% is the empty string and the default\n     *  wordlist is the [English wordlists](LangEn).\n     */\n    static fromEntropy(_entropy, password, wordlist) {\n        const entropy = getBytes(_entropy, \"entropy\");\n        const phrase = entropyToMnemonic(entropy, wordlist);\n        return new Mnemonic(_guard, hexlify(entropy), phrase, password, wordlist);\n    }\n    /**\n     *  Returns the phrase for %%mnemonic%%.\n     */\n    static entropyToPhrase(_entropy, wordlist) {\n        const entropy = getBytes(_entropy, \"entropy\");\n        return entropyToMnemonic(entropy, wordlist);\n    }\n    /**\n     *  Returns the entropy for %%phrase%%.\n     */\n    static phraseToEntropy(phrase, wordlist) {\n        return mnemonicToEntropy(phrase, wordlist);\n    }\n    /**\n     *  Returns true if %%phrase%% is a valid [[link-bip-39]] phrase.\n     *\n     *  This checks all the provided words belong to the %%wordlist%%,\n     *  that the length is valid and the checksum is correct.\n     */\n    static isValidMnemonic(phrase, wordlist) {\n        try {\n            mnemonicToEntropy(phrase, wordlist);\n            return true;\n        }\n        catch (error) { }\n        return false;\n    }\n}\n//# sourceMappingURL=mnemonic.js.map","/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _AES_key, _AES_Kd, _AES_Ke;\n// Number of rounds by keysize\nconst numberOfRounds = { 16: 10, 24: 12, 32: 14 };\n// Round constant words\nconst rcon = [0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, 0xc5, 0x91];\n// S-box and Inverse S-box (S is for Substitution)\nconst S = [0x63, 0x7c, 0x77, 0x7b, 0xf2, 0x6b, 0x6f, 0xc5, 0x30, 0x01, 0x67, 0x2b, 0xfe, 0xd7, 0xab, 0x76, 0xca, 0x82, 0xc9, 0x7d, 0xfa, 0x59, 0x47, 0xf0, 0xad, 0xd4, 0xa2, 0xaf, 0x9c, 0xa4, 0x72, 0xc0, 0xb7, 0xfd, 0x93, 0x26, 0x36, 0x3f, 0xf7, 0xcc, 0x34, 0xa5, 0xe5, 0xf1, 0x71, 0xd8, 0x31, 0x15, 0x04, 0xc7, 0x23, 0xc3, 0x18, 0x96, 0x05, 0x9a, 0x07, 0x12, 0x80, 0xe2, 0xeb, 0x27, 0xb2, 0x75, 0x09, 0x83, 0x2c, 0x1a, 0x1b, 0x6e, 0x5a, 0xa0, 0x52, 0x3b, 0xd6, 0xb3, 0x29, 0xe3, 0x2f, 0x84, 0x53, 0xd1, 0x00, 0xed, 0x20, 0xfc, 0xb1, 0x5b, 0x6a, 0xcb, 0xbe, 0x39, 0x4a, 0x4c, 0x58, 0xcf, 0xd0, 0xef, 0xaa, 0xfb, 0x43, 0x4d, 0x33, 0x85, 0x45, 0xf9, 0x02, 0x7f, 0x50, 0x3c, 0x9f, 0xa8, 0x51, 0xa3, 0x40, 0x8f, 0x92, 0x9d, 0x38, 0xf5, 0xbc, 0xb6, 0xda, 0x21, 0x10, 0xff, 0xf3, 0xd2, 0xcd, 0x0c, 0x13, 0xec, 0x5f, 0x97, 0x44, 0x17, 0xc4, 0xa7, 0x7e, 0x3d, 0x64, 0x5d, 0x19, 0x73, 0x60, 0x81, 0x4f, 0xdc, 0x22, 0x2a, 0x90, 0x88, 0x46, 0xee, 0xb8, 0x14, 0xde, 0x5e, 0x0b, 0xdb, 0xe0, 0x32, 0x3a, 0x0a, 0x49, 0x06, 0x24, 0x5c, 0xc2, 0xd3, 0xac, 0x62, 0x91, 0x95, 0xe4, 0x79, 0xe7, 0xc8, 0x37, 0x6d, 0x8d, 0xd5, 0x4e, 0xa9, 0x6c, 0x56, 0xf4, 0xea, 0x65, 0x7a, 0xae, 0x08, 0xba, 0x78, 0x25, 0x2e, 0x1c, 0xa6, 0xb4, 0xc6, 0xe8, 0xdd, 0x74, 0x1f, 0x4b, 0xbd, 0x8b, 0x8a, 0x70, 0x3e, 0xb5, 0x66, 0x48, 0x03, 0xf6, 0x0e, 0x61, 0x35, 0x57, 0xb9, 0x86, 0xc1, 0x1d, 0x9e, 0xe1, 0xf8, 0x98, 0x11, 0x69, 0xd9, 0x8e, 0x94, 0x9b, 0x1e, 0x87, 0xe9, 0xce, 0x55, 0x28, 0xdf, 0x8c, 0xa1, 0x89, 0x0d, 0xbf, 0xe6, 0x42, 0x68, 0x41, 0x99, 0x2d, 0x0f, 0xb0, 0x54, 0xbb, 0x16];\nconst Si = [0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81, 0xf3, 0xd7, 0xfb, 0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e, 0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb, 0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23, 0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e, 0x08, 0x2e, 0xa1, 0x66, 0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25, 0x72, 0xf8, 0xf6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xd4, 0xa4, 0x5c, 0xcc, 0x5d, 0x65, 0xb6, 0x92, 0x6c, 0x70, 0x48, 0x50, 0xfd, 0xed, 0xb9, 0xda, 0x5e, 0x15, 0x46, 0x57, 0xa7, 0x8d, 0x9d, 0x84, 0x90, 0xd8, 0xab, 0x00, 0x8c, 0xbc, 0xd3, 0x0a, 0xf7, 0xe4, 0x58, 0x05, 0xb8, 0xb3, 0x45, 0x06, 0xd0, 0x2c, 0x1e, 0x8f, 0xca, 0x3f, 0x0f, 0x02, 0xc1, 0xaf, 0xbd, 0x03, 0x01, 0x13, 0x8a, 0x6b, 0x3a, 0x91, 0x11, 0x41, 0x4f, 0x67, 0xdc, 0xea, 0x97, 0xf2, 0xcf, 0xce, 0xf0, 0xb4, 0xe6, 0x73, 0x96, 0xac, 0x74, 0x22, 0xe7, 0xad, 0x35, 0x85, 0xe2, 0xf9, 0x37, 0xe8, 0x1c, 0x75, 0xdf, 0x6e, 0x47, 0xf1, 0x1a, 0x71, 0x1d, 0x29, 0xc5, 0x89, 0x6f, 0xb7, 0x62, 0x0e, 0xaa, 0x18, 0xbe, 0x1b, 0xfc, 0x56, 0x3e, 0x4b, 0xc6, 0xd2, 0x79, 0x20, 0x9a, 0xdb, 0xc0, 0xfe, 0x78, 0xcd, 0x5a, 0xf4, 0x1f, 0xdd, 0xa8, 0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f, 0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93, 0xc9, 0x9c, 0xef, 0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb, 0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61, 0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6, 0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d];\n// Transformations for encryption\nconst T1 = [0xc66363a5, 0xf87c7c84, 0xee777799, 0xf67b7b8d, 0xfff2f20d, 0xd66b6bbd, 0xde6f6fb1, 0x91c5c554, 0x60303050, 0x02010103, 0xce6767a9, 0x562b2b7d, 0xe7fefe19, 0xb5d7d762, 0x4dababe6, 0xec76769a, 0x8fcaca45, 0x1f82829d, 0x89c9c940, 0xfa7d7d87, 0xeffafa15, 0xb25959eb, 0x8e4747c9, 0xfbf0f00b, 0x41adadec, 0xb3d4d467, 0x5fa2a2fd, 0x45afafea, 0x239c9cbf, 0x53a4a4f7, 0xe4727296, 0x9bc0c05b, 0x75b7b7c2, 0xe1fdfd1c, 0x3d9393ae, 0x4c26266a, 0x6c36365a, 0x7e3f3f41, 0xf5f7f702, 0x83cccc4f, 0x6834345c, 0x51a5a5f4, 0xd1e5e534, 0xf9f1f108, 0xe2717193, 0xabd8d873, 0x62313153, 0x2a15153f, 0x0804040c, 0x95c7c752, 0x46232365, 0x9dc3c35e, 0x30181828, 0x379696a1, 0x0a05050f, 0x2f9a9ab5, 0x0e070709, 0x24121236, 0x1b80809b, 0xdfe2e23d, 0xcdebeb26, 0x4e272769, 0x7fb2b2cd, 0xea75759f, 0x1209091b, 0x1d83839e, 0x582c2c74, 0x341a1a2e, 0x361b1b2d, 0xdc6e6eb2, 0xb45a5aee, 0x5ba0a0fb, 0xa45252f6, 0x763b3b4d, 0xb7d6d661, 0x7db3b3ce, 0x5229297b, 0xdde3e33e, 0x5e2f2f71, 0x13848497, 0xa65353f5, 0xb9d1d168, 0x00000000, 0xc1eded2c, 0x40202060, 0xe3fcfc1f, 0x79b1b1c8, 0xb65b5bed, 0xd46a6abe, 0x8dcbcb46, 0x67bebed9, 0x7239394b, 0x944a4ade, 0x984c4cd4, 0xb05858e8, 0x85cfcf4a, 0xbbd0d06b, 0xc5efef2a, 0x4faaaae5, 0xedfbfb16, 0x864343c5, 0x9a4d4dd7, 0x66333355, 0x11858594, 0x8a4545cf, 0xe9f9f910, 0x04020206, 0xfe7f7f81, 0xa05050f0, 0x783c3c44, 0x259f9fba, 0x4ba8a8e3, 0xa25151f3, 0x5da3a3fe, 0x804040c0, 0x058f8f8a, 0x3f9292ad, 0x219d9dbc, 0x70383848, 0xf1f5f504, 0x63bcbcdf, 0x77b6b6c1, 0xafdada75, 0x42212163, 0x20101030, 0xe5ffff1a, 0xfdf3f30e, 0xbfd2d26d, 0x81cdcd4c, 0x180c0c14, 0x26131335, 0xc3ecec2f, 0xbe5f5fe1, 0x359797a2, 0x884444cc, 0x2e171739, 0x93c4c457, 0x55a7a7f2, 0xfc7e7e82, 0x7a3d3d47, 0xc86464ac, 0xba5d5de7, 0x3219192b, 0xe6737395, 0xc06060a0, 0x19818198, 0x9e4f4fd1, 0xa3dcdc7f, 0x44222266, 0x542a2a7e, 0x3b9090ab, 0x0b888883, 0x8c4646ca, 0xc7eeee29, 0x6bb8b8d3, 0x2814143c, 0xa7dede79, 0xbc5e5ee2, 0x160b0b1d, 0xaddbdb76, 0xdbe0e03b, 0x64323256, 0x743a3a4e, 0x140a0a1e, 0x924949db, 0x0c06060a, 0x4824246c, 0xb85c5ce4, 0x9fc2c25d, 0xbdd3d36e, 0x43acacef, 0xc46262a6, 0x399191a8, 0x319595a4, 0xd3e4e437, 0xf279798b, 0xd5e7e732, 0x8bc8c843, 0x6e373759, 0xda6d6db7, 0x018d8d8c, 0xb1d5d564, 0x9c4e4ed2, 0x49a9a9e0, 0xd86c6cb4, 0xac5656fa, 0xf3f4f407, 0xcfeaea25, 0xca6565af, 0xf47a7a8e, 0x47aeaee9, 0x10080818, 0x6fbabad5, 0xf0787888, 0x4a25256f, 0x5c2e2e72, 0x381c1c24, 0x57a6a6f1, 0x73b4b4c7, 0x97c6c651, 0xcbe8e823, 0xa1dddd7c, 0xe874749c, 0x3e1f1f21, 0x964b4bdd, 0x61bdbddc, 0x0d8b8b86, 0x0f8a8a85, 0xe0707090, 0x7c3e3e42, 0x71b5b5c4, 0xcc6666aa, 0x904848d8, 0x06030305, 0xf7f6f601, 0x1c0e0e12, 0xc26161a3, 0x6a35355f, 0xae5757f9, 0x69b9b9d0, 0x17868691, 0x99c1c158, 0x3a1d1d27, 0x279e9eb9, 0xd9e1e138, 0xebf8f813, 0x2b9898b3, 0x22111133, 0xd26969bb, 0xa9d9d970, 0x078e8e89, 0x339494a7, 0x2d9b9bb6, 0x3c1e1e22, 0x15878792, 0xc9e9e920, 0x87cece49, 0xaa5555ff, 0x50282878, 0xa5dfdf7a, 0x038c8c8f, 0x59a1a1f8, 0x09898980, 0x1a0d0d17, 0x65bfbfda, 0xd7e6e631, 0x844242c6, 0xd06868b8, 0x824141c3, 0x299999b0, 0x5a2d2d77, 0x1e0f0f11, 0x7bb0b0cb, 0xa85454fc, 0x6dbbbbd6, 0x2c16163a];\nconst T2 = [0xa5c66363, 0x84f87c7c, 0x99ee7777, 0x8df67b7b, 0x0dfff2f2, 0xbdd66b6b, 0xb1de6f6f, 0x5491c5c5, 0x50603030, 0x03020101, 0xa9ce6767, 0x7d562b2b, 0x19e7fefe, 0x62b5d7d7, 0xe64dabab, 0x9aec7676, 0x458fcaca, 0x9d1f8282, 0x4089c9c9, 0x87fa7d7d, 0x15effafa, 0xebb25959, 0xc98e4747, 0x0bfbf0f0, 0xec41adad, 0x67b3d4d4, 0xfd5fa2a2, 0xea45afaf, 0xbf239c9c, 0xf753a4a4, 0x96e47272, 0x5b9bc0c0, 0xc275b7b7, 0x1ce1fdfd, 0xae3d9393, 0x6a4c2626, 0x5a6c3636, 0x417e3f3f, 0x02f5f7f7, 0x4f83cccc, 0x5c683434, 0xf451a5a5, 0x34d1e5e5, 0x08f9f1f1, 0x93e27171, 0x73abd8d8, 0x53623131, 0x3f2a1515, 0x0c080404, 0x5295c7c7, 0x65462323, 0x5e9dc3c3, 0x28301818, 0xa1379696, 0x0f0a0505, 0xb52f9a9a, 0x090e0707, 0x36241212, 0x9b1b8080, 0x3ddfe2e2, 0x26cdebeb, 0x694e2727, 0xcd7fb2b2, 0x9fea7575, 0x1b120909, 0x9e1d8383, 0x74582c2c, 0x2e341a1a, 0x2d361b1b, 0xb2dc6e6e, 0xeeb45a5a, 0xfb5ba0a0, 0xf6a45252, 0x4d763b3b, 0x61b7d6d6, 0xce7db3b3, 0x7b522929, 0x3edde3e3, 0x715e2f2f, 0x97138484, 0xf5a65353, 0x68b9d1d1, 0x00000000, 0x2cc1eded, 0x60402020, 0x1fe3fcfc, 0xc879b1b1, 0xedb65b5b, 0xbed46a6a, 0x468dcbcb, 0xd967bebe, 0x4b723939, 0xde944a4a, 0xd4984c4c, 0xe8b05858, 0x4a85cfcf, 0x6bbbd0d0, 0x2ac5efef, 0xe54faaaa, 0x16edfbfb, 0xc5864343, 0xd79a4d4d, 0x55663333, 0x94118585, 0xcf8a4545, 0x10e9f9f9, 0x06040202, 0x81fe7f7f, 0xf0a05050, 0x44783c3c, 0xba259f9f, 0xe34ba8a8, 0xf3a25151, 0xfe5da3a3, 0xc0804040, 0x8a058f8f, 0xad3f9292, 0xbc219d9d, 0x48703838, 0x04f1f5f5, 0xdf63bcbc, 0xc177b6b6, 0x75afdada, 0x63422121, 0x30201010, 0x1ae5ffff, 0x0efdf3f3, 0x6dbfd2d2, 0x4c81cdcd, 0x14180c0c, 0x35261313, 0x2fc3ecec, 0xe1be5f5f, 0xa2359797, 0xcc884444, 0x392e1717, 0x5793c4c4, 0xf255a7a7, 0x82fc7e7e, 0x477a3d3d, 0xacc86464, 0xe7ba5d5d, 0x2b321919, 0x95e67373, 0xa0c06060, 0x98198181, 0xd19e4f4f, 0x7fa3dcdc, 0x66442222, 0x7e542a2a, 0xab3b9090, 0x830b8888, 0xca8c4646, 0x29c7eeee, 0xd36bb8b8, 0x3c281414, 0x79a7dede, 0xe2bc5e5e, 0x1d160b0b, 0x76addbdb, 0x3bdbe0e0, 0x56643232, 0x4e743a3a, 0x1e140a0a, 0xdb924949, 0x0a0c0606, 0x6c482424, 0xe4b85c5c, 0x5d9fc2c2, 0x6ebdd3d3, 0xef43acac, 0xa6c46262, 0xa8399191, 0xa4319595, 0x37d3e4e4, 0x8bf27979, 0x32d5e7e7, 0x438bc8c8, 0x596e3737, 0xb7da6d6d, 0x8c018d8d, 0x64b1d5d5, 0xd29c4e4e, 0xe049a9a9, 0xb4d86c6c, 0xfaac5656, 0x07f3f4f4, 0x25cfeaea, 0xafca6565, 0x8ef47a7a, 0xe947aeae, 0x18100808, 0xd56fbaba, 0x88f07878, 0x6f4a2525, 0x725c2e2e, 0x24381c1c, 0xf157a6a6, 0xc773b4b4, 0x5197c6c6, 0x23cbe8e8, 0x7ca1dddd, 0x9ce87474, 0x213e1f1f, 0xdd964b4b, 0xdc61bdbd, 0x860d8b8b, 0x850f8a8a, 0x90e07070, 0x427c3e3e, 0xc471b5b5, 0xaacc6666, 0xd8904848, 0x05060303, 0x01f7f6f6, 0x121c0e0e, 0xa3c26161, 0x5f6a3535, 0xf9ae5757, 0xd069b9b9, 0x91178686, 0x5899c1c1, 0x273a1d1d, 0xb9279e9e, 0x38d9e1e1, 0x13ebf8f8, 0xb32b9898, 0x33221111, 0xbbd26969, 0x70a9d9d9, 0x89078e8e, 0xa7339494, 0xb62d9b9b, 0x223c1e1e, 0x92158787, 0x20c9e9e9, 0x4987cece, 0xffaa5555, 0x78502828, 0x7aa5dfdf, 0x8f038c8c, 0xf859a1a1, 0x80098989, 0x171a0d0d, 0xda65bfbf, 0x31d7e6e6, 0xc6844242, 0xb8d06868, 0xc3824141, 0xb0299999, 0x775a2d2d, 0x111e0f0f, 0xcb7bb0b0, 0xfca85454, 0xd66dbbbb, 0x3a2c1616];\nconst T3 = [0x63a5c663, 0x7c84f87c, 0x7799ee77, 0x7b8df67b, 0xf20dfff2, 0x6bbdd66b, 0x6fb1de6f, 0xc55491c5, 0x30506030, 0x01030201, 0x67a9ce67, 0x2b7d562b, 0xfe19e7fe, 0xd762b5d7, 0xabe64dab, 0x769aec76, 0xca458fca, 0x829d1f82, 0xc94089c9, 0x7d87fa7d, 0xfa15effa, 0x59ebb259, 0x47c98e47, 0xf00bfbf0, 0xadec41ad, 0xd467b3d4, 0xa2fd5fa2, 0xafea45af, 0x9cbf239c, 0xa4f753a4, 0x7296e472, 0xc05b9bc0, 0xb7c275b7, 0xfd1ce1fd, 0x93ae3d93, 0x266a4c26, 0x365a6c36, 0x3f417e3f, 0xf702f5f7, 0xcc4f83cc, 0x345c6834, 0xa5f451a5, 0xe534d1e5, 0xf108f9f1, 0x7193e271, 0xd873abd8, 0x31536231, 0x153f2a15, 0x040c0804, 0xc75295c7, 0x23654623, 0xc35e9dc3, 0x18283018, 0x96a13796, 0x050f0a05, 0x9ab52f9a, 0x07090e07, 0x12362412, 0x809b1b80, 0xe23ddfe2, 0xeb26cdeb, 0x27694e27, 0xb2cd7fb2, 0x759fea75, 0x091b1209, 0x839e1d83, 0x2c74582c, 0x1a2e341a, 0x1b2d361b, 0x6eb2dc6e, 0x5aeeb45a, 0xa0fb5ba0, 0x52f6a452, 0x3b4d763b, 0xd661b7d6, 0xb3ce7db3, 0x297b5229, 0xe33edde3, 0x2f715e2f, 0x84971384, 0x53f5a653, 0xd168b9d1, 0x00000000, 0xed2cc1ed, 0x20604020, 0xfc1fe3fc, 0xb1c879b1, 0x5bedb65b, 0x6abed46a, 0xcb468dcb, 0xbed967be, 0x394b7239, 0x4ade944a, 0x4cd4984c, 0x58e8b058, 0xcf4a85cf, 0xd06bbbd0, 0xef2ac5ef, 0xaae54faa, 0xfb16edfb, 0x43c58643, 0x4dd79a4d, 0x33556633, 0x85941185, 0x45cf8a45, 0xf910e9f9, 0x02060402, 0x7f81fe7f, 0x50f0a050, 0x3c44783c, 0x9fba259f, 0xa8e34ba8, 0x51f3a251, 0xa3fe5da3, 0x40c08040, 0x8f8a058f, 0x92ad3f92, 0x9dbc219d, 0x38487038, 0xf504f1f5, 0xbcdf63bc, 0xb6c177b6, 0xda75afda, 0x21634221, 0x10302010, 0xff1ae5ff, 0xf30efdf3, 0xd26dbfd2, 0xcd4c81cd, 0x0c14180c, 0x13352613, 0xec2fc3ec, 0x5fe1be5f, 0x97a23597, 0x44cc8844, 0x17392e17, 0xc45793c4, 0xa7f255a7, 0x7e82fc7e, 0x3d477a3d, 0x64acc864, 0x5de7ba5d, 0x192b3219, 0x7395e673, 0x60a0c060, 0x81981981, 0x4fd19e4f, 0xdc7fa3dc, 0x22664422, 0x2a7e542a, 0x90ab3b90, 0x88830b88, 0x46ca8c46, 0xee29c7ee, 0xb8d36bb8, 0x143c2814, 0xde79a7de, 0x5ee2bc5e, 0x0b1d160b, 0xdb76addb, 0xe03bdbe0, 0x32566432, 0x3a4e743a, 0x0a1e140a, 0x49db9249, 0x060a0c06, 0x246c4824, 0x5ce4b85c, 0xc25d9fc2, 0xd36ebdd3, 0xacef43ac, 0x62a6c462, 0x91a83991, 0x95a43195, 0xe437d3e4, 0x798bf279, 0xe732d5e7, 0xc8438bc8, 0x37596e37, 0x6db7da6d, 0x8d8c018d, 0xd564b1d5, 0x4ed29c4e, 0xa9e049a9, 0x6cb4d86c, 0x56faac56, 0xf407f3f4, 0xea25cfea, 0x65afca65, 0x7a8ef47a, 0xaee947ae, 0x08181008, 0xbad56fba, 0x7888f078, 0x256f4a25, 0x2e725c2e, 0x1c24381c, 0xa6f157a6, 0xb4c773b4, 0xc65197c6, 0xe823cbe8, 0xdd7ca1dd, 0x749ce874, 0x1f213e1f, 0x4bdd964b, 0xbddc61bd, 0x8b860d8b, 0x8a850f8a, 0x7090e070, 0x3e427c3e, 0xb5c471b5, 0x66aacc66, 0x48d89048, 0x03050603, 0xf601f7f6, 0x0e121c0e, 0x61a3c261, 0x355f6a35, 0x57f9ae57, 0xb9d069b9, 0x86911786, 0xc15899c1, 0x1d273a1d, 0x9eb9279e, 0xe138d9e1, 0xf813ebf8, 0x98b32b98, 0x11332211, 0x69bbd269, 0xd970a9d9, 0x8e89078e, 0x94a73394, 0x9bb62d9b, 0x1e223c1e, 0x87921587, 0xe920c9e9, 0xce4987ce, 0x55ffaa55, 0x28785028, 0xdf7aa5df, 0x8c8f038c, 0xa1f859a1, 0x89800989, 0x0d171a0d, 0xbfda65bf, 0xe631d7e6, 0x42c68442, 0x68b8d068, 0x41c38241, 0x99b02999, 0x2d775a2d, 0x0f111e0f, 0xb0cb7bb0, 0x54fca854, 0xbbd66dbb, 0x163a2c16];\nconst T4 = [0x6363a5c6, 0x7c7c84f8, 0x777799ee, 0x7b7b8df6, 0xf2f20dff, 0x6b6bbdd6, 0x6f6fb1de, 0xc5c55491, 0x30305060, 0x01010302, 0x6767a9ce, 0x2b2b7d56, 0xfefe19e7, 0xd7d762b5, 0xababe64d, 0x76769aec, 0xcaca458f, 0x82829d1f, 0xc9c94089, 0x7d7d87fa, 0xfafa15ef, 0x5959ebb2, 0x4747c98e, 0xf0f00bfb, 0xadadec41, 0xd4d467b3, 0xa2a2fd5f, 0xafafea45, 0x9c9cbf23, 0xa4a4f753, 0x727296e4, 0xc0c05b9b, 0xb7b7c275, 0xfdfd1ce1, 0x9393ae3d, 0x26266a4c, 0x36365a6c, 0x3f3f417e, 0xf7f702f5, 0xcccc4f83, 0x34345c68, 0xa5a5f451, 0xe5e534d1, 0xf1f108f9, 0x717193e2, 0xd8d873ab, 0x31315362, 0x15153f2a, 0x04040c08, 0xc7c75295, 0x23236546, 0xc3c35e9d, 0x18182830, 0x9696a137, 0x05050f0a, 0x9a9ab52f, 0x0707090e, 0x12123624, 0x80809b1b, 0xe2e23ddf, 0xebeb26cd, 0x2727694e, 0xb2b2cd7f, 0x75759fea, 0x09091b12, 0x83839e1d, 0x2c2c7458, 0x1a1a2e34, 0x1b1b2d36, 0x6e6eb2dc, 0x5a5aeeb4, 0xa0a0fb5b, 0x5252f6a4, 0x3b3b4d76, 0xd6d661b7, 0xb3b3ce7d, 0x29297b52, 0xe3e33edd, 0x2f2f715e, 0x84849713, 0x5353f5a6, 0xd1d168b9, 0x00000000, 0xeded2cc1, 0x20206040, 0xfcfc1fe3, 0xb1b1c879, 0x5b5bedb6, 0x6a6abed4, 0xcbcb468d, 0xbebed967, 0x39394b72, 0x4a4ade94, 0x4c4cd498, 0x5858e8b0, 0xcfcf4a85, 0xd0d06bbb, 0xefef2ac5, 0xaaaae54f, 0xfbfb16ed, 0x4343c586, 0x4d4dd79a, 0x33335566, 0x85859411, 0x4545cf8a, 0xf9f910e9, 0x02020604, 0x7f7f81fe, 0x5050f0a0, 0x3c3c4478, 0x9f9fba25, 0xa8a8e34b, 0x5151f3a2, 0xa3a3fe5d, 0x4040c080, 0x8f8f8a05, 0x9292ad3f, 0x9d9dbc21, 0x38384870, 0xf5f504f1, 0xbcbcdf63, 0xb6b6c177, 0xdada75af, 0x21216342, 0x10103020, 0xffff1ae5, 0xf3f30efd, 0xd2d26dbf, 0xcdcd4c81, 0x0c0c1418, 0x13133526, 0xecec2fc3, 0x5f5fe1be, 0x9797a235, 0x4444cc88, 0x1717392e, 0xc4c45793, 0xa7a7f255, 0x7e7e82fc, 0x3d3d477a, 0x6464acc8, 0x5d5de7ba, 0x19192b32, 0x737395e6, 0x6060a0c0, 0x81819819, 0x4f4fd19e, 0xdcdc7fa3, 0x22226644, 0x2a2a7e54, 0x9090ab3b, 0x8888830b, 0x4646ca8c, 0xeeee29c7, 0xb8b8d36b, 0x14143c28, 0xdede79a7, 0x5e5ee2bc, 0x0b0b1d16, 0xdbdb76ad, 0xe0e03bdb, 0x32325664, 0x3a3a4e74, 0x0a0a1e14, 0x4949db92, 0x06060a0c, 0x24246c48, 0x5c5ce4b8, 0xc2c25d9f, 0xd3d36ebd, 0xacacef43, 0x6262a6c4, 0x9191a839, 0x9595a431, 0xe4e437d3, 0x79798bf2, 0xe7e732d5, 0xc8c8438b, 0x3737596e, 0x6d6db7da, 0x8d8d8c01, 0xd5d564b1, 0x4e4ed29c, 0xa9a9e049, 0x6c6cb4d8, 0x5656faac, 0xf4f407f3, 0xeaea25cf, 0x6565afca, 0x7a7a8ef4, 0xaeaee947, 0x08081810, 0xbabad56f, 0x787888f0, 0x25256f4a, 0x2e2e725c, 0x1c1c2438, 0xa6a6f157, 0xb4b4c773, 0xc6c65197, 0xe8e823cb, 0xdddd7ca1, 0x74749ce8, 0x1f1f213e, 0x4b4bdd96, 0xbdbddc61, 0x8b8b860d, 0x8a8a850f, 0x707090e0, 0x3e3e427c, 0xb5b5c471, 0x6666aacc, 0x4848d890, 0x03030506, 0xf6f601f7, 0x0e0e121c, 0x6161a3c2, 0x35355f6a, 0x5757f9ae, 0xb9b9d069, 0x86869117, 0xc1c15899, 0x1d1d273a, 0x9e9eb927, 0xe1e138d9, 0xf8f813eb, 0x9898b32b, 0x11113322, 0x6969bbd2, 0xd9d970a9, 0x8e8e8907, 0x9494a733, 0x9b9bb62d, 0x1e1e223c, 0x87879215, 0xe9e920c9, 0xcece4987, 0x5555ffaa, 0x28287850, 0xdfdf7aa5, 0x8c8c8f03, 0xa1a1f859, 0x89898009, 0x0d0d171a, 0xbfbfda65, 0xe6e631d7, 0x4242c684, 0x6868b8d0, 0x4141c382, 0x9999b029, 0x2d2d775a, 0x0f0f111e, 0xb0b0cb7b, 0x5454fca8, 0xbbbbd66d, 0x16163a2c];\n// Transformations for decryption\nconst T5 = [0x51f4a750, 0x7e416553, 0x1a17a4c3, 0x3a275e96, 0x3bab6bcb, 0x1f9d45f1, 0xacfa58ab, 0x4be30393, 0x2030fa55, 0xad766df6, 0x88cc7691, 0xf5024c25, 0x4fe5d7fc, 0xc52acbd7, 0x26354480, 0xb562a38f, 0xdeb15a49, 0x25ba1b67, 0x45ea0e98, 0x5dfec0e1, 0xc32f7502, 0x814cf012, 0x8d4697a3, 0x6bd3f9c6, 0x038f5fe7, 0x15929c95, 0xbf6d7aeb, 0x955259da, 0xd4be832d, 0x587421d3, 0x49e06929, 0x8ec9c844, 0x75c2896a, 0xf48e7978, 0x99583e6b, 0x27b971dd, 0xbee14fb6, 0xf088ad17, 0xc920ac66, 0x7dce3ab4, 0x63df4a18, 0xe51a3182, 0x97513360, 0x62537f45, 0xb16477e0, 0xbb6bae84, 0xfe81a01c, 0xf9082b94, 0x70486858, 0x8f45fd19, 0x94de6c87, 0x527bf8b7, 0xab73d323, 0x724b02e2, 0xe31f8f57, 0x6655ab2a, 0xb2eb2807, 0x2fb5c203, 0x86c57b9a, 0xd33708a5, 0x302887f2, 0x23bfa5b2, 0x02036aba, 0xed16825c, 0x8acf1c2b, 0xa779b492, 0xf307f2f0, 0x4e69e2a1, 0x65daf4cd, 0x0605bed5, 0xd134621f, 0xc4a6fe8a, 0x342e539d, 0xa2f355a0, 0x058ae132, 0xa4f6eb75, 0x0b83ec39, 0x4060efaa, 0x5e719f06, 0xbd6e1051, 0x3e218af9, 0x96dd063d, 0xdd3e05ae, 0x4de6bd46, 0x91548db5, 0x71c45d05, 0x0406d46f, 0x605015ff, 0x1998fb24, 0xd6bde997, 0x894043cc, 0x67d99e77, 0xb0e842bd, 0x07898b88, 0xe7195b38, 0x79c8eedb, 0xa17c0a47, 0x7c420fe9, 0xf8841ec9, 0x00000000, 0x09808683, 0x322bed48, 0x1e1170ac, 0x6c5a724e, 0xfd0efffb, 0x0f853856, 0x3daed51e, 0x362d3927, 0x0a0fd964, 0x685ca621, 0x9b5b54d1, 0x24362e3a, 0x0c0a67b1, 0x9357e70f, 0xb4ee96d2, 0x1b9b919e, 0x80c0c54f, 0x61dc20a2, 0x5a774b69, 0x1c121a16, 0xe293ba0a, 0xc0a02ae5, 0x3c22e043, 0x121b171d, 0x0e090d0b, 0xf28bc7ad, 0x2db6a8b9, 0x141ea9c8, 0x57f11985, 0xaf75074c, 0xee99ddbb, 0xa37f60fd, 0xf701269f, 0x5c72f5bc, 0x44663bc5, 0x5bfb7e34, 0x8b432976, 0xcb23c6dc, 0xb6edfc68, 0xb8e4f163, 0xd731dcca, 0x42638510, 0x13972240, 0x84c61120, 0x854a247d, 0xd2bb3df8, 0xaef93211, 0xc729a16d, 0x1d9e2f4b, 0xdcb230f3, 0x0d8652ec, 0x77c1e3d0, 0x2bb3166c, 0xa970b999, 0x119448fa, 0x47e96422, 0xa8fc8cc4, 0xa0f03f1a, 0x567d2cd8, 0x223390ef, 0x87494ec7, 0xd938d1c1, 0x8ccaa2fe, 0x98d40b36, 0xa6f581cf, 0xa57ade28, 0xdab78e26, 0x3fadbfa4, 0x2c3a9de4, 0x5078920d, 0x6a5fcc9b, 0x547e4662, 0xf68d13c2, 0x90d8b8e8, 0x2e39f75e, 0x82c3aff5, 0x9f5d80be, 0x69d0937c, 0x6fd52da9, 0xcf2512b3, 0xc8ac993b, 0x10187da7, 0xe89c636e, 0xdb3bbb7b, 0xcd267809, 0x6e5918f4, 0xec9ab701, 0x834f9aa8, 0xe6956e65, 0xaaffe67e, 0x21bccf08, 0xef15e8e6, 0xbae79bd9, 0x4a6f36ce, 0xea9f09d4, 0x29b07cd6, 0x31a4b2af, 0x2a3f2331, 0xc6a59430, 0x35a266c0, 0x744ebc37, 0xfc82caa6, 0xe090d0b0, 0x33a7d815, 0xf104984a, 0x41ecdaf7, 0x7fcd500e, 0x1791f62f, 0x764dd68d, 0x43efb04d, 0xccaa4d54, 0xe49604df, 0x9ed1b5e3, 0x4c6a881b, 0xc12c1fb8, 0x4665517f, 0x9d5eea04, 0x018c355d, 0xfa877473, 0xfb0b412e, 0xb3671d5a, 0x92dbd252, 0xe9105633, 0x6dd64713, 0x9ad7618c, 0x37a10c7a, 0x59f8148e, 0xeb133c89, 0xcea927ee, 0xb761c935, 0xe11ce5ed, 0x7a47b13c, 0x9cd2df59, 0x55f2733f, 0x1814ce79, 0x73c737bf, 0x53f7cdea, 0x5ffdaa5b, 0xdf3d6f14, 0x7844db86, 0xcaaff381, 0xb968c43e, 0x3824342c, 0xc2a3405f, 0x161dc372, 0xbce2250c, 0x283c498b, 0xff0d9541, 0x39a80171, 0x080cb3de, 0xd8b4e49c, 0x6456c190, 0x7bcb8461, 0xd532b670, 0x486c5c74, 0xd0b85742];\nconst T6 = [0x5051f4a7, 0x537e4165, 0xc31a17a4, 0x963a275e, 0xcb3bab6b, 0xf11f9d45, 0xabacfa58, 0x934be303, 0x552030fa, 0xf6ad766d, 0x9188cc76, 0x25f5024c, 0xfc4fe5d7, 0xd7c52acb, 0x80263544, 0x8fb562a3, 0x49deb15a, 0x6725ba1b, 0x9845ea0e, 0xe15dfec0, 0x02c32f75, 0x12814cf0, 0xa38d4697, 0xc66bd3f9, 0xe7038f5f, 0x9515929c, 0xebbf6d7a, 0xda955259, 0x2dd4be83, 0xd3587421, 0x2949e069, 0x448ec9c8, 0x6a75c289, 0x78f48e79, 0x6b99583e, 0xdd27b971, 0xb6bee14f, 0x17f088ad, 0x66c920ac, 0xb47dce3a, 0x1863df4a, 0x82e51a31, 0x60975133, 0x4562537f, 0xe0b16477, 0x84bb6bae, 0x1cfe81a0, 0x94f9082b, 0x58704868, 0x198f45fd, 0x8794de6c, 0xb7527bf8, 0x23ab73d3, 0xe2724b02, 0x57e31f8f, 0x2a6655ab, 0x07b2eb28, 0x032fb5c2, 0x9a86c57b, 0xa5d33708, 0xf2302887, 0xb223bfa5, 0xba02036a, 0x5ced1682, 0x2b8acf1c, 0x92a779b4, 0xf0f307f2, 0xa14e69e2, 0xcd65daf4, 0xd50605be, 0x1fd13462, 0x8ac4a6fe, 0x9d342e53, 0xa0a2f355, 0x32058ae1, 0x75a4f6eb, 0x390b83ec, 0xaa4060ef, 0x065e719f, 0x51bd6e10, 0xf93e218a, 0x3d96dd06, 0xaedd3e05, 0x464de6bd, 0xb591548d, 0x0571c45d, 0x6f0406d4, 0xff605015, 0x241998fb, 0x97d6bde9, 0xcc894043, 0x7767d99e, 0xbdb0e842, 0x8807898b, 0x38e7195b, 0xdb79c8ee, 0x47a17c0a, 0xe97c420f, 0xc9f8841e, 0x00000000, 0x83098086, 0x48322bed, 0xac1e1170, 0x4e6c5a72, 0xfbfd0eff, 0x560f8538, 0x1e3daed5, 0x27362d39, 0x640a0fd9, 0x21685ca6, 0xd19b5b54, 0x3a24362e, 0xb10c0a67, 0x0f9357e7, 0xd2b4ee96, 0x9e1b9b91, 0x4f80c0c5, 0xa261dc20, 0x695a774b, 0x161c121a, 0x0ae293ba, 0xe5c0a02a, 0x433c22e0, 0x1d121b17, 0x0b0e090d, 0xadf28bc7, 0xb92db6a8, 0xc8141ea9, 0x8557f119, 0x4caf7507, 0xbbee99dd, 0xfda37f60, 0x9ff70126, 0xbc5c72f5, 0xc544663b, 0x345bfb7e, 0x768b4329, 0xdccb23c6, 0x68b6edfc, 0x63b8e4f1, 0xcad731dc, 0x10426385, 0x40139722, 0x2084c611, 0x7d854a24, 0xf8d2bb3d, 0x11aef932, 0x6dc729a1, 0x4b1d9e2f, 0xf3dcb230, 0xec0d8652, 0xd077c1e3, 0x6c2bb316, 0x99a970b9, 0xfa119448, 0x2247e964, 0xc4a8fc8c, 0x1aa0f03f, 0xd8567d2c, 0xef223390, 0xc787494e, 0xc1d938d1, 0xfe8ccaa2, 0x3698d40b, 0xcfa6f581, 0x28a57ade, 0x26dab78e, 0xa43fadbf, 0xe42c3a9d, 0x0d507892, 0x9b6a5fcc, 0x62547e46, 0xc2f68d13, 0xe890d8b8, 0x5e2e39f7, 0xf582c3af, 0xbe9f5d80, 0x7c69d093, 0xa96fd52d, 0xb3cf2512, 0x3bc8ac99, 0xa710187d, 0x6ee89c63, 0x7bdb3bbb, 0x09cd2678, 0xf46e5918, 0x01ec9ab7, 0xa8834f9a, 0x65e6956e, 0x7eaaffe6, 0x0821bccf, 0xe6ef15e8, 0xd9bae79b, 0xce4a6f36, 0xd4ea9f09, 0xd629b07c, 0xaf31a4b2, 0x312a3f23, 0x30c6a594, 0xc035a266, 0x37744ebc, 0xa6fc82ca, 0xb0e090d0, 0x1533a7d8, 0x4af10498, 0xf741ecda, 0x0e7fcd50, 0x2f1791f6, 0x8d764dd6, 0x4d43efb0, 0x54ccaa4d, 0xdfe49604, 0xe39ed1b5, 0x1b4c6a88, 0xb8c12c1f, 0x7f466551, 0x049d5eea, 0x5d018c35, 0x73fa8774, 0x2efb0b41, 0x5ab3671d, 0x5292dbd2, 0x33e91056, 0x136dd647, 0x8c9ad761, 0x7a37a10c, 0x8e59f814, 0x89eb133c, 0xeecea927, 0x35b761c9, 0xede11ce5, 0x3c7a47b1, 0x599cd2df, 0x3f55f273, 0x791814ce, 0xbf73c737, 0xea53f7cd, 0x5b5ffdaa, 0x14df3d6f, 0x867844db, 0x81caaff3, 0x3eb968c4, 0x2c382434, 0x5fc2a340, 0x72161dc3, 0x0cbce225, 0x8b283c49, 0x41ff0d95, 0x7139a801, 0xde080cb3, 0x9cd8b4e4, 0x906456c1, 0x617bcb84, 0x70d532b6, 0x74486c5c, 0x42d0b857];\nconst T7 = [0xa75051f4, 0x65537e41, 0xa4c31a17, 0x5e963a27, 0x6bcb3bab, 0x45f11f9d, 0x58abacfa, 0x03934be3, 0xfa552030, 0x6df6ad76, 0x769188cc, 0x4c25f502, 0xd7fc4fe5, 0xcbd7c52a, 0x44802635, 0xa38fb562, 0x5a49deb1, 0x1b6725ba, 0x0e9845ea, 0xc0e15dfe, 0x7502c32f, 0xf012814c, 0x97a38d46, 0xf9c66bd3, 0x5fe7038f, 0x9c951592, 0x7aebbf6d, 0x59da9552, 0x832dd4be, 0x21d35874, 0x692949e0, 0xc8448ec9, 0x896a75c2, 0x7978f48e, 0x3e6b9958, 0x71dd27b9, 0x4fb6bee1, 0xad17f088, 0xac66c920, 0x3ab47dce, 0x4a1863df, 0x3182e51a, 0x33609751, 0x7f456253, 0x77e0b164, 0xae84bb6b, 0xa01cfe81, 0x2b94f908, 0x68587048, 0xfd198f45, 0x6c8794de, 0xf8b7527b, 0xd323ab73, 0x02e2724b, 0x8f57e31f, 0xab2a6655, 0x2807b2eb, 0xc2032fb5, 0x7b9a86c5, 0x08a5d337, 0x87f23028, 0xa5b223bf, 0x6aba0203, 0x825ced16, 0x1c2b8acf, 0xb492a779, 0xf2f0f307, 0xe2a14e69, 0xf4cd65da, 0xbed50605, 0x621fd134, 0xfe8ac4a6, 0x539d342e, 0x55a0a2f3, 0xe132058a, 0xeb75a4f6, 0xec390b83, 0xefaa4060, 0x9f065e71, 0x1051bd6e, 0x8af93e21, 0x063d96dd, 0x05aedd3e, 0xbd464de6, 0x8db59154, 0x5d0571c4, 0xd46f0406, 0x15ff6050, 0xfb241998, 0xe997d6bd, 0x43cc8940, 0x9e7767d9, 0x42bdb0e8, 0x8b880789, 0x5b38e719, 0xeedb79c8, 0x0a47a17c, 0x0fe97c42, 0x1ec9f884, 0x00000000, 0x86830980, 0xed48322b, 0x70ac1e11, 0x724e6c5a, 0xfffbfd0e, 0x38560f85, 0xd51e3dae, 0x3927362d, 0xd9640a0f, 0xa621685c, 0x54d19b5b, 0x2e3a2436, 0x67b10c0a, 0xe70f9357, 0x96d2b4ee, 0x919e1b9b, 0xc54f80c0, 0x20a261dc, 0x4b695a77, 0x1a161c12, 0xba0ae293, 0x2ae5c0a0, 0xe0433c22, 0x171d121b, 0x0d0b0e09, 0xc7adf28b, 0xa8b92db6, 0xa9c8141e, 0x198557f1, 0x074caf75, 0xddbbee99, 0x60fda37f, 0x269ff701, 0xf5bc5c72, 0x3bc54466, 0x7e345bfb, 0x29768b43, 0xc6dccb23, 0xfc68b6ed, 0xf163b8e4, 0xdccad731, 0x85104263, 0x22401397, 0x112084c6, 0x247d854a, 0x3df8d2bb, 0x3211aef9, 0xa16dc729, 0x2f4b1d9e, 0x30f3dcb2, 0x52ec0d86, 0xe3d077c1, 0x166c2bb3, 0xb999a970, 0x48fa1194, 0x642247e9, 0x8cc4a8fc, 0x3f1aa0f0, 0x2cd8567d, 0x90ef2233, 0x4ec78749, 0xd1c1d938, 0xa2fe8cca, 0x0b3698d4, 0x81cfa6f5, 0xde28a57a, 0x8e26dab7, 0xbfa43fad, 0x9de42c3a, 0x920d5078, 0xcc9b6a5f, 0x4662547e, 0x13c2f68d, 0xb8e890d8, 0xf75e2e39, 0xaff582c3, 0x80be9f5d, 0x937c69d0, 0x2da96fd5, 0x12b3cf25, 0x993bc8ac, 0x7da71018, 0x636ee89c, 0xbb7bdb3b, 0x7809cd26, 0x18f46e59, 0xb701ec9a, 0x9aa8834f, 0x6e65e695, 0xe67eaaff, 0xcf0821bc, 0xe8e6ef15, 0x9bd9bae7, 0x36ce4a6f, 0x09d4ea9f, 0x7cd629b0, 0xb2af31a4, 0x23312a3f, 0x9430c6a5, 0x66c035a2, 0xbc37744e, 0xcaa6fc82, 0xd0b0e090, 0xd81533a7, 0x984af104, 0xdaf741ec, 0x500e7fcd, 0xf62f1791, 0xd68d764d, 0xb04d43ef, 0x4d54ccaa, 0x04dfe496, 0xb5e39ed1, 0x881b4c6a, 0x1fb8c12c, 0x517f4665, 0xea049d5e, 0x355d018c, 0x7473fa87, 0x412efb0b, 0x1d5ab367, 0xd25292db, 0x5633e910, 0x47136dd6, 0x618c9ad7, 0x0c7a37a1, 0x148e59f8, 0x3c89eb13, 0x27eecea9, 0xc935b761, 0xe5ede11c, 0xb13c7a47, 0xdf599cd2, 0x733f55f2, 0xce791814, 0x37bf73c7, 0xcdea53f7, 0xaa5b5ffd, 0x6f14df3d, 0xdb867844, 0xf381caaf, 0xc43eb968, 0x342c3824, 0x405fc2a3, 0xc372161d, 0x250cbce2, 0x498b283c, 0x9541ff0d, 0x017139a8, 0xb3de080c, 0xe49cd8b4, 0xc1906456, 0x84617bcb, 0xb670d532, 0x5c74486c, 0x5742d0b8];\nconst T8 = [0xf4a75051, 0x4165537e, 0x17a4c31a, 0x275e963a, 0xab6bcb3b, 0x9d45f11f, 0xfa58abac, 0xe303934b, 0x30fa5520, 0x766df6ad, 0xcc769188, 0x024c25f5, 0xe5d7fc4f, 0x2acbd7c5, 0x35448026, 0x62a38fb5, 0xb15a49de, 0xba1b6725, 0xea0e9845, 0xfec0e15d, 0x2f7502c3, 0x4cf01281, 0x4697a38d, 0xd3f9c66b, 0x8f5fe703, 0x929c9515, 0x6d7aebbf, 0x5259da95, 0xbe832dd4, 0x7421d358, 0xe0692949, 0xc9c8448e, 0xc2896a75, 0x8e7978f4, 0x583e6b99, 0xb971dd27, 0xe14fb6be, 0x88ad17f0, 0x20ac66c9, 0xce3ab47d, 0xdf4a1863, 0x1a3182e5, 0x51336097, 0x537f4562, 0x6477e0b1, 0x6bae84bb, 0x81a01cfe, 0x082b94f9, 0x48685870, 0x45fd198f, 0xde6c8794, 0x7bf8b752, 0x73d323ab, 0x4b02e272, 0x1f8f57e3, 0x55ab2a66, 0xeb2807b2, 0xb5c2032f, 0xc57b9a86, 0x3708a5d3, 0x2887f230, 0xbfa5b223, 0x036aba02, 0x16825ced, 0xcf1c2b8a, 0x79b492a7, 0x07f2f0f3, 0x69e2a14e, 0xdaf4cd65, 0x05bed506, 0x34621fd1, 0xa6fe8ac4, 0x2e539d34, 0xf355a0a2, 0x8ae13205, 0xf6eb75a4, 0x83ec390b, 0x60efaa40, 0x719f065e, 0x6e1051bd, 0x218af93e, 0xdd063d96, 0x3e05aedd, 0xe6bd464d, 0x548db591, 0xc45d0571, 0x06d46f04, 0x5015ff60, 0x98fb2419, 0xbde997d6, 0x4043cc89, 0xd99e7767, 0xe842bdb0, 0x898b8807, 0x195b38e7, 0xc8eedb79, 0x7c0a47a1, 0x420fe97c, 0x841ec9f8, 0x00000000, 0x80868309, 0x2bed4832, 0x1170ac1e, 0x5a724e6c, 0x0efffbfd, 0x8538560f, 0xaed51e3d, 0x2d392736, 0x0fd9640a, 0x5ca62168, 0x5b54d19b, 0x362e3a24, 0x0a67b10c, 0x57e70f93, 0xee96d2b4, 0x9b919e1b, 0xc0c54f80, 0xdc20a261, 0x774b695a, 0x121a161c, 0x93ba0ae2, 0xa02ae5c0, 0x22e0433c, 0x1b171d12, 0x090d0b0e, 0x8bc7adf2, 0xb6a8b92d, 0x1ea9c814, 0xf1198557, 0x75074caf, 0x99ddbbee, 0x7f60fda3, 0x01269ff7, 0x72f5bc5c, 0x663bc544, 0xfb7e345b, 0x4329768b, 0x23c6dccb, 0xedfc68b6, 0xe4f163b8, 0x31dccad7, 0x63851042, 0x97224013, 0xc6112084, 0x4a247d85, 0xbb3df8d2, 0xf93211ae, 0x29a16dc7, 0x9e2f4b1d, 0xb230f3dc, 0x8652ec0d, 0xc1e3d077, 0xb3166c2b, 0x70b999a9, 0x9448fa11, 0xe9642247, 0xfc8cc4a8, 0xf03f1aa0, 0x7d2cd856, 0x3390ef22, 0x494ec787, 0x38d1c1d9, 0xcaa2fe8c, 0xd40b3698, 0xf581cfa6, 0x7ade28a5, 0xb78e26da, 0xadbfa43f, 0x3a9de42c, 0x78920d50, 0x5fcc9b6a, 0x7e466254, 0x8d13c2f6, 0xd8b8e890, 0x39f75e2e, 0xc3aff582, 0x5d80be9f, 0xd0937c69, 0xd52da96f, 0x2512b3cf, 0xac993bc8, 0x187da710, 0x9c636ee8, 0x3bbb7bdb, 0x267809cd, 0x5918f46e, 0x9ab701ec, 0x4f9aa883, 0x956e65e6, 0xffe67eaa, 0xbccf0821, 0x15e8e6ef, 0xe79bd9ba, 0x6f36ce4a, 0x9f09d4ea, 0xb07cd629, 0xa4b2af31, 0x3f23312a, 0xa59430c6, 0xa266c035, 0x4ebc3774, 0x82caa6fc, 0x90d0b0e0, 0xa7d81533, 0x04984af1, 0xecdaf741, 0xcd500e7f, 0x91f62f17, 0x4dd68d76, 0xefb04d43, 0xaa4d54cc, 0x9604dfe4, 0xd1b5e39e, 0x6a881b4c, 0x2c1fb8c1, 0x65517f46, 0x5eea049d, 0x8c355d01, 0x877473fa, 0x0b412efb, 0x671d5ab3, 0xdbd25292, 0x105633e9, 0xd647136d, 0xd7618c9a, 0xa10c7a37, 0xf8148e59, 0x133c89eb, 0xa927eece, 0x61c935b7, 0x1ce5ede1, 0x47b13c7a, 0xd2df599c, 0xf2733f55, 0x14ce7918, 0xc737bf73, 0xf7cdea53, 0xfdaa5b5f, 0x3d6f14df, 0x44db8678, 0xaff381ca, 0x68c43eb9, 0x24342c38, 0xa3405fc2, 0x1dc37216, 0xe2250cbc, 0x3c498b28, 0x0d9541ff, 0xa8017139, 0x0cb3de08, 0xb4e49cd8, 0x56c19064, 0xcb84617b, 0x32b670d5, 0x6c5c7448, 0xb85742d0];\n// Transformations for decryption key expansion\nconst U1 = [0x00000000, 0x0e090d0b, 0x1c121a16, 0x121b171d, 0x3824342c, 0x362d3927, 0x24362e3a, 0x2a3f2331, 0x70486858, 0x7e416553, 0x6c5a724e, 0x62537f45, 0x486c5c74, 0x4665517f, 0x547e4662, 0x5a774b69, 0xe090d0b0, 0xee99ddbb, 0xfc82caa6, 0xf28bc7ad, 0xd8b4e49c, 0xd6bde997, 0xc4a6fe8a, 0xcaaff381, 0x90d8b8e8, 0x9ed1b5e3, 0x8ccaa2fe, 0x82c3aff5, 0xa8fc8cc4, 0xa6f581cf, 0xb4ee96d2, 0xbae79bd9, 0xdb3bbb7b, 0xd532b670, 0xc729a16d, 0xc920ac66, 0xe31f8f57, 0xed16825c, 0xff0d9541, 0xf104984a, 0xab73d323, 0xa57ade28, 0xb761c935, 0xb968c43e, 0x9357e70f, 0x9d5eea04, 0x8f45fd19, 0x814cf012, 0x3bab6bcb, 0x35a266c0, 0x27b971dd, 0x29b07cd6, 0x038f5fe7, 0x0d8652ec, 0x1f9d45f1, 0x119448fa, 0x4be30393, 0x45ea0e98, 0x57f11985, 0x59f8148e, 0x73c737bf, 0x7dce3ab4, 0x6fd52da9, 0x61dc20a2, 0xad766df6, 0xa37f60fd, 0xb16477e0, 0xbf6d7aeb, 0x955259da, 0x9b5b54d1, 0x894043cc, 0x87494ec7, 0xdd3e05ae, 0xd33708a5, 0xc12c1fb8, 0xcf2512b3, 0xe51a3182, 0xeb133c89, 0xf9082b94, 0xf701269f, 0x4de6bd46, 0x43efb04d, 0x51f4a750, 0x5ffdaa5b, 0x75c2896a, 0x7bcb8461, 0x69d0937c, 0x67d99e77, 0x3daed51e, 0x33a7d815, 0x21bccf08, 0x2fb5c203, 0x058ae132, 0x0b83ec39, 0x1998fb24, 0x1791f62f, 0x764dd68d, 0x7844db86, 0x6a5fcc9b, 0x6456c190, 0x4e69e2a1, 0x4060efaa, 0x527bf8b7, 0x5c72f5bc, 0x0605bed5, 0x080cb3de, 0x1a17a4c3, 0x141ea9c8, 0x3e218af9, 0x302887f2, 0x223390ef, 0x2c3a9de4, 0x96dd063d, 0x98d40b36, 0x8acf1c2b, 0x84c61120, 0xaef93211, 0xa0f03f1a, 0xb2eb2807, 0xbce2250c, 0xe6956e65, 0xe89c636e, 0xfa877473, 0xf48e7978, 0xdeb15a49, 0xd0b85742, 0xc2a3405f, 0xccaa4d54, 0x41ecdaf7, 0x4fe5d7fc, 0x5dfec0e1, 0x53f7cdea, 0x79c8eedb, 0x77c1e3d0, 0x65daf4cd, 0x6bd3f9c6, 0x31a4b2af, 0x3fadbfa4, 0x2db6a8b9, 0x23bfa5b2, 0x09808683, 0x07898b88, 0x15929c95, 0x1b9b919e, 0xa17c0a47, 0xaf75074c, 0xbd6e1051, 0xb3671d5a, 0x99583e6b, 0x97513360, 0x854a247d, 0x8b432976, 0xd134621f, 0xdf3d6f14, 0xcd267809, 0xc32f7502, 0xe9105633, 0xe7195b38, 0xf5024c25, 0xfb0b412e, 0x9ad7618c, 0x94de6c87, 0x86c57b9a, 0x88cc7691, 0xa2f355a0, 0xacfa58ab, 0xbee14fb6, 0xb0e842bd, 0xea9f09d4, 0xe49604df, 0xf68d13c2, 0xf8841ec9, 0xd2bb3df8, 0xdcb230f3, 0xcea927ee, 0xc0a02ae5, 0x7a47b13c, 0x744ebc37, 0x6655ab2a, 0x685ca621, 0x42638510, 0x4c6a881b, 0x5e719f06, 0x5078920d, 0x0a0fd964, 0x0406d46f, 0x161dc372, 0x1814ce79, 0x322bed48, 0x3c22e043, 0x2e39f75e, 0x2030fa55, 0xec9ab701, 0xe293ba0a, 0xf088ad17, 0xfe81a01c, 0xd4be832d, 0xdab78e26, 0xc8ac993b, 0xc6a59430, 0x9cd2df59, 0x92dbd252, 0x80c0c54f, 0x8ec9c844, 0xa4f6eb75, 0xaaffe67e, 0xb8e4f163, 0xb6edfc68, 0x0c0a67b1, 0x02036aba, 0x10187da7, 0x1e1170ac, 0x342e539d, 0x3a275e96, 0x283c498b, 0x26354480, 0x7c420fe9, 0x724b02e2, 0x605015ff, 0x6e5918f4, 0x44663bc5, 0x4a6f36ce, 0x587421d3, 0x567d2cd8, 0x37a10c7a, 0x39a80171, 0x2bb3166c, 0x25ba1b67, 0x0f853856, 0x018c355d, 0x13972240, 0x1d9e2f4b, 0x47e96422, 0x49e06929, 0x5bfb7e34, 0x55f2733f, 0x7fcd500e, 0x71c45d05, 0x63df4a18, 0x6dd64713, 0xd731dcca, 0xd938d1c1, 0xcb23c6dc, 0xc52acbd7, 0xef15e8e6, 0xe11ce5ed, 0xf307f2f0, 0xfd0efffb, 0xa779b492, 0xa970b999, 0xbb6bae84, 0xb562a38f, 0x9f5d80be, 0x91548db5, 0x834f9aa8, 0x8d4697a3];\nconst U2 = [0x00000000, 0x0b0e090d, 0x161c121a, 0x1d121b17, 0x2c382434, 0x27362d39, 0x3a24362e, 0x312a3f23, 0x58704868, 0x537e4165, 0x4e6c5a72, 0x4562537f, 0x74486c5c, 0x7f466551, 0x62547e46, 0x695a774b, 0xb0e090d0, 0xbbee99dd, 0xa6fc82ca, 0xadf28bc7, 0x9cd8b4e4, 0x97d6bde9, 0x8ac4a6fe, 0x81caaff3, 0xe890d8b8, 0xe39ed1b5, 0xfe8ccaa2, 0xf582c3af, 0xc4a8fc8c, 0xcfa6f581, 0xd2b4ee96, 0xd9bae79b, 0x7bdb3bbb, 0x70d532b6, 0x6dc729a1, 0x66c920ac, 0x57e31f8f, 0x5ced1682, 0x41ff0d95, 0x4af10498, 0x23ab73d3, 0x28a57ade, 0x35b761c9, 0x3eb968c4, 0x0f9357e7, 0x049d5eea, 0x198f45fd, 0x12814cf0, 0xcb3bab6b, 0xc035a266, 0xdd27b971, 0xd629b07c, 0xe7038f5f, 0xec0d8652, 0xf11f9d45, 0xfa119448, 0x934be303, 0x9845ea0e, 0x8557f119, 0x8e59f814, 0xbf73c737, 0xb47dce3a, 0xa96fd52d, 0xa261dc20, 0xf6ad766d, 0xfda37f60, 0xe0b16477, 0xebbf6d7a, 0xda955259, 0xd19b5b54, 0xcc894043, 0xc787494e, 0xaedd3e05, 0xa5d33708, 0xb8c12c1f, 0xb3cf2512, 0x82e51a31, 0x89eb133c, 0x94f9082b, 0x9ff70126, 0x464de6bd, 0x4d43efb0, 0x5051f4a7, 0x5b5ffdaa, 0x6a75c289, 0x617bcb84, 0x7c69d093, 0x7767d99e, 0x1e3daed5, 0x1533a7d8, 0x0821bccf, 0x032fb5c2, 0x32058ae1, 0x390b83ec, 0x241998fb, 0x2f1791f6, 0x8d764dd6, 0x867844db, 0x9b6a5fcc, 0x906456c1, 0xa14e69e2, 0xaa4060ef, 0xb7527bf8, 0xbc5c72f5, 0xd50605be, 0xde080cb3, 0xc31a17a4, 0xc8141ea9, 0xf93e218a, 0xf2302887, 0xef223390, 0xe42c3a9d, 0x3d96dd06, 0x3698d40b, 0x2b8acf1c, 0x2084c611, 0x11aef932, 0x1aa0f03f, 0x07b2eb28, 0x0cbce225, 0x65e6956e, 0x6ee89c63, 0x73fa8774, 0x78f48e79, 0x49deb15a, 0x42d0b857, 0x5fc2a340, 0x54ccaa4d, 0xf741ecda, 0xfc4fe5d7, 0xe15dfec0, 0xea53f7cd, 0xdb79c8ee, 0xd077c1e3, 0xcd65daf4, 0xc66bd3f9, 0xaf31a4b2, 0xa43fadbf, 0xb92db6a8, 0xb223bfa5, 0x83098086, 0x8807898b, 0x9515929c, 0x9e1b9b91, 0x47a17c0a, 0x4caf7507, 0x51bd6e10, 0x5ab3671d, 0x6b99583e, 0x60975133, 0x7d854a24, 0x768b4329, 0x1fd13462, 0x14df3d6f, 0x09cd2678, 0x02c32f75, 0x33e91056, 0x38e7195b, 0x25f5024c, 0x2efb0b41, 0x8c9ad761, 0x8794de6c, 0x9a86c57b, 0x9188cc76, 0xa0a2f355, 0xabacfa58, 0xb6bee14f, 0xbdb0e842, 0xd4ea9f09, 0xdfe49604, 0xc2f68d13, 0xc9f8841e, 0xf8d2bb3d, 0xf3dcb230, 0xeecea927, 0xe5c0a02a, 0x3c7a47b1, 0x37744ebc, 0x2a6655ab, 0x21685ca6, 0x10426385, 0x1b4c6a88, 0x065e719f, 0x0d507892, 0x640a0fd9, 0x6f0406d4, 0x72161dc3, 0x791814ce, 0x48322bed, 0x433c22e0, 0x5e2e39f7, 0x552030fa, 0x01ec9ab7, 0x0ae293ba, 0x17f088ad, 0x1cfe81a0, 0x2dd4be83, 0x26dab78e, 0x3bc8ac99, 0x30c6a594, 0x599cd2df, 0x5292dbd2, 0x4f80c0c5, 0x448ec9c8, 0x75a4f6eb, 0x7eaaffe6, 0x63b8e4f1, 0x68b6edfc, 0xb10c0a67, 0xba02036a, 0xa710187d, 0xac1e1170, 0x9d342e53, 0x963a275e, 0x8b283c49, 0x80263544, 0xe97c420f, 0xe2724b02, 0xff605015, 0xf46e5918, 0xc544663b, 0xce4a6f36, 0xd3587421, 0xd8567d2c, 0x7a37a10c, 0x7139a801, 0x6c2bb316, 0x6725ba1b, 0x560f8538, 0x5d018c35, 0x40139722, 0x4b1d9e2f, 0x2247e964, 0x2949e069, 0x345bfb7e, 0x3f55f273, 0x0e7fcd50, 0x0571c45d, 0x1863df4a, 0x136dd647, 0xcad731dc, 0xc1d938d1, 0xdccb23c6, 0xd7c52acb, 0xe6ef15e8, 0xede11ce5, 0xf0f307f2, 0xfbfd0eff, 0x92a779b4, 0x99a970b9, 0x84bb6bae, 0x8fb562a3, 0xbe9f5d80, 0xb591548d, 0xa8834f9a, 0xa38d4697];\nconst U3 = [0x00000000, 0x0d0b0e09, 0x1a161c12, 0x171d121b, 0x342c3824, 0x3927362d, 0x2e3a2436, 0x23312a3f, 0x68587048, 0x65537e41, 0x724e6c5a, 0x7f456253, 0x5c74486c, 0x517f4665, 0x4662547e, 0x4b695a77, 0xd0b0e090, 0xddbbee99, 0xcaa6fc82, 0xc7adf28b, 0xe49cd8b4, 0xe997d6bd, 0xfe8ac4a6, 0xf381caaf, 0xb8e890d8, 0xb5e39ed1, 0xa2fe8cca, 0xaff582c3, 0x8cc4a8fc, 0x81cfa6f5, 0x96d2b4ee, 0x9bd9bae7, 0xbb7bdb3b, 0xb670d532, 0xa16dc729, 0xac66c920, 0x8f57e31f, 0x825ced16, 0x9541ff0d, 0x984af104, 0xd323ab73, 0xde28a57a, 0xc935b761, 0xc43eb968, 0xe70f9357, 0xea049d5e, 0xfd198f45, 0xf012814c, 0x6bcb3bab, 0x66c035a2, 0x71dd27b9, 0x7cd629b0, 0x5fe7038f, 0x52ec0d86, 0x45f11f9d, 0x48fa1194, 0x03934be3, 0x0e9845ea, 0x198557f1, 0x148e59f8, 0x37bf73c7, 0x3ab47dce, 0x2da96fd5, 0x20a261dc, 0x6df6ad76, 0x60fda37f, 0x77e0b164, 0x7aebbf6d, 0x59da9552, 0x54d19b5b, 0x43cc8940, 0x4ec78749, 0x05aedd3e, 0x08a5d337, 0x1fb8c12c, 0x12b3cf25, 0x3182e51a, 0x3c89eb13, 0x2b94f908, 0x269ff701, 0xbd464de6, 0xb04d43ef, 0xa75051f4, 0xaa5b5ffd, 0x896a75c2, 0x84617bcb, 0x937c69d0, 0x9e7767d9, 0xd51e3dae, 0xd81533a7, 0xcf0821bc, 0xc2032fb5, 0xe132058a, 0xec390b83, 0xfb241998, 0xf62f1791, 0xd68d764d, 0xdb867844, 0xcc9b6a5f, 0xc1906456, 0xe2a14e69, 0xefaa4060, 0xf8b7527b, 0xf5bc5c72, 0xbed50605, 0xb3de080c, 0xa4c31a17, 0xa9c8141e, 0x8af93e21, 0x87f23028, 0x90ef2233, 0x9de42c3a, 0x063d96dd, 0x0b3698d4, 0x1c2b8acf, 0x112084c6, 0x3211aef9, 0x3f1aa0f0, 0x2807b2eb, 0x250cbce2, 0x6e65e695, 0x636ee89c, 0x7473fa87, 0x7978f48e, 0x5a49deb1, 0x5742d0b8, 0x405fc2a3, 0x4d54ccaa, 0xdaf741ec, 0xd7fc4fe5, 0xc0e15dfe, 0xcdea53f7, 0xeedb79c8, 0xe3d077c1, 0xf4cd65da, 0xf9c66bd3, 0xb2af31a4, 0xbfa43fad, 0xa8b92db6, 0xa5b223bf, 0x86830980, 0x8b880789, 0x9c951592, 0x919e1b9b, 0x0a47a17c, 0x074caf75, 0x1051bd6e, 0x1d5ab367, 0x3e6b9958, 0x33609751, 0x247d854a, 0x29768b43, 0x621fd134, 0x6f14df3d, 0x7809cd26, 0x7502c32f, 0x5633e910, 0x5b38e719, 0x4c25f502, 0x412efb0b, 0x618c9ad7, 0x6c8794de, 0x7b9a86c5, 0x769188cc, 0x55a0a2f3, 0x58abacfa, 0x4fb6bee1, 0x42bdb0e8, 0x09d4ea9f, 0x04dfe496, 0x13c2f68d, 0x1ec9f884, 0x3df8d2bb, 0x30f3dcb2, 0x27eecea9, 0x2ae5c0a0, 0xb13c7a47, 0xbc37744e, 0xab2a6655, 0xa621685c, 0x85104263, 0x881b4c6a, 0x9f065e71, 0x920d5078, 0xd9640a0f, 0xd46f0406, 0xc372161d, 0xce791814, 0xed48322b, 0xe0433c22, 0xf75e2e39, 0xfa552030, 0xb701ec9a, 0xba0ae293, 0xad17f088, 0xa01cfe81, 0x832dd4be, 0x8e26dab7, 0x993bc8ac, 0x9430c6a5, 0xdf599cd2, 0xd25292db, 0xc54f80c0, 0xc8448ec9, 0xeb75a4f6, 0xe67eaaff, 0xf163b8e4, 0xfc68b6ed, 0x67b10c0a, 0x6aba0203, 0x7da71018, 0x70ac1e11, 0x539d342e, 0x5e963a27, 0x498b283c, 0x44802635, 0x0fe97c42, 0x02e2724b, 0x15ff6050, 0x18f46e59, 0x3bc54466, 0x36ce4a6f, 0x21d35874, 0x2cd8567d, 0x0c7a37a1, 0x017139a8, 0x166c2bb3, 0x1b6725ba, 0x38560f85, 0x355d018c, 0x22401397, 0x2f4b1d9e, 0x642247e9, 0x692949e0, 0x7e345bfb, 0x733f55f2, 0x500e7fcd, 0x5d0571c4, 0x4a1863df, 0x47136dd6, 0xdccad731, 0xd1c1d938, 0xc6dccb23, 0xcbd7c52a, 0xe8e6ef15, 0xe5ede11c, 0xf2f0f307, 0xfffbfd0e, 0xb492a779, 0xb999a970, 0xae84bb6b, 0xa38fb562, 0x80be9f5d, 0x8db59154, 0x9aa8834f, 0x97a38d46];\nconst U4 = [0x00000000, 0x090d0b0e, 0x121a161c, 0x1b171d12, 0x24342c38, 0x2d392736, 0x362e3a24, 0x3f23312a, 0x48685870, 0x4165537e, 0x5a724e6c, 0x537f4562, 0x6c5c7448, 0x65517f46, 0x7e466254, 0x774b695a, 0x90d0b0e0, 0x99ddbbee, 0x82caa6fc, 0x8bc7adf2, 0xb4e49cd8, 0xbde997d6, 0xa6fe8ac4, 0xaff381ca, 0xd8b8e890, 0xd1b5e39e, 0xcaa2fe8c, 0xc3aff582, 0xfc8cc4a8, 0xf581cfa6, 0xee96d2b4, 0xe79bd9ba, 0x3bbb7bdb, 0x32b670d5, 0x29a16dc7, 0x20ac66c9, 0x1f8f57e3, 0x16825ced, 0x0d9541ff, 0x04984af1, 0x73d323ab, 0x7ade28a5, 0x61c935b7, 0x68c43eb9, 0x57e70f93, 0x5eea049d, 0x45fd198f, 0x4cf01281, 0xab6bcb3b, 0xa266c035, 0xb971dd27, 0xb07cd629, 0x8f5fe703, 0x8652ec0d, 0x9d45f11f, 0x9448fa11, 0xe303934b, 0xea0e9845, 0xf1198557, 0xf8148e59, 0xc737bf73, 0xce3ab47d, 0xd52da96f, 0xdc20a261, 0x766df6ad, 0x7f60fda3, 0x6477e0b1, 0x6d7aebbf, 0x5259da95, 0x5b54d19b, 0x4043cc89, 0x494ec787, 0x3e05aedd, 0x3708a5d3, 0x2c1fb8c1, 0x2512b3cf, 0x1a3182e5, 0x133c89eb, 0x082b94f9, 0x01269ff7, 0xe6bd464d, 0xefb04d43, 0xf4a75051, 0xfdaa5b5f, 0xc2896a75, 0xcb84617b, 0xd0937c69, 0xd99e7767, 0xaed51e3d, 0xa7d81533, 0xbccf0821, 0xb5c2032f, 0x8ae13205, 0x83ec390b, 0x98fb2419, 0x91f62f17, 0x4dd68d76, 0x44db8678, 0x5fcc9b6a, 0x56c19064, 0x69e2a14e, 0x60efaa40, 0x7bf8b752, 0x72f5bc5c, 0x05bed506, 0x0cb3de08, 0x17a4c31a, 0x1ea9c814, 0x218af93e, 0x2887f230, 0x3390ef22, 0x3a9de42c, 0xdd063d96, 0xd40b3698, 0xcf1c2b8a, 0xc6112084, 0xf93211ae, 0xf03f1aa0, 0xeb2807b2, 0xe2250cbc, 0x956e65e6, 0x9c636ee8, 0x877473fa, 0x8e7978f4, 0xb15a49de, 0xb85742d0, 0xa3405fc2, 0xaa4d54cc, 0xecdaf741, 0xe5d7fc4f, 0xfec0e15d, 0xf7cdea53, 0xc8eedb79, 0xc1e3d077, 0xdaf4cd65, 0xd3f9c66b, 0xa4b2af31, 0xadbfa43f, 0xb6a8b92d, 0xbfa5b223, 0x80868309, 0x898b8807, 0x929c9515, 0x9b919e1b, 0x7c0a47a1, 0x75074caf, 0x6e1051bd, 0x671d5ab3, 0x583e6b99, 0x51336097, 0x4a247d85, 0x4329768b, 0x34621fd1, 0x3d6f14df, 0x267809cd, 0x2f7502c3, 0x105633e9, 0x195b38e7, 0x024c25f5, 0x0b412efb, 0xd7618c9a, 0xde6c8794, 0xc57b9a86, 0xcc769188, 0xf355a0a2, 0xfa58abac, 0xe14fb6be, 0xe842bdb0, 0x9f09d4ea, 0x9604dfe4, 0x8d13c2f6, 0x841ec9f8, 0xbb3df8d2, 0xb230f3dc, 0xa927eece, 0xa02ae5c0, 0x47b13c7a, 0x4ebc3774, 0x55ab2a66, 0x5ca62168, 0x63851042, 0x6a881b4c, 0x719f065e, 0x78920d50, 0x0fd9640a, 0x06d46f04, 0x1dc37216, 0x14ce7918, 0x2bed4832, 0x22e0433c, 0x39f75e2e, 0x30fa5520, 0x9ab701ec, 0x93ba0ae2, 0x88ad17f0, 0x81a01cfe, 0xbe832dd4, 0xb78e26da, 0xac993bc8, 0xa59430c6, 0xd2df599c, 0xdbd25292, 0xc0c54f80, 0xc9c8448e, 0xf6eb75a4, 0xffe67eaa, 0xe4f163b8, 0xedfc68b6, 0x0a67b10c, 0x036aba02, 0x187da710, 0x1170ac1e, 0x2e539d34, 0x275e963a, 0x3c498b28, 0x35448026, 0x420fe97c, 0x4b02e272, 0x5015ff60, 0x5918f46e, 0x663bc544, 0x6f36ce4a, 0x7421d358, 0x7d2cd856, 0xa10c7a37, 0xa8017139, 0xb3166c2b, 0xba1b6725, 0x8538560f, 0x8c355d01, 0x97224013, 0x9e2f4b1d, 0xe9642247, 0xe0692949, 0xfb7e345b, 0xf2733f55, 0xcd500e7f, 0xc45d0571, 0xdf4a1863, 0xd647136d, 0x31dccad7, 0x38d1c1d9, 0x23c6dccb, 0x2acbd7c5, 0x15e8e6ef, 0x1ce5ede1, 0x07f2f0f3, 0x0efffbfd, 0x79b492a7, 0x70b999a9, 0x6bae84bb, 0x62a38fb5, 0x5d80be9f, 0x548db591, 0x4f9aa883, 0x4697a38d];\nfunction convertToInt32(bytes) {\n    const result = [];\n    for (let i = 0; i < bytes.length; i += 4) {\n        result.push((bytes[i] << 24) | (bytes[i + 1] << 16) | (bytes[i + 2] << 8) | bytes[i + 3]);\n    }\n    return result;\n}\nexport class AES {\n    get key() { return __classPrivateFieldGet(this, _AES_key, \"f\").slice(); }\n    constructor(key) {\n        _AES_key.set(this, void 0);\n        _AES_Kd.set(this, void 0);\n        _AES_Ke.set(this, void 0);\n        if (!(this instanceof AES)) {\n            throw Error('AES must be instanitated with `new`');\n        }\n        __classPrivateFieldSet(this, _AES_key, new Uint8Array(key), \"f\");\n        const rounds = numberOfRounds[this.key.length];\n        if (rounds == null) {\n            throw new TypeError('invalid key size (must be 16, 24 or 32 bytes)');\n        }\n        // encryption round keys\n        __classPrivateFieldSet(this, _AES_Ke, [], \"f\");\n        // decryption round keys\n        __classPrivateFieldSet(this, _AES_Kd, [], \"f\");\n        for (let i = 0; i <= rounds; i++) {\n            __classPrivateFieldGet(this, _AES_Ke, \"f\").push([0, 0, 0, 0]);\n            __classPrivateFieldGet(this, _AES_Kd, \"f\").push([0, 0, 0, 0]);\n        }\n        const roundKeyCount = (rounds + 1) * 4;\n        const KC = this.key.length / 4;\n        // convert the key into ints\n        const tk = convertToInt32(this.key);\n        // copy values into round key arrays\n        let index;\n        for (let i = 0; i < KC; i++) {\n            index = i >> 2;\n            __classPrivateFieldGet(this, _AES_Ke, \"f\")[index][i % 4] = tk[i];\n            __classPrivateFieldGet(this, _AES_Kd, \"f\")[rounds - index][i % 4] = tk[i];\n        }\n        // key expansion (fips-197 section 5.2)\n        let rconpointer = 0;\n        let t = KC, tt;\n        while (t < roundKeyCount) {\n            tt = tk[KC - 1];\n            tk[0] ^= ((S[(tt >> 16) & 0xFF] << 24) ^\n                (S[(tt >> 8) & 0xFF] << 16) ^\n                (S[tt & 0xFF] << 8) ^\n                S[(tt >> 24) & 0xFF] ^\n                (rcon[rconpointer] << 24));\n            rconpointer += 1;\n            // key expansion (for non-256 bit)\n            if (KC != 8) {\n                for (let i = 1; i < KC; i++) {\n                    tk[i] ^= tk[i - 1];\n                }\n                // key expansion for 256-bit keys is \"slightly different\" (fips-197)\n            }\n            else {\n                for (let i = 1; i < (KC / 2); i++) {\n                    tk[i] ^= tk[i - 1];\n                }\n                tt = tk[(KC / 2) - 1];\n                tk[KC / 2] ^= (S[tt & 0xFF] ^\n                    (S[(tt >> 8) & 0xFF] << 8) ^\n                    (S[(tt >> 16) & 0xFF] << 16) ^\n                    (S[(tt >> 24) & 0xFF] << 24));\n                for (let i = (KC / 2) + 1; i < KC; i++) {\n                    tk[i] ^= tk[i - 1];\n                }\n            }\n            // copy values into round key arrays\n            let i = 0, r, c;\n            while (i < KC && t < roundKeyCount) {\n                r = t >> 2;\n                c = t % 4;\n                __classPrivateFieldGet(this, _AES_Ke, \"f\")[r][c] = tk[i];\n                __classPrivateFieldGet(this, _AES_Kd, \"f\")[rounds - r][c] = tk[i++];\n                t++;\n            }\n        }\n        // inverse-cipher-ify the decryption round key (fips-197 section 5.3)\n        for (let r = 1; r < rounds; r++) {\n            for (let c = 0; c < 4; c++) {\n                tt = __classPrivateFieldGet(this, _AES_Kd, \"f\")[r][c];\n                __classPrivateFieldGet(this, _AES_Kd, \"f\")[r][c] = (U1[(tt >> 24) & 0xFF] ^\n                    U2[(tt >> 16) & 0xFF] ^\n                    U3[(tt >> 8) & 0xFF] ^\n                    U4[tt & 0xFF]);\n            }\n        }\n    }\n    encrypt(plaintext) {\n        if (plaintext.length != 16) {\n            throw new TypeError('invalid plaintext size (must be 16 bytes)');\n        }\n        const rounds = __classPrivateFieldGet(this, _AES_Ke, \"f\").length - 1;\n        const a = [0, 0, 0, 0];\n        // convert plaintext to (ints ^ key)\n        let t = convertToInt32(plaintext);\n        for (let i = 0; i < 4; i++) {\n            t[i] ^= __classPrivateFieldGet(this, _AES_Ke, \"f\")[0][i];\n        }\n        // apply round transforms\n        for (let r = 1; r < rounds; r++) {\n            for (let i = 0; i < 4; i++) {\n                a[i] = (T1[(t[i] >> 24) & 0xff] ^\n                    T2[(t[(i + 1) % 4] >> 16) & 0xff] ^\n                    T3[(t[(i + 2) % 4] >> 8) & 0xff] ^\n                    T4[t[(i + 3) % 4] & 0xff] ^\n                    __classPrivateFieldGet(this, _AES_Ke, \"f\")[r][i]);\n            }\n            t = a.slice();\n        }\n        // the last round is special\n        const result = new Uint8Array(16);\n        let tt = 0;\n        for (let i = 0; i < 4; i++) {\n            tt = __classPrivateFieldGet(this, _AES_Ke, \"f\")[rounds][i];\n            result[4 * i] = (S[(t[i] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n            result[4 * i + 1] = (S[(t[(i + 1) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n            result[4 * i + 2] = (S[(t[(i + 2) % 4] >> 8) & 0xff] ^ (tt >> 8)) & 0xff;\n            result[4 * i + 3] = (S[t[(i + 3) % 4] & 0xff] ^ tt) & 0xff;\n        }\n        return result;\n    }\n    decrypt(ciphertext) {\n        if (ciphertext.length != 16) {\n            throw new TypeError('invalid ciphertext size (must be 16 bytes)');\n        }\n        const rounds = __classPrivateFieldGet(this, _AES_Kd, \"f\").length - 1;\n        const a = [0, 0, 0, 0];\n        // convert plaintext to (ints ^ key)\n        let t = convertToInt32(ciphertext);\n        for (let i = 0; i < 4; i++) {\n            t[i] ^= __classPrivateFieldGet(this, _AES_Kd, \"f\")[0][i];\n        }\n        // apply round transforms\n        for (let r = 1; r < rounds; r++) {\n            for (let i = 0; i < 4; i++) {\n                a[i] = (T5[(t[i] >> 24) & 0xff] ^\n                    T6[(t[(i + 3) % 4] >> 16) & 0xff] ^\n                    T7[(t[(i + 2) % 4] >> 8) & 0xff] ^\n                    T8[t[(i + 1) % 4] & 0xff] ^\n                    __classPrivateFieldGet(this, _AES_Kd, \"f\")[r][i]);\n            }\n            t = a.slice();\n        }\n        // the last round is special\n        const result = new Uint8Array(16);\n        let tt = 0;\n        for (let i = 0; i < 4; i++) {\n            tt = __classPrivateFieldGet(this, _AES_Kd, \"f\")[rounds][i];\n            result[4 * i] = (Si[(t[i] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n            result[4 * i + 1] = (Si[(t[(i + 3) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n            result[4 * i + 2] = (Si[(t[(i + 2) % 4] >> 8) & 0xff] ^ (tt >> 8)) & 0xff;\n            result[4 * i + 3] = (Si[t[(i + 1) % 4] & 0xff] ^ tt) & 0xff;\n        }\n        return result;\n    }\n}\n_AES_key = new WeakMap(), _AES_Kd = new WeakMap(), _AES_Ke = new WeakMap();\n//# sourceMappingURL=aes.js.map","import { AES } from \"./aes.js\";\nexport class ModeOfOperation {\n    constructor(name, key, cls) {\n        if (cls && !(this instanceof cls)) {\n            throw new Error(`${name} must be instantiated with \"new\"`);\n        }\n        Object.defineProperties(this, {\n            aes: { enumerable: true, value: new AES(key) },\n            name: { enumerable: true, value: name }\n        });\n    }\n}\n//# sourceMappingURL=mode.js.map","// Cipher Block Chaining\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CBC_iv, _CBC_lastBlock;\nimport { ModeOfOperation } from \"./mode.js\";\nexport class CBC extends ModeOfOperation {\n    constructor(key, iv) {\n        super(\"ECC\", key, CBC);\n        _CBC_iv.set(this, void 0);\n        _CBC_lastBlock.set(this, void 0);\n        if (iv) {\n            if (iv.length % 16) {\n                throw new TypeError(\"invalid iv size (must be 16 bytes)\");\n            }\n            __classPrivateFieldSet(this, _CBC_iv, new Uint8Array(iv), \"f\");\n        }\n        else {\n            __classPrivateFieldSet(this, _CBC_iv, new Uint8Array(16), \"f\");\n        }\n        __classPrivateFieldSet(this, _CBC_lastBlock, this.iv, \"f\");\n    }\n    get iv() { return new Uint8Array(__classPrivateFieldGet(this, _CBC_iv, \"f\")); }\n    encrypt(plaintext) {\n        if (plaintext.length % 16) {\n            throw new TypeError(\"invalid plaintext size (must be multiple of 16 bytes)\");\n        }\n        const ciphertext = new Uint8Array(plaintext.length);\n        for (let i = 0; i < plaintext.length; i += 16) {\n            for (let j = 0; j < 16; j++) {\n                __classPrivateFieldGet(this, _CBC_lastBlock, \"f\")[j] ^= plaintext[i + j];\n            }\n            __classPrivateFieldSet(this, _CBC_lastBlock, this.aes.encrypt(__classPrivateFieldGet(this, _CBC_lastBlock, \"f\")), \"f\");\n            ciphertext.set(__classPrivateFieldGet(this, _CBC_lastBlock, \"f\"), i);\n        }\n        return ciphertext;\n    }\n    decrypt(ciphertext) {\n        if (ciphertext.length % 16) {\n            throw new TypeError(\"invalid ciphertext size (must be multiple of 16 bytes)\");\n        }\n        const plaintext = new Uint8Array(ciphertext.length);\n        for (let i = 0; i < ciphertext.length; i += 16) {\n            const block = this.aes.decrypt(ciphertext.subarray(i, i + 16));\n            for (let j = 0; j < 16; j++) {\n                plaintext[i + j] = block[j] ^ __classPrivateFieldGet(this, _CBC_lastBlock, \"f\")[j];\n                __classPrivateFieldGet(this, _CBC_lastBlock, \"f\")[j] = ciphertext[i + j];\n            }\n        }\n        return plaintext;\n    }\n}\n_CBC_iv = new WeakMap(), _CBC_lastBlock = new WeakMap();\n//# sourceMappingURL=mode-cbc.js.map","// Counter Mode\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CTR_remaining, _CTR_remainingIndex, _CTR_counter;\nimport { ModeOfOperation } from \"./mode.js\";\nexport class CTR extends ModeOfOperation {\n    constructor(key, initialValue) {\n        super(\"CTR\", key, CTR);\n        // Remaining bytes for the one-time pad\n        _CTR_remaining.set(this, void 0);\n        _CTR_remainingIndex.set(this, void 0);\n        // The current counter\n        _CTR_counter.set(this, void 0);\n        __classPrivateFieldSet(this, _CTR_counter, new Uint8Array(16), \"f\");\n        __classPrivateFieldGet(this, _CTR_counter, \"f\").fill(0);\n        __classPrivateFieldSet(this, _CTR_remaining, __classPrivateFieldGet(this, _CTR_counter, \"f\"), \"f\"); // This will be discarded immediately\n        __classPrivateFieldSet(this, _CTR_remainingIndex, 16, \"f\");\n        if (initialValue == null) {\n            initialValue = 1;\n        }\n        if (typeof (initialValue) === \"number\") {\n            this.setCounterValue(initialValue);\n        }\n        else {\n            this.setCounterBytes(initialValue);\n        }\n    }\n    get counter() { return new Uint8Array(__classPrivateFieldGet(this, _CTR_counter, \"f\")); }\n    setCounterValue(value) {\n        if (!Number.isInteger(value) || value < 0 || value > Number.MAX_SAFE_INTEGER) {\n            throw new TypeError(\"invalid counter initial integer value\");\n        }\n        for (let index = 15; index >= 0; --index) {\n            __classPrivateFieldGet(this, _CTR_counter, \"f\")[index] = value % 256;\n            value = Math.floor(value / 256);\n        }\n    }\n    setCounterBytes(value) {\n        if (value.length !== 16) {\n            throw new TypeError(\"invalid counter initial Uint8Array value length\");\n        }\n        __classPrivateFieldGet(this, _CTR_counter, \"f\").set(value);\n    }\n    increment() {\n        for (let i = 15; i >= 0; i--) {\n            if (__classPrivateFieldGet(this, _CTR_counter, \"f\")[i] === 255) {\n                __classPrivateFieldGet(this, _CTR_counter, \"f\")[i] = 0;\n            }\n            else {\n                __classPrivateFieldGet(this, _CTR_counter, \"f\")[i]++;\n                break;\n            }\n        }\n    }\n    encrypt(plaintext) {\n        var _a, _b;\n        const crypttext = new Uint8Array(plaintext);\n        for (let i = 0; i < crypttext.length; i++) {\n            if (__classPrivateFieldGet(this, _CTR_remainingIndex, \"f\") === 16) {\n                __classPrivateFieldSet(this, _CTR_remaining, this.aes.encrypt(__classPrivateFieldGet(this, _CTR_counter, \"f\")), \"f\");\n                __classPrivateFieldSet(this, _CTR_remainingIndex, 0, \"f\");\n                this.increment();\n            }\n            crypttext[i] ^= __classPrivateFieldGet(this, _CTR_remaining, \"f\")[__classPrivateFieldSet(this, _CTR_remainingIndex, (_b = __classPrivateFieldGet(this, _CTR_remainingIndex, \"f\"), _a = _b++, _b), \"f\"), _a];\n        }\n        return crypttext;\n    }\n    decrypt(ciphertext) {\n        return this.encrypt(ciphertext);\n    }\n}\n_CTR_remaining = new WeakMap(), _CTR_remainingIndex = new WeakMap(), _CTR_counter = new WeakMap();\n//# sourceMappingURL=mode-ctr.js.map","export function pkcs7Pad(data) {\n    const padder = 16 - (data.length % 16);\n    const result = new Uint8Array(data.length + padder);\n    result.set(data);\n    for (let i = data.length; i < result.length; i++) {\n        result[i] = padder;\n    }\n    return result;\n}\nexport function pkcs7Strip(data) {\n    if (data.length < 16) {\n        throw new TypeError('PKCS#7 invalid length');\n    }\n    const padder = data[data.length - 1];\n    if (padder > 16) {\n        throw new TypeError('PKCS#7 padding byte out of range');\n    }\n    const length = data.length - padder;\n    for (let i = 0; i < padder; i++) {\n        if (data[length + i] !== padder) {\n            throw new TypeError('PKCS#7 invalid padding byte');\n        }\n    }\n    return new Uint8Array(data.subarray(0, length));\n}\n//# sourceMappingURL=padding.js.map","/**\n *  @_ignore\n */\nimport { getBytesCopy, assertArgument, toUtf8Bytes } from \"../utils/index.js\";\nexport function looseArrayify(hexString) {\n    if (typeof (hexString) === \"string\" && !hexString.startsWith(\"0x\")) {\n        hexString = \"0x\" + hexString;\n    }\n    return getBytesCopy(hexString);\n}\nexport function zpad(value, length) {\n    value = String(value);\n    while (value.length < length) {\n        value = '0' + value;\n    }\n    return value;\n}\nexport function getPassword(password) {\n    if (typeof (password) === 'string') {\n        return toUtf8Bytes(password, \"NFKC\");\n    }\n    return getBytesCopy(password);\n}\nexport function spelunk(object, _path) {\n    const match = _path.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);\n    assertArgument(match != null, \"invalid path\", \"path\", _path);\n    const path = match[1];\n    const type = match[3];\n    const reqd = (match[4] === \"!\");\n    let cur = object;\n    for (const comp of path.toLowerCase().split('.')) {\n        // Search for a child object with a case-insensitive matching key\n        if (Array.isArray(cur)) {\n            if (!comp.match(/^[0-9]+$/)) {\n                break;\n            }\n            cur = cur[parseInt(comp)];\n        }\n        else if (typeof (cur) === \"object\") {\n            let found = null;\n            for (const key in cur) {\n                if (key.toLowerCase() === comp) {\n                    found = cur[key];\n                    break;\n                }\n            }\n            cur = found;\n        }\n        else {\n            cur = null;\n        }\n        if (cur == null) {\n            break;\n        }\n    }\n    assertArgument(!reqd || cur != null, \"missing required value\", \"path\", path);\n    if (type && cur != null) {\n        if (type === \"int\") {\n            if (typeof (cur) === \"string\" && cur.match(/^-?[0-9]+$/)) {\n                return parseInt(cur);\n            }\n            else if (Number.isSafeInteger(cur)) {\n                return cur;\n            }\n        }\n        if (type === \"number\") {\n            if (typeof (cur) === \"string\" && cur.match(/^-?[0-9.]*$/)) {\n                return parseFloat(cur);\n            }\n        }\n        if (type === \"data\") {\n            if (typeof (cur) === \"string\") {\n                return looseArrayify(cur);\n            }\n        }\n        if (type === \"array\" && Array.isArray(cur)) {\n            return cur;\n        }\n        if (type === typeof (cur)) {\n            return cur;\n        }\n        assertArgument(false, `wrong type found for ${type} `, \"path\", path);\n    }\n    return cur;\n}\n/*\nexport function follow(object: any, path: string): null | string {\n    let currentChild = object;\n\n    for (const comp of path.toLowerCase().split('/')) {\n\n        // Search for a child object with a case-insensitive matching key\n        let matchingChild = null;\n        for (const key in currentChild) {\n             if (key.toLowerCase() === comp) {\n                 matchingChild = currentChild[key];\n                 break;\n             }\n        }\n\n        if (matchingChild === null) { return null; }\n\n        currentChild = matchingChild;\n    }\n\n    return currentChild;\n}\n\n// \"path/to/something:type!\"\nexport function followRequired(data: any, path: string): string {\n    const value = follow(data, path);\n    if (value != null) { return value; }\n    return logger.throwArgumentError(\"invalid value\", `data:${ path }`,\n    JSON.stringify(data));\n}\n*/\n// See: https://www.ietf.org/rfc/rfc4122.txt (Section 4.4)\n/*\nexport function uuidV4(randomBytes: BytesLike): string {\n    const bytes = getBytes(randomBytes, \"randomBytes\");\n\n    // Section: 4.1.3:\n    // - time_hi_and_version[12:16] = 0b0100\n    bytes[6] = (bytes[6] & 0x0f) | 0x40;\n\n    // Section 4.4\n    // - clock_seq_hi_and_reserved[6] = 0b0\n    // - clock_seq_hi_and_reserved[7] = 0b1\n    bytes[8] = (bytes[8] & 0x3f) | 0x80;\n\n    const value = hexlify(bytes);\n\n    return [\n       value.substring(2, 10),\n       value.substring(10, 14),\n       value.substring(14, 18),\n       value.substring(18, 22),\n       value.substring(22, 34),\n    ].join(\"-\");\n}\n*/\n//# sourceMappingURL=utils.js.map","/**\n *  The JSON Wallet formats allow a simple way to store the private\n *  keys needed in Ethereum along with related information and allows\n *  for extensible forms of encryption.\n *\n *  These utilities facilitate decrypting and encrypting the most common\n *  JSON Wallet formats.\n *\n *  @_subsection: api/wallet:JSON Wallets  [json-wallets]\n */\nimport { CTR } from \"aes-js\";\nimport { getAddress } from \"../address/index.js\";\nimport { keccak256, pbkdf2, randomBytes, scrypt, scryptSync } from \"../crypto/index.js\";\nimport { computeAddress } from \"../transaction/index.js\";\nimport { concat, getBytes, hexlify, uuidV4, assert, assertArgument } from \"../utils/index.js\";\nimport { getPassword, spelunk, zpad } from \"./utils.js\";\nimport { version } from \"../_version.js\";\nconst defaultPath = \"m/44'/60'/0'/0/0\";\n/**\n *  Returns true if %%json%% is a valid JSON Keystore Wallet.\n */\nexport function isKeystoreJson(json) {\n    try {\n        const data = JSON.parse(json);\n        const version = ((data.version != null) ? parseInt(data.version) : 0);\n        if (version === 3) {\n            return true;\n        }\n    }\n    catch (error) { }\n    return false;\n}\nfunction decrypt(data, key, ciphertext) {\n    const cipher = spelunk(data, \"crypto.cipher:string\");\n    if (cipher === \"aes-128-ctr\") {\n        const iv = spelunk(data, \"crypto.cipherparams.iv:data!\");\n        const aesCtr = new CTR(key, iv);\n        return hexlify(aesCtr.decrypt(ciphertext));\n    }\n    assert(false, \"unsupported cipher\", \"UNSUPPORTED_OPERATION\", {\n        operation: \"decrypt\"\n    });\n}\nfunction getAccount(data, _key) {\n    const key = getBytes(_key);\n    const ciphertext = spelunk(data, \"crypto.ciphertext:data!\");\n    const computedMAC = hexlify(keccak256(concat([key.slice(16, 32), ciphertext]))).substring(2);\n    assertArgument(computedMAC === spelunk(data, \"crypto.mac:string!\").toLowerCase(), \"incorrect password\", \"password\", \"[ REDACTED ]\");\n    const privateKey = decrypt(data, key.slice(0, 16), ciphertext);\n    const address = computeAddress(privateKey);\n    if (data.address) {\n        let check = data.address.toLowerCase();\n        if (!check.startsWith(\"0x\")) {\n            check = \"0x\" + check;\n        }\n        assertArgument(getAddress(check) === address, \"keystore address/privateKey mismatch\", \"address\", data.address);\n    }\n    const account = { address, privateKey };\n    // Version 0.1 x-ethers metadata must contain an encrypted mnemonic phrase\n    const version = spelunk(data, \"x-ethers.version:string\");\n    if (version === \"0.1\") {\n        const mnemonicKey = key.slice(32, 64);\n        const mnemonicCiphertext = spelunk(data, \"x-ethers.mnemonicCiphertext:data!\");\n        const mnemonicIv = spelunk(data, \"x-ethers.mnemonicCounter:data!\");\n        const mnemonicAesCtr = new CTR(mnemonicKey, mnemonicIv);\n        account.mnemonic = {\n            path: (spelunk(data, \"x-ethers.path:string\") || defaultPath),\n            locale: (spelunk(data, \"x-ethers.locale:string\") || \"en\"),\n            entropy: hexlify(getBytes(mnemonicAesCtr.decrypt(mnemonicCiphertext)))\n        };\n    }\n    return account;\n}\nfunction getDecryptKdfParams(data) {\n    const kdf = spelunk(data, \"crypto.kdf:string\");\n    if (kdf && typeof (kdf) === \"string\") {\n        if (kdf.toLowerCase() === \"scrypt\") {\n            const salt = spelunk(data, \"crypto.kdfparams.salt:data!\");\n            const N = spelunk(data, \"crypto.kdfparams.n:int!\");\n            const r = spelunk(data, \"crypto.kdfparams.r:int!\");\n            const p = spelunk(data, \"crypto.kdfparams.p:int!\");\n            // Make sure N is a power of 2\n            assertArgument(N > 0 && (N & (N - 1)) === 0, \"invalid kdf.N\", \"kdf.N\", N);\n            assertArgument(r > 0 && p > 0, \"invalid kdf\", \"kdf\", kdf);\n            const dkLen = spelunk(data, \"crypto.kdfparams.dklen:int!\");\n            assertArgument(dkLen === 32, \"invalid kdf.dklen\", \"kdf.dflen\", dkLen);\n            return { name: \"scrypt\", salt, N, r, p, dkLen: 64 };\n        }\n        else if (kdf.toLowerCase() === \"pbkdf2\") {\n            const salt = spelunk(data, \"crypto.kdfparams.salt:data!\");\n            const prf = spelunk(data, \"crypto.kdfparams.prf:string!\");\n            const algorithm = prf.split(\"-\").pop();\n            assertArgument(algorithm === \"sha256\" || algorithm === \"sha512\", \"invalid kdf.pdf\", \"kdf.pdf\", prf);\n            const count = spelunk(data, \"crypto.kdfparams.c:int!\");\n            const dkLen = spelunk(data, \"crypto.kdfparams.dklen:int!\");\n            assertArgument(dkLen === 32, \"invalid kdf.dklen\", \"kdf.dklen\", dkLen);\n            return { name: \"pbkdf2\", salt, count, dkLen, algorithm };\n        }\n    }\n    assertArgument(false, \"unsupported key-derivation function\", \"kdf\", kdf);\n}\n/**\n *  Returns the account details for the JSON Keystore Wallet %%json%%\n *  using %%password%%.\n *\n *  It is preferred to use the [async version](decryptKeystoreJson)\n *  instead, which allows a [[ProgressCallback]] to keep the user informed\n *  as to the decryption status.\n *\n *  This method will block the event loop (freezing all UI) until decryption\n *  is complete, which can take quite some time, depending on the wallet\n *  paramters and platform.\n */\nexport function decryptKeystoreJsonSync(json, _password) {\n    const data = JSON.parse(json);\n    const password = getPassword(_password);\n    const params = getDecryptKdfParams(data);\n    if (params.name === \"pbkdf2\") {\n        const { salt, count, dkLen, algorithm } = params;\n        const key = pbkdf2(password, salt, count, dkLen, algorithm);\n        return getAccount(data, key);\n    }\n    assert(params.name === \"scrypt\", \"cannot be reached\", \"UNKNOWN_ERROR\", { params });\n    const { salt, N, r, p, dkLen } = params;\n    const key = scryptSync(password, salt, N, r, p, dkLen);\n    return getAccount(data, key);\n}\nfunction stall(duration) {\n    return new Promise((resolve) => { setTimeout(() => { resolve(); }, duration); });\n}\n/**\n *  Resolves to the decrypted JSON Keystore Wallet %%json%% using the\n *  %%password%%.\n *\n *  If provided, %%progress%% will be called periodically during the\n *  decrpytion to provide feedback, and if the function returns\n *  ``false`` will halt decryption.\n *\n *  The %%progressCallback%% will **always** receive ``0`` before\n *  decryption begins and ``1`` when complete.\n */\nexport async function decryptKeystoreJson(json, _password, progress) {\n    const data = JSON.parse(json);\n    const password = getPassword(_password);\n    const params = getDecryptKdfParams(data);\n    if (params.name === \"pbkdf2\") {\n        if (progress) {\n            progress(0);\n            await stall(0);\n        }\n        const { salt, count, dkLen, algorithm } = params;\n        const key = pbkdf2(password, salt, count, dkLen, algorithm);\n        if (progress) {\n            progress(1);\n            await stall(0);\n        }\n        return getAccount(data, key);\n    }\n    assert(params.name === \"scrypt\", \"cannot be reached\", \"UNKNOWN_ERROR\", { params });\n    const { salt, N, r, p, dkLen } = params;\n    const key = await scrypt(password, salt, N, r, p, dkLen, progress);\n    return getAccount(data, key);\n}\nfunction getEncryptKdfParams(options) {\n    // Check/generate the salt\n    const salt = (options.salt != null) ? getBytes(options.salt, \"options.salt\") : randomBytes(32);\n    // Override the scrypt password-based key derivation function parameters\n    let N = (1 << 17), r = 8, p = 1;\n    if (options.scrypt) {\n        if (options.scrypt.N) {\n            N = options.scrypt.N;\n        }\n        if (options.scrypt.r) {\n            r = options.scrypt.r;\n        }\n        if (options.scrypt.p) {\n            p = options.scrypt.p;\n        }\n    }\n    assertArgument(typeof (N) === \"number\" && N > 0 && Number.isSafeInteger(N) && (BigInt(N) & BigInt(N - 1)) === BigInt(0), \"invalid scrypt N parameter\", \"options.N\", N);\n    assertArgument(typeof (r) === \"number\" && r > 0 && Number.isSafeInteger(r), \"invalid scrypt r parameter\", \"options.r\", r);\n    assertArgument(typeof (p) === \"number\" && p > 0 && Number.isSafeInteger(p), \"invalid scrypt p parameter\", \"options.p\", p);\n    return { name: \"scrypt\", dkLen: 32, salt, N, r, p };\n}\nfunction _encryptKeystore(key, kdf, account, options) {\n    const privateKey = getBytes(account.privateKey, \"privateKey\");\n    // Override initialization vector\n    const iv = (options.iv != null) ? getBytes(options.iv, \"options.iv\") : randomBytes(16);\n    assertArgument(iv.length === 16, \"invalid options.iv length\", \"options.iv\", options.iv);\n    // Override the uuid\n    const uuidRandom = (options.uuid != null) ? getBytes(options.uuid, \"options.uuid\") : randomBytes(16);\n    assertArgument(uuidRandom.length === 16, \"invalid options.uuid length\", \"options.uuid\", options.iv);\n    // This will be used to encrypt the wallet (as per Web3 secret storage)\n    // - 32 bytes   As normal for the Web3 secret storage (derivedKey, macPrefix)\n    // - 32 bytes   AES key to encrypt mnemonic with (required here to be Ethers Wallet)\n    const derivedKey = key.slice(0, 16);\n    const macPrefix = key.slice(16, 32);\n    // Encrypt the private key\n    const aesCtr = new CTR(derivedKey, iv);\n    const ciphertext = getBytes(aesCtr.encrypt(privateKey));\n    // Compute the message authentication code, used to check the password\n    const mac = keccak256(concat([macPrefix, ciphertext]));\n    // See: https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition\n    const data = {\n        address: account.address.substring(2).toLowerCase(),\n        id: uuidV4(uuidRandom),\n        version: 3,\n        Crypto: {\n            cipher: \"aes-128-ctr\",\n            cipherparams: {\n                iv: hexlify(iv).substring(2),\n            },\n            ciphertext: hexlify(ciphertext).substring(2),\n            kdf: \"scrypt\",\n            kdfparams: {\n                salt: hexlify(kdf.salt).substring(2),\n                n: kdf.N,\n                dklen: 32,\n                p: kdf.p,\n                r: kdf.r\n            },\n            mac: mac.substring(2)\n        }\n    };\n    // If we have a mnemonic, encrypt it into the JSON wallet\n    if (account.mnemonic) {\n        const client = (options.client != null) ? options.client : `ethers/${version}`;\n        const path = account.mnemonic.path || defaultPath;\n        const locale = account.mnemonic.locale || \"en\";\n        const mnemonicKey = key.slice(32, 64);\n        const entropy = getBytes(account.mnemonic.entropy, \"account.mnemonic.entropy\");\n        const mnemonicIv = randomBytes(16);\n        const mnemonicAesCtr = new CTR(mnemonicKey, mnemonicIv);\n        const mnemonicCiphertext = getBytes(mnemonicAesCtr.encrypt(entropy));\n        const now = new Date();\n        const timestamp = (now.getUTCFullYear() + \"-\" +\n            zpad(now.getUTCMonth() + 1, 2) + \"-\" +\n            zpad(now.getUTCDate(), 2) + \"T\" +\n            zpad(now.getUTCHours(), 2) + \"-\" +\n            zpad(now.getUTCMinutes(), 2) + \"-\" +\n            zpad(now.getUTCSeconds(), 2) + \".0Z\");\n        const gethFilename = (\"UTC--\" + timestamp + \"--\" + data.address);\n        data[\"x-ethers\"] = {\n            client, gethFilename, path, locale,\n            mnemonicCounter: hexlify(mnemonicIv).substring(2),\n            mnemonicCiphertext: hexlify(mnemonicCiphertext).substring(2),\n            version: \"0.1\"\n        };\n    }\n    return JSON.stringify(data);\n}\n/**\n *  Return the JSON Keystore Wallet for %%account%% encrypted with\n *  %%password%%.\n *\n *  The %%options%% can be used to tune the password-based key\n *  derivation function parameters, explicitly set the random values\n *  used. Any provided [[ProgressCallback]] is ignord.\n */\nexport function encryptKeystoreJsonSync(account, password, options) {\n    if (options == null) {\n        options = {};\n    }\n    const passwordBytes = getPassword(password);\n    const kdf = getEncryptKdfParams(options);\n    const key = scryptSync(passwordBytes, kdf.salt, kdf.N, kdf.r, kdf.p, 64);\n    return _encryptKeystore(getBytes(key), kdf, account, options);\n}\n/**\n *  Resolved to the JSON Keystore Wallet for %%account%% encrypted\n *  with %%password%%.\n *\n *  The %%options%% can be used to tune the password-based key\n *  derivation function parameters, explicitly set the random values\n *  used and provide a [[ProgressCallback]] to receive periodic updates\n *  on the completion status..\n */\nexport async function encryptKeystoreJson(account, password, options) {\n    if (options == null) {\n        options = {};\n    }\n    const passwordBytes = getPassword(password);\n    const kdf = getEncryptKdfParams(options);\n    const key = await scrypt(passwordBytes, kdf.salt, kdf.N, kdf.r, kdf.p, 64, options.progressCallback);\n    return _encryptKeystore(getBytes(key), kdf, account, options);\n}\n//# sourceMappingURL=json-keystore.js.map","/**\n *  Explain HD Wallets..\n *\n *  @_subsection: api/wallet:HD Wallets  [hd-wallets]\n */\nimport { computeHmac, randomBytes, ripemd160, SigningKey, sha256 } from \"../crypto/index.js\";\nimport { VoidSigner } from \"../providers/index.js\";\nimport { computeAddress } from \"../transaction/index.js\";\nimport { concat, dataSlice, decodeBase58, defineProperties, encodeBase58, getBytes, hexlify, isBytesLike, getNumber, toBeArray, toBigInt, toBeHex, assertPrivate, assert, assertArgument } from \"../utils/index.js\";\nimport { LangEn } from \"../wordlists/lang-en.js\";\nimport { BaseWallet } from \"./base-wallet.js\";\nimport { Mnemonic } from \"./mnemonic.js\";\nimport { encryptKeystoreJson, encryptKeystoreJsonSync, } from \"./json-keystore.js\";\n/**\n *  The default derivation path for Ethereum HD Nodes. (i.e. ``\"m/44'/60'/0'/0/0\"``)\n */\nexport const defaultPath = \"m/44'/60'/0'/0/0\";\n// \"Bitcoin seed\"\nconst MasterSecret = new Uint8Array([66, 105, 116, 99, 111, 105, 110, 32, 115, 101, 101, 100]);\nconst HardenedBit = 0x80000000;\nconst N = BigInt(\"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141\");\nconst Nibbles = \"0123456789abcdef\";\nfunction zpad(value, length) {\n    let result = \"\";\n    while (value) {\n        result = Nibbles[value % 16] + result;\n        value = Math.trunc(value / 16);\n    }\n    while (result.length < length * 2) {\n        result = \"0\" + result;\n    }\n    return \"0x\" + result;\n}\nfunction encodeBase58Check(_value) {\n    const value = getBytes(_value);\n    const check = dataSlice(sha256(sha256(value)), 0, 4);\n    const bytes = concat([value, check]);\n    return encodeBase58(bytes);\n}\nconst _guard = {};\nfunction ser_I(index, chainCode, publicKey, privateKey) {\n    const data = new Uint8Array(37);\n    if (index & HardenedBit) {\n        assert(privateKey != null, \"cannot derive child of neutered node\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"deriveChild\"\n        });\n        // Data = 0x00 || ser_256(k_par)\n        data.set(getBytes(privateKey), 1);\n    }\n    else {\n        // Data = ser_p(point(k_par))\n        data.set(getBytes(publicKey));\n    }\n    // Data += ser_32(i)\n    for (let i = 24; i >= 0; i -= 8) {\n        data[33 + (i >> 3)] = ((index >> (24 - i)) & 0xff);\n    }\n    const I = getBytes(computeHmac(\"sha512\", chainCode, data));\n    return { IL: I.slice(0, 32), IR: I.slice(32) };\n}\nfunction derivePath(node, path) {\n    const components = path.split(\"/\");\n    assertArgument(components.length > 0, \"invalid path\", \"path\", path);\n    if (components[0] === \"m\") {\n        assertArgument(node.depth === 0, `cannot derive root path (i.e. path starting with \"m/\") for a node at non-zero depth ${node.depth}`, \"path\", path);\n        components.shift();\n    }\n    let result = node;\n    for (let i = 0; i < components.length; i++) {\n        const component = components[i];\n        if (component.match(/^[0-9]+'$/)) {\n            const index = parseInt(component.substring(0, component.length - 1));\n            assertArgument(index < HardenedBit, \"invalid path index\", `path[${i}]`, component);\n            result = result.deriveChild(HardenedBit + index);\n        }\n        else if (component.match(/^[0-9]+$/)) {\n            const index = parseInt(component);\n            assertArgument(index < HardenedBit, \"invalid path index\", `path[${i}]`, component);\n            result = result.deriveChild(index);\n        }\n        else {\n            assertArgument(false, \"invalid path component\", `path[${i}]`, component);\n        }\n    }\n    return result;\n}\n/**\n *  An **HDNodeWallet** is a [[Signer]] backed by the private key derived\n *  from an HD Node using the [[link-bip-32]] stantard.\n *\n *  An HD Node forms a hierarchal structure with each HD Node having a\n *  private key and the ability to derive child HD Nodes, defined by\n *  a path indicating the index of each child.\n */\nexport class HDNodeWallet extends BaseWallet {\n    /**\n     *  The compressed public key.\n     */\n    publicKey;\n    /**\n     *  The fingerprint.\n     *\n     *  A fingerprint allows quick qay to detect parent and child nodes,\n     *  but developers should be prepared to deal with collisions as it\n     *  is only 4 bytes.\n     */\n    fingerprint;\n    /**\n     *  The parent fingerprint.\n     */\n    parentFingerprint;\n    /**\n     *  The mnemonic used to create this HD Node, if available.\n     *\n     *  Sources such as extended keys do not encode the mnemonic, in\n     *  which case this will be ``null``.\n     */\n    mnemonic;\n    /**\n     *  The chaincode, which is effectively a public key used\n     *  to derive children.\n     */\n    chainCode;\n    /**\n     *  The derivation path of this wallet.\n     *\n     *  Since extended keys do not provide full path details, this\n     *  may be ``null``, if instantiated from a source that does not\n     *  encode it.\n     */\n    path;\n    /**\n     *  The child index of this wallet. Values over ``2 *\\* 31`` indicate\n     *  the node is hardened.\n     */\n    index;\n    /**\n     *  The depth of this wallet, which is the number of components\n     *  in its path.\n     */\n    depth;\n    /**\n     *  @private\n     */\n    constructor(guard, signingKey, parentFingerprint, chainCode, path, index, depth, mnemonic, provider) {\n        super(signingKey, provider);\n        assertPrivate(guard, _guard, \"HDNodeWallet\");\n        defineProperties(this, { publicKey: signingKey.compressedPublicKey });\n        const fingerprint = dataSlice(ripemd160(sha256(this.publicKey)), 0, 4);\n        defineProperties(this, {\n            parentFingerprint, fingerprint,\n            chainCode, path, index, depth\n        });\n        defineProperties(this, { mnemonic });\n    }\n    connect(provider) {\n        return new HDNodeWallet(_guard, this.signingKey, this.parentFingerprint, this.chainCode, this.path, this.index, this.depth, this.mnemonic, provider);\n    }\n    #account() {\n        const account = { address: this.address, privateKey: this.privateKey };\n        const m = this.mnemonic;\n        if (this.path && m && m.wordlist.locale === \"en\" && m.password === \"\") {\n            account.mnemonic = {\n                path: this.path,\n                locale: \"en\",\n                entropy: m.entropy\n            };\n        }\n        return account;\n    }\n    /**\n     *  Resolves to a [JSON Keystore Wallet](json-wallets) encrypted with\n     *  %%password%%.\n     *\n     *  If %%progressCallback%% is specified, it will receive periodic\n     *  updates as the encryption process progreses.\n     */\n    async encrypt(password, progressCallback) {\n        return await encryptKeystoreJson(this.#account(), password, { progressCallback });\n    }\n    /**\n     *  Returns a [JSON Keystore Wallet](json-wallets) encryped with\n     *  %%password%%.\n     *\n     *  It is preferred to use the [async version](encrypt) instead,\n     *  which allows a [[ProgressCallback]] to keep the user informed.\n     *\n     *  This method will block the event loop (freezing all UI) until\n     *  it is complete, which may be a non-trivial duration.\n     */\n    encryptSync(password) {\n        return encryptKeystoreJsonSync(this.#account(), password);\n    }\n    /**\n     *  The extended key.\n     *\n     *  This key will begin with the prefix ``xpriv`` and can be used to\n     *  reconstruct this HD Node to derive its children.\n     */\n    get extendedKey() {\n        // We only support the mainnet values for now, but if anyone needs\n        // testnet values, let me know. I believe current sentiment is that\n        // we should always use mainnet, and use BIP-44 to derive the network\n        //   - Mainnet: public=0x0488B21E, private=0x0488ADE4\n        //   - Testnet: public=0x043587CF, private=0x04358394\n        assert(this.depth < 256, \"Depth too deep\", \"UNSUPPORTED_OPERATION\", { operation: \"extendedKey\" });\n        return encodeBase58Check(concat([\n            \"0x0488ADE4\", zpad(this.depth, 1), this.parentFingerprint,\n            zpad(this.index, 4), this.chainCode,\n            concat([\"0x00\", this.privateKey])\n        ]));\n    }\n    /**\n     *  Returns true if this wallet has a path, providing a Type Guard\n     *  that the path is non-null.\n     */\n    hasPath() { return (this.path != null); }\n    /**\n     *  Returns a neutered HD Node, which removes the private details\n     *  of an HD Node.\n     *\n     *  A neutered node has no private key, but can be used to derive\n     *  child addresses and other public data about the HD Node.\n     */\n    neuter() {\n        return new HDNodeVoidWallet(_guard, this.address, this.publicKey, this.parentFingerprint, this.chainCode, this.path, this.index, this.depth, this.provider);\n    }\n    /**\n     *  Return the child for %%index%%.\n     */\n    deriveChild(_index) {\n        const index = getNumber(_index, \"index\");\n        assertArgument(index <= 0xffffffff, \"invalid index\", \"index\", index);\n        // Base path\n        let path = this.path;\n        if (path) {\n            path += \"/\" + (index & ~HardenedBit);\n            if (index & HardenedBit) {\n                path += \"'\";\n            }\n        }\n        const { IR, IL } = ser_I(index, this.chainCode, this.publicKey, this.privateKey);\n        const ki = new SigningKey(toBeHex((toBigInt(IL) + BigInt(this.privateKey)) % N, 32));\n        return new HDNodeWallet(_guard, ki, this.fingerprint, hexlify(IR), path, index, this.depth + 1, this.mnemonic, this.provider);\n    }\n    /**\n     *  Return the HDNode for %%path%% from this node.\n     */\n    derivePath(path) {\n        return derivePath(this, path);\n    }\n    static #fromSeed(_seed, mnemonic) {\n        assertArgument(isBytesLike(_seed), \"invalid seed\", \"seed\", \"[REDACTED]\");\n        const seed = getBytes(_seed, \"seed\");\n        assertArgument(seed.length >= 16 && seed.length <= 64, \"invalid seed\", \"seed\", \"[REDACTED]\");\n        const I = getBytes(computeHmac(\"sha512\", MasterSecret, seed));\n        const signingKey = new SigningKey(hexlify(I.slice(0, 32)));\n        return new HDNodeWallet(_guard, signingKey, \"0x00000000\", hexlify(I.slice(32)), \"m\", 0, 0, mnemonic, null);\n    }\n    /**\n     *  Creates a new HD Node from %%extendedKey%%.\n     *\n     *  If the %%extendedKey%% will either have a prefix or ``xpub`` or\n     *  ``xpriv``, returning a neutered HD Node ([[HDNodeVoidWallet]])\n     *  or full HD Node ([[HDNodeWallet) respectively.\n     */\n    static fromExtendedKey(extendedKey) {\n        const bytes = toBeArray(decodeBase58(extendedKey)); // @TODO: redact\n        assertArgument(bytes.length === 82 || encodeBase58Check(bytes.slice(0, 78)) === extendedKey, \"invalid extended key\", \"extendedKey\", \"[ REDACTED ]\");\n        const depth = bytes[4];\n        const parentFingerprint = hexlify(bytes.slice(5, 9));\n        const index = parseInt(hexlify(bytes.slice(9, 13)).substring(2), 16);\n        const chainCode = hexlify(bytes.slice(13, 45));\n        const key = bytes.slice(45, 78);\n        switch (hexlify(bytes.slice(0, 4))) {\n            // Public Key\n            case \"0x0488b21e\":\n            case \"0x043587cf\": {\n                const publicKey = hexlify(key);\n                return new HDNodeVoidWallet(_guard, computeAddress(publicKey), publicKey, parentFingerprint, chainCode, null, index, depth, null);\n            }\n            // Private Key\n            case \"0x0488ade4\":\n            case \"0x04358394 \":\n                if (key[0] !== 0) {\n                    break;\n                }\n                return new HDNodeWallet(_guard, new SigningKey(key.slice(1)), parentFingerprint, chainCode, null, index, depth, null, null);\n        }\n        assertArgument(false, \"invalid extended key prefix\", \"extendedKey\", \"[ REDACTED ]\");\n    }\n    /**\n     *  Creates a new random HDNode.\n     */\n    static createRandom(password, path, wordlist) {\n        if (password == null) {\n            password = \"\";\n        }\n        if (path == null) {\n            path = defaultPath;\n        }\n        if (wordlist == null) {\n            wordlist = LangEn.wordlist();\n        }\n        const mnemonic = Mnemonic.fromEntropy(randomBytes(16), password, wordlist);\n        return HDNodeWallet.#fromSeed(mnemonic.computeSeed(), mnemonic).derivePath(path);\n    }\n    /**\n     *  Create an HD Node from %%mnemonic%%.\n     */\n    static fromMnemonic(mnemonic, path) {\n        if (!path) {\n            path = defaultPath;\n        }\n        return HDNodeWallet.#fromSeed(mnemonic.computeSeed(), mnemonic).derivePath(path);\n    }\n    /**\n     *  Creates an HD Node from a mnemonic %%phrase%%.\n     */\n    static fromPhrase(phrase, password, path, wordlist) {\n        if (password == null) {\n            password = \"\";\n        }\n        if (path == null) {\n            path = defaultPath;\n        }\n        if (wordlist == null) {\n            wordlist = LangEn.wordlist();\n        }\n        const mnemonic = Mnemonic.fromPhrase(phrase, password, wordlist);\n        return HDNodeWallet.#fromSeed(mnemonic.computeSeed(), mnemonic).derivePath(path);\n    }\n    /**\n     *  Creates an HD Node from a %%seed%%.\n     */\n    static fromSeed(seed) {\n        return HDNodeWallet.#fromSeed(seed, null);\n    }\n}\n/**\n *  A **HDNodeVoidWallet** cannot sign, but provides access to\n *  the children nodes of a [[link-bip-32]] HD wallet addresses.\n *\n *  The can be created by using an extended ``xpub`` key to\n *  [[HDNodeWallet_fromExtendedKey]] or by\n *  [nuetering](HDNodeWallet-neuter) a [[HDNodeWallet]].\n */\nexport class HDNodeVoidWallet extends VoidSigner {\n    /**\n     *  The compressed public key.\n     */\n    publicKey;\n    /**\n     *  The fingerprint.\n     *\n     *  A fingerprint allows quick qay to detect parent and child nodes,\n     *  but developers should be prepared to deal with collisions as it\n     *  is only 4 bytes.\n     */\n    fingerprint;\n    /**\n     *  The parent node fingerprint.\n     */\n    parentFingerprint;\n    /**\n     *  The chaincode, which is effectively a public key used\n     *  to derive children.\n     */\n    chainCode;\n    /**\n     *  The derivation path of this wallet.\n     *\n     *  Since extended keys do not provider full path details, this\n     *  may be ``null``, if instantiated from a source that does not\n     *  enocde it.\n     */\n    path;\n    /**\n     *  The child index of this wallet. Values over ``2 *\\* 31`` indicate\n     *  the node is hardened.\n     */\n    index;\n    /**\n     *  The depth of this wallet, which is the number of components\n     *  in its path.\n     */\n    depth;\n    /**\n     *  @private\n     */\n    constructor(guard, address, publicKey, parentFingerprint, chainCode, path, index, depth, provider) {\n        super(address, provider);\n        assertPrivate(guard, _guard, \"HDNodeVoidWallet\");\n        defineProperties(this, { publicKey });\n        const fingerprint = dataSlice(ripemd160(sha256(publicKey)), 0, 4);\n        defineProperties(this, {\n            publicKey, fingerprint, parentFingerprint, chainCode, path, index, depth\n        });\n    }\n    connect(provider) {\n        return new HDNodeVoidWallet(_guard, this.address, this.publicKey, this.parentFingerprint, this.chainCode, this.path, this.index, this.depth, provider);\n    }\n    /**\n     *  The extended key.\n     *\n     *  This key will begin with the prefix ``xpub`` and can be used to\n     *  reconstruct this neutered key to derive its children addresses.\n     */\n    get extendedKey() {\n        // We only support the mainnet values for now, but if anyone needs\n        // testnet values, let me know. I believe current sentiment is that\n        // we should always use mainnet, and use BIP-44 to derive the network\n        //   - Mainnet: public=0x0488B21E, private=0x0488ADE4\n        //   - Testnet: public=0x043587CF, private=0x04358394\n        assert(this.depth < 256, \"Depth too deep\", \"UNSUPPORTED_OPERATION\", { operation: \"extendedKey\" });\n        return encodeBase58Check(concat([\n            \"0x0488B21E\",\n            zpad(this.depth, 1),\n            this.parentFingerprint,\n            zpad(this.index, 4),\n            this.chainCode,\n            this.publicKey,\n        ]));\n    }\n    /**\n     *  Returns true if this wallet has a path, providing a Type Guard\n     *  that the path is non-null.\n     */\n    hasPath() { return (this.path != null); }\n    /**\n     *  Return the child for %%index%%.\n     */\n    deriveChild(_index) {\n        const index = getNumber(_index, \"index\");\n        assertArgument(index <= 0xffffffff, \"invalid index\", \"index\", index);\n        // Base path\n        let path = this.path;\n        if (path) {\n            path += \"/\" + (index & ~HardenedBit);\n            if (index & HardenedBit) {\n                path += \"'\";\n            }\n        }\n        const { IR, IL } = ser_I(index, this.chainCode, this.publicKey, null);\n        const Ki = SigningKey.addPoints(IL, this.publicKey, true);\n        const address = computeAddress(Ki);\n        return new HDNodeVoidWallet(_guard, address, Ki, this.fingerprint, hexlify(IR), path, index, this.depth + 1, this.provider);\n    }\n    /**\n     *  Return the signer for %%path%% from this node.\n     */\n    derivePath(path) {\n        return derivePath(this, path);\n    }\n}\n/*\nexport class HDNodeWalletManager {\n    #root: HDNodeWallet;\n\n    constructor(phrase: string, password?: null | string, path?: null | string, locale?: null | Wordlist) {\n        if (password == null) { password = \"\"; }\n        if (path == null) { path = \"m/44'/60'/0'/0\"; }\n        if (locale == null) { locale = LangEn.wordlist(); }\n        this.#root = HDNodeWallet.fromPhrase(phrase, password, path, locale);\n    }\n\n    getSigner(index?: number): HDNodeWallet {\n        return this.#root.deriveChild((index == null) ? 0: index);\n    }\n}\n*/\n/**\n *  Returns the [[link-bip-32]] path for the account at %%index%%.\n *\n *  This is the pattern used by wallets like Ledger.\n *\n *  There is also an [alternate pattern](getIndexedAccountPath) used by\n *  some software.\n */\nexport function getAccountPath(_index) {\n    const index = getNumber(_index, \"index\");\n    assertArgument(index >= 0 && index < HardenedBit, \"invalid account index\", \"index\", index);\n    return `m/44'/60'/${index}'/0/0`;\n}\n/**\n *  Returns the path using an alternative pattern for deriving accounts,\n *  at %%index%%.\n *\n *  This derivation path uses the //index// component rather than the\n *  //account// component to derive sequential accounts.\n *\n *  This is the pattern used by wallets like MetaMask.\n */\nexport function getIndexedAccountPath(_index) {\n    const index = getNumber(_index, \"index\");\n    assertArgument(index >= 0 && index < HardenedBit, \"invalid account index\", \"index\", index);\n    return `m/44'/60'/0'/0/${index}`;\n}\n//# sourceMappingURL=hdwallet.js.map","/**\n *  @_subsection: api/wallet:JSON Wallets  [json-wallets]\n */\nimport { CBC, pkcs7Strip } from \"aes-js\";\nimport { getAddress } from \"../address/index.js\";\nimport { pbkdf2 } from \"../crypto/index.js\";\nimport { id } from \"../hash/index.js\";\nimport { getBytes, assertArgument } from \"../utils/index.js\";\nimport { getPassword, looseArrayify, spelunk } from \"./utils.js\";\n/**\n *  Returns true if %%json%% is a valid JSON Crowdsale wallet.\n */\nexport function isCrowdsaleJson(json) {\n    try {\n        const data = JSON.parse(json);\n        if (data.encseed) {\n            return true;\n        }\n    }\n    catch (error) { }\n    return false;\n}\n// See: https://github.com/ethereum/pyethsaletool\n/**\n *  Before Ethereum launched, it was necessary to create a wallet\n *  format for backers to use, which would be used to receive ether\n *  as a reward for contributing to the project.\n *\n *  The [[link-crowdsale]] format is now obsolete, but it is still\n *  useful to support and the additional code is fairly trivial as\n *  all the primitives required are used through core portions of\n *  the library.\n */\nexport function decryptCrowdsaleJson(json, _password) {\n    const data = JSON.parse(json);\n    const password = getPassword(_password);\n    // Ethereum Address\n    const address = getAddress(spelunk(data, \"ethaddr:string!\"));\n    // Encrypted Seed\n    const encseed = looseArrayify(spelunk(data, \"encseed:string!\"));\n    assertArgument(encseed && (encseed.length % 16) === 0, \"invalid encseed\", \"json\", json);\n    const key = getBytes(pbkdf2(password, password, 2000, 32, \"sha256\")).slice(0, 16);\n    const iv = encseed.slice(0, 16);\n    const encryptedSeed = encseed.slice(16);\n    // Decrypt the seed\n    const aesCbc = new CBC(key, iv);\n    const seed = pkcs7Strip(getBytes(aesCbc.decrypt(encryptedSeed)));\n    // This wallet format is weird... Convert the binary encoded hex to a string.\n    let seedHex = \"\";\n    for (let i = 0; i < seed.length; i++) {\n        seedHex += String.fromCharCode(seed[i]);\n    }\n    return { address, privateKey: id(seedHex) };\n}\n//# sourceMappingURL=json-crowdsale.js.map","import { SigningKey } from \"../crypto/index.js\";\nimport { assertArgument } from \"../utils/index.js\";\nimport { BaseWallet } from \"./base-wallet.js\";\nimport { HDNodeWallet } from \"./hdwallet.js\";\nimport { decryptCrowdsaleJson, isCrowdsaleJson } from \"./json-crowdsale.js\";\nimport { decryptKeystoreJson, decryptKeystoreJsonSync, encryptKeystoreJson, encryptKeystoreJsonSync, isKeystoreJson } from \"./json-keystore.js\";\nimport { Mnemonic } from \"./mnemonic.js\";\nfunction stall(duration) {\n    return new Promise((resolve) => { setTimeout(() => { resolve(); }, duration); });\n}\n/**\n *  A **Wallet** manages a single private key which is used to sign\n *  transactions, messages and other common payloads.\n *\n *  This class is generally the main entry point for developers\n *  that wish to use a private key directly, as it can create\n *  instances from a large variety of common sources, including\n *  raw private key, [[link-bip-39]] mnemonics and encrypte JSON\n *  wallets.\n */\nexport class Wallet extends BaseWallet {\n    /**\n     *  Create a new wallet for the private %%key%%, optionally connected\n     *  to %%provider%%.\n     */\n    constructor(key, provider) {\n        if (typeof (key) === \"string\" && !key.startsWith(\"0x\")) {\n            key = \"0x\" + key;\n        }\n        let signingKey = (typeof (key) === \"string\") ? new SigningKey(key) : key;\n        super(signingKey, provider);\n    }\n    connect(provider) {\n        return new Wallet(this.signingKey, provider);\n    }\n    /**\n     *  Resolves to a [JSON Keystore Wallet](json-wallets) encrypted with\n     *  %%password%%.\n     *\n     *  If %%progressCallback%% is specified, it will receive periodic\n     *  updates as the encryption process progreses.\n     */\n    async encrypt(password, progressCallback) {\n        const account = { address: this.address, privateKey: this.privateKey };\n        return await encryptKeystoreJson(account, password, { progressCallback });\n    }\n    /**\n     *  Returns a [JSON Keystore Wallet](json-wallets) encryped with\n     *  %%password%%.\n     *\n     *  It is preferred to use the [async version](encrypt) instead,\n     *  which allows a [[ProgressCallback]] to keep the user informed.\n     *\n     *  This method will block the event loop (freezing all UI) until\n     *  it is complete, which may be a non-trivial duration.\n     */\n    encryptSync(password) {\n        const account = { address: this.address, privateKey: this.privateKey };\n        return encryptKeystoreJsonSync(account, password);\n    }\n    static #fromAccount(account) {\n        assertArgument(account, \"invalid JSON wallet\", \"json\", \"[ REDACTED ]\");\n        if (\"mnemonic\" in account && account.mnemonic && account.mnemonic.locale === \"en\") {\n            const mnemonic = Mnemonic.fromEntropy(account.mnemonic.entropy);\n            const wallet = HDNodeWallet.fromMnemonic(mnemonic, account.mnemonic.path);\n            if (wallet.address === account.address && wallet.privateKey === account.privateKey) {\n                return wallet;\n            }\n            console.log(\"WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key\");\n        }\n        const wallet = new Wallet(account.privateKey);\n        assertArgument(wallet.address === account.address, \"address/privateKey mismatch\", \"json\", \"[ REDACTED ]\");\n        return wallet;\n    }\n    /**\n     *  Creates (asynchronously) a **Wallet** by decrypting the %%json%%\n     *  with %%password%%.\n     *\n     *  If %%progress%% is provided, it is called periodically during\n     *  decryption so that any UI can be updated.\n     */\n    static async fromEncryptedJson(json, password, progress) {\n        let account = null;\n        if (isKeystoreJson(json)) {\n            account = await decryptKeystoreJson(json, password, progress);\n        }\n        else if (isCrowdsaleJson(json)) {\n            if (progress) {\n                progress(0);\n                await stall(0);\n            }\n            account = decryptCrowdsaleJson(json, password);\n            if (progress) {\n                progress(1);\n                await stall(0);\n            }\n        }\n        return Wallet.#fromAccount(account);\n    }\n    /**\n     *  Creates a **Wallet** by decrypting the %%json%% with %%password%%.\n     *\n     *  The [[fromEncryptedJson]] method is preferred, as this method\n     *  will lock up and freeze the UI during decryption, which may take\n     *  some time.\n     */\n    static fromEncryptedJsonSync(json, password) {\n        let account = null;\n        if (isKeystoreJson(json)) {\n            account = decryptKeystoreJsonSync(json, password);\n        }\n        else if (isCrowdsaleJson(json)) {\n            account = decryptCrowdsaleJson(json, password);\n        }\n        else {\n            assertArgument(false, \"invalid JSON wallet\", \"json\", \"[ REDACTED ]\");\n        }\n        return Wallet.#fromAccount(account);\n    }\n    /**\n     *  Creates a new random [[HDNodeWallet]] using the available\n     *  [cryptographic random source](randomBytes).\n     *\n     *  If there is no crytographic random source, this will throw.\n     */\n    static createRandom(provider) {\n        const wallet = HDNodeWallet.createRandom();\n        if (provider) {\n            return wallet.connect(provider);\n        }\n        return wallet;\n    }\n    /**\n     *  Creates a [[HDNodeWallet]] for %%phrase%%.\n     */\n    static fromPhrase(phrase, provider) {\n        const wallet = HDNodeWallet.fromPhrase(phrase);\n        if (provider) {\n            return wallet.connect(provider);\n        }\n        return wallet;\n    }\n}\n//# sourceMappingURL=wallet.js.map","/**\n * sessionVault.js  In-memory private key storage\n * \n * REPLACES sessionStorage for private keys.\n * Keys live only in JavaScript memory  no browser storage APIs.\n * Automatically cleared when tab closes (garbage collected).\n * Not accessible via DevTools Storage panel or XSS document.cookie tricks.\n */\n\nlet _pk = null;\n\nexport function setSessionKey(privateKey) {\n  _pk = privateKey || null;\n}\n\nexport function getSessionKey() {\n  return _pk;\n}\n\nexport function clearSessionKey() {\n  _pk = null;\n}\n","// Kairos Trade  Auth Screen (Premium v5  Growth Landing + Onboarding)\nimport { useState, useEffect, useMemo, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Eye, EyeOff, ArrowRight, Crown, ShieldCheck, Bot, BarChart3,\n  Zap, Sparkles, TrendingUp, Shield, Gift, Users, ChevronDown,\n  ChevronRight, Globe, Lock, Cpu, DollarSign\n} from 'lucide-react';\nimport { ethers } from 'ethers';\nimport useStore from '../../store/useStore';\nimport apiClient from '../../services/apiClient';\nimport { encrypt as vaultEncrypt, decryptKey, migrateLegacyKey, isLegacyKey } from '../../utils/keyVault';\nimport { setSessionKey } from '../../utils/sessionVault';\n\n/*  API Host  */\nconst API_HOST = apiClient.host;\n\n/*  Kairos Logo (real PNG from wallet)  */\nconst KAIROS_LOGO = '/kairos-logo.png';\n\n/*  Floating Particle Field (reduced on mobile for performance)  */\nfunction ParticleField() {\n  const isMobile = typeof window !== 'undefined' && ('ontouchstart' in window || window.innerWidth < 768);\n  const particles = useMemo(() =>\n    Array.from({ length: isMobile ? 12 : 50 }, (_, i) => ({\n      id: i,\n      x: Math.random() * 100,\n      y: Math.random() * 100,\n      size: 1 + Math.random() * 2.5,\n      dur: 15 + Math.random() * 25,\n      delay: Math.random() * 8,\n      opacity: 0.08 + Math.random() * 0.18,\n    })), []);\n\n  return (\n    <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n      {particles.map(p => (\n        <motion.div key={p.id} className=\"absolute rounded-full bg-[#3B82F6]\"\n          style={{ left: `${p.x}%`, top: `${p.y}%`, width: p.size, height: p.size, opacity: p.opacity }}\n          animate={{ y: [0, -30, 0], x: [0, 15, -10, 0], opacity: [p.opacity, p.opacity * 1.8, p.opacity] }}\n          transition={{ duration: p.dur, delay: p.delay, repeat: Infinity, ease: 'easeInOut' }} />\n      ))}\n    </div>\n  );\n}\n\n/*  Animated Stats Bar  */\nconst STATS = [\n  { value: '33+', label: 'Trading Pairs' },\n  { value: '10', label: 'CEX Brokers' },\n  { value: '24/7', label: 'AI Automation' },\n  { value: '$0', label: 'Subscription' },\n];\n\n/*  Feature Cards for Landing  */\nconst FEATURES = [\n  { icon: Bot, title: 'Bots Automticos', desc: 'Trading 24/7 con estrategias personalizadas. Grid, DCA, y scripts avanzados.', color: '#3B82F6' },\n  { icon: BarChart3, title: 'Grficos Pro', desc: 'Charts en tiempo real con 7+ indicadores tcnicos. Multi-chart y profundidad.', color: '#00DC82' },\n  { icon: Sparkles, title: 'Kairos AI', desc: 'Asistente de trading inteligente que analiza tendencias y sugiere estrategias.', color: '#A855F7' },\n  { icon: Shield, title: '10 Brokers Integrados', desc: 'Binance, Bybit, Coinbase, Kraken, OKX, KuCoin, y ms. Un solo dashboard.', color: '#60A5FA' },\n  { icon: Gift, title: 'Bonus de Bienvenida', desc: 'Recibe crdito de trading al registrarte + 20 KAIROS por cada amigo referido.', color: '#F59E0B' },\n  { icon: Lock, title: 'Seguridad Total', desc: 'Encriptacin bcrypt, JWT, 2FA. Tu wallet se genera automticamente.', color: '#EF4444' },\n];\n\n/*  2FA Code Input (6 digit boxes)  */\nfunction TwoFAInput({ value, onChange }) {\n  const inputRefs = useRef([]);\n  const digits = value.padEnd(6, '').slice(0, 6).split('');\n\n  const handleChange = useCallback((index, char) => {\n    if (!/^\\d?$/.test(char)) return;\n    const next = [...digits];\n    next[index] = char;\n    const joined = next.join('');\n    onChange(joined.replace(/\\s/g, ''));\n    if (char && index < 5) inputRefs.current[index + 1]?.focus();\n  }, [digits, onChange]);\n\n  const handleKeyDown = useCallback((index, e) => {\n    if (e.key === 'Backspace' && !digits[index] && index > 0) {\n      inputRefs.current[index - 1]?.focus();\n    }\n  }, [digits]);\n\n  const handlePaste = useCallback((e) => {\n    e.preventDefault();\n    const pasted = e.clipboardData.getData('text').replace(/\\D/g, '').slice(0, 6);\n    onChange(pasted);\n    const focusIdx = Math.min(pasted.length, 5);\n    inputRefs.current[focusIdx]?.focus();\n  }, [onChange]);\n\n  return (\n    <div className=\"flex gap-2.5 justify-center\" onPaste={handlePaste}>\n      {Array.from({ length: 6 }).map((_, i) => (\n        <input key={i} ref={el => (inputRefs.current[i] = el)}\n          type=\"text\" inputMode=\"numeric\" maxLength={1}\n          value={digits[i] || ''}\n          onChange={e => handleChange(i, e.target.value)}\n          onKeyDown={e => handleKeyDown(i, e)}\n          className=\"w-11 h-14 text-center text-xl font-bold text-white rounded-xl outline-none transition-all duration-200 focus:ring-2 focus:ring-[#3B82F6]/60\"\n          style={{\n            background: 'rgba(255,255,255,0.04)',\n            border: '1px solid rgba(59,130,246,0.15)',\n            caretColor: '#3B82F6',\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default function AuthScreen() {\n  const { login } = useStore();\n  const [isLogin, setIsLogin] = useState(true);\n  const [form, setForm] = useState({ email: '', password: '', name: '' });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [referralCode, setReferralCode] = useState('');\n  const [signupBonus, setSignupBonus] = useState(null);\n\n  // 2FA state\n  const [show2FA, setShow2FA] = useState(false);\n  const [totpCode, setTotpCode] = useState('');\n  const [tempToken, setTempToken] = useState('');\n\n  // Forgot password state\n  const [showForgot, setShowForgot] = useState(false);\n  const [forgotStep, setForgotStep] = useState(1);\n  const [forgotEmail, setForgotEmail] = useState('');\n  const [resetCode, setResetCode] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [forgotSuccess, setForgotSuccess] = useState('');\n\n  // Read referral code from URL on mount\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const ref = params.get('ref');\n    if (ref) {\n      setReferralCode(ref.toUpperCase());\n      setIsLogin(false);\n      setShowForm(true);\n    }\n  }, []);\n\n  /*  API helper (uses centralized apiClient)  */\n  const apiFetch = async (path, body, authToken) => {\n    // If authToken provided, use authenticated request; otherwise public\n    if (authToken) {\n      return apiClient.post(path, body);\n    }\n    return apiClient.publicPost(path, body);\n  };\n\n  /*  Complete login (shared by login + 2FA verify)  */\n  const completeLogin = async (data, password) => {\n    if (!data || !data.user) {\n      throw new Error('Respuesta inesperada del servidor. Intenta de nuevo.');\n    }\n    const { user, accessToken, refreshToken } = data;\n    // Persist wallet separately so it survives logout\n    if (user.walletAddress) {\n      localStorage.setItem('kairos_trade_wallet', JSON.stringify({\n        walletAddress: user.walletAddress,\n        encryptedKey: user.encryptedKey || '',\n      }));\n    }\n\n    // Decrypt private key into session memory (cleared on tab close)\n    if (user.encryptedKey && password) {\n      try {\n        const { privateKey, needsMigration } = await decryptKey(user.encryptedKey, password);\n        if (privateKey) {\n          setSessionKey(privateKey);\n        }\n        // Auto-migrate legacy btoa keys to AES-256-GCM\n        if (needsMigration && privateKey) {\n          const newEncrypted = await migrateLegacyKey(user.encryptedKey, password);\n          user.encryptedKey = newEncrypted;\n          localStorage.setItem('kairos_trade_wallet', JSON.stringify({\n            walletAddress: user.walletAddress,\n            encryptedKey: newEncrypted,\n          }));\n          // Update server-side key silently\n          try {\n            await apiFetch('/api/auth/update-key', {\n              encryptedKey: newEncrypted,\n            }, accessToken);\n          } catch {}\n        }\n      } catch (err) {\n        console.warn('Could not decrypt wallet key:', err.message);\n      }\n    }\n\n    login({\n      id: user.id,\n      email: user.email,\n      name: user.name,\n      role: user.role || 'user',\n      plan: user.plan || 'free',\n      walletAddress: user.walletAddress || '',\n      encryptedKey: user.encryptedKey || '',\n      has2FA: user.has2FA || false,\n      accessToken,\n      refreshToken,\n      createdAt: user.createdAt || new Date().toISOString(),\n    });\n  };\n\n  /*  Submit: Register or Login  */\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    if (!form.email || !form.password) { setError('Completa todos los campos'); return; }\n    if (!isLogin && !form.name) { setError('Ingresa tu nombre'); return; }\n    if (form.password.length < 8) { setError('La contrasea debe tener al menos 8 caracteres'); return; }\n\n    setLoading(true);\n\n    try {\n      if (!isLogin) {\n        /*  REGISTER  */\n        const wallet = ethers.Wallet.createRandom();\n        const walletAddress = wallet.address;\n        // AES-256-GCM encryption with password-derived key (PBKDF2)\n        const encryptedKey = await vaultEncrypt(wallet.privateKey, form.password);\n\n        const data = await apiFetch('/api/auth/register', {\n          email: form.email,\n          password: form.password,\n          name: form.name,\n          walletAddress,\n          encryptedKey,\n          referralCode: referralCode || undefined,\n        });\n\n        // Persist wallet backup locally (encrypted  safe to store)\n        localStorage.setItem('kairos_trade_wallet', JSON.stringify({ walletAddress, encryptedKey }));\n        // Keep decrypted PK in memory only (cleared on tab close)\n        setSessionKey(wallet.privateKey);\n\n        // Show signup bonus notification\n        if (data.data?.referral?.signupBonus) {\n          setSignupBonus(data.data.referral.signupBonus.amount);\n          setTimeout(() => setSignupBonus(null), 6000);\n        }\n\n        await completeLogin(data.data, form.password);\n      } else {\n        /*  LOGIN  */\n        const data = await apiFetch('/api/auth/login', {\n          email: form.email,\n          password: form.password,\n        });\n\n        if (data.requires2FA) {\n          // Server requires 2FA  show OTP screen\n          setTempToken(data.tempToken);\n          setTotpCode('');\n          setShow2FA(true);\n        } else {\n          await completeLogin(data.data, form.password);\n        }\n      }\n    } catch (err) {\n      const msg = err.message || 'Error de autenticacin';\n      // Friendly message for network errors (Render cold start)\n      if (msg.includes('Failed to fetch') || msg.includes('NetworkError') || msg.includes('Load failed')) {\n        setError('Servidor conectando intenta de nuevo en unos segundos.');\n      } else {\n        setError(msg);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /*  Submit: 2FA Verification  */\n  const handle2FASubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    if (totpCode.length !== 6) { setError('Ingresa los 6 dgitos'); return; }\n\n    setLoading(true);\n    try {\n      const data = await apiFetch('/api/auth/verify-2fa', {\n        tempToken,\n        totpCode,\n      });\n      await completeLogin(data.data, form.password);\n    } catch (err) {\n      setError(err.message || 'Cdigo invlido');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /*  Exit 2FA screen  */\n  const cancel2FA = () => {\n    setShow2FA(false);\n    setTotpCode('');\n    setTempToken('');\n    setError('');\n  };\n\n  /*  Forgot Password: Request code  */\n  const handleForgotRequest = async (e) => {\n    e.preventDefault();\n    setError(''); setForgotSuccess('');\n    if (!forgotEmail) { setError('Ingresa tu email'); return; }\n    setLoading(true);\n    try {\n      await apiFetch('/api/auth/forgot-password', { email: forgotEmail });\n      setForgotStep(2);\n      setForgotSuccess('Cdigo generado. Contacta al admin en info@kairos-777.com para recibirlo.');\n    } catch (err) {\n      const msg = err.message || 'Error al solicitar el cdigo';\n      if (msg.includes('Failed to fetch') || msg.includes('Load failed')) {\n        setError('Servidor conectando intenta de nuevo en unos segundos.');\n      } else {\n        setError(msg);\n      }\n    } finally { setLoading(false); }\n  };\n\n  /*  Forgot Password: Verify code + set new password  */\n  const handleForgotReset = async (e) => {\n    e.preventDefault();\n    setError(''); setForgotSuccess('');\n    if (!resetCode || resetCode.length !== 6) { setError('Ingresa el cdigo de 6 dgitos'); return; }\n    if (!newPassword || newPassword.length < 8) { setError('La contrasea debe tener al menos 8 caracteres'); return; }\n    setLoading(true);\n    try {\n      await apiFetch('/api/auth/reset-password', { email: forgotEmail, code: resetCode, newPassword });\n      setForgotSuccess('Contrasea cambiada! Ya puedes iniciar sesin.');\n      setTimeout(() => {\n        setShowForgot(false); setForgotStep(1); setForgotEmail(''); setResetCode(''); setNewPassword(''); setForgotSuccess('');\n        setForm({ ...form, email: forgotEmail, password: '' });\n      }, 2000);\n    } catch (err) {\n      setError(err.message || 'Cdigo invlido o expirado');\n    } finally { setLoading(false); }\n  };\n\n  /*  Exit forgot password  */\n  const cancelForgot = () => {\n    setShowForgot(false); setForgotStep(1); setForgotEmail(''); setResetCode(''); setNewPassword(''); setError(''); setForgotSuccess('');\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-[#050507] flex flex-col items-center overflow-hidden\">\n\n      {/*  Background layers  */}\n      <ParticleField />\n      <div className=\"absolute inset-0 pointer-events-none\">\n        {/* Deep radial glow */}\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[1000px] h-[1000px] rounded-full opacity-[0.07]\"\n          style={{ background: 'radial-gradient(circle, #3B82F6 0%, transparent 55%)' }} />\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] rounded-full opacity-[0.04]\"\n          style={{ background: 'radial-gradient(circle, #60A5FA 0%, transparent 50%)' }} />\n        {/* Subtle grid */}\n        <div className=\"absolute inset-0 opacity-[0.018]\"\n          style={{\n            backgroundImage: 'linear-gradient(rgba(59,130,246,0.4) 1px, transparent 1px), linear-gradient(90deg, rgba(59,130,246,0.4) 1px, transparent 1px)',\n            backgroundSize: '80px 80px',\n          }} />\n        {/* Vignette */}\n        <div className=\"absolute inset-0\" style={{ background: 'radial-gradient(ellipse at center, transparent 40%, #050507 85%)' }} />\n      </div>\n\n      {/*  Main Content  */}\n      <AnimatePresence mode=\"wait\">\n        {!showForm ? (\n          /*  LANDING PAGE  Scroll conversion  */\n          <motion.div key=\"splash\" className=\"relative z-10 w-full flex-1 overflow-y-auto\"\n            initial={false}\n            exit={{ opacity: 0 }} transition={{ duration: 0.2 }}\n            style={{ scrollbarWidth: 'thin', scrollbarColor: '#1e293b transparent', WebkitOverflowScrolling: 'touch' }}>\n\n            {/*  Hero Section  */}\n            <div className=\"min-h-screen flex flex-col items-center justify-center px-6 relative\">\n\n              {/* KairosCoin Logo */}\n              <motion.div className=\"relative mb-6\"\n                initial={{ opacity: 0, scale: 0.6 }}\n                animate={{ opacity: 1, scale: 1 }}\n                transition={{ duration: 1.2, ease: [0.16, 1, 0.3, 1] }}>\n                <img src={KAIROS_LOGO} alt=\"KairosCoin\" className=\"w-[180px] h-[180px] sm:w-[220px] sm:h-[220px] object-contain drop-shadow-[0_0_40px_rgba(59,130,246,0.3)]\" />\n                <motion.div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\"\n                  animate={{ scale: [1, 1.15, 1], opacity: [0.15, 0.05, 0.15] }}\n                  transition={{ duration: 4, repeat: Infinity, ease: 'easeInOut' }}>\n                  <div className=\"w-[240px] h-[240px] sm:w-[280px] sm:h-[280px] rounded-full border border-[#3B82F6]/20\" />\n                </motion.div>\n              </motion.div>\n\n              {/* Brand */}\n              <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.8, duration: 0.8 }}>\n                <h1 className=\"text-5xl sm:text-6xl font-black tracking-[0.20em] text-white text-center\"\n                  style={{ textShadow: '0 0 60px rgba(59,130,246,0.3), 0 0 120px rgba(59,130,246,0.1)' }}>\n                  KAIR<span className=\"relative inline-block align-middle\" style={{ width: '0.92em', height: '0.92em', marginBottom: '0.02em' }}>\n                    <svg viewBox=\"0 0 100 100\" className=\"w-full h-full drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]\">\n                      <defs>\n                        <linearGradient id=\"nodeGrad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                          <stop offset=\"0%\" stopColor=\"#60A5FA\" />\n                          <stop offset=\"100%\" stopColor=\"#3B82F6\" />\n                        </linearGradient>\n                      </defs>\n                      <polygon points=\"50,5 93,27.5 93,72.5 50,95 7,72.5 7,27.5\" fill=\"none\" stroke=\"url(#nodeGrad)\" strokeWidth=\"3\" opacity=\"0.9\" />\n                      <line x1=\"50\" y1=\"5\" x2=\"50\" y2=\"50\" stroke=\"#3B82F6\" strokeWidth=\"1.5\" opacity=\"0.5\" />\n                      <line x1=\"93\" y1=\"27.5\" x2=\"50\" y2=\"50\" stroke=\"#3B82F6\" strokeWidth=\"1.5\" opacity=\"0.5\" />\n                      <line x1=\"93\" y1=\"72.5\" x2=\"50\" y2=\"50\" stroke=\"#3B82F6\" strokeWidth=\"1.5\" opacity=\"0.5\" />\n                      <line x1=\"50\" y1=\"95\" x2=\"50\" y2=\"50\" stroke=\"#3B82F6\" strokeWidth=\"1.5\" opacity=\"0.5\" />\n                      <line x1=\"7\" y1=\"72.5\" x2=\"50\" y2=\"50\" stroke=\"#3B82F6\" strokeWidth=\"1.5\" opacity=\"0.5\" />\n                      <line x1=\"7\" y1=\"27.5\" x2=\"50\" y2=\"50\" stroke=\"#3B82F6\" strokeWidth=\"1.5\" opacity=\"0.5\" />\n                      <circle cx=\"50\" cy=\"50\" r=\"6\" fill=\"url(#nodeGrad)\" />\n                      <circle cx=\"50\" cy=\"5\" r=\"4\" fill=\"#60A5FA\" />\n                      <circle cx=\"93\" cy=\"27.5\" r=\"4\" fill=\"#60A5FA\" />\n                      <circle cx=\"93\" cy=\"72.5\" r=\"4\" fill=\"#60A5FA\" />\n                      <circle cx=\"50\" cy=\"95\" r=\"4\" fill=\"#60A5FA\" />\n                      <circle cx=\"7\" cy=\"72.5\" r=\"4\" fill=\"#60A5FA\" />\n                      <circle cx=\"7\" cy=\"27.5\" r=\"4\" fill=\"#60A5FA\" />\n                    </svg>\n                  </span>S\n                </h1>\n                <div className=\"flex items-center justify-center gap-3 mt-2\">\n                  <div className=\"h-px w-12 bg-gradient-to-r from-transparent to-[#3B82F6]/60\" />\n                  <span className=\"text-[13px] font-bold tracking-[0.4em] text-[#3B82F6]/80 uppercase\">Trade</span>\n                  <div className=\"h-px w-12 bg-gradient-to-l from-transparent to-[#3B82F6]/60\" />\n                </div>\n              </motion.div>\n\n              {/* Hero tagline */}\n              <motion.div className=\"text-center mt-8 max-w-lg\"\n                initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 1.2 }}>\n                <h2 className=\"text-2xl sm:text-3xl font-bold text-white leading-snug\">\n                  Tu Plataforma de Trading\n                  <span className=\"bg-gradient-to-r from-[#3B82F6] to-[#60A5FA] bg-clip-text text-transparent\"> Automatizado</span>\n                </h2>\n                <p className=\"text-sm sm:text-base text-white/40 mt-3 leading-relaxed\">\n                  Conecta 10+ brokers, despliega bots de trading con AI, y opera 33+ pares de crypto  todo desde un solo dashboard profesional.\n                </p>\n              </motion.div>\n\n              {/* Stats row */}\n              <motion.div className=\"flex flex-wrap justify-center gap-6 sm:gap-10 mt-8\"\n                initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 1.5 }}>\n                {STATS.map((s) => (\n                  <div key={s.label} className=\"text-center\">\n                    <p className=\"text-xl sm:text-2xl font-black text-[#3B82F6]\">{s.value}</p>\n                    <p className=\"text-[10px] text-white/30 font-semibold tracking-wider uppercase mt-0.5\">{s.label}</p>\n                  </div>\n                ))}\n              </motion.div>\n\n              {/* Double CTA */}\n              <motion.div className=\"flex flex-col sm:flex-row gap-3 mt-10\"\n                initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 1.8 }}>\n                <button onClick={() => { setShowForm(true); setIsLogin(false); }}\n                  className=\"group relative px-8 py-4 rounded-2xl text-white font-bold text-[15px] tracking-wide overflow-hidden transition-all duration-300 hover:scale-[1.03] active:scale-[0.98]\"\n                  style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 0 40px rgba(59,130,246,0.3), 0 4px 20px rgba(59,130,246,0.2)' }}>\n                  <span className=\"relative z-10 flex items-center gap-2\">\n                    Crear Cuenta Gratis\n                    <ArrowRight size={18} className=\"group-hover:translate-x-1 transition-transform\" />\n                  </span>\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-700\" />\n                </button>\n                <button onClick={() => { setShowForm(true); setIsLogin(true); }}\n                  className=\"px-8 py-4 rounded-2xl text-white/60 font-semibold text-[15px] tracking-wide transition-all duration-300 hover:text-white hover:scale-[1.02]\"\n                  style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)' }}>\n                  Ya tengo cuenta\n                </button>\n              </motion.div>\n\n              {/* Signup bonus badge */}\n              <motion.div className=\"mt-6 flex items-center gap-2 px-4 py-2 rounded-full\"\n                style={{ background: 'rgba(245,158,11,0.08)', border: '1px solid rgba(245,158,11,0.2)' }}\n                initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 2.2 }}>\n                <Gift size={14} className=\"text-amber-400\" />\n                <span className=\"text-xs text-amber-400/90 font-semibold\">Bonus de bienvenida al registrarte</span>\n              </motion.div>\n\n              {/* Scroll hint */}\n              <motion.div className=\"mt-10 flex flex-col items-center gap-1\"\n                initial={{ opacity: 0 }} animate={{ opacity: 0.4 }} transition={{ delay: 2.5 }}\n                onClick={() => document.getElementById('features-section')?.scrollIntoView({ behavior: 'smooth' })}>\n                <span className=\"text-[10px] text-white/30 font-semibold tracking-wider uppercase cursor-pointer hover:text-white/50 transition\">Descubre ms</span>\n                <motion.div animate={{ y: [0, 6, 0] }} transition={{ duration: 1.5, repeat: Infinity }}>\n                  <ChevronDown size={16} className=\"text-white/30\" />\n                </motion.div>\n              </motion.div>\n            </div>\n\n            {/*  Features Section  */}\n            <div id=\"features-section\" className=\"px-6 pb-24 max-w-4xl mx-auto\">\n              <motion.div className=\"text-center mb-12\"\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}>\n                <h3 className=\"text-2xl sm:text-3xl font-bold text-white\">\n                  Todo lo que necesitas para\n                  <span className=\"bg-gradient-to-r from-[#3B82F6] to-[#A855F7] bg-clip-text text-transparent\"> operar como un pro</span>\n                </h3>\n                <p className=\"text-sm text-white/35 mt-3 max-w-md mx-auto\">Sin suscripcin, sin lmites. Regstrate en 30 segundos y accede a herramientas de nivel institucional.</p>\n              </motion.div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {FEATURES.map((f, i) => (\n                  <motion.div key={f.title}\n                    className=\"rounded-2xl p-5 cursor-pointer transition-all duration-300 hover:scale-[1.02]\"\n                    style={{\n                      background: `linear-gradient(135deg, ${f.color}08, ${f.color}03)`,\n                      border: `1px solid ${f.color}18`,\n                    }}\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: i * 0.08 }}\n                    whileHover={{ borderColor: `${f.color}40` }}>\n                    <div className=\"w-10 h-10 rounded-xl flex items-center justify-center mb-3\"\n                      style={{ background: `${f.color}15` }}>\n                      <f.icon size={20} style={{ color: f.color }} />\n                    </div>\n                    <h4 className=\"text-sm font-bold text-white mb-1\">{f.title}</h4>\n                    <p className=\"text-xs text-white/35 leading-relaxed\">{f.desc}</p>\n                  </motion.div>\n                ))}\n              </div>\n\n              {/* Social proof */}\n              <motion.div className=\"mt-12 text-center flex flex-col items-center\"\n                initial={{ opacity: 0 }} whileInView={{ opacity: 1 }} viewport={{ once: true }}>\n                <div className=\"flex items-center gap-6 mb-6\">\n                  <div className=\"text-center\">\n                    <p className=\"text-2xl font-black text-white\">4</p>\n                    <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Blockchains</p>\n                  </div>\n                  <div className=\"w-px h-8 bg-white/10\" />\n                  <div className=\"text-center\">\n                    <p className=\"text-2xl font-black text-white\">BSC  Base  Arbitrum  Polygon</p>\n                    <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Redes soportadas</p>\n                  </div>\n                </div>\n\n                {/* Final CTA */}\n                <button onClick={() => { setShowForm(true); setIsLogin(false); }}\n                  className=\"group px-10 py-4 rounded-2xl text-white font-bold text-[15px] overflow-hidden transition-all duration-300 hover:scale-[1.03]\"\n                  style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 0 40px rgba(59,130,246,0.3)' }}>\n                  <span className=\"flex items-center gap-2\">\n                    Empieza Gratis Ahora\n                    <ArrowRight size={18} className=\"group-hover:translate-x-1 transition-transform\" />\n                  </span>\n                </button>\n\n                <a href=\"https://kairos-777.com\" target=\"_blank\" rel=\"noopener noreferrer\"\n                  className=\"mt-6 flex items-center gap-2 text-[11px] text-white/20 hover:text-[#3B82F6]/60 transition-colors\">\n                  <Crown size={12} />\n                  <span>Ecosistema Kairos 777</span>\n                </a>\n\n                <p className=\"mt-4 text-[10px] text-white/15\">&copy; 2026 Kairos 777 Inc &bull; by Mario Isaac</p>\n              </motion.div>\n            </div>\n\n            {/* Fixed bottom bar  fully non-interactive to avoid blocking mobile scroll */}\n            <div className=\"fixed bottom-0 left-0 right-0 z-40 pointer-events-none\">\n              <div className=\"flex items-center justify-center gap-4 py-3\"\n                style={{ background: 'linear-gradient(to top, #050507 60%, transparent)' }}>\n                <div className=\"flex items-center gap-1.5\">\n                  <div className=\"w-1.5 h-1.5 rounded-full bg-[#00DC82] animate-pulse\" />\n                  <span className=\"text-[10px] text-[#00DC82]/70 font-semibold\">Sistemas operacionales</span>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        ) : (\n          /*  LOGIN/REGISTER FORM  */\n          <motion.div key=\"form\" className=\"relative z-10 w-full flex-1 flex items-center justify-center overflow-y-auto px-6\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ duration: 0.3 }}>\n          <div className=\"w-full max-w-[420px]\">\n\n            {/* Back to splash + mini logo */}\n            <div className=\"flex items-center justify-between mb-8\">\n              <button onClick={() => { setShowForm(false); setShow2FA(false); setError(''); }}\n                className=\"flex items-center gap-2 text-[12px] text-white/30 hover:text-[#3B82F6] transition-colors\">\n                <ArrowRight size={14} className=\"rotate-180\" />\n                <span>Volver</span>\n              </button>\n              <div className=\"flex items-center gap-2.5\">\n                <img src={KAIROS_LOGO} alt=\"Kairos\" className=\"w-8 h-8 object-contain\" />\n                <span className=\"text-[14px] font-extrabold text-white tracking-wider\">KAIROS</span>\n              </div>\n            </div>\n\n            {/* Glass card */}\n            <div className=\"rounded-2xl p-7 sm:p-8\"\n              style={{\n                background: 'linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%)',\n                border: '1px solid rgba(59,130,246,0.1)',\n                backdropFilter: 'blur(20px)',\n                boxShadow: '0 25px 60px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.04)',\n              }}>\n\n              <AnimatePresence mode=\"wait\">\n                {show2FA ? (\n                  /*  2FA VERIFICATION SCREEN  */\n                  <motion.div key=\"2fa\"\n                    initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: -30 }}\n                    transition={{ duration: 0.3 }}>\n\n                    <div className=\"flex flex-col items-center mb-6\">\n                      <div className=\"w-14 h-14 rounded-2xl flex items-center justify-center mb-4\"\n                        style={{ background: 'linear-gradient(135deg, rgba(59,130,246,0.15), rgba(59,130,246,0.05))', border: '1px solid rgba(59,130,246,0.2)' }}>\n                        <ShieldCheck size={28} className=\"text-[#3B82F6]\" />\n                      </div>\n                      <h2 className=\"text-2xl font-extrabold text-white tracking-tight\">Verificacin 2FA</h2>\n                      <p className=\"text-sm text-white/35 mt-1.5 text-center\">Ingresa el cdigo de tu app autenticadora</p>\n                    </div>\n\n                    <form onSubmit={handle2FASubmit} className=\"space-y-5\">\n                      <TwoFAInput value={totpCode} onChange={setTotpCode} />\n\n                      <AnimatePresence>\n                        {error && (\n                          <motion.div initial={{ opacity: 0, y: -4 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -4 }}\n                            className=\"text-xs text-[#FF4757] bg-[#FF4757]/[0.06] border border-[#FF4757]/10 px-3.5 py-2.5 rounded-xl text-center\">{typeof error === 'string' ? error : String(error)}</motion.div>\n                        )}\n                      </AnimatePresence>\n\n                      <button type=\"submit\" disabled={loading || totpCode.length !== 6}\n                        className=\"w-full py-3.5 rounded-xl transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-2 text-sm font-bold text-white hover:scale-[1.02] active:scale-[0.98]\"\n                        style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 0 30px rgba(59,130,246,0.2), 0 4px 15px rgba(59,130,246,0.2)' }}>\n                        {loading ? <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : (<>Verificar<ArrowRight size={16} /></>)}\n                      </button>\n\n                      <button type=\"button\" onClick={cancel2FA}\n                        className=\"w-full text-center text-[12px] text-white/30 hover:text-[#3B82F6] transition-colors py-1\">\n                        Volver al login\n                      </button>\n                    </form>\n                  </motion.div>\n                ) : showForgot ? (\n                  /*  FORGOT PASSWORD SCREEN  */\n                  <motion.div key=\"forgot\"\n                    initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: -30 }}\n                    transition={{ duration: 0.3 }}>\n\n                    <div className=\"flex flex-col items-center mb-6\">\n                      <div className=\"w-14 h-14 rounded-2xl flex items-center justify-center mb-4\"\n                        style={{ background: 'linear-gradient(135deg, rgba(59,130,246,0.15), rgba(59,130,246,0.05))', border: '1px solid rgba(59,130,246,0.2)' }}>\n                        <Lock size={28} className=\"text-[#3B82F6]\" />\n                      </div>\n                      <h2 className=\"text-2xl font-extrabold text-white tracking-tight\">Recuperar Contrasea</h2>\n                      <p className=\"text-sm text-white/35 mt-1.5 text-center\">\n                        {forgotStep === 1 ? 'Ingresa tu email para solicitar un cdigo' : 'Ingresa el cdigo y tu nueva contrasea'}\n                      </p>\n                    </div>\n\n                    {forgotStep === 1 ? (\n                      <form onSubmit={handleForgotRequest} className=\"space-y-4\">\n                        <div>\n                          <label className=\"text-[11px] text-white/30 mb-1.5 block font-semibold uppercase tracking-wider\">Email</label>\n                          <input type=\"email\" value={forgotEmail} onChange={(e) => setForgotEmail(e.target.value)}\n                            placeholder=\"tu@email.com\" className=\"w-full\" autoComplete=\"email\"\n                            style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)', color: '#fff', borderRadius: '0.75rem', padding: '0.65rem 0.85rem', fontSize: '0.875rem' }} />\n                        </div>\n                        <AnimatePresence>\n                          {error && (\n                            <motion.div initial={{ opacity: 0, y: -4 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -4 }}\n                              className=\"text-xs text-[#FF4757] bg-[#FF4757]/[0.06] border border-[#FF4757]/10 px-3.5 py-2.5 rounded-xl\">{typeof error === 'string' ? error : String(error)}</motion.div>\n                          )}\n                        </AnimatePresence>\n                        <button type=\"submit\" disabled={loading}\n                          className=\"w-full py-3.5 rounded-xl transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-2 text-sm font-bold text-white hover:scale-[1.02] active:scale-[0.98]\"\n                          style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 0 30px rgba(59,130,246,0.2), 0 4px 15px rgba(59,130,246,0.2)' }}>\n                          {loading ? <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : (<>Solicitar Cdigo<ArrowRight size={16} /></>)}\n                        </button>\n                        <button type=\"button\" onClick={cancelForgot}\n                          className=\"w-full text-center text-[12px] text-white/30 hover:text-[#3B82F6] transition-colors py-1\">Volver al login</button>\n                      </form>\n                    ) : (\n                      <form onSubmit={handleForgotReset} className=\"space-y-4\">\n                        <AnimatePresence>\n                          {forgotSuccess && (\n                            <motion.div initial={{ opacity: 0, y: -4 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -4 }}\n                              className=\"text-xs text-[#00DC82] bg-[#00DC82]/[0.06] border border-[#00DC82]/10 px-3.5 py-2.5 rounded-xl\">{forgotSuccess}</motion.div>\n                          )}\n                        </AnimatePresence>\n                        <div>\n                          <label className=\"text-[11px] text-white/30 mb-1.5 block font-semibold uppercase tracking-wider\">Cdigo de 6 dgitos</label>\n                          <input type=\"text\" inputMode=\"numeric\" value={resetCode} onChange={(e) => setResetCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n                            placeholder=\"000000\" maxLength={6} className=\"w-full text-center tracking-[0.3em]\"\n                            style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)', color: '#fff', borderRadius: '0.75rem', padding: '0.65rem 0.85rem', fontSize: '1.25rem', fontWeight: '700' }} />\n                        </div>\n                        <div>\n                          <label className=\"text-[11px] text-white/30 mb-1.5 block font-semibold uppercase tracking-wider\">Nueva Contrasea</label>\n                          <input type=\"password\" value={newPassword} onChange={(e) => setNewPassword(e.target.value)}\n                            placeholder=\"Mnimo 8 caracteres\" className=\"w-full\" autoComplete=\"new-password\"\n                            style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)', color: '#fff', borderRadius: '0.75rem', padding: '0.65rem 0.85rem', fontSize: '0.875rem' }} />\n                        </div>\n                        <AnimatePresence>\n                          {error && (\n                            <motion.div initial={{ opacity: 0, y: -4 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -4 }}\n                              className=\"text-xs text-[#FF4757] bg-[#FF4757]/[0.06] border border-[#FF4757]/10 px-3.5 py-2.5 rounded-xl\">{typeof error === 'string' ? error : String(error)}</motion.div>\n                          )}\n                        </AnimatePresence>\n                        <button type=\"submit\" disabled={loading}\n                          className=\"w-full py-3.5 rounded-xl transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-2 text-sm font-bold text-white hover:scale-[1.02] active:scale-[0.98]\"\n                          style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 0 30px rgba(59,130,246,0.2), 0 4px 15px rgba(59,130,246,0.2)' }}>\n                          {loading ? <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : (<>Cambiar Contrasea<ArrowRight size={16} /></>)}\n                        </button>\n                        <button type=\"button\" onClick={() => { setForgotStep(1); setError(''); setForgotSuccess(''); }}\n                          className=\"w-full text-center text-[12px] text-white/30 hover:text-[#3B82F6] transition-colors py-1\">Volver</button>\n                      </form>\n                    )}\n                  </motion.div>\n                ) : (\n                  /*  NORMAL LOGIN / REGISTER  */\n                  <motion.div key=\"auth-form\"\n                    initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 30 }}\n                    transition={{ duration: 0.3 }}>\n\n                    <div className=\"mb-6\">\n                      <h2 className=\"text-2xl font-extrabold text-white tracking-tight\">\n                        {isLogin ? 'Bienvenido.' : 'Empieza a operar.'}\n                      </h2>\n                      <p className=\"text-sm text-white/35 mt-1.5\">\n                        {isLogin ? 'Accede a tu plataforma de trading' : 'Crea tu cuenta y recibe tu wallet'}\n                      </p>\n                    </div>\n\n                    {/* Toggle */}\n                    <div className=\"flex mb-6 rounded-xl p-1\"\n                      style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.06)' }}>\n                      <button onClick={() => { setIsLogin(true); setError(''); }}\n                        className={`flex-1 py-2.5 text-sm rounded-lg transition-all duration-300 ${isLogin ? 'text-white font-bold shadow-lg' : 'text-white/30 font-medium hover:text-white/60'}`}\n                        style={isLogin ? { background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 4px 15px rgba(59,130,246,0.25)' } : {}}>\n                        Iniciar Sesin\n                      </button>\n                      <button onClick={() => { setIsLogin(false); setError(''); }}\n                        className={`flex-1 py-2.5 text-sm rounded-lg transition-all duration-300 ${!isLogin ? 'text-white font-bold shadow-lg' : 'text-white/30 font-medium hover:text-white/60'}`}\n                        style={!isLogin ? { background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 4px 15px rgba(59,130,246,0.25)' } : {}}>\n                        Registrarse\n                      </button>\n                    </div>\n\n                    {/* Form */}\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\n                      <AnimatePresence mode=\"wait\">\n                        {!isLogin && (\n                          <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} transition={{ duration: 0.2 }}>\n                            <label className=\"text-[11px] text-white/30 mb-1.5 block font-semibold uppercase tracking-wider\">Nombre</label>\n                            <input type=\"text\" value={form.name} onChange={(e) => setForm({ ...form, name: e.target.value })}\n                              placeholder=\"Tu nombre completo\" className=\"w-full\" autoComplete=\"name\"\n                              style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)', color: '#fff', borderRadius: '0.75rem', padding: '0.65rem 0.85rem', fontSize: '0.875rem' }} />\n                          </motion.div>\n                        )}\n                      </AnimatePresence>\n                      <div>\n                        <label className=\"text-[11px] text-white/30 mb-1.5 block font-semibold uppercase tracking-wider\">Email</label>\n                        <input type=\"email\" value={form.email} onChange={(e) => setForm({ ...form, email: e.target.value })}\n                          placeholder=\"tu@email.com\" className=\"w-full\" autoComplete=\"email\"\n                          style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)', color: '#fff', borderRadius: '0.75rem', padding: '0.65rem 0.85rem', fontSize: '0.875rem' }} />\n                      </div>\n                      <div>\n                        <label className=\"text-[11px] text-white/30 mb-1.5 block font-semibold uppercase tracking-wider\">Contrasea</label>\n                        <div className=\"relative\">\n                          <input type={showPassword ? 'text' : 'password'} value={form.password} onChange={(e) => setForm({ ...form, password: e.target.value })}\n                            placeholder=\"\" className=\"w-full pr-10\" autoComplete={isLogin ? 'current-password' : 'new-password'}\n                            style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)', color: '#fff', borderRadius: '0.75rem', padding: '0.65rem 0.85rem', fontSize: '0.875rem' }} />\n                          <button type=\"button\" onClick={() => setShowPassword(!showPassword)}\n                            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 hover:text-[#3B82F6] transition-colors\">\n                            {showPassword ? <EyeOff size={15} /> : <Eye size={15} />}\n                          </button>\n                        </div>\n                      </div>\n                      <AnimatePresence mode=\"wait\">\n                        {!isLogin && (\n                          <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} transition={{ duration: 0.2 }}>\n                            <label className=\"text-[11px] text-white/30 mb-1.5 block font-semibold uppercase tracking-wider\">Cdigo de Referido <span className=\"text-white/15\">(opcional)</span></label>\n                            <input type=\"text\" value={referralCode} onChange={(e) => setReferralCode(e.target.value.toUpperCase())}\n                              placeholder=\"KAI-XXXXXXXX\" className=\"w-full\" maxLength={12}\n                              style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)', color: '#fff', borderRadius: '0.75rem', padding: '0.65rem 0.85rem', fontSize: '0.875rem', letterSpacing: '0.05em' }} />\n                          </motion.div>\n                        )}\n                      </AnimatePresence>\n                      <AnimatePresence>\n                        {error && (\n                          <motion.div initial={{ opacity: 0, y: -4 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -4 }}\n                            className=\"text-xs text-[#FF4757] bg-[#FF4757]/[0.06] border border-[#FF4757]/10 px-3.5 py-2.5 rounded-xl\">{typeof error === 'string' ? error : String(error)}</motion.div>\n                        )}\n                      </AnimatePresence>\n                      <button type=\"submit\" disabled={loading}\n                        className=\"w-full py-3.5 rounded-xl transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-2 text-sm font-bold text-white hover:scale-[1.02] active:scale-[0.98]\"\n                        style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 0 30px rgba(59,130,246,0.2), 0 4px 15px rgba(59,130,246,0.2)' }}>\n                        {loading ? <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : (<>{isLogin ? 'Acceder a la Plataforma' : 'Crear Cuenta'}<ArrowRight size={16} /></>)}\n                      </button>\n\n                      {/* Forgot password link - only on login */}\n                      {isLogin && (\n                        <button type=\"button\" onClick={() => { setShowForgot(true); setForgotEmail(form.email); setError(''); }}\n                          className=\"w-full text-center text-[12px] text-white/25 hover:text-[#3B82F6] transition-colors py-2 mt-1\">\n                          Olvidaste tu contrasea?\n                        </button>\n                      )}\n                    </form>\n\n                    {/* Wallet info */}\n                    {!isLogin && (\n                      <motion.div className=\"mt-4 flex items-center gap-2 px-3 py-2 rounded-lg\"\n                        style={{ background: 'rgba(59,130,246,0.06)', border: '1px solid rgba(59,130,246,0.1)' }}\n                        initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.3 }}>\n                        <div className=\"w-2 h-2 rounded-full bg-[#3B82F6] animate-pulse\" />\n                        <span className=\"text-[11px] text-[#3B82F6]/70 font-medium\">Tu Kairos Wallet se genera automticamente al registrarte</span>\n                      </motion.div>\n                    )}\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </div>\n\n            <p className=\"text-[10px] text-white/15 text-center mt-6\">\n              Parte del ecosistema <span className=\"text-[#3B82F6]/40 font-semibold\">Kairos 777</span>\n            </p>\n          </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Signup Bonus Toast */}\n      <AnimatePresence>\n        {signupBonus && (\n          <motion.div\n            initial={{ opacity: 0, y: 60, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 60, scale: 0.9 }}\n            className=\"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-4 rounded-2xl flex items-center gap-3\"\n            style={{\n              background: 'linear-gradient(135deg, rgba(59,130,246,0.15), rgba(16,185,129,0.15))',\n              border: '1px solid rgba(59,130,246,0.3)',\n              backdropFilter: 'blur(20px)',\n              boxShadow: '0 20px 50px rgba(0,0,0,0.5)',\n            }}>\n            <span className=\"text-2xl\"></span>\n            <div>\n              <p className=\"text-sm font-bold text-white\">Bienvenido a Kairos!</p>\n              <p className=\"text-xs text-[#3B82F6]\">+{signupBonus} KAIROS de regalo</p>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","// Kairos Trade  Onboarding Wizard (Post-Registration)\nimport { useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ArrowRight, ArrowLeft, Check, Rocket, Shield, Bot,\n  BarChart3, Gift, Copy, Share2, X, Sparkles\n} from 'lucide-react';\nimport useStore from '../../store/useStore';\n\n/*  Onboarding Steps  */\nconst STEPS = [\n  {\n    id: 'welcome',\n    icon: Rocket,\n    color: '#3B82F6',\n    title: 'Bienvenido a Kairos Trade!',\n    subtitle: 'Tu plataforma de trading automatizado est lista.',\n    body: 'Hemos creado tu cuenta con una wallet blockchain y 100 KAIROS de regalo. En los prximos pasos te mostraremos cmo sacar el mximo provecho.',\n    tip: 'Tu wallet Kairos se gener automticamente con encriptacin de grado militar.',\n  },\n  {\n    id: 'broker',\n    icon: Shield,\n    color: '#60A5FA',\n    title: 'Conecta tu Broker',\n    subtitle: 'Vincula tu exchange para operar en vivo.',\n    body: 'Soportamos 10+ brokers: Binance, Bybit, Coinbase, Kraken, OKX, KuCoin, y ms. Puedes empezar en modo simulador sin conectar un broker.',\n    tip: 'Ve a Brokers  Agregar Broker y pega tus API keys. Nunca accedemos a tus fondos directamente.',\n    action: 'brokers',\n    actionLabel: 'Ir a Brokers',\n  },\n  {\n    id: 'trade',\n    icon: BarChart3,\n    color: '#00DC82',\n    title: 'Tu Primera Operacin',\n    subtitle: 'Abre tu primer trade en segundos.',\n    body: 'Ve al Chart, selecciona un par (ej. BTCUSDT), ajusta tu tamao de posicin y apalancamiento, y ejecuta. Tambin puedes usar el Simulador para practicar sin riesgo.',\n    tip: 'El Simulador usa precios reales pero con balance virtual  perfecto para aprender.',\n    action: 'chart',\n    actionLabel: 'Ir al Chart',\n  },\n  {\n    id: 'bots',\n    icon: Bot,\n    color: '#A855F7',\n    title: 'Automatiza con Bots',\n    subtitle: 'Deja que los bots trabajen por ti 24/7.',\n    body: 'Crea bots Grid, DCA o escribe scripts personalizados con Kairos Script. Los bots ejecutan trades automticamente basados en tus reglas.',\n    tip: 'Empieza con un Grid Bot en BTCUSDT  configura rango de precio y nmero de grids.',\n    action: 'bots',\n    actionLabel: 'Crear un Bot',\n  },\n  {\n    id: 'referral',\n    icon: Gift,\n    color: '#F59E0B',\n    title: 'Invita y Gana',\n    subtitle: 'Gana 20 KAIROS por cada amigo.',\n    body: 'Comparte tu cdigo de referido y gana 20 KAIROS por cada persona que se registre. Tus amigos tambin reciben 100 KAIROS de bienvenida.',\n    tip: null,\n    showReferral: true,\n  },\n];\n\n/*  Step Indicator Dots  */\nfunction StepDots({ current, total }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      {Array.from({ length: total }).map((_, i) => (\n        <div key={i} className=\"relative\">\n          <motion.div\n            className=\"w-2.5 h-2.5 rounded-full transition-all duration-300\"\n            style={{\n              background: i === current ? '#3B82F6' : i < current ? '#3B82F6' : 'rgba(255,255,255,0.1)',\n              scale: i === current ? 1.2 : 1,\n            }}\n          />\n          {i < current && (\n            <Check size={8} className=\"absolute inset-0 m-auto text-white\" strokeWidth={3} />\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n\n/*  Main Onboarding Wizard  */\nexport default function OnboardingWizard({ onComplete }) {\n  const [step, setStep] = useState(0);\n  const [copied, setCopied] = useState(false);\n  const { user, setPage } = useStore();\n\n  const currentStep = STEPS[step];\n  const isLast = step === STEPS.length - 1;\n  const referralCode = user?.referralCode || 'KAI-XXXXXXXX';\n  const referralLink = `https://kairos-trade.netlify.app?ref=${referralCode}`;\n\n  const handleNext = useCallback(() => {\n    if (isLast) {\n      // Mark onboarding as completed\n      if (user?.id) {\n        localStorage.setItem(`kairos_onboarding_done_${user.id}`, '1');\n      }\n      onComplete?.();\n    } else {\n      setStep(s => s + 1);\n    }\n  }, [isLast, onComplete, user?.id]);\n\n  const handleBack = useCallback(() => {\n    if (step > 0) setStep(s => s - 1);\n  }, [step]);\n\n  const handleSkip = useCallback(() => {\n    if (user?.id) {\n      localStorage.setItem(`kairos_onboarding_done_${user.id}`, '1');\n    }\n    onComplete?.();\n  }, [onComplete, user?.id]);\n\n  const handleAction = useCallback((page) => {\n    if (user?.id) {\n      localStorage.setItem(`kairos_onboarding_done_${user.id}`, '1');\n    }\n    setPage(page);\n    onComplete?.();\n  }, [setPage, onComplete, user?.id]);\n\n  const handleCopy = useCallback(async (text) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch {}\n  }, []);\n\n  const handleShare = useCallback((platform) => {\n    const msg = encodeURIComponent(`nete a Kairos Trade  plataforma de trading automatizado con 10+ brokers y bots AI. Usa mi cdigo ${referralCode} y recibe 100 KAIROS gratis: ${referralLink}`);\n    const urls = {\n      whatsapp: `https://wa.me/?text=${msg}`,\n      telegram: `https://t.me/share/url?url=${encodeURIComponent(referralLink)}&text=${msg}`,\n      twitter: `https://twitter.com/intent/tweet?text=${msg}`,\n    };\n    window.open(urls[platform], '_blank');\n  }, [referralCode, referralLink]);\n\n  const Icon = currentStep.icon;\n\n  return (\n    <motion.div\n      className=\"fixed inset-0 z-[100] flex items-center justify-center px-4\"\n      initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n      style={{ background: 'rgba(5,5,7,0.92)', backdropFilter: 'blur(20px)' }}\n    >\n      {/* Skip button */}\n      <button onClick={handleSkip}\n        className=\"absolute top-5 right-5 flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs text-white/30 hover:text-white/60 transition-colors\"\n        style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.06)' }}>\n        <X size={12} />\n        Saltar tutorial\n      </button>\n\n      <div className=\"w-full max-w-md\">\n        {/* Progress */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <StepDots current={step} total={STEPS.length} />\n          <span className=\"text-[10px] text-white/20 font-semibold\">{step + 1}/{STEPS.length}</span>\n        </div>\n\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={currentStep.id}\n            initial={{ opacity: 0, x: 40 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -40 }}\n            transition={{ duration: 0.3 }}\n            className=\"rounded-3xl p-8 relative overflow-hidden\"\n            style={{\n              background: 'linear-gradient(145deg, rgba(15,17,23,0.95), rgba(10,12,18,0.98))',\n              border: '1px solid rgba(255,255,255,0.06)',\n              boxShadow: `0 0 80px ${currentStep.color}10`,\n            }}\n          >\n            {/* Background glow */}\n            <div className=\"absolute -top-20 -right-20 w-60 h-60 rounded-full opacity-10 pointer-events-none\"\n              style={{ background: `radial-gradient(circle, ${currentStep.color}, transparent)` }} />\n\n            {/* Icon */}\n            <div className=\"w-14 h-14 rounded-2xl flex items-center justify-center mb-5 relative\"\n              style={{ background: `${currentStep.color}15`, border: `1px solid ${currentStep.color}25` }}>\n              <Icon size={26} style={{ color: currentStep.color }} />\n              <motion.div className=\"absolute inset-0 rounded-2xl\"\n                animate={{ opacity: [0.3, 0, 0.3] }}\n                transition={{ duration: 2, repeat: Infinity }}\n                style={{ border: `1px solid ${currentStep.color}30` }} />\n            </div>\n\n            {/* Content */}\n            <h2 className=\"text-xl font-bold text-white mb-1\">{currentStep.title}</h2>\n            <p className=\"text-sm text-white/50 mb-4\">{currentStep.subtitle}</p>\n            <p className=\"text-sm text-white/35 leading-relaxed mb-5\">{currentStep.body}</p>\n\n            {/* Tip box */}\n            {currentStep.tip && (\n              <div className=\"rounded-xl p-3 mb-5 flex items-start gap-2.5\"\n                style={{ background: `${currentStep.color}08`, border: `1px solid ${currentStep.color}15` }}>\n                <Sparkles size={14} className=\"shrink-0 mt-0.5\" style={{ color: currentStep.color }} />\n                <p className=\"text-xs text-white/40 leading-relaxed\">{currentStep.tip}</p>\n              </div>\n            )}\n\n            {/* Referral section (last step) */}\n            {currentStep.showReferral && (\n              <div className=\"space-y-3 mb-5\">\n                {/* Code */}\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"flex-1 rounded-xl px-4 py-3 text-sm font-mono text-amber-400 font-bold tracking-wider\"\n                    style={{ background: 'rgba(245,158,11,0.06)', border: '1px solid rgba(245,158,11,0.15)' }}>\n                    {referralCode}\n                  </div>\n                  <button onClick={() => handleCopy(referralCode)}\n                    className=\"px-3 py-3 rounded-xl transition-all\"\n                    style={{ background: 'rgba(245,158,11,0.08)', border: '1px solid rgba(245,158,11,0.2)' }}>\n                    {copied ? <Check size={16} className=\"text-green-400\" /> : <Copy size={16} className=\"text-amber-400/60\" />}\n                  </button>\n                </div>\n\n                {/* Link */}\n                <button onClick={() => handleCopy(referralLink)}\n                  className=\"w-full text-left rounded-xl px-4 py-2.5 text-xs text-white/30 truncate hover:text-white/50 transition-colors\"\n                  style={{ background: 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.06)' }}>\n                  {referralLink}\n                </button>\n\n                {/* Share buttons */}\n                <div className=\"flex gap-2\">\n                  {[\n                    { id: 'whatsapp', label: 'WhatsApp', bg: '#25D366' },\n                    { id: 'telegram', label: 'Telegram', bg: '#0088cc' },\n                    { id: 'twitter', label: 'X / Twitter', bg: '#1DA1F2' },\n                  ].map(p => (\n                    <button key={p.id} onClick={() => handleShare(p.id)}\n                      className=\"flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-xs font-semibold text-white/70 hover:text-white transition-all hover:scale-[1.02]\"\n                      style={{ background: `${p.bg}15`, border: `1px solid ${p.bg}25` }}>\n                      <Share2 size={12} />\n                      {p.label}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Navigation buttons */}\n            <div className=\"flex items-center justify-between mt-2\">\n              {step > 0 ? (\n                <button onClick={handleBack}\n                  className=\"flex items-center gap-1.5 px-4 py-2.5 rounded-xl text-xs font-semibold text-white/40 hover:text-white/70 transition-colors\"\n                  style={{ background: 'rgba(255,255,255,0.04)' }}>\n                  <ArrowLeft size={14} />\n                  Atrs\n                </button>\n              ) : <div />}\n\n              <div className=\"flex items-center gap-2\">\n                {/* Quick action button (navigate to feature) */}\n                {currentStep.action && (\n                  <button onClick={() => handleAction(currentStep.action)}\n                    className=\"flex items-center gap-1.5 px-4 py-2.5 rounded-xl text-xs font-semibold transition-all hover:scale-[1.02]\"\n                    style={{\n                      color: currentStep.color,\n                      background: `${currentStep.color}10`,\n                      border: `1px solid ${currentStep.color}25`,\n                    }}>\n                    {currentStep.actionLabel}\n                  </button>\n                )}\n\n                {/* Next / Finish button */}\n                <button onClick={handleNext}\n                  className=\"flex items-center gap-1.5 px-6 py-2.5 rounded-xl text-sm font-bold text-white transition-all hover:scale-[1.03]\"\n                  style={{\n                    background: isLast\n                      ? 'linear-gradient(135deg, #3B82F6, #2563EB)'\n                      : 'rgba(59,130,246,0.15)',\n                    border: isLast ? 'none' : '1px solid rgba(59,130,246,0.25)',\n                    boxShadow: isLast ? '0 0 30px rgba(59,130,246,0.3)' : 'none',\n                  }}>\n                  {isLast ? 'Empezar a Operar' : 'Siguiente'}\n                  <ArrowRight size={14} />\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </AnimatePresence>\n      </div>\n    </motion.div>\n  );\n}\n","// Kairos Trade  Telegram Notification Service\n// Sends trade alerts, bot status, and signals to Telegram via Bot API\n\nclass TelegramService {\n  constructor() {\n    this.botToken = null;\n    this.chatId = null;\n    this.enabled = false;\n    this.queue = [];\n    this.sending = false;\n    this.rateLimitDelay = 100; // ms between messages (Telegram limit: 30 msg/sec)\n  }\n\n  //  Configure \n  configure(botToken, chatId) {\n    this.botToken = botToken;\n    this.chatId = chatId;\n    this.enabled = !!(botToken && chatId);\n    if (this.enabled) {\n      console.log('[Telegram] Configured:', chatId);\n    }\n  }\n\n  //  Load from settings \n  loadFromSettings(settings) {\n    if (settings?.telegramBotToken && settings?.telegramChatId) {\n      this.configure(settings.telegramBotToken, settings.telegramChatId);\n    }\n  }\n\n  //  Test connection \n  async testConnection() {\n    if (!this.botToken || !this.chatId) {\n      return { ok: false, error: 'Bot token y Chat ID requeridos' };\n    }\n    try {\n      const res = await fetch(`https://api.telegram.org/bot${this.botToken}/sendMessage`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          chat_id: this.chatId,\n          text: ' *Kairos Trade conectado*\\n\\nRecibirs notificaciones de:\\n Trades ejecutados\\n Seales de bot\\n Alertas de precio\\n Estado del sistema',\n          parse_mode: 'Markdown',\n        }),\n      });\n      const data = await res.json();\n      if (data.ok) return { ok: true };\n      return { ok: false, error: data.description || 'Error desconocido' };\n    } catch (err) {\n      return { ok: false, error: err.message };\n    }\n  }\n\n  //  Send message (queued) \n  async send(text, parseMode = 'Markdown') {\n    if (!this.enabled) return;\n    this.queue.push({ text, parseMode });\n    this._processQueue();\n  }\n\n  async _processQueue() {\n    if (this.sending || this.queue.length === 0) return;\n    this.sending = true;\n\n    while (this.queue.length > 0) {\n      const { text, parseMode } = this.queue.shift();\n      try {\n        await fetch(`https://api.telegram.org/bot${this.botToken}/sendMessage`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            chat_id: this.chatId,\n            text,\n            parse_mode: parseMode,\n            disable_web_page_preview: true,\n          }),\n        });\n      } catch (err) {\n        console.warn('[Telegram] Send error:', err.message);\n      }\n      if (this.queue.length > 0) {\n        await new Promise(r => setTimeout(r, this.rateLimitDelay));\n      }\n    }\n    this.sending = false;\n  }\n\n  //  Pre-formatted notifications \n\n  notifyTradeOpen(botName, side, symbol, price, quantity, broker) {\n    const emoji = side === 'buy' ? '' : '';\n    const text = `${emoji} *TRADE ABIERTO*\\n\\n`\n      + ` Bot: *${botName}*\\n`\n      + ` Par: \\`${symbol}\\`\\n`\n      + ` Lado: *${side.toUpperCase()}*\\n`\n      + ` Precio: \\`$${parseFloat(price).toFixed(2)}\\`\\n`\n      + ` Cantidad: \\`${parseFloat(quantity).toFixed(6)}\\`\\n`\n      + ` Broker: ${broker || 'N/A'}\\n`\n      + ` ${new Date().toLocaleString('es')}`;\n    this.send(text);\n  }\n\n  notifyTradeClose(botName, side, symbol, entryPrice, exitPrice, pnl, reason) {\n    const emoji = pnl >= 0 ? '' : '';\n    const reasonMap = {\n      stop_loss: ' Stop Loss',\n      trailing_stop: ' Trailing Stop',\n      take_profit: ' Take Profit',\n      signal: ' Seal',\n    };\n    const text = `${emoji} *TRADE CERRADO*\\n\\n`\n      + ` Bot: *${botName}*\\n`\n      + ` Par: \\`${symbol}\\`\\n`\n      + ` ${side.toUpperCase()}: \\`$${parseFloat(entryPrice).toFixed(2)}\\`  \\`$${parseFloat(exitPrice).toFixed(2)}\\`\\n`\n      + `${pnl >= 0 ? '' : ''} P&L: *${pnl >= 0 ? '+' : ''}$${parseFloat(pnl).toFixed(2)}*\\n`\n      + ` Razn: ${reasonMap[reason] || reason || 'Manual'}\\n`\n      + ` ${new Date().toLocaleString('es')}`;\n    this.send(text);\n  }\n\n  notifyBotStarted(botName, pair, strategy, broker) {\n    const text = ` *BOT ACTIVADO*\\n\\n`\n      + ` *${botName}*\\n`\n      + ` Par: \\`${pair}\\`\\n`\n      + ` Estrategia: ${strategy || 'Custom'}\\n`\n      + ` Broker: ${broker || 'Demo'}\\n`\n      + ` ${new Date().toLocaleString('es')}`;\n    this.send(text);\n  }\n\n  notifyBotStopped(botName, totalTrades, totalPnl) {\n    const text = ` *BOT DETENIDO*\\n\\n`\n      + ` *${botName}*\\n`\n      + ` Trades totales: ${totalTrades || 0}\\n`\n      + ` P&L total: *${(totalPnl || 0) >= 0 ? '+' : ''}$${(totalPnl || 0).toFixed(2)}*\\n`\n      + ` ${new Date().toLocaleString('es')}`;\n    this.send(text);\n  }\n\n  notifyAlert(type, pair, price, message) {\n    const text = ` *ALERTA: ${type.toUpperCase()}*\\n\\n`\n      + ` Par: \\`${pair}\\`\\n`\n      + ` Precio: \\`$${parseFloat(price).toFixed(2)}\\`\\n`\n      + ` ${message}\\n`\n      + ` ${new Date().toLocaleString('es')}`;\n    this.send(text);\n  }\n\n  notifyError(botName, error) {\n    const text = ` *ERROR*\\n\\n`\n      + ` Bot: *${botName}*\\n`\n      + ` \\`${error}\\`\\n`\n      + ` ${new Date().toLocaleString('es')}`;\n    this.send(text);\n  }\n\n  notifyDailySummary(stats) {\n    const text = ` *RESUMEN DIARIO*\\n\\n`\n      + ` Trades: ${stats.totalTrades}\\n`\n      + ` Ganados: ${stats.wins} (${stats.winRate?.toFixed(1)}%)\\n`\n      + ` Perdidos: ${stats.losses}\\n`\n      + ` P&L Total: *${stats.totalPnl >= 0 ? '+' : ''}$${stats.totalPnl?.toFixed(2)}*\\n`\n      + ` Max Drawdown: ${stats.maxDrawdown?.toFixed(1)}%\\n`\n      + ` Mejor trade: +$${stats.bestTrade?.toFixed(2)}\\n`\n      + `\\n_Kairos Trade  ${new Date().toLocaleDateString('es')}_`;\n    this.send(text);\n  }\n}\n\nexport const telegramService = new TelegramService();\nexport default telegramService;\n","// Kairos Trade  Main Application (Premium v2.4  Code Split + PWA + Auth Refresh)\nimport { useEffect, useState, lazy, Suspense, useCallback } from 'react';\nimport { Toaster, toast } from 'react-hot-toast';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport useStore from './store/useStore';\nimport apiClient from './services/apiClient';\n\n// Layout (always loaded  shell)\nimport Sidebar from './components/Layout/Sidebar';\nimport Header from './components/Layout/Header';\nimport ErrorBoundary from './components/Layout/ErrorBoundary';\n\n// Auth & Onboarding (always loaded  gate)\nimport AuthScreen from './components/Auth/AuthScreen';\nimport OnboardingWizard from './components/Onboarding/OnboardingWizard';\n\n// Lazy-loaded pages (code-split  each chunk loads on demand)\nconst Dashboard = lazy(() => import('./components/Dashboard/Dashboard'));\nconst TradingChart = lazy(() => import('./components/Chart/TradingChart'));\nconst DepthChart = lazy(() => import('./components/Chart/DepthChart'));\nconst TradingPanel = lazy(() => import('./components/Trading/TradingPanel'));\nconst BotManager = lazy(() => import('./components/Bots/BotManager'));\nconst BrokerManager = lazy(() => import('./components/Broker/BrokerManager'));\nconst AIChat = lazy(() => import('./components/AI/AIChat'));\nconst StrategyBuilder = lazy(() => import('./components/Strategy/StrategyBuilder'));\nconst TradeHistory = lazy(() => import('./components/Trading/TradeHistory'));\nconst SimulatorScreen = lazy(() => import('./components/Trading/SimulatorScreen'));\nconst SettingsPanel = lazy(() => import('./components/Settings/SettingsPanel'));\nconst AlertPanel = lazy(() => import('./components/Alerts/AlertPanel'));\nconst OrdersPanel = lazy(() => import('./components/Trading/OrdersPanel'));\nconst PortfolioAnalytics = lazy(() => import('./components/Portfolio/PortfolioAnalytics'));\nconst MultiChart = lazy(() => import('./components/Chart/MultiChart'));\nconst TradeJournal = lazy(() => import('./components/Journal/TradeJournal'));\nconst RiskDashboard = lazy(() => import('./components/Risk/RiskDashboard'));\nconst MobileTradeView = lazy(() => import('./components/Trading/MobileTradeView'));\nconst KairosBroker = lazy(() => import('./components/Kairos/KairosBroker'));\nconst BuyKairos = lazy(() => import('./components/Kairos/BuyKairos'));\nconst KairosVault = lazy(() => import('./components/Kairos/KairosVault'));\nconst KairosTreasury = lazy(() => import('./components/Kairos/KairosTreasury'));\nconst WalletPage = lazy(() => import('./components/Wallet/WalletPage'));\nconst MarketHeatmap = lazy(() => import('./components/Dashboard/MarketHeatmap'));\nimport { isAdmin } from './constants';\nimport { telegramService } from './services/telegram';\n\n/*  Global error fallback (catches crashes outside ErrorBoundary)  */\nfunction AppCrashFallback({ error }) {\n  return (\n    <div style={{ background: '#08090C', color: '#F0F0F0', minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', padding: '2rem', fontFamily: 'Inter, sans-serif' }}>\n      <div style={{ background: '#1A1D26', padding: '2rem', borderRadius: '16px', maxWidth: '420px', width: '100%', border: '1px solid #252836' }}>\n        <h2 style={{ color: '#FF4757', marginBottom: '12px', fontSize: '18px' }}>Error de aplicacin</h2>\n        <p style={{ color: '#B8BCC8', fontSize: '14px', marginBottom: '16px' }}>{error?.message || 'Algo sali mal'}</p>\n        <button onClick={() => { localStorage.clear(); window.location.reload(); }}\n          style={{ background: '#3B82F6', color: 'white', border: 'none', padding: '10px 20px', borderRadius: '8px', cursor: 'pointer', fontSize: '14px', fontWeight: '600' }}>\n          Reiniciar App\n        </button>\n      </div>\n    </div>\n  );\n}\n\n/*  Loading fallback  */\nfunction PageLoader() {\n  return (\n    <div className=\"flex-1 flex items-center justify-center\" style={{ background: 'var(--dark)' }}>\n      <div className=\"flex flex-col items-center gap-3\">\n        <div className=\"w-8 h-8 border-2 border-[var(--gold)] border-t-transparent rounded-full animate-spin\" />\n        <span className=\"text-xs text-[var(--text-dim)] font-medium\">Loading...</span>\n      </div>\n    </div>\n  );\n}\n\n// Sub-component: Trading view with chart/depth toggle + orders panel\nfunction TradingView() {\n  const [chartTab, setChartTab] = useState('chart');\n  const [showPanel, setShowPanel] = useState(true);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n  const { selectedPair } = useStore();\n\n  // Listen for resize to toggle mobile/desktop view\n  useEffect(() => {\n    const onResize = () => setIsMobile(window.innerWidth < 768);\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  // Mobile: use the pro mobile trading view\n  if (isMobile) {\n    return (\n      <Suspense fallback={<PageLoader />}>\n        <MobileTradeView />\n      </Suspense>\n    );\n  }\n\n  // Desktop: original layout\n  return (\n    <div className=\"flex flex-col md:flex-row flex-1 overflow-hidden\">\n      <div className=\"flex-1 overflow-hidden flex flex-col min-w-0\">\n        {/* Chart area */}\n        <div className=\"flex-1 min-h-0 flex flex-col overflow-hidden\">\n          <div className=\"flex gap-1 px-3 pt-2 shrink-0 justify-between\" style={{ background: 'var(--surface)' }}>\n            <div className=\"flex gap-1\">\n              {[['chart', 'Chart'], ['depth', 'Depth']].map(([id, label]) => (\n                <button key={id} onClick={() => setChartTab(id)}\n                  className={`px-3 py-1.5 text-xs font-bold rounded-t-lg transition-colors ${chartTab === id ? 'text-[var(--gold)]' : 'text-[var(--text-dim)] hover:text-[var(--text-secondary)]'}`}\n                  style={chartTab === id ? { background: 'var(--dark)', borderTop: '2px solid var(--gold)' } : {}}>\n                  {label}\n                </button>\n              ))}\n            </div>\n            {/* Mobile toggle for trading panel */}\n            <button\n              onClick={() => setShowPanel(v => !v)}\n              className=\"md:hidden px-3 py-1.5 text-xs font-bold text-[var(--gold)] rounded-lg bg-[var(--gold)]/[0.08]\"\n            >\n              {showPanel ? 'Ocultar Panel' : 'Operar'}\n            </button>\n          </div>\n          <Suspense fallback={<PageLoader />}>\n            {chartTab === 'chart' ? (\n              <div className=\"flex-1 min-h-0 overflow-hidden flex flex-col\"><TradingChart /></div>\n            ) : (\n              <div className=\"flex-1 min-h-0 overflow-hidden flex flex-col\"><DepthChart pair={selectedPair || 'BTCUSDT'} height={500} /></div>\n            )}\n          </Suspense>\n        </div>\n        {/* Orders panel below chart */}\n        <Suspense fallback={null}><OrdersPanel /></Suspense>\n      </div>\n      {/* Trading Panel  side on desktop, below on mobile (toggleable) */}\n      {showPanel && (\n        <div className=\"md:w-auto shrink-0 max-h-[50vh] md:max-h-none overflow-y-auto border-t md:border-t-0 md:border-l border-[var(--border)]\">\n          <Suspense fallback={<PageLoader />}><TradingPanel /></Suspense>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction App() {\n  const { isAuthenticated, currentPage, aiPanelOpen, seedDefaultStrategies, settings, user, setPage, sidebarOpen, logout, login } = useStore();\n  const [showOnboarding, setShowOnboarding] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [validatingSession, setValidatingSession] = useState(isAuthenticated);\n\n  // Seed factory strategies on first load\n  useEffect(() => { seedDefaultStrategies(); }, []);\n\n  // Initialize Telegram from saved settings\n  useEffect(() => {\n    if (settings?.telegramBotToken && settings?.telegramChatId) {\n      telegramService.configure(settings.telegramBotToken, settings.telegramChatId);\n    }\n  }, [settings?.telegramBotToken, settings?.telegramChatId]);\n\n  //  Validate session on page reload \n  useEffect(() => {\n    if (!isAuthenticated) { setValidatingSession(false); return; }\n\n    let cancelled = false;\n    apiClient.validateSession().then(serverUser => {\n      if (cancelled) return;\n      if (!serverUser) {\n        // Token expired/invalid  force logout\n        logout();\n        toast.error('Sesin expirada. Inicia sesin de nuevo.', { duration: 4000 });\n      } else {\n        // Sync server-side profile updates (role, plan, name, has2FA)\n        const current = useStore.getState().user;\n        if (current && (\n          current.role !== serverUser.role ||\n          current.plan !== serverUser.plan ||\n          current.name !== serverUser.name ||\n          current.has2FA !== (serverUser.totp_enabled || false)\n        )) {\n          login({\n            ...current,\n            role: serverUser.role,\n            plan: serverUser.plan,\n            name: serverUser.name,\n            has2FA: serverUser.totp_enabled || false,\n          });\n        }\n      }\n      setValidatingSession(false);\n    }).catch(() => {\n      // Network error (Render cold start)  skip validation, let user use cached session\n      if (!cancelled) setValidatingSession(false);\n    });\n\n    return () => { cancelled = true; };\n  }, []); // Run once on mount\n\n  //  Listen for session-expired events from apiClient \n  useEffect(() => {\n    const handleExpired = () => {\n      logout();\n      toast.error('Sesin expirada. Inicia sesin de nuevo.', { duration: 4000 });\n    };\n    window.addEventListener('kairos:session-expired', handleExpired);\n    return () => window.removeEventListener('kairos:session-expired', handleExpired);\n  }, [logout]);\n\n  // Show onboarding wizard for NEW registrations only (skip for existing returning users)\n  useEffect(() => {\n    if (isAuthenticated && user?.id) {\n      const done = localStorage.getItem(`kairos_onboarding_done_${user.id}`);\n      // Only show if user explicitly came from registration (flag set during register)\n      const justRegistered = sessionStorage.getItem('kairos_just_registered');\n      if (!done && justRegistered) {\n        setShowOnboarding(true);\n        sessionStorage.removeItem('kairos_just_registered');\n      } else if (!done) {\n        // Mark as done for existing users who never saw it  skip silently\n        localStorage.setItem(`kairos_onboarding_done_${user.id}`, '1');\n      }\n    }\n  }, [isAuthenticated, user?.id]);\n\n  // Close mobile menu on page change\n  // NOTE: These hooks MUST be before any conditional returns to obey Rules of Hooks\n  useEffect(() => { setMobileMenuOpen(false); }, [currentPage]);\n\n  // Guard treasury page  redirect non-admins\n  useEffect(() => {\n    if (currentPage === 'kairos-treasury' && !isAdmin(user)) {\n      setPage('dashboard');\n    }\n  }, [currentPage, user, setPage]);\n\n  if (!isAuthenticated) {\n    return <AuthScreen />;\n  }\n\n  // Show loading while validating session on reload\n  if (validatingSession) {\n    return (\n      <div className=\"flex h-screen items-center justify-center bg-[#050507]\">\n        <div className=\"flex flex-col items-center gap-3\">\n          <div className=\"w-10 h-10 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n          <span className=\"text-xs text-zinc-500 font-medium\">Verificando sesin...</span>\n        </div>\n      </div>\n    );\n  }\n\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'dashboard': return <Dashboard />;\n      case 'chart': return <TradingView />;\n      case 'bots': return <BotManager />;\n      case 'simulator': return <SimulatorScreen />;\n      case 'brokers': return <BrokerManager />;\n      case 'ai': return <AIChat />;\n      case 'strategies': return <StrategyBuilder />;\n      case 'history': return <TradeHistory />;\n      case 'alerts': return <AlertPanel />;\n      case 'portfolio': return <PortfolioAnalytics />;\n      case 'multichart': return <MultiChart />;\n      case 'heatmap': return <MarketHeatmap />;\n      case 'journal': return <TradeJournal />;\n      case 'risk': return <RiskDashboard />;\n      case 'kairos-broker': return <KairosBroker />;\n      case 'kairos-vault': return <KairosVault />;\n      case 'kairos-treasury': {\n        if (!isAdmin(user)) return <Dashboard />;\n        return <KairosTreasury />;\n      }\n      case 'buy-kairos': return <BuyKairos />;\n      case 'wallet': return <WalletPage />;\n      case 'settings': return <SettingsPanel />;\n      default: return <Dashboard />;\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-[var(--dark)] overflow-hidden\">\n      <ErrorBoundary level=\"widget\">\n        <Toaster\n          position=\"top-right\"\n          toastOptions={{\n            style: { background: '#181A20', color: '#EAECEF', border: '1px solid #1E222D', fontSize: '13px' },\n          }}\n        />\n      </ErrorBoundary>\n\n      {/* Onboarding Wizard (shows once for new users) */}\n      <AnimatePresence>\n        {showOnboarding && <OnboardingWizard onComplete={() => setShowOnboarding(false)} />}\n      </AnimatePresence>\n\n      {/* Sidebar  desktop: inline, mobile: overlay */}\n      <div className=\"hidden md:flex\">\n        <ErrorBoundary level=\"widget\"><Sidebar /></ErrorBoundary>\n      </div>\n\n      {/* Mobile sidebar overlay */}\n      <AnimatePresence>\n        {mobileMenuOpen && (\n          <motion.div\n            key=\"mobile-backdrop\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/60 z-40 md:hidden\"\n            onClick={() => setMobileMenuOpen(false)}\n          />\n        )}\n        {mobileMenuOpen && (\n          <motion.div\n            key=\"mobile-sidebar\"\n            initial={{ x: -300 }}\n            animate={{ x: 0 }}\n            exit={{ x: -300 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n            className=\"fixed left-0 top-0 bottom-0 z-50 md:hidden\"\n          >\n            <Sidebar forceMobileOpen />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Main area */}\n      <div className=\"flex-1 flex flex-col overflow-hidden min-w-0\">\n        <ErrorBoundary level=\"widget\">\n          <Header onMenuToggle={() => setMobileMenuOpen(v => !v)} mobileMenuOpen={mobileMenuOpen} />\n        </ErrorBoundary>\n\n        <div className=\"flex flex-1 overflow-hidden\">\n          {/* Page content */}\n          <AnimatePresence mode=\"wait\" initial={false}>\n            <motion.div\n              key={currentPage}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.15 }}\n              className=\"flex-1 flex flex-col overflow-hidden min-w-0\"\n            >\n              <ErrorBoundary key={currentPage + '-eb'}>\n                <Suspense fallback={<PageLoader />}>\n                  {renderPage()}\n                </Suspense>\n              </ErrorBoundary>\n            </motion.div>\n          </AnimatePresence>\n\n          {/* AI Panel (slide-in)  desktop only, mobile: full overlay */}\n          <AnimatePresence>\n            {aiPanelOpen && currentPage !== 'ai' && (\n              <motion.div\n                initial={{ width: 0, opacity: 0 }}\n                animate={{ width: 380, opacity: 1 }}\n                exit={{ width: 0, opacity: 0 }}\n                transition={{ duration: 0.2 }}\n                className=\"border-l border-[var(--border)] overflow-hidden shrink-0 hidden md:block\"\n              >\n                <ErrorBoundary level=\"widget\">\n                  <Suspense fallback={<PageLoader />}><AIChat /></Suspense>\n                </ErrorBoundary>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* AI Panel  mobile: full-width overlay */}\n          <AnimatePresence>\n            {aiPanelOpen && currentPage !== 'ai' && (\n              <motion.div\n                initial={{ y: '100%' }}\n                animate={{ y: 0 }}\n                exit={{ y: '100%' }}\n                transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n                className=\"fixed inset-0 z-40 md:hidden bg-[var(--dark)]\"\n              >\n                <ErrorBoundary level=\"widget\">\n                  <Suspense fallback={<PageLoader />}><AIChat /></Suspense>\n                </ErrorBoundary>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\n// \n//  Production-Grade Global Error Boundary\n//  - Auto-retries up to 3 times before showing error UI\n//  - Shows user-friendly message (no technical details in prod)\n//  - \"Reset Session\" only clears auth  preserves user preferences\n//  - Logs errors to console for remote debugging\n// \nconst MAX_AUTO_RETRIES = 3;\nconst RETRY_RESET_AFTER_MS = 10000; // Reset retry counter after 10s of stability\n\nclass GlobalErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, retryCount: 0 };\n    this._stabilityTimer = null;\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, info) {\n    // Always log for remote debugging\n    console.error('[KairosTrade] Crash:', error?.message, '\\nStack:', error?.stack?.slice(0, 500), '\\nComponent:', info?.componentStack?.slice(0, 300));\n\n    const { retryCount } = this.state;\n\n    // Auto-retry: silently recover up to MAX_AUTO_RETRIES times\n    if (retryCount < MAX_AUTO_RETRIES) {\n      console.warn(`[KairosTrade] Auto-retry ${retryCount + 1}/${MAX_AUTO_RETRIES}...`);\n      setTimeout(() => {\n        this.setState(prev => ({ hasError: false, error: null, retryCount: prev.retryCount + 1 }));\n      }, 500);\n      return;\n    }\n  }\n\n  componentDidUpdate(_, prevState) {\n    // If we recovered from an error, start a stability timer\n    if (prevState.hasError && !this.state.hasError) {\n      clearTimeout(this._stabilityTimer);\n      this._stabilityTimer = setTimeout(() => {\n        // App has been stable  reset retry counter\n        this.setState({ retryCount: 0 });\n      }, RETRY_RESET_AFTER_MS);\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this._stabilityTimer);\n  }\n\n  render() {\n    if (this.state.hasError && this.state.retryCount >= MAX_AUTO_RETRIES) {\n      return (\n        <div style={{ background: '#08090C', color: '#F0F0F0', minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', padding: '2rem', fontFamily: 'Inter, sans-serif' }}>\n          <div style={{ background: '#1A1D26', padding: '2.5rem', borderRadius: '16px', maxWidth: '420px', width: '100%', border: '1px solid #252836', textAlign: 'center' }}>\n            {/* Logo */}\n            <div style={{ fontSize: '40px', marginBottom: '16px' }}></div>\n\n            <h2 style={{ color: '#EAECEF', marginBottom: '8px', fontSize: '20px', fontWeight: '700' }}>\n              Algo sali mal\n            </h2>\n            <p style={{ color: '#848E9C', fontSize: '14px', marginBottom: '24px', lineHeight: '1.5' }}>\n              Estamos trabajando para solucionarlo. Por favor recarga la pgina.\n            </p>\n\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n              <button\n                onClick={() => window.location.reload()}\n                style={{ background: '#3B82F6', color: 'white', border: 'none', padding: '12px 24px', borderRadius: '10px', cursor: 'pointer', fontSize: '15px', fontWeight: '600', transition: 'background 0.2s' }}\n                onMouseOver={e => e.target.style.background = '#2563EB'}\n                onMouseOut={e => e.target.style.background = '#3B82F6'}\n              >\n                Recargar Pgina\n              </button>\n              <button\n                onClick={() => {\n                  // Only clear auth session  preserve user settings and data\n                  localStorage.removeItem('kairos_trade_auth');\n                  sessionStorage.clear();\n                  window.location.href = '/';\n                }}\n                style={{ background: 'transparent', color: '#848E9C', border: '1px solid #2B3139', padding: '10px 20px', borderRadius: '10px', cursor: 'pointer', fontSize: '13px', fontWeight: '500' }}\n              >\n                Reiniciar Sesin\n              </button>\n            </div>\n\n            <p style={{ color: '#4B5563', fontSize: '11px', marginTop: '20px' }}>\n              Si el problema persiste, contacta soporte: info@kairos-777.com\n            </p>\n          </div>\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <GlobalErrorBoundary>\n      <App />\n    </GlobalErrorBoundary>\n  </React.StrictMode>\n);\n\n// Signal to global error handler that React mounted successfully\nif (typeof window.__kairosReady === 'function') window.__kairosReady();\n"],"file":"assets/index-D1oitnvn.js"}