import{j as e,ao as v}from"./ui-BpW-uvdI.js";import{a as g}from"./vendor-CUCP814w.js";import{u as j}from"./index-BnmiVhj1.js";function y(){const{tradeHistory:r,positions:a}=j(),[d,c]=g.useState("open"),x=r.reduce((t,l)=>t+(l.pnl||0),0),p=r.filter(t=>(t.pnl||0)>0).length,b=r.length>0?p/r.length*100:0;return e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg font-bold",children:"Historial de Trading"}),e.jsxs("p",{className:"text-xs text-[var(--text-dim)]",children:[r.length," trades cerrados â€¢ ",a.length," posiciones abiertas"]})]}),e.jsxs("button",{onClick:()=>{const t=[["Par","Lado","Entrada","Salida","Cantidad","P&L","Fecha Apertura","Fecha Cierre"]];r.forEach(s=>{var h,m;t.push([s.symbol,s.side,(h=s.entryPrice)==null?void 0:h.toFixed(2),((m=s.exitPrice)==null?void 0:m.toFixed(2))||"",s.quantity,(s.pnl||0).toFixed(2),s.openedAt||"",s.closedAt||""])});const l=t.map(s=>s.join(",")).join(`
`),n=new Blob([l],{type:"text/csv"}),o=URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download=`kairos-trades-${new Date().toISOString().split("T")[0]}.csv`,i.click(),URL.revokeObjectURL(o)},className:"flex items-center gap-2 px-3 py-1.5 bg-[var(--dark-3)] text-[var(--text-dim)] rounded-lg text-xs hover:text-[var(--gold)] hover:border-[var(--gold)]/30 transition-all border border-[var(--border)]",children:[e.jsx(v,{size:14})," Exportar CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Total Trades"}),e.jsx("p",{className:"text-lg font-bold",children:r.length})]}),e.jsxs("div",{className:"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"P&L Total"}),e.jsxs("p",{className:`text-lg font-bold ${x>=0?"text-[var(--green)]":"text-[var(--red)]"}`,children:[x>=0?"+":"","$",x.toFixed(2)]})]}),e.jsxs("div",{className:"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Win Rate"}),e.jsxs("p",{className:"text-lg font-bold text-[var(--gold)]",children:[b.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Posiciones Abiertas"}),e.jsx("p",{className:"text-lg font-bold text-[var(--blue)]",children:a.length})]})]}),e.jsxs("div",{className:"flex gap-1 bg-[var(--dark-3)] rounded-lg p-1 w-fit",children:[e.jsxs("button",{onClick:()=>c("open"),className:`px-4 py-1.5 text-sm rounded-md ${d==="open"?"bg-[var(--gold)] text-white font-bold":"text-[var(--text-dim)]"}`,children:["Abiertas (",a.length,")"]}),e.jsxs("button",{onClick:()=>c("closed"),className:`px-4 py-1.5 text-sm rounded-md ${d==="closed"?"bg-[var(--gold)] text-white font-bold":"text-[var(--text-dim)]"}`,children:["Cerradas (",r.length,")"]})]}),e.jsx("div",{className:"bg-[var(--dark-2)] border border-[var(--border)] rounded-xl overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm min-w-[600px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[var(--border)] text-[var(--text-dim)] text-xs",children:[e.jsx("th",{className:"text-left p-3",children:"Par"}),e.jsx("th",{className:"text-left p-3",children:"Lado"}),e.jsx("th",{className:"text-right p-3",children:"Entrada"}),e.jsx("th",{className:"text-right p-3",children:"Cantidad"}),e.jsx("th",{className:"text-right p-3",children:"P&L"}),e.jsx("th",{className:"text-right p-3",children:"Fecha"})]})}),e.jsx("tbody",{children:(d==="open"?a:r).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-[var(--text-dim)]",children:d==="open"?"Sin posiciones abiertas":"Sin trades cerrados"})}):(d==="open"?a:r).map((t,l)=>{var n,o;return e.jsxs("tr",{className:"border-b border-[var(--border)] hover:bg-[var(--dark-3)] transition-colors",children:[e.jsx("td",{className:"p-3 font-bold",children:t.symbol}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold
                    ${t.side==="buy"?"bg-[var(--green)]/20 text-[var(--green)]":"bg-[var(--red)]/20 text-[var(--red)]"}`,children:(n=t.side)==null?void 0:n.toUpperCase()})}),e.jsxs("td",{className:"p-3 text-right font-mono",children:["$",(o=t.entryPrice)==null?void 0:o.toFixed(2)]}),e.jsx("td",{className:"p-3 text-right font-mono",children:t.quantity}),e.jsxs("td",{className:`p-3 text-right font-mono font-bold ${(t.pnl||0)>=0?"text-[var(--green)]":"text-[var(--red)]"}`,children:[(t.pnl||0)>=0?"+":"","$",(t.pnl||0).toFixed(2)]}),e.jsx("td",{className:"p-3 text-right text-xs text-[var(--text-dim)]",children:new Date(t.openedAt||t.closedAt).toLocaleDateString()})]},t.id||l)})})]})})]})}export{y as default};
