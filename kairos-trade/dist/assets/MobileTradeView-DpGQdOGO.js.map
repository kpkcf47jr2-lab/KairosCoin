{"version":3,"mappings":"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","names":["TradingChart","lazy","DepthChart","fmt","n","d","PnlText","value","size","v","color","prefix","jsxs","MiniLoader","jsx","MobileOrderSheet","isOpen","onClose","selectedPair","currentPrice","addPosition","addOrder","useStore","side","setSide","useState","orderType","setOrderType","form","setForm","showAdvanced","setShowAdvanced","total","handleSubmit","price","Fragment","motion","e","formatPair","X","ArrowUpCircle","ArrowDownCircle","val","label","getBase","pct","Shield","ChevronUp","ChevronDown","Target","MobileInfoPanel","activeTab","onTabChange","positions","orders","bots","tradeHistory","closePosition","cancelOrder","activeBots","b","botTrades","bot","t","a","tabs","Layers","Clock","Bot","BarChart3","Icon","pos","pnl","pnlPct","order","Activity","sum","isActive","trades","winRate","_a","i","trade","MobileTradeView","priceChange24h","orderSheetOpen","setOrderSheetOpen","infoTab","setInfoTab","infoPanelExpanded","setInfoPanelExpanded","chartType","setChartType","totalPnl","changeColor","CandlestickChart","Suspense","AnimatePresence"],"ignoreList":[],"sources":["../../src/components/Trading/MobileTradeView.jsx"],"sourcesContent":["// Kairos Trade â€” Mobile Pro Trading View (Coinbase/BingX Style)\n// Full-screen trading experience optimized for mobile devices\nimport { useState, useEffect, useRef, useCallback, lazy, Suspense } from 'react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport {\n  TrendingUp, TrendingDown, ChevronDown, ChevronUp, X,\n  ArrowUpCircle, ArrowDownCircle, Bot, BarChart3, \n  Layers, Shield, Target, Clock, DollarSign,\n  CandlestickChart, Activity\n} from 'lucide-react';\nimport useStore from '../../store/useStore';\nimport marketData from '../../services/marketData';\nimport { toApiPair, getBase, formatPair, QUOTE } from '../../utils/pairUtils';\nimport { TIMEFRAMES } from '../../constants';\n\nconst TradingChart = lazy(() => import('../Chart/TradingChart'));\nconst DepthChart = lazy(() => import('../Chart/DepthChart'));\n\n/* â”€â”€ Helpers â”€â”€ */\nfunction fmt(n, d = 2) {\n  if (n == null || isNaN(n)) return '---';\n  return Number(n).toLocaleString(undefined, { minimumFractionDigits: d, maximumFractionDigits: d });\n}\n\nfunction PnlText({ value, size = 'sm' }) {\n  const v = Number(value) || 0;\n  const color = v >= 0 ? 'var(--green)' : 'var(--red)';\n  const prefix = v >= 0 ? '+' : '';\n  return (\n    <span style={{ color, fontSize: size === 'xs' ? '11px' : '13px' }} className=\"font-bold font-mono\">\n      {prefix}${fmt(v)}\n    </span>\n  );\n}\n\n/* â”€â”€ Mini Loader â”€â”€ */\nfunction MiniLoader() {\n  return (\n    <div className=\"flex-1 flex items-center justify-center\">\n      <div className=\"w-6 h-6 border-2 border-[var(--gold)] border-t-transparent rounded-full animate-spin\" />\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   MOBILE ORDER SHEET  (Bottom Sheet)\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction MobileOrderSheet({ isOpen, onClose }) {\n  const { selectedPair, currentPrice, addPosition, addOrder } = useStore();\n  const [side, setSide] = useState('buy');\n  const [orderType, setOrderType] = useState('market');\n  const [form, setForm] = useState({ quantity: '', price: '', stopLoss: '', takeProfit: '' });\n  const [showAdvanced, setShowAdvanced] = useState(false);\n\n  const total = parseFloat(form.quantity || 0) * (orderType === 'market' ? (currentPrice || 0) : parseFloat(form.price || 0));\n\n  const handleSubmit = () => {\n    if (!form.quantity) return;\n    const price = orderType === 'market' ? currentPrice : parseFloat(form.price);\n    if (!price) return;\n\n    if (orderType === 'market') {\n      addPosition({\n        symbol: selectedPair,\n        side,\n        quantity: parseFloat(form.quantity),\n        entryPrice: price,\n        stopLoss: form.stopLoss ? parseFloat(form.stopLoss) : null,\n        takeProfit: form.takeProfit ? parseFloat(form.takeProfit) : null,\n        openedAt: new Date().toISOString(),\n      });\n    } else {\n      addOrder({\n        symbol: selectedPair, side, type: orderType,\n        quantity: parseFloat(form.quantity), price,\n        stopLoss: form.stopLoss ? parseFloat(form.stopLoss) : null,\n        takeProfit: form.takeProfit ? parseFloat(form.takeProfit) : null,\n        status: 'open', createdAt: new Date().toISOString(),\n      });\n    }\n    setForm({ quantity: '', price: '', stopLoss: '', takeProfit: '' });\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {/* Backdrop */}\n      <motion.div\n        initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/60 z-50\" onClick={onClose}\n      />\n      {/* Sheet */}\n      <motion.div\n        initial={{ y: '100%' }} animate={{ y: 0 }} exit={{ y: '100%' }}\n        transition={{ type: 'spring', damping: 28, stiffness: 300 }}\n        className=\"fixed bottom-0 left-0 right-0 z-50 rounded-t-2xl\"\n        style={{ background: 'var(--surface)', maxHeight: '85vh', overflow: 'hidden' }}\n        onClick={e => e.stopPropagation()}\n      >\n        {/* Handle bar */}\n        <div className=\"flex justify-center pt-2 pb-1\">\n          <div className=\"w-10 h-1 rounded-full bg-[var(--border-light)]\" />\n        </div>\n\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-4 pb-3\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-base font-bold\">{formatPair(selectedPair)}</span>\n            <span className=\"text-sm font-mono font-bold\" style={{ color: 'var(--gold)' }}>\n              ${fmt(currentPrice)}\n            </span>\n          </div>\n          <button onClick={onClose} className=\"p-1.5 rounded-full hover:bg-[var(--dark-3)]\">\n            <X size={18} className=\"text-[var(--text-dim)]\" />\n          </button>\n        </div>\n\n        <div className=\"px-4 pb-6 space-y-3 overflow-y-auto\" style={{ maxHeight: 'calc(85vh - 60px)' }}>\n          {/* Buy/Sell toggle */}\n          <div className=\"flex gap-1.5 p-1 rounded-xl\" style={{ background: 'var(--dark-3)', border: '1px solid var(--border)' }}>\n            <button onClick={() => setSide('buy')}\n              className={`flex-1 py-3 text-sm font-bold rounded-xl transition-all ${side === 'buy' ? 'text-white' : 'text-[var(--text-dim)]'}`}\n              style={side === 'buy' ? { background: 'linear-gradient(135deg, #0ECB81, #0AA06A)', boxShadow: '0 4px 15px rgba(14,203,129,0.3)' } : {}}>\n              <div className=\"flex items-center justify-center gap-1.5\">\n                <ArrowUpCircle size={16} /> Long / Comprar\n              </div>\n            </button>\n            <button onClick={() => setSide('sell')}\n              className={`flex-1 py-3 text-sm font-bold rounded-xl transition-all ${side === 'sell' ? 'text-white' : 'text-[var(--text-dim)]'}`}\n              style={side === 'sell' ? { background: 'linear-gradient(135deg, #F6465D, #D32F4A)', boxShadow: '0 4px 15px rgba(246,70,93,0.3)' } : {}}>\n              <div className=\"flex items-center justify-center gap-1.5\">\n                <ArrowDownCircle size={16} /> Short / Vender\n              </div>\n            </button>\n          </div>\n\n          {/* Order type pills */}\n          <div className=\"flex gap-1 p-1 rounded-xl bg-[var(--dark-3)]\">\n            {[['market', 'Market'], ['limit', 'LÃ­mite'], ['stop_loss', 'Stop']].map(([val, label]) => (\n              <button key={val} onClick={() => setOrderType(val)}\n                className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${orderType === val ? 'bg-[var(--dark-5)] text-[var(--text)] shadow' : 'text-[var(--text-dim)]'}`}>\n                {label}\n              </button>\n            ))}\n          </div>\n\n          {/* Price input (limit/stop only) */}\n          {orderType !== 'market' && (\n            <div>\n              <label className=\"text-[10px] text-[var(--text-dim)] mb-1 block font-bold uppercase tracking-wider\">Precio</label>\n              <input type=\"number\" value={form.price} onChange={e => setForm({ ...form, price: e.target.value })}\n                placeholder={currentPrice?.toString()} className=\"w-full text-sm\" style={{ height: 44 }} />\n            </div>\n          )}\n\n          {/* Quantity */}\n          <div>\n            <label className=\"text-[10px] text-[var(--text-dim)] mb-1 block font-bold uppercase tracking-wider\">Cantidad ({getBase(selectedPair)})</label>\n            <input type=\"number\" value={form.quantity} onChange={e => setForm({ ...form, quantity: e.target.value })}\n              placeholder=\"0.001\" className=\"w-full text-sm\" style={{ height: 44 }} />\n            <div className=\"flex gap-1.5 mt-2\">\n              {[25, 50, 75, 100].map(pct => (\n                <button key={pct}\n                  onClick={() => {\n                    const price = orderType === 'market' ? currentPrice : parseFloat(form.price) || currentPrice;\n                    if (price) setForm({ ...form, quantity: ((10000 * pct / 100) / price).toFixed(6) });\n                  }}\n                  className=\"flex-1 py-2 text-xs font-bold rounded-lg text-[var(--text-dim)] hover:text-[var(--gold)] transition-all\"\n                  style={{ background: 'var(--dark-3)', border: '1px solid var(--border)' }}>\n                  {pct}%\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Advanced (SL/TP) toggle */}\n          <button onClick={() => setShowAdvanced(!showAdvanced)}\n            className=\"flex items-center gap-1.5 text-[11px] text-[var(--text-dim)] font-semibold\">\n            <Shield size={12} /> Stop Loss & Take Profit\n            {showAdvanced ? <ChevronUp size={12} /> : <ChevronDown size={12} />}\n          </button>\n\n          {showAdvanced && (\n            <div className=\"grid grid-cols-2 gap-2\">\n              <div>\n                <label className=\"text-[10px] text-[var(--red)] mb-1 flex items-center gap-1 font-bold uppercase\">\n                  <Shield size={9} /> SL\n                </label>\n                <input type=\"number\" value={form.stopLoss} onChange={e => setForm({ ...form, stopLoss: e.target.value })}\n                  placeholder=\"Precio\" className=\"w-full text-xs\" style={{ height: 40 }} />\n              </div>\n              <div>\n                <label className=\"text-[10px] text-[var(--green)] mb-1 flex items-center gap-1 font-bold uppercase\">\n                  <Target size={9} /> TP\n                </label>\n                <input type=\"number\" value={form.takeProfit} onChange={e => setForm({ ...form, takeProfit: e.target.value })}\n                  placeholder=\"Precio\" className=\"w-full text-xs\" style={{ height: 40 }} />\n              </div>\n            </div>\n          )}\n\n          {/* Total */}\n          <div className=\"rounded-xl p-3 flex items-center justify-between\" style={{ background: 'var(--dark-3)', border: '1px solid var(--border)' }}>\n            <span className=\"text-[10px] text-[var(--text-dim)] font-bold uppercase\">Total</span>\n            <span className=\"text-base font-mono font-bold\">${fmt(total)}</span>\n          </div>\n\n          {/* Submit button */}\n          <button onClick={handleSubmit} disabled={!form.quantity}\n            className=\"w-full py-4 font-bold rounded-xl text-base transition-all disabled:opacity-40 text-white\"\n            style={side === 'buy'\n              ? { background: 'linear-gradient(135deg, #0ECB81, #0AA06A)', boxShadow: '0 4px 20px rgba(14,203,129,0.3)' }\n              : { background: 'linear-gradient(135deg, #F6465D, #D32F4A)', boxShadow: '0 4px 20px rgba(246,70,93,0.3)' }}>\n            {side === 'buy' ? 'ðŸŸ¢ Comprar' : 'ðŸ”´ Vender'} {getBase(selectedPair)}\n          </button>\n\n          {/* Paper trading badge */}\n          <div className=\"flex items-center justify-center gap-1.5 py-1.5 rounded-lg\"\n            style={{ background: 'rgba(245,158,11,0.06)', border: '1px solid rgba(245,158,11,0.12)' }}>\n            <div className=\"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse\" />\n            <span className=\"text-[9px] font-bold text-amber-400 tracking-wider uppercase\">Simulador â€” Paper Trading</span>\n          </div>\n        </div>\n      </motion.div>\n    </>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   MOBILE BOTTOM INFO PANEL (Positions/Bots)\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction MobileInfoPanel({ activeTab, onTabChange }) {\n  const { positions, orders, bots, tradeHistory, currentPrice, closePosition, cancelOrder } = useStore();\n  const activeBots = bots.filter(b => b.status === 'active');\n\n  const botTrades = bots.flatMap(bot => {\n    const trades = bot.tradeLog || bot.trades_log || [];\n    return trades.map(t => ({ ...t, botName: bot.name }));\n  }).sort((a, b) => new Date(b.time || b.timestamp || 0) - new Date(a.time || a.timestamp || 0));\n\n  const tabs = [\n    { id: 'positions', label: 'Posiciones', count: positions.length, icon: Layers },\n    { id: 'orders', label: 'Ã“rdenes', count: orders.length, icon: Clock },\n    { id: 'bots', label: 'Bots', count: activeBots.length, icon: Bot },\n    { id: 'history', label: 'Historial', count: tradeHistory.length, icon: BarChart3 },\n  ];\n\n  return (\n    <div className=\"flex flex-col\" style={{ background: 'var(--surface)', borderTop: '1px solid var(--border)' }}>\n      {/* Tab bar â€” scrollable horizontal */}\n      <div className=\"flex shrink-0 overflow-x-auto\" style={{ borderBottom: '1px solid var(--border)', WebkitOverflowScrolling: 'touch' }}>\n        {tabs.map(t => {\n          const Icon = t.icon;\n          return (\n            <button key={t.id} onClick={() => onTabChange(t.id)}\n              className={`flex items-center gap-1 px-3 py-2.5 text-[11px] font-bold whitespace-nowrap transition-colors shrink-0\n                ${activeTab === t.id ? 'text-[var(--gold)]' : 'text-[var(--text-dim)]'}`}\n              style={activeTab === t.id ? { borderBottom: '2px solid var(--gold)' } : { borderBottom: '2px solid transparent' }}>\n              <Icon size={12} />\n              {t.label}\n              {t.count > 0 && (\n                <span className=\"ml-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold\"\n                  style={{ background: activeTab === t.id ? 'var(--gold)' : 'var(--dark-4)', color: activeTab === t.id ? '#fff' : 'var(--text-dim)' }}>\n                  {t.count}\n                </span>\n              )}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Content â€” scrollable */}\n      <div className=\"overflow-y-auto\" style={{ maxHeight: '35vh' }}>\n\n        {/* â”€â”€ Positions â”€â”€ */}\n        {activeTab === 'positions' && (\n          <div className=\"p-2 space-y-1.5\">\n            {positions.length === 0 ? (\n              <div className=\"text-center py-6\">\n                <Layers size={24} className=\"mx-auto mb-1.5 opacity-20\" style={{ color: 'var(--text-dim)' }} />\n                <p className=\"text-xs text-[var(--text-dim)]\">Sin posiciones abiertas</p>\n              </div>\n            ) : positions.map(pos => {\n              const pnl = pos.side === 'buy'\n                ? (currentPrice - pos.entryPrice) * pos.quantity\n                : (pos.entryPrice - currentPrice) * pos.quantity;\n              const pnlPct = ((pnl / (pos.entryPrice * pos.quantity)) * 100);\n              return (\n                <div key={pos.id} className=\"flex items-center gap-2 p-2.5 rounded-xl\"\n                  style={{ background: 'var(--dark-3)', border: `1px solid ${pnl >= 0 ? 'rgba(14,203,129,0.12)' : 'rgba(246,70,93,0.12)'}` }}>\n                  {/* Side indicator */}\n                  <div className=\"w-1 h-10 rounded-full shrink-0\"\n                    style={{ background: pos.side === 'buy' ? 'var(--green)' : 'var(--red)' }} />\n                  {/* Info */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-1.5\">\n                      <span className=\"text-xs font-bold\">{formatPair(pos.symbol)}</span>\n                      <span className={`text-[9px] font-bold px-1.5 py-0.5 rounded ${pos.side === 'buy' ? 'text-[var(--green)] bg-[var(--green)]/[0.1]' : 'text-[var(--red)] bg-[var(--red)]/[0.1]'}`}>\n                        {pos.side === 'buy' ? 'LONG' : 'SHORT'}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2 mt-0.5\">\n                      <span className=\"text-[10px] text-[var(--text-dim)]\">Entrada: ${fmt(pos.entryPrice)}</span>\n                      <span className=\"text-[10px] text-[var(--text-dim)]\">Qty: {pos.quantity}</span>\n                    </div>\n                  </div>\n                  {/* P&L */}\n                  <div className=\"text-right shrink-0\">\n                    <PnlText value={pnl} size=\"sm\" />\n                    <div className=\"text-[9px] font-mono\" style={{ color: pnl >= 0 ? 'var(--green)' : 'var(--red)', opacity: 0.7 }}>\n                      {pnlPct >= 0 ? '+' : ''}{fmt(pnlPct, 1)}%\n                    </div>\n                  </div>\n                  {/* Close button */}\n                  <button onClick={() => closePosition(pos.id)}\n                    className=\"p-1.5 rounded-lg shrink-0 hover:bg-[var(--red)]/[0.1]\"\n                    style={{ border: '1px solid rgba(246,70,93,0.15)' }}>\n                    <X size={12} className=\"text-[var(--red)]\" />\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {/* â”€â”€ Orders â”€â”€ */}\n        {activeTab === 'orders' && (\n          <div className=\"p-2 space-y-1.5\">\n            {orders.length === 0 ? (\n              <div className=\"text-center py-6\">\n                <Clock size={24} className=\"mx-auto mb-1.5 opacity-20\" style={{ color: 'var(--text-dim)' }} />\n                <p className=\"text-xs text-[var(--text-dim)]\">Sin Ã³rdenes pendientes</p>\n              </div>\n            ) : orders.map(order => (\n              <div key={order.id} className=\"flex items-center gap-2 p-2.5 rounded-xl\"\n                style={{ background: 'var(--dark-3)', border: '1px solid var(--border)' }}>\n                <div className=\"w-1 h-10 rounded-full shrink-0\"\n                  style={{ background: order.side === 'buy' ? 'var(--green)' : 'var(--red)' }} />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-1.5\">\n                    <span className=\"text-xs font-bold\">{formatPair(order.symbol)}</span>\n                    <span className=\"text-[9px] font-bold text-[var(--text-dim)] bg-[var(--dark-4)] px-1.5 py-0.5 rounded uppercase\">\n                      {order.type}\n                    </span>\n                    <span className={`text-[9px] font-bold ${order.side === 'buy' ? 'text-[var(--green)]' : 'text-[var(--red)]'}`}>\n                      {order.side.toUpperCase()}\n                    </span>\n                  </div>\n                  <span className=\"text-[10px] text-[var(--text-dim)]\">\n                    ${fmt(order.price)} Ã— {order.quantity}\n                  </span>\n                </div>\n                <button onClick={() => cancelOrder(order.id)}\n                  className=\"p-1.5 rounded-lg shrink-0 hover:bg-[var(--red)]/[0.1]\"\n                  style={{ border: '1px solid var(--border)' }}>\n                  <X size={12} className=\"text-[var(--text-dim)]\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* â”€â”€ Bots with live P&L â”€â”€ */}\n        {activeTab === 'bots' && (\n          <div className=\"p-2 space-y-1.5\">\n            {bots.length === 0 ? (\n              <div className=\"text-center py-6\">\n                <Bot size={24} className=\"mx-auto mb-1.5 opacity-20\" style={{ color: 'var(--text-dim)' }} />\n                <p className=\"text-xs text-[var(--text-dim)]\">Sin bots configurados</p>\n                <p className=\"text-[10px] text-[var(--text-dim)] mt-1\">Crea un bot desde el menÃº principal</p>\n              </div>\n            ) : (\n              <>\n                {/* Summary card */}\n                {activeBots.length > 0 && (\n                  <div className=\"p-3 rounded-xl mb-1\" style={{ background: 'linear-gradient(135deg, var(--dark-3), var(--dark-4))', border: '1px solid var(--border-light)' }}>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-1.5\">\n                        <Activity size={14} className=\"text-[var(--gold)]\" />\n                        <span className=\"text-[11px] font-bold text-[var(--text)]\">{activeBots.length} Bot{activeBots.length > 1 ? 's' : ''} Activo{activeBots.length > 1 ? 's' : ''}</span>\n                      </div>\n                      <PnlText value={bots.reduce((sum, b) => sum + (b.pnl || 0), 0)} size=\"sm\" />\n                    </div>\n                  </div>\n                )}\n\n                {/* Bot list */}\n                {bots.map(bot => {\n                  const isActive = bot.status === 'active';\n                  const pnl = bot.pnl || 0;\n                  const trades = bot.totalTrades || (bot.tradeLog || bot.trades_log || []).length || 0;\n                  const winRate = bot.winRate || 0;\n                  return (\n                    <div key={bot.id} className=\"p-2.5 rounded-xl\"\n                      style={{ background: 'var(--dark-3)', border: `1px solid ${isActive ? 'rgba(59,130,246,0.12)' : 'var(--border)'}` }}>\n                      {/* Header */}\n                      <div className=\"flex items-center justify-between mb-1.5\">\n                        <div className=\"flex items-center gap-1.5\">\n                          <Bot size={14} style={{ color: isActive ? 'var(--gold)' : 'var(--text-dim)' }} />\n                          <span className=\"text-xs font-bold truncate max-w-[120px]\">{bot.name}</span>\n                          <span className=\"text-[9px] text-[var(--text-dim)] bg-[var(--dark-4)] px-1.5 py-0.5 rounded font-mono\">\n                            {formatPair(bot.pair || bot.symbol || 'N/A')}\n                          </span>\n                        </div>\n                        <span className={`text-[9px] font-bold px-2 py-0.5 rounded-full ${\n                          isActive ? 'text-[var(--green)] bg-[var(--green)]/[0.1]' : 'text-[var(--text-dim)] bg-[var(--dark-4)]'\n                        }`}>\n                          {isActive && <span className=\"inline-block w-1.5 h-1.5 rounded-full bg-[var(--green)] mr-1 animate-pulse\" />}\n                          {bot.status?.toUpperCase() || 'STOPPED'}\n                        </span>\n                      </div>\n                      {/* Stats row */}\n                      <div className=\"flex items-center gap-3\">\n                        <div>\n                          <span className=\"text-[9px] text-[var(--text-dim)] block\">P&L</span>\n                          <PnlText value={pnl} size=\"xs\" />\n                        </div>\n                        <div>\n                          <span className=\"text-[9px] text-[var(--text-dim)] block\">Trades</span>\n                          <span className=\"text-[11px] font-bold font-mono\">{trades}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-[9px] text-[var(--text-dim)] block\">Win Rate</span>\n                          <span className=\"text-[11px] font-bold font-mono\">{winRate}%</span>\n                        </div>\n                        <div className=\"ml-auto\">\n                          <span className=\"text-[9px] text-[var(--text-dim)] block\">Balance</span>\n                          <span className=\"text-[11px] font-bold font-mono\">${fmt(bot.currentBalance || bot.balance || 0)}</span>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n\n                {/* Recent bot trades */}\n                {botTrades.length > 0 && (\n                  <div className=\"mt-1\">\n                    <span className=\"text-[10px] text-[var(--text-dim)] font-bold uppercase tracking-wider px-1\">Ãšltimas seÃ±ales</span>\n                    {botTrades.slice(0, 5).map((t, i) => (\n                      <div key={i} className=\"flex items-center justify-between px-2 py-1.5 text-[10px]\"\n                        style={{ borderBottom: '1px solid rgba(30,34,45,0.3)' }}>\n                        <span className=\"text-[var(--text-dim)]\">{t.botName}</span>\n                        <span className={`font-bold ${t.signal === 'BUY' || t.side === 'buy' ? 'text-[var(--green)]' : 'text-[var(--red)]'}`}>\n                          {t.signal || t.side?.toUpperCase() || '?'}\n                        </span>\n                        <span className=\"font-mono text-[var(--text-dim)]\">${fmt(t.price)}</span>\n                        <PnlText value={t.pnl} size=\"xs\" />\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        )}\n\n        {/* â”€â”€ History â”€â”€ */}\n        {activeTab === 'history' && (\n          <div className=\"p-2 space-y-1\">\n            {tradeHistory.length === 0 ? (\n              <div className=\"text-center py-6\">\n                <BarChart3 size={24} className=\"mx-auto mb-1.5 opacity-20\" style={{ color: 'var(--text-dim)' }} />\n                <p className=\"text-xs text-[var(--text-dim)]\">Sin historial de operaciones</p>\n              </div>\n            ) : tradeHistory.slice(0, 20).map((trade, i) => {\n              const pnl = trade.pnl || ((trade.exitPrice - trade.entryPrice) * trade.quantity * (trade.side === 'buy' ? 1 : -1));\n              return (\n                <div key={trade.id || i} className=\"flex items-center gap-2 px-2 py-2 rounded-lg\"\n                  style={{ background: i % 2 === 0 ? 'var(--dark-3)' : 'transparent' }}>\n                  <div className=\"w-1 h-8 rounded-full shrink-0\"\n                    style={{ background: trade.side === 'buy' ? 'var(--green)' : 'var(--red)' }} />\n                  <div className=\"flex-1 min-w-0\">\n                    <span className=\"text-[11px] font-bold\">{formatPair(trade.symbol)}</span>\n                    <span className=\"text-[9px] text-[var(--text-dim)] ml-1\">{trade.side?.toUpperCase()}</span>\n                  </div>\n                  <PnlText value={pnl} size=\"xs\" />\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   MAIN: MOBILE TRADE VIEW\n   Chart (60%) + Info Panel (40%) + FAB buttons\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nexport default function MobileTradeView() {\n  const { selectedPair, currentPrice, priceChange24h, positions, bots } = useStore();\n  const [orderSheetOpen, setOrderSheetOpen] = useState(false);\n  const [infoTab, setInfoTab] = useState('positions');\n  const [infoPanelExpanded, setInfoPanelExpanded] = useState(true);\n  const [chartType, setChartType] = useState('chart'); // 'chart' | 'depth'\n\n  const activeBots = bots.filter(b => b.status === 'active');\n  const totalPnl = positions.reduce((sum, pos) => {\n    const pnl = pos.side === 'buy'\n      ? (currentPrice - pos.entryPrice) * pos.quantity\n      : (pos.entryPrice - currentPrice) * pos.quantity;\n    return sum + pnl;\n  }, 0);\n\n  const changeColor = (priceChange24h || 0) >= 0 ? 'var(--green)' : 'var(--red)';\n\n  return (\n    <div className=\"flex flex-col flex-1 overflow-hidden\" style={{ background: 'var(--dark)' }}>\n\n      {/* â”€â”€ Compact Pair/Price Header â”€â”€ */}\n      <div className=\"flex items-center justify-between px-3 py-2 shrink-0\"\n        style={{ background: 'var(--surface)', borderBottom: '1px solid var(--border)' }}>\n        {/* Left: pair + price */}\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm font-bold\">{formatPair(selectedPair)}</span>\n          <span className=\"text-sm font-mono font-bold\" style={{ color: 'var(--gold)' }}>\n            ${fmt(currentPrice)}\n          </span>\n          <span className=\"text-[10px] font-bold px-1.5 py-0.5 rounded\"\n            style={{ color: changeColor, background: `${changeColor}11` }}>\n            {(priceChange24h || 0) >= 0 ? '+' : ''}{fmt(priceChange24h || 0, 1)}%\n          </span>\n        </div>\n\n        {/* Right: chart type toggle */}\n        <div className=\"flex items-center gap-0.5 bg-[var(--dark-3)] rounded-lg p-0.5\">\n          <button onClick={() => setChartType('chart')}\n            className={`p-1.5 rounded-md ${chartType === 'chart' ? 'bg-[var(--gold)] text-white' : 'text-[var(--text-dim)]'}`}>\n            <CandlestickChart size={14} />\n          </button>\n          <button onClick={() => setChartType('depth')}\n            className={`p-1.5 rounded-md ${chartType === 'depth' ? 'bg-[var(--gold)] text-white' : 'text-[var(--text-dim)]'}`}>\n            <BarChart3 size={14} />\n          </button>\n        </div>\n      </div>\n\n      {/* â”€â”€ Chart Area (takes remaining space) â”€â”€ */}\n      <div className=\"flex-1 min-h-0 overflow-hidden relative\">\n        <Suspense fallback={<MiniLoader />}>\n          {chartType === 'chart' ? (\n            <TradingChart />\n          ) : (\n            <DepthChart pair={selectedPair || 'BTCUSDT'} height={400} />\n          )}\n        </Suspense>\n\n        {/* Quick P&L overlay (top-right of chart) */}\n        {positions.length > 0 && (\n          <div className=\"absolute top-2 right-2 z-10 flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg\"\n            style={{ background: 'rgba(11,14,17,0.85)', backdropFilter: 'blur(8px)', border: '1px solid var(--border)' }}>\n            <Layers size={11} className=\"text-[var(--text-dim)]\" />\n            <span className=\"text-[10px] text-[var(--text-dim)]\">{positions.length}</span>\n            <PnlText value={totalPnl} size=\"xs\" />\n          </div>\n        )}\n\n        {/* Active bots indicator (top-left of chart) */}\n        {activeBots.length > 0 && (\n          <div className=\"absolute top-2 left-2 z-10 flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg\"\n            style={{ background: 'rgba(11,14,17,0.85)', backdropFilter: 'blur(8px)', border: '1px solid var(--border)' }}>\n            <Bot size={11} className=\"text-[var(--gold)]\" />\n            <span className=\"text-[10px] text-[var(--text-dim)]\">{activeBots.length} bot{activeBots.length > 1 ? 's' : ''}</span>\n            <div className=\"w-1.5 h-1.5 rounded-full bg-[var(--green)] animate-pulse\" />\n          </div>\n        )}\n      </div>\n\n      {/* â”€â”€ Buy/Sell FAB Buttons â”€â”€ */}\n      <div className=\"flex gap-2 px-3 py-2 shrink-0\" style={{ background: 'var(--surface)', borderTop: '1px solid var(--border)' }}>\n        <button onClick={() => setOrderSheetOpen(true)}\n          className=\"flex-1 py-3 text-sm font-bold rounded-xl text-white flex items-center justify-center gap-1.5 active:scale-[0.98] transition-transform\"\n          style={{ background: 'linear-gradient(135deg, #0ECB81, #0AA06A)', boxShadow: '0 2px 12px rgba(14,203,129,0.25)' }}>\n          <ArrowUpCircle size={16} /> Comprar\n        </button>\n        <button onClick={() => setOrderSheetOpen(true)}\n          className=\"flex-1 py-3 text-sm font-bold rounded-xl text-white flex items-center justify-center gap-1.5 active:scale-[0.98] transition-transform\"\n          style={{ background: 'linear-gradient(135deg, #F6465D, #D32F4A)', boxShadow: '0 2px 12px rgba(246,70,93,0.25)' }}>\n          <ArrowDownCircle size={16} /> Vender\n        </button>\n        {/* Collapse/expand info panel */}\n        <button onClick={() => setInfoPanelExpanded(!infoPanelExpanded)}\n          className=\"px-3 py-3 rounded-xl shrink-0\"\n          style={{ background: 'var(--dark-3)', border: '1px solid var(--border)' }}>\n          {infoPanelExpanded ? <ChevronDown size={16} className=\"text-[var(--text-dim)]\" /> : <ChevronUp size={16} className=\"text-[var(--text-dim)]\" />}\n        </button>\n      </div>\n\n      {/* â”€â”€ Bottom Info Panel (Positions/Orders/Bots/History) â”€â”€ */}\n      <AnimatePresence>\n        {infoPanelExpanded && (\n          <motion.div\n            initial={{ height: 0 }} animate={{ height: 'auto' }} exit={{ height: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden shrink-0\"\n          >\n            <MobileInfoPanel activeTab={infoTab} onTabChange={setInfoTab} />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* â”€â”€ Order Bottom Sheet â”€â”€ */}\n      <AnimatePresence>\n        {orderSheetOpen && <MobileOrderSheet isOpen={orderSheetOpen} onClose={() => setOrderSheetOpen(false)} />}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"file":"assets/MobileTradeView-DpGQdOGO.js"}