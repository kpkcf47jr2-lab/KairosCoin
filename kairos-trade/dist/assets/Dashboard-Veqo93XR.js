import{c as R,f as Z,A as I,V as J,B as H,P as Q,d as ee,Z as O,S as te,T as se,o as ae,j as e,m as N,n as C,Y as re,_ as le,t as ie,D as oe,$ as ne,a0 as de,a1 as ce,a2 as xe,w as me,I as pe,J as ge,K as he}from"./ui-BpW-uvdI.js";import{a as g}from"./vendor-CUCP814w.js";import{u as K,a as be,i as ue,f as fe,g as q,t as ve}from"./index-CRS1ovvS.js";import{m as je}from"./marketData-K1zKCjjj.js";import{t as G}from"./tradingEngine-Cgamn5of.js";import"./indicators-DJQYQkcq.js";import"./broker-Cx0xydLV.js";import"./kairosScript-CEvQNFYY.js";function ye({data:l,color:o="#D4AF37",height:p=48,width:c=140}){const k=g.useRef(null);return g.useEffect(()=>{const x=k.current;if(!x||!l||l.length<2)return;const a=x.getContext("2d"),v=window.devicePixelRatio||1;x.width=c*v,x.height=p*v,a.scale(v,v),a.clearRect(0,0,c,p);const w=Math.min(...l),F=Math.max(...l)-w||1,m=4,r=c-m*2,$=p-m*2,T=a.createLinearGradient(0,m,0,p-m);T.addColorStop(0,o+"30"),T.addColorStop(1,o+"00"),a.beginPath(),l.forEach((S,D)=>{const n=m+D/(l.length-1)*r,j=m+(1-(S-w)/F)*$;D===0?a.moveTo(n,j):a.lineTo(n,j)}),a.lineTo(m+r,p-m),a.lineTo(m,p-m),a.closePath(),a.fillStyle=T,a.fill(),a.beginPath(),l.forEach((S,D)=>{const n=m+D/(l.length-1)*r,j=m+(1-(S-w)/F)*$;D===0?a.moveTo(n,j):a.lineTo(n,j)}),a.strokeStyle=o,a.lineWidth=1.5,a.stroke();const h=m+r,E=m+(1-(l[l.length-1]-w)/F)*$;a.beginPath(),a.arc(h,E,2.5,0,Math.PI*2),a.fillStyle=o,a.fill()},[l,o,c,p]),e.jsx("canvas",{ref:k,style:{width:c,height:p}})}function Ne(l){const o=Math.floor((Date.now()-new Date(l).getTime())/1e3);return o<60?"ahora":o<3600?`${Math.floor(o/60)}m`:o<86400?`${Math.floor(o/3600)}h`:`${Math.floor(o/86400)}d`}function Pe(){const{setPage:l,bots:o,brokers:p,tradeHistory:c,positions:k,user:x}=K(),[a,v]=g.useState([]),[w,U]=g.useState(!0),[F,m]=g.useState({}),{t:r}=be();g.useEffect(()=>{$();const t=setInterval($,3e4);return()=>clearInterval(t)},[]),g.useEffect(()=>{const t=()=>{const i={};G.activeBots.forEach((b,u)=>{i[u]=G.liveData.get(u)||{}}),m(i)};t();const s=setInterval(t,2e3);return()=>clearInterval(s)},[o]);const $=async()=>{try{const t=["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","XRPUSDT","ADAUSDT"],s=await Promise.all(t.map(async i=>{try{return await je.get24hrTicker(i)}catch{return null}}));v(s.filter(Boolean))}catch(t){console.error("Dashboard load error:",t)}U(!1)},T=o.filter(t=>t.status==="active"),h=c.reduce((t,s)=>t+(s.pnl||0),0),E=p.filter(t=>t.connected),S=[{label:r("dashboard.activeBots"),value:T.length,icon:R,color:"#3B82F6",gradient:"linear-gradient(135deg, rgba(59,130,246,0.1), rgba(59,130,246,0.02))",border:"rgba(59,130,246,0.1)",action:"bots"},{label:r("dashboard.brokers"),value:`${E.length}/${p.length}`,icon:Z,color:"#A855F7",gradient:"linear-gradient(135deg, rgba(168,85,247,0.1), rgba(168,85,247,0.02))",border:"rgba(168,85,247,0.1)",action:"brokers"},{label:r("dashboard.positions"),value:k.length,icon:I,color:"#00DC82",gradient:"linear-gradient(135deg, rgba(0,220,130,0.1), rgba(0,220,130,0.02))",border:"rgba(0,220,130,0.1)",action:"history"},{label:r("dashboard.totalPnl"),value:`${h>=0?"+":""}$${h.toFixed(2)}`,icon:J,color:h>=0?"#00DC82":"#FF4757",gradient:h>=0?"linear-gradient(135deg, rgba(0,220,130,0.1), rgba(0,220,130,0.02))":"linear-gradient(135deg, rgba(255,71,87,0.1), rgba(255,71,87,0.02))",border:h>=0?"rgba(0,220,130,0.1)":"rgba(255,71,87,0.1)",action:"history"}],D=[{label:r("dashboard.trading"),icon:H,page:"chart",desc:r("dashboard.tradingDesc"),color:"#3B82F6"},{label:r("dashboard.simulator"),icon:Q,page:"simulator",desc:r("dashboard.simulatorDesc"),color:"#00DC82"},{label:r("dashboard.kairosAi"),icon:ee,page:"ai",desc:r("dashboard.kairosAiDesc"),color:"#A855F7"},{label:r("dashboard.createBot"),icon:R,page:"bots",desc:r("dashboard.createBotDesc"),color:"#60A5FA"},{label:r("dashboard.strategies"),icon:O,page:"strategies",desc:r("dashboard.strategiesDesc"),color:"#EC4899"},{label:r("dashboard.brokersAction"),icon:te,page:"brokers",desc:r("dashboard.brokersActionDesc"),color:"#22D3EE"}],n=g.useMemo(()=>{const t=c||[];if(t.length===0)return null;const s=t.filter(d=>(d.pnl||0)>0),i=t.filter(d=>(d.pnl||0)<0),b=s.length/t.length*100,u=s.reduce((d,y)=>d+y.pnl,0),A=i.reduce((d,y)=>d+Math.abs(y.pnl),0),B=A>0?u/A:u>0?1/0:0;let z=0,P=0,M=0;const W=[];t.forEach(d=>{z+=d.pnl||0,W.push(z),P=Math.max(P,z);const y=P>0?(P-z)/P*100:0;M=Math.max(M,y)});const X=new Date().setHours(0,0,0,0),_=t.filter(d=>new Date(d.closedAt||d.time).getTime()>=X).reduce((d,y)=>d+(y.pnl||0),0),V=Date.now()-7*864e5,Y=t.filter(d=>new Date(d.closedAt||d.time).getTime()>=V).reduce((d,y)=>d+(y.pnl||0),0);return{winRate:b,profitFactor:B,maxDD:M,equityCurve:W,todayPnl:_,weekPnl:Y,totalPnl:h,totalTrades:t.length}},[c,h]),j=g.useMemo(()=>o.filter(t=>t.status==="active"),[o]),L=g.useMemo(()=>{const t=[];return(c||[]).slice(-6).forEach(s=>{var i;t.push({type:"trade",icon:s.pnl>=0?se:ae,color:s.pnl>=0?"#10B981":"#EF4444",text:`${((i=s.side)==null?void 0:i.toUpperCase())||"TRADE"} ${s.symbol||s.pair||"—"} → ${s.pnl>=0?"+":""}$${(s.pnl||0).toFixed(2)}`,time:s.closedAt||s.time})}),o.filter(s=>s.status==="active").forEach(s=>{t.push({type:"bot",icon:R,color:"#3B82F6",text:`${s.name} running on ${s.pair}`,time:s.startedAt||s.createdAt})}),t.sort((s,i)=>new Date(i.time||0)-new Date(s.time||0)).slice(0,8)},[c,o]),f=g.useMemo(()=>{if(!ue(x))return null;try{return fe.getStats()}catch{return null}},[x]);return e.jsxs("div",{className:"flex-1 overflow-y-auto px-3 md:px-5 py-4 md:py-5 space-y-4 md:space-y-5",style:{maxWidth:"100%"},children:[e.jsxs(N.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h1",{className:"text-[18px] md:text-[22px] font-bold tracking-tight truncate",children:["Bienvenido, ",e.jsx("span",{className:"text-[var(--gold)]",children:(x==null?void 0:x.name)||"Trader"})]}),e.jsx("p",{className:"text-sm text-[var(--text-dim)] mt-0.5 hidden sm:block",children:"Tu centro de control de trading automatizado"})]}),e.jsxs("button",{onClick:()=>l("chart"),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-semibold transition-all hover:opacity-90 btn-gold shrink-0",children:[e.jsx(H,{size:14}),"Trading"]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:S.map((t,s)=>{const i=t.icon;return e.jsxs(N.button,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:s*.06},onClick:()=>l(t.action),className:"rounded-xl p-4 text-left transition-all duration-200 hover:scale-[1.02] group",style:{background:t.gradient,border:`1px solid ${t.border}`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:`${t.color}15`},children:e.jsx(i,{size:18,style:{color:t.color}})}),e.jsx(C,{size:14,className:"text-[var(--text-dim)]/30 group-hover:text-[var(--text-dim)] transition-colors"})]}),e.jsx("p",{className:"text-[22px] font-bold leading-none truncate",style:{color:t.color},children:t.value}),e.jsx("p",{className:"text-[11px] text-[var(--text-dim)] mt-1.5 font-medium truncate",children:t.label})]},t.label)})}),n&&e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:14,className:"text-[var(--gold)]"}),e.jsx("h2",{className:"text-sm font-bold",children:"Portfolio Performance"})]}),e.jsxs("button",{onClick:()=>l("portfolio"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:["Analytics completos ",e.jsx(C,{size:12})]})]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-[1fr_auto] gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{data:n.equityCurve,color:h>=0?"#10B981":"#EF4444",width:180,height:56}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold",children:"Hoy"}),e.jsxs("p",{className:`text-sm font-bold ${n.todayPnl>=0?"text-emerald-400":"text-red-400"}`,children:[n.todayPnl>=0?"+":"","$",n.todayPnl.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold",children:"7 Días"}),e.jsxs("p",{className:`text-sm font-bold ${n.weekPnl>=0?"text-emerald-400":"text-red-400"}`,children:[n.weekPnl>=0?"+":"","$",n.weekPnl.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-wider font-semibold",children:"Total"}),e.jsxs("p",{className:`text-sm font-bold ${h>=0?"text-emerald-400":"text-red-400"}`,children:[h>=0?"+":"","$",h.toFixed(2)]})]})]})]}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:[{label:"Win Rate",value:`${n.winRate.toFixed(0)}%`,color:n.winRate>=50?"#10B981":"#EF4444",icon:re},{label:"Profit Factor",value:n.profitFactor===1/0?"∞":n.profitFactor.toFixed(1),color:n.profitFactor>=1?"#10B981":"#EF4444",icon:le},{label:"Max DD",value:`${n.maxDD.toFixed(1)}%`,color:n.maxDD<15?"#10B981":"#EF4444",icon:ie}].map((t,s)=>{const i=t.icon;return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg",style:{background:`${t.color}08`,border:`1px solid ${t.color}15`},children:[e.jsx(i,{size:13,style:{color:t.color}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-[var(--text-dim)] uppercase font-semibold",children:t.label}),e.jsx("p",{className:"text-sm font-bold",style:{color:t.color},children:t.value})]})]},s)})})]})]}),j.length>0&&e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-bold text-[var(--text)] flex items-center gap-2",children:[e.jsx(R,{size:14,className:"text-blue-400"}),"Bots Activos",e.jsxs("span",{className:"text-[10px] font-bold text-emerald-400 bg-emerald-400/10 px-2 py-0.5 rounded-full",children:[j.length," ",r("dashboard.running")]})]}),e.jsxs("button",{onClick:()=>l("bots"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:[r("dashboard.viewAll")," ",e.jsx(C,{size:12})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:j.slice(0,6).map(t=>{var A,B;const s=F[t.id]||{},i=s.unrealizedPnl||0,b=s.pnlPercent||0,u=s.position;return e.jsxs("div",{onClick:()=>l("bots"),className:"rounded-xl p-3.5 cursor-pointer transition-all hover:scale-[1.01] group",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:`1px solid ${i>=0?"rgba(16,185,129,0.12)":"rgba(239,68,68,0.12)"}`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold truncate max-w-[120px]",children:t.name})]}),e.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)]",children:t.pair})]}),u?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${u.side==="buy"?"bg-emerald-500/15 text-emerald-400":"bg-red-500/15 text-red-400"}`,children:[(A=u.side)==null?void 0:A.toUpperCase()," @ $",(B=u.entryPrice)==null?void 0:B.toFixed(2)]}),e.jsxs("span",{className:`text-sm font-bold ${i>=0?"text-emerald-400":"text-red-400"}`,children:[i>=0?"+":"","$",i.toFixed(2),e.jsxs("span",{className:"text-[10px] ml-1",children:["(",b>=0?"+":"",b.toFixed(1),"%)"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-[var(--text-dim)]",children:"Esperando señal..."}),e.jsx(oe,{size:12,className:"text-[var(--text-dim)]"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[10px] text-[var(--text-dim)]",children:[e.jsxs("span",{children:["Trades: ",t.trades||0]}),e.jsxs("span",{children:["WR: ",(t.winRate||0).toFixed(0),"%"]}),s.price&&e.jsxs("span",{className:"ml-auto font-mono",children:["$",s.price.toLocaleString(void 0,{maximumFractionDigits:2})]})]})]},t.id)})})]}),e.jsxs("div",{className:`grid gap-4 ${f?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"}`,children:[L.length>0&&e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{size:14,className:"text-[var(--gold)]"}),e.jsx("h2",{className:"text-sm font-bold",children:"Actividad Reciente"})]}),e.jsxs("button",{onClick:()=>l("history"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:["Ver historial ",e.jsx(C,{size:12})]})]}),e.jsx("div",{className:"divide-y divide-[var(--border)]/30",children:L.map((t,s)=>{const i=t.icon,b=t.time?new Date(t.time):null,u=b?Ne(b):"";return e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-white/[0.01] transition-colors",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center shrink-0",style:{background:`${t.color}12`},children:e.jsx(i,{size:13,style:{color:t.color}})}),e.jsx("p",{className:"flex-1 text-xs truncate",children:t.text}),e.jsx("span",{className:"text-[10px] text-[var(--text-dim)] shrink-0",children:u})]},s)})})]}),f&&e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(212,175,55,0.04), rgba(212,175,55,0.01))",border:"1px solid rgba(212,175,55,0.12)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(212,175,55,0.08)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{size:14,className:"text-amber-400"}),e.jsx("h2",{className:"text-sm font-bold",children:"Platform Revenue"}),e.jsx("span",{className:"text-[9px] font-bold text-amber-400 bg-amber-400/10 px-2 py-0.5 rounded-full",children:"ADMIN"})]}),e.jsxs("button",{onClick:()=>l("kairos-treasury"),className:"text-[11px] text-amber-400 hover:text-amber-300 font-semibold flex items-center gap-1 transition-colors",children:["Treasury ",e.jsx(C,{size:12})]})]}),e.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(16,185,129,0.06)",border:"1px solid rgba(16,185,129,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"Total Recaudado"}),e.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["$",f.totalCollected.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[f.totalTrades," trades"]})]}),e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(59,130,246,0.06)",border:"1px solid rgba(59,130,246,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"Hoy"}),e.jsxs("p",{className:"text-lg font-bold text-blue-400",children:["$",f.today.fees.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[f.today.trades," trades • $",f.today.volume.toLocaleString()," vol"]})]}),e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(168,85,247,0.06)",border:"1px solid rgba(168,85,247,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"7 Días"}),e.jsxs("p",{className:"text-lg font-bold text-purple-400",children:["$",f.last7days.fees.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:[f.last7days.trades," trades"]})]}),e.jsxs("div",{className:"rounded-lg p-3",style:{background:"rgba(212,175,55,0.06)",border:"1px solid rgba(212,175,55,0.1)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase font-semibold mb-1",children:"30 Días"}),e.jsxs("p",{className:"text-lg font-bold text-amber-400",children:["$",f.last30days.fees.toFixed(2)]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]",children:["$",f.last30days.volume.toLocaleString()," volumen"]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-bold text-[var(--text)] mb-3 flex items-center gap-2",children:[e.jsx(O,{size:14,className:"text-[var(--gold)]"}),"Acceso Rápido"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2.5",children:D.map((t,s)=>{const i=t.icon;return e.jsxs(N.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2+s*.05},onClick:()=>l(t.page),className:"rounded-xl p-4 text-left transition-all duration-200 group hover:scale-[1.01]",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},onMouseEnter:b=>b.currentTarget.style.borderColor=`${t.color}30`,onMouseLeave:b=>b.currentTarget.style.borderColor="rgba(30,34,45,0.5)",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3 transition-transform group-hover:scale-110",style:{background:`${t.color}12`},children:e.jsx(i,{size:20,style:{color:t.color}})}),e.jsx("p",{className:"text-[13px] font-bold text-[var(--text)] truncate",children:t.label}),e.jsx("p",{className:"text-[11px] text-[var(--text-dim)] mt-0.5 truncate",children:t.desc})]},t.label)})})]}),e.jsxs("div",{className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",style:{borderBottom:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:14,className:"text-[var(--gold)]"}),e.jsx("h2",{className:"text-sm font-bold",children:r("dashboard.realtimeMarket")})]}),e.jsxs("button",{onClick:()=>l("chart"),className:"text-[11px] text-[var(--gold)] hover:text-[var(--gold-light)] font-semibold flex items-center gap-1 transition-colors",children:[r("dashboard.viewChart")," ",e.jsx(C,{size:12})]})]}),e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2 px-3 md:px-4 py-2 text-[10px] font-bold text-[var(--text-dim)]/50 uppercase tracking-wider",children:[e.jsx("span",{children:r("dashboard.pair")}),e.jsx("span",{className:"text-right",children:r("dashboard.price")}),e.jsx("span",{className:"text-right",children:r("dashboard.change24h")}),e.jsx("span",{className:"text-right hidden md:block",children:r("dashboard.action")})]}),e.jsx("div",{className:"divide-y divide-[var(--border)]/30",children:w?e.jsx("div",{className:"p-8 text-center text-sm text-[var(--text-dim)] animate-pulse",children:r("dashboard.loadingMarket")}):a.map((t,s)=>e.jsxs(N.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:s*.05},onClick:()=>{K.getState().setSelectedPair(ve(t.symbol)),l("chart")},className:"group w-full grid grid-cols-3 md:grid-cols-4 gap-2 items-center px-3 md:px-4 py-3 hover:bg-white/[0.02] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold",style:{background:t.changePercent>=0?"rgba(14,203,129,0.08)":"rgba(246,70,93,0.08)"},children:e.jsx("span",{className:t.changePercent>=0?"text-[var(--green)]":"text-[var(--red)]",children:q(t.symbol).slice(0,3)})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[13px] font-bold leading-none",children:q(t.symbol)}),e.jsx("p",{className:"text-[10px] text-[var(--text-dim)]/50 mt-0.5",children:"KAIROS"})]})]}),e.jsxs("p",{className:"text-[13px] font-mono font-semibold text-right",children:["$",t.price.toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsx("div",{className:"flex items-center gap-1 justify-end",children:e.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-mono font-semibold px-2 py-0.5 rounded-md
                  ${t.changePercent>=0?"text-[var(--green)] bg-[var(--green)]/[0.08]":"text-[var(--red)] bg-[var(--red)]/[0.08]"}`,children:[t.changePercent>=0?e.jsx(ce,{size:10}):e.jsx(xe,{size:10}),t.changePercent>=0?"+":"",t.changePercent.toFixed(2),"%"]})}),e.jsx("div",{className:"text-right hidden md:block",children:e.jsxs("span",{className:"text-[10px] font-semibold text-[var(--gold)] opacity-0 group-hover:opacity-100 transition-opacity bg-[var(--gold)]/10 px-2 py-1 rounded-md",children:[r("dashboard.trade")," →"]})})]},t.symbol))})]}),(x==null?void 0:x.referralCode)&&e.jsx(we,{code:x.referralCode})]})}function we({code:l}){const[o,p]=g.useState(!1),c=`https://kairos-trade.netlify.app?ref=${l}`,k=g.useCallback(async a=>{try{await navigator.clipboard.writeText(a),p(!0),setTimeout(()=>p(!1),2e3)}catch{}},[]),x=g.useCallback(a=>{const v=encodeURIComponent(`Únete a Kairos Trade — trading automatizado con 10+ brokers y bots AI. Usa mi código ${l} y recibe 100 KAIROS gratis: ${c}`),w={whatsapp:`https://wa.me/?text=${v}`,telegram:`https://t.me/share/url?url=${encodeURIComponent(c)}&text=${v}`,twitter:`https://twitter.com/intent/tweet?text=${v}`};window.open(w[a],"_blank")},[l,c]);return e.jsx(N.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.4},className:"rounded-xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(245,158,11,0.04), rgba(245,158,11,0.01))",border:"1px solid rgba(245,158,11,0.12)"},children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"rgba(245,158,11,0.1)"},children:e.jsx(me,{size:16,className:"text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-[var(--text)]",children:"Invita y Gana"}),e.jsx("p",{className:"text-[10px] text-[var(--text-dim)]",children:"20 KAIROS por cada amigo"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"flex-1 rounded-lg px-3 py-2 font-mono text-sm font-bold text-amber-400 tracking-wider",style:{background:"rgba(245,158,11,0.06)",border:"1px solid rgba(245,158,11,0.1)"},children:l}),e.jsx("button",{onClick:()=>k(l),className:"px-3 py-2 rounded-lg transition-all hover:scale-105",style:{background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.15)"},children:o?e.jsx(pe,{size:14,className:"text-green-400"}):e.jsx(ge,{size:14,className:"text-amber-400/60"})})]}),e.jsx("button",{onClick:()=>k(c),className:"w-full text-left rounded-lg px-3 py-2 text-[11px] text-[var(--text-dim)] truncate hover:text-white/50 transition-colors mb-3",style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)"},children:c}),e.jsx("div",{className:"flex gap-2",children:[{id:"whatsapp",label:"WhatsApp",bg:"#25D366"},{id:"telegram",label:"Telegram",bg:"#0088cc"},{id:"twitter",label:"X",bg:"#1DA1F2"}].map(a=>e.jsxs("button",{onClick:()=>x(a.id),className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[11px] font-semibold text-white/60 hover:text-white transition-all hover:scale-[1.02]",style:{background:`${a.bg}10`,border:`1px solid ${a.bg}20`},children:[e.jsx(he,{size:10}),a.label]},a.id))})]})})}export{Pe as default};
