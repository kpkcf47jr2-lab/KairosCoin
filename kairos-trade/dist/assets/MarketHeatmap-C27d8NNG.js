import{a as r,j as e,G as U,a3 as P,y as u,m as w,a5 as A,a6 as M}from"./ui-Xrp8OYat.js";import{u as C,g as d,t as k}from"./index-CQQ6H1U8.js";import{m as I}from"./marketData-K1zKCjjj.js";import"./vendor-adQwlP3i.js";const B=["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","XRPUSDT","ADAUSDT","DOGEUSDT","AVAXUSDT","DOTUSDT","MATICUSDT","LINKUSDT","UNIUSDT","LTCUSDT","ATOMUSDT","ARBUSDT","OPUSDT","NEARUSDT","FTMUSDT","APTUSDT","INJUSDT","SUIUSDT","SEIUSDT","TIAUSDT","JUPUSDT"];function E(){const{setPage:b,setSelectedPair:v}=C(),[s,j]=r.useState([]),[i,x]=r.useState(!0),[m,f]=r.useState(null),[o,N]=r.useState("change"),c=async()=>{x(!0);try{const t=await Promise.all(B.map(async a=>{try{return await I.get24hrTicker(a)}catch{return null}}));j(t.filter(Boolean)),f(new Date)}catch(t){console.error("Heatmap load error:",t)}x(!1)};r.useEffect(()=>{c();const t=setInterval(c,6e4);return()=>clearInterval(t)},[]);const S=[...s].sort((t,a)=>o==="change"?Math.abs(a.changePercent)-Math.abs(t.changePercent):o==="volume"?(a.volume||0)-(t.volume||0):d(t.symbol).localeCompare(d(a.symbol))),p=Math.max(...s.map(t=>Math.abs(t.changePercent||0)),1),y=t=>{const a=Math.min(Math.abs(t)/Math.max(p*.7,1),1);return t>=0?`rgba(16, 185, 129, ${.08+a*.45})`:`rgba(239, 68, 68, ${.08+a*.45})`},D=t=>{const a=Math.min(Math.abs(t)/Math.max(p*.7,1),1);return t>=0?`rgba(16, 185, 129, ${.15+a*.3})`:`rgba(239, 68, 68, ${.15+a*.3})`},T=t=>{v(k(t)),b("chart")};return e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h1",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(U,{size:20,className:"text-[var(--gold)]"}),"Market Heatmap"]}),e.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Rendimiento 24h de las principales criptomonedas"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[m&&e.jsxs("span",{className:"text-[10px] text-[var(--text-dim)] flex items-center gap-1",children:[e.jsx(P,{size:10}),m.toLocaleTimeString()]}),e.jsxs("button",{onClick:c,disabled:i,className:"flex items-center gap-1.5 px-3 py-1.5 bg-[var(--dark-3)] text-[var(--text-dim)] rounded-lg text-xs hover:text-[var(--gold)] transition-all border border-[var(--border)]",children:[e.jsx(u,{size:12,className:i?"animate-spin":""}),"Actualizar"]})]})]}),e.jsx("div",{className:"flex gap-1 bg-[var(--dark-3)] rounded-lg p-1 w-fit",children:[{id:"change",label:"Por Cambio"},{id:"volume",label:"Por Volumen"},{id:"name",label:"Alfabético"}].map(t=>e.jsx("button",{onClick:()=>N(t.id),className:`px-3 py-1.5 text-xs rounded-md transition-colors ${o===t.id?"bg-[var(--gold)] text-white font-bold":"text-[var(--text-dim)] hover:text-[var(--text)]"}`,children:t.label},t.id))}),s.length>0&&e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("span",{className:"text-emerald-400 font-semibold",children:["↑ ",s.filter(t=>t.changePercent>=0).length," subiendo"]}),e.jsxs("span",{className:"text-red-400 font-semibold",children:["↓ ",s.filter(t=>t.changePercent<0).length," bajando"]}),e.jsxs("span",{className:"text-[var(--text-dim)]",children:["Avg: ",(s.reduce((t,a)=>t+a.changePercent,0)/s.length).toFixed(2),"%"]})]}),i&&s.length===0?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(u,{size:24,className:"animate-spin text-[var(--text-dim)]"})}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2.5",children:S.map((t,a)=>{var g;const h=d(t.symbol),n=t.changePercent||0,l=n>=0;return e.jsxs(w.button,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:a*.02},onClick:()=>T(t.symbol),className:"rounded-xl p-3 text-center transition-all hover:scale-[1.04] group relative",style:{background:y(n),border:`1px solid ${D(n)}`},children:[e.jsx("p",{className:"text-base font-bold mb-1",children:h}),e.jsxs("p",{className:"text-[11px] font-mono text-[var(--text)] mb-1",children:["$",(g=t.price)==null?void 0:g.toLocaleString(void 0,{maximumFractionDigits:t.price>100?0:2})]}),e.jsxs("div",{className:`flex items-center justify-center gap-0.5 text-sm font-bold ${l?"text-emerald-400":"text-red-400"}`,children:[l?e.jsx(A,{size:12}):e.jsx(M,{size:12}),l?"+":"",n.toFixed(2),"%"]}),e.jsx("div",{className:"absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{boxShadow:`0 0 20px ${l?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)"}`}})]},t.symbol)})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 pt-4 text-[10px] text-[var(--text-dim)]",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{background:"rgba(239,68,68,0.4)"}}),e.jsx("span",{children:"Gran caída"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{background:"rgba(239,68,68,0.15)"}}),e.jsx("span",{children:"Leve caída"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{background:"rgba(16,185,129,0.15)"}}),e.jsx("span",{children:"Leve subida"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{background:"rgba(16,185,129,0.4)"}}),e.jsx("span",{children:"Gran subida"})]})]})]})}export{E as default};
//# sourceMappingURL=MarketHeatmap-C27d8NNG.js.map
