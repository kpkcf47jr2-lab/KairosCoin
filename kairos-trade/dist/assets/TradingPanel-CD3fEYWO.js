import{a as o,j as e,S as F,a1 as C,a0 as g}from"./ui-Xrp8OYat.js";import{u as $,b as q,g as L}from"./index-BWvYVe9P.js";import{m as B}from"./marketData-K1zKCjjj.js";import"./vendor-adQwlP3i.js";function z(){const{selectedPair:n,currentPrice:s,positions:c,orders:p,addPosition:v,addOrder:h,closePosition:f,cancelOrder:y}=$(),[l,m]=o.useState("buy"),[i,j]=o.useState("market"),[a,d]=o.useState({quantity:"",price:"",stopLoss:"",takeProfit:""}),[b,k]=o.useState({bids:[],asks:[]}),[x,N]=o.useState("order");o.useEffect(()=>{u();const t=setInterval(u,5e3);return()=>clearInterval(t)},[n]);const u=async()=>{try{const t=await B.getOrderBook(q(n),10);k(t)}catch{}},w=()=>{if(!a.quantity)return;const t=i==="market"?s:parseFloat(a.price);t&&(i==="market"?v({symbol:n,side:l,quantity:parseFloat(a.quantity),entryPrice:t,stopLoss:a.stopLoss?parseFloat(a.stopLoss):null,takeProfit:a.takeProfit?parseFloat(a.takeProfit):null,openedAt:new Date().toISOString()}):h({symbol:n,side:l,type:i,quantity:parseFloat(a.quantity),price:t,stopLoss:a.stopLoss?parseFloat(a.stopLoss):null,takeProfit:a.takeProfit?parseFloat(a.takeProfit):null,status:"open",createdAt:new Date().toISOString()}),d({quantity:"",price:"",stopLoss:"",takeProfit:""}))},S=parseFloat(a.quantity||0)*(i==="market"?s||0:parseFloat(a.price||0));return e.jsxs("div",{className:"flex flex-col h-full",style:{width:320,borderLeft:"1px solid rgba(30,34,45,0.6)"},children:[e.jsxs("div",{className:"flex items-center justify-center gap-1.5 py-1.5 shrink-0",style:{background:"rgba(245,158,11,0.08)",borderBottom:"1px solid rgba(245,158,11,0.15)"},children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-amber-400 tracking-wider uppercase",children:"Simulador — Paper Trading"})]}),e.jsx("div",{className:"flex shrink-0 px-2 pt-2 gap-1",style:{borderBottom:"1px solid rgba(30,34,45,0.4)"},children:["order","positions","orders"].map(t=>e.jsx("button",{onClick:()=>N(t),className:`flex-1 py-2.5 text-[11px] font-bold rounded-t-lg transition-all
              ${x===t?"text-[var(--gold)] bg-[var(--gold)]/[0.06]":"text-[var(--text-dim)] hover:text-[var(--text)]"}`,style:x===t?{borderBottom:"2px solid var(--gold)"}:{borderBottom:"2px solid transparent"},children:t==="order"?"Orden":t==="positions"?`Pos (${c.length})`:`Órd (${p.length})`},t))}),x==="order"&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[e.jsxs("div",{className:"flex gap-1 p-1 rounded-xl",style:{background:"rgba(24,26,32,0.8)",border:"1px solid rgba(30,34,45,0.4)"},children:[e.jsx("button",{onClick:()=>m("buy"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all duration-200
                ${l==="buy"?"text-white shadow-lg":"text-[var(--text-dim)]"}`,style:l==="buy"?{background:"linear-gradient(135deg, #0ECB81, #0AA06A)",boxShadow:"0 4px 12px rgba(14,203,129,0.25)"}:{},children:"Comprar"}),e.jsx("button",{onClick:()=>m("sell"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all duration-200
                ${l==="sell"?"text-white shadow-lg":"text-[var(--text-dim)]"}`,style:l==="sell"?{background:"linear-gradient(135deg, #F6465D, #D32F4A)",boxShadow:"0 4px 12px rgba(246,70,93,0.25)"}:{},children:"Vender"})]}),e.jsx("div",{className:"flex gap-1 p-1 rounded-lg bg-[var(--dark-3)]",children:["market","limit","stop_loss"].map(t=>e.jsx("button",{onClick:()=>j(t),className:`flex-1 py-1.5 text-[10px] font-bold rounded-md transition-all
                  ${i===t?"bg-[var(--dark-4)] text-[var(--text)] shadow-sm":"text-[var(--text-dim)] hover:text-[var(--text)]"}`,children:t==="market"?"Market":t==="limit"?"Límite":"Stop"},t))}),i!=="market"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-[var(--text-dim)] mb-1 block font-semibold uppercase tracking-wider",children:"Precio"}),e.jsx("input",{type:"number",value:a.price,onChange:t=>d({...a,price:t.target.value}),placeholder:s==null?void 0:s.toString(),className:"w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-[var(--text-dim)] mb-1 block font-semibold uppercase tracking-wider",children:"Cantidad"}),e.jsx("input",{type:"number",value:a.quantity,onChange:t=>d({...a,quantity:t.target.value}),placeholder:"0.001",className:"w-full text-sm"}),e.jsx("div",{className:"flex gap-1 mt-1.5",children:[25,50,75,100].map(t=>e.jsxs("button",{onClick:()=>{const r=i==="market"?s:parseFloat(a.price)||s;if(r){const P=1e4*(t/100)/r;d({...a,quantity:P.toFixed(6)})}},className:"flex-1 py-1.5 text-[10px] font-semibold rounded-md text-[var(--text-dim)] hover:text-[var(--gold)] hover:border-[var(--gold)]/30 transition-all",style:{background:"rgba(14,16,21,0.6)",border:"1px solid var(--border)"},children:[t,"%"]},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] text-[var(--text-dim)] mb-1 flex items-center gap-1 font-semibold uppercase tracking-wider",children:[e.jsx(F,{size:9,className:"text-[var(--red)]"})," SL"]}),e.jsx("input",{type:"number",value:a.stopLoss,onChange:t=>d({...a,stopLoss:t.target.value}),placeholder:"Precio",className:"w-full text-xs"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] text-[var(--text-dim)] mb-1 flex items-center gap-1 font-semibold uppercase tracking-wider",children:[e.jsx(C,{size:9,className:"text-[var(--green)]"})," TP"]}),e.jsx("input",{type:"number",value:a.takeProfit,onChange:t=>d({...a,takeProfit:t.target.value}),placeholder:"Precio",className:"w-full text-xs"})]})]}),e.jsxs("div",{className:"rounded-lg p-3 flex items-center justify-between",style:{background:"rgba(24,26,32,0.6)",border:"1px solid rgba(30,34,45,0.4)"},children:[e.jsx("span",{className:"text-[10px] text-[var(--text-dim)] font-semibold uppercase tracking-wider",children:"Total"}),e.jsxs("span",{className:"text-sm font-mono font-bold",children:["$",S.toFixed(2)]})]}),e.jsxs("button",{onClick:w,disabled:!a.quantity,className:"w-full py-3.5 font-bold rounded-xl text-sm transition-all duration-200 disabled:opacity-40 text-white",style:l==="buy"?{background:"linear-gradient(135deg, #0ECB81, #0AA06A)",boxShadow:"0 4px 15px rgba(14,203,129,0.25)"}:{background:"linear-gradient(135deg, #F6465D, #D32F4A)",boxShadow:"0 4px 15px rgba(246,70,93,0.25)"},children:[l==="buy"?"Comprar":"Vender"," ",L(n)]}),e.jsxs("div",{className:"rounded-xl p-3",style:{background:"rgba(24,26,32,0.6)",border:"1px solid rgba(30,34,45,0.4)"},children:[e.jsx("p",{className:"text-[10px] text-[var(--text-dim)] mb-2 font-bold uppercase tracking-wider",children:"Order Book"}),e.jsxs("div",{className:"space-y-[2px] text-[10px] font-mono",children:[b.asks.slice(0,5).reverse().map((t,r)=>e.jsxs("div",{className:"flex justify-between text-[var(--red)] py-0.5 px-1 rounded hover:bg-[var(--red)]/[0.04]",children:[e.jsxs("span",{children:["$",t.price.toFixed(2)]}),e.jsx("span",{className:"text-[var(--text-dim)]",children:t.quantity.toFixed(4)})]},`a${r}`)),e.jsxs("div",{className:"text-center py-1.5 text-[15px] font-bold text-[var(--gold)] my-1",style:{background:"rgba(59,130,246,0.04)",borderRadius:"6px"},children:["$",(s==null?void 0:s.toLocaleString(void 0,{minimumFractionDigits:2}))||"---"]}),b.bids.slice(0,5).map((t,r)=>e.jsxs("div",{className:"flex justify-between text-[var(--green)] py-0.5 px-1 rounded hover:bg-[var(--green)]/[0.04]",children:[e.jsxs("span",{children:["$",t.price.toFixed(2)]}),e.jsx("span",{className:"text-[var(--text-dim)]",children:t.quantity.toFixed(4)})]},`b${r}`))]})]})]}),x==="positions"&&e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{size:32,className:"mx-auto text-[var(--text-dim)]/20 mb-2"}),e.jsx("p",{className:"text-sm text-[var(--text-dim)]",children:"Sin posiciones abiertas"})]}):c.map(t=>{const r=t.side==="buy"?(s-t.entryPrice)*t.quantity:(t.entryPrice-s)*t.quantity;return e.jsxs("div",{className:"rounded-xl p-3",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:`1px solid ${r>=0?"rgba(14,203,129,0.1)":"rgba(246,70,93,0.1)"}`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold",children:t.symbol}),e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-md ${t.side==="buy"?"text-[var(--green)] bg-[var(--green)]/[0.08]":"text-[var(--red)] bg-[var(--red)]/[0.08]"}`,children:t.side.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-[var(--text-dim)] mb-2",children:[e.jsxs("span",{children:["Entrada: $",t.entryPrice]}),e.jsxs("span",{className:`font-bold ${r>=0?"text-[var(--green)]":"text-[var(--red)]"}`,children:["P&L: ",r>=0?"+":"","$",r.toFixed(2)]})]}),e.jsx("button",{onClick:()=>f(t.id),className:"w-full py-1.5 rounded-lg text-[10px] font-semibold text-[var(--text-dim)] hover:text-[var(--red)] transition-all",style:{background:"rgba(24,26,32,0.6)",border:"1px solid rgba(30,34,45,0.4)"},children:"Cerrar Posición"})]},t.id)})}),x==="orders"&&e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{size:32,className:"mx-auto text-[var(--text-dim)]/20 mb-2"}),e.jsx("p",{className:"text-sm text-[var(--text-dim)]",children:"Sin órdenes pendientes"})]}):p.map(t=>e.jsxs("div",{className:"rounded-xl p-3",style:{background:"linear-gradient(135deg, rgba(17,19,24,0.8), rgba(24,26,32,0.6))",border:"1px solid rgba(30,34,45,0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-bold",children:t.symbol}),e.jsxs("span",{className:`text-[10px] font-bold ${t.side==="buy"?"text-[var(--green)]":"text-[var(--red)]"}`,children:[t.side.toUpperCase()," ",t.type]})]}),e.jsxs("div",{className:"text-[10px] text-[var(--text-dim)] mb-2",children:["Precio: $",t.price," | Cantidad: ",t.quantity]}),e.jsx("button",{onClick:()=>y(t.id),className:"w-full py-1.5 rounded-lg text-[10px] font-semibold text-[var(--text-dim)] hover:text-[var(--red)] transition-all",style:{background:"rgba(24,26,32,0.6)",border:"1px solid rgba(30,34,45,0.4)"},children:"Cancelar"})]},t.id))})]})}export{z as default};
//# sourceMappingURL=TradingPanel-CD3fEYWO.js.map
