import{a as m,j as e,m as n,S as A,Z as C,a0 as v,b as S,I as k,W as z,at as c,ak as U,D as B,o as E,aj as K,aK as R,v as I,aE as O}from"./ui-C9JhL7YV.js";import{u as L}from"./index-CiLxWItl.js";import"./vendor-09nSF2_j.js";const D="https://kairos-api-u6k5.onrender.com",M=[25,50,100,250,500,1e3],h=10,g=5e4;function W(){const{showToast:r,user:b}=L(),d=(b==null?void 0:b.walletAddress)||"",[x,j]=m.useState(""),[N,f]=m.useState(!1),[i,p]=m.useState(null),s=parseFloat(x)||0,y=s>=h&&s<=g,u=/^0x[a-fA-F0-9]{40}$/.test(d),o=y&&u&&!N,w=m.useCallback(async()=>{var t;if(o){f(!0),p(null);try{const a=await fetch(`${D}/api/stripe/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:d,amount:s,currency:"usd"})}),l=await a.json();if(!a.ok)throw new Error(l.error||l.message||"Error al crear checkout");if(l.checkoutUrl)p({success:!0,orderId:(t=l.order)==null?void 0:t.id,checkoutUrl:l.checkoutUrl}),window.open(l.checkoutUrl,"_blank","noopener,noreferrer"),r==null||r("Redirigiendo a Stripe para completar tu compra...","success");else throw new Error("No se recibió URL de checkout")}catch(a){p({success:!1,error:a.message}),r==null||r(a.message,"error")}finally{f(!1)}}},[d,s,o,r]);return e.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{scrollbarWidth:"none"},children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(n.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-4 relative",style:{background:"linear-gradient(135deg, #3B82F6, #2563EB)"},children:[e.jsx("span",{className:"text-white text-3xl font-extrabold",children:"K"}),e.jsx("div",{className:"absolute inset-0 rounded-2xl",style:{boxShadow:"0 0 40px rgba(59,130,246,0.3)"}})]}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Get KairosCoin"}),e.jsx("p",{className:"text-sm text-[var(--text-dim)] max-w-md mx-auto",children:"Get KAIROS directly with your credit or debit card. 1 KAIROS = 1 USD — Backed stablecoin."})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[{icon:A,label:"Pago Seguro",desc:"Stripe SSL 256-bit"},{icon:C,label:"Entrega Inmediata",desc:"Auto-mint a tu wallet"},{icon:v,label:"1:1 USD",desc:"Precio fijo estable"}].map(({icon:t,label:a,desc:l})=>e.jsxs("div",{className:"p-3 rounded-xl text-center",style:{background:"rgba(59,130,246,0.04)",border:"1px solid rgba(59,130,246,0.08)"},children:[e.jsx(t,{size:18,className:"text-blue-400 mx-auto mb-1.5"}),e.jsx("p",{className:"text-xs font-bold text-white",children:a}),e.jsx("p",{className:"text-[10px] text-blue-300/60",children:l})]},a))}),e.jsxs(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-2xl overflow-hidden",style:{background:"linear-gradient(180deg, rgba(59,130,246,0.06) 0%, rgba(15,17,22,0.8) 100%)",border:"1px solid rgba(59,130,246,0.12)"},children:[e.jsx("div",{className:"px-6 py-4",style:{borderBottom:"1px solid rgba(59,130,246,0.08)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #3B82F6, #2563EB)"},children:e.jsx(S,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-bold text-white",children:"Compra con Tarjeta"}),e.jsx("p",{className:"text-xs text-blue-300/60",children:"Visa, Mastercard, AMEX"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[e.jsx(k,{size:12,className:"text-green-400"}),e.jsx("span",{className:"text-[10px] font-bold text-green-400/80",children:"SEGURO"})]})]})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-blue-300/80 mb-2",children:[e.jsx(z,{size:12,className:"inline mr-1.5"}),"Tu Wallet Kairos (BSC)"]}),u?e.jsxs("div",{className:"w-full px-4 py-3 rounded-xl text-sm font-mono flex items-center gap-2",style:{background:"rgba(15,17,22,0.6)",border:"1px solid rgba(34,197,94,0.3)",color:"var(--text)"},children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{children:d})]}):e.jsx("div",{className:"w-full px-4 py-3 rounded-xl text-sm",style:{background:"rgba(15,17,22,0.6)",border:"1px solid rgba(239,68,68,0.3)",color:"var(--text-dim)"},children:"Wallet no disponible — cierra sesión y crea una nueva cuenta"}),u&&e.jsxs("p",{className:"text-[10px] text-green-400 mt-1.5 flex items-center gap-1",children:[e.jsx(c,{size:10})," Wallet detectada automáticamente — los KAIROS se depositarán aquí"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-blue-300/80 mb-2",children:[e.jsx(v,{size:12,className:"inline mr-1.5"}),"Cantidad en USD (1 KAIROS = 1 USD)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-blue-400 font-bold text-sm",children:"$"}),e.jsx("input",{type:"number",value:x,onChange:t=>j(t.target.value),placeholder:"100",min:h,max:g,className:"w-full pl-8 pr-20 py-3 rounded-xl text-sm font-bold transition-all duration-200",style:{background:"rgba(15,17,22,0.6)",border:x?y?"1px solid rgba(34,197,94,0.3)":"1px solid rgba(239,68,68,0.3)":"1px solid rgba(59,130,246,0.1)",color:"var(--text)",outline:"none"}}),e.jsxs("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-blue-300/60 font-medium",children:["= ",s>0?s.toLocaleString():"0"," KAIROS"]})]}),e.jsxs("p",{className:"text-[10px] text-[var(--text-dim)]/50 mt-1",children:["Mín: $",h," — Máx: $",g.toLocaleString()," USD"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-300/80 mb-2",children:"Montos rápidos"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:M.map(t=>e.jsxs("button",{onClick:()=>j(String(t)),className:`py-2 rounded-lg text-xs font-bold transition-all duration-200 ${parseFloat(x)===t?"bg-blue-500/20 text-blue-300 ring-1 ring-blue-500/30":"bg-white/[0.03] text-[var(--text-dim)] hover:bg-blue-500/10 hover:text-blue-300"}`,children:["$",t]},t))})]}),s>0&&e.jsx(n.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"rounded-xl p-4",style:{background:"rgba(59,130,246,0.04)",border:"1px solid rgba(59,130,246,0.08)"},children:e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-[var(--text-dim)]",children:"Recibirás"}),e.jsxs("span",{className:"text-white font-bold",children:[s.toLocaleString()," KAIROS"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-[var(--text-dim)]",children:"Red"}),e.jsx("span",{className:"text-blue-300 font-medium",children:"BNB Smart Chain (BSC)"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-[var(--text-dim)]",children:"Método"}),e.jsx("span",{className:"text-blue-300 font-medium",children:"Tarjeta (Stripe)"})]}),e.jsx("div",{className:"h-px bg-blue-500/10 my-1"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white font-bold",children:"Total a pagar"}),e.jsxs("span",{className:"text-blue-400 font-extrabold text-lg",children:["$",s.toLocaleString()," USD"]})]})]})}),e.jsx("button",{onClick:w,disabled:!o,className:`w-full py-4 rounded-xl font-bold text-base flex items-center justify-center gap-2 transition-all duration-300 ${o?"text-white shadow-lg shadow-blue-500/20 hover:shadow-blue-500/30 hover:scale-[1.01] active:scale-[0.99]":"text-white/40 cursor-not-allowed"}`,style:{background:o?"linear-gradient(135deg, #3B82F6, #2563EB)":"rgba(59,130,246,0.15)"},children:N?e.jsxs(e.Fragment,{children:[e.jsx(U,{size:18,className:"animate-spin"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{size:18}),"Get ",s>0?`${s.toLocaleString()} KAIROS`:"KairosCoin",e.jsx(B,{size:16})]})}),e.jsxs(E,{children:[(i==null?void 0:i.success)&&e.jsx(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"rounded-xl p-4",style:{background:"rgba(34,197,94,0.06)",border:"1px solid rgba(34,197,94,0.15)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(c,{size:20,className:"text-green-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-green-400 mb-1",children:"Checkout creado exitosamente"}),e.jsx("p",{className:"text-xs text-[var(--text-dim)] mb-2",children:"Se abrió una ventana de Stripe para completar el pago. Si no se abrió, haz clic abajo."}),e.jsxs("a",{href:i.checkoutUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-xs font-bold text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx(K,{size:12}),"Abrir Stripe Checkout"]})]})]})}),i&&!i.success&&e.jsx(n.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"rounded-xl p-4",style:{background:"rgba(239,68,68,0.06)",border:"1px solid rgba(239,68,68,0.15)"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(R,{size:20,className:"text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-red-400 mb-1",children:"Error en checkout"}),e.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:i.error})]})]})})]})]})]}),e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl",style:{background:"rgba(15,17,22,0.5)",border:"1px solid var(--border)"},children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(I,{size:14,className:"text-blue-400"}),"¿Qué es KAIROS?"]}),e.jsx("p",{className:"text-xs text-[var(--text-dim)] leading-relaxed",children:"KairosCoin es una stablecoin pegged 1:1 al USD. Cada token está respaldado por reservas verificables. Desplegado en BSC, Base, Arbitrum y Polygon."})]}),e.jsxs("div",{className:"p-4 rounded-xl",style:{background:"rgba(15,17,22,0.5)",border:"1px solid var(--border)"},children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(O,{size:14,className:"text-blue-400"}),"Ventajas"]}),e.jsxs("ul",{className:"text-xs text-[var(--text-dim)] space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(c,{size:10,className:"text-green-400 shrink-0"}),"Sin comisiones de compra"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(c,{size:10,className:"text-green-400 shrink-0"}),"Entrega automática a tu wallet"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(c,{size:10,className:"text-green-400 shrink-0"}),"Pago seguro con Stripe"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(c,{size:10,className:"text-green-400 shrink-0"}),"Disponible 24/7"]})]})]})]}),e.jsx("div",{className:"text-center mt-6 pb-6",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg",style:{background:"rgba(59,130,246,0.04)"},children:[e.jsx(k,{size:12,className:"text-blue-400/60"}),e.jsx("span",{className:"text-[10px] text-blue-300/50 font-medium",children:"Pagos procesados de forma segura por Stripe"})]})})]})})}export{W as default};
//# sourceMappingURL=BuyKairos-ByCg-ZV4.js.map
