{"version":3,"file":"WalletPage-BKzThSIP.js","sources":["../../src/components/Wallet/ConnectExternalWallet.jsx","../../src/components/Wallet/WalletPage.jsx"],"sourcesContent":["// ═══════════════════════════════════════════════════════════════════════════════\n//  Kairos Trade — Connect External Wallet (WalletConnect v2)\n//  Modal for connecting Kairos Wallet or any WC-compatible wallet\n// ═══════════════════════════════════════════════════════════════════════════════\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X, Link2, Copy, Check, Loader2, Smartphone, QrCode,\n  ExternalLink, Shield, Unlink, Wallet, CheckCircle2, Zap,\n} from 'lucide-react';\nimport {\n  connect, disconnect, getConnectedAccount, isConnected, initWCClient, setCallbacks,\n} from '../../services/walletConnectDApp';\n\n// ── QR Code component (simple SVG generation) ────────────────────────────────\nfunction QRDisplay({ value, size = 200 }) {\n  // We'll use a simple text fallback + copy button since adding a QR lib\n  // would bloat the bundle. Users can paste URI into their wallet.\n  return (\n    <div className=\"flex flex-col items-center gap-3\">\n      <div\n        className=\"w-48 h-48 rounded-2xl bg-white flex items-center justify-center p-4\"\n        style={{ background: 'linear-gradient(135deg, #fff 0%, #f3f4f6 100%)' }}\n      >\n        <QrCode className=\"w-20 h-20 text-gray-400\" />\n      </div>\n      <p className=\"text-xs text-gray-500 text-center max-w-[240px]\">\n        Copia el URI y pégalo en Kairos Wallet → WalletConnect\n      </p>\n    </div>\n  );\n}\n\n// ── Main Component ───────────────────────────────────────────────────────────\nexport default function ConnectExternalWallet({ isOpen, onClose, onConnected }) {\n  const [step, setStep] = useState('idle'); // idle | generating | waiting | connected | error\n  const [wcUri, setWcUri] = useState('');\n  const [copied, setCopied] = useState(false);\n  const [error, setError] = useState('');\n  const [connectedInfo, setConnectedInfo] = useState(null);\n  const approvalRef = useRef(null);\n\n  // Initialize WC client on mount\n  useEffect(() => {\n    if (!isOpen) return;\n\n    initWCClient().then(() => {\n      // Check if already connected\n      const account = getConnectedAccount();\n      if (account) {\n        setConnectedInfo(account);\n        setStep('connected');\n      }\n    }).catch(() => {});\n\n    // Set up disconnect callback\n    setCallbacks({\n      onDisconnect: () => {\n        setConnectedInfo(null);\n        setStep('idle');\n        if (onConnected) onConnected(null);\n      },\n      onReconnect: (session) => {\n        const account = getConnectedAccount();\n        if (account) {\n          setConnectedInfo(account);\n          setStep('connected');\n          if (onConnected) onConnected(account);\n        }\n      },\n    });\n  }, [isOpen]);\n\n  // ── Generate pairing URI ──\n  const handleConnect = useCallback(async () => {\n    setStep('generating');\n    setError('');\n    try {\n      const { uri, waitForApproval } = await connect();\n      setWcUri(uri);\n      setStep('waiting');\n      approvalRef.current = waitForApproval;\n\n      // Wait for wallet to approve\n      const session = await waitForApproval();\n      const account = getConnectedAccount();\n      setConnectedInfo(account);\n      setStep('connected');\n      if (onConnected) onConnected(account);\n    } catch (err) {\n      if (err?.message?.includes('rejected') || err?.message?.includes('expired')) {\n        setError('Conexión rechazada o expirada. Intenta de nuevo.');\n      } else {\n        setError(err?.message || 'Error al conectar');\n      }\n      setStep('error');\n    }\n  }, [onConnected]);\n\n  // ── Disconnect ──\n  const handleDisconnect = useCallback(async () => {\n    await disconnect();\n    setConnectedInfo(null);\n    setStep('idle');\n    if (onConnected) onConnected(null);\n  }, [onConnected]);\n\n  // ── Copy URI ──\n  const handleCopy = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(wcUri);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch {}\n  }, [wcUri]);\n\n  // ── Open Kairos Wallet directly ──\n  const openKairosWallet = useCallback(() => {\n    // Open wallet with WC URI in query param for auto-pair\n    const url = wcUri\n      ? `https://kairos-wallet.netlify.app?wc=${encodeURIComponent(wcUri)}`\n      : 'https://kairos-wallet.netlify.app';\n    window.open(url, '_blank');\n  }, [wcUri]);\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0, y: 20 }}\n          animate={{ scale: 1, opacity: 1, y: 0 }}\n          exit={{ scale: 0.9, opacity: 0, y: 20 }}\n          transition={{ type: 'spring', damping: 25 }}\n          className=\"bg-[#0C0D10] border border-white/10 rounded-2xl w-full max-w-md overflow-hidden\"\n          onClick={e => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-5 py-4 border-b border-white/5\">\n            <div className=\"flex items-center gap-2\">\n              <Link2 className=\"w-5 h-5 text-blue-400\" />\n              <h2 className=\"text-lg font-bold text-white\">Conectar Wallet</h2>\n            </div>\n            <button onClick={onClose} className=\"p-1.5 rounded-lg hover:bg-white/10 transition-colors\">\n              <X className=\"w-5 h-5 text-gray-400\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-5\">\n            <AnimatePresence mode=\"wait\">\n\n              {/* ── IDLE: Choose connection method ── */}\n              {step === 'idle' && (\n                <motion.div key=\"idle\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"space-y-3\">\n                  <p className=\"text-sm text-gray-400 mb-4\">\n                    Conecta tu Kairos Wallet u otra wallet compatible para firmar transacciones on-chain de forma segura.\n                  </p>\n\n                  {/* Kairos Wallet (highlighted) */}\n                  <button\n                    onClick={handleConnect}\n                    className=\"w-full flex items-center gap-4 p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-blue-500/10 border border-purple-500/20 hover:border-purple-500/40 transition-all group\"\n                  >\n                    <div className=\"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center shrink-0\">\n                      <img\n                        src=\"https://kairos-wallet.netlify.app/icons/logo-128.png\"\n                        alt=\"Kairos Wallet\"\n                        className=\"w-8 h-8 rounded-lg\"\n                        onError={e => { e.target.style.display = 'none'; e.target.nextSibling.style.display = 'flex'; }}\n                      />\n                      <div className=\"w-8 h-8 rounded-lg bg-purple-500/30 items-center justify-center hidden\">\n                        <Wallet className=\"w-5 h-5 text-purple-400\" />\n                      </div>\n                    </div>\n                    <div className=\"text-left flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-semibold text-white group-hover:text-purple-300 transition-colors\">\n                          Kairos Wallet\n                        </span>\n                        <span className=\"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/20 text-purple-300 font-medium\">\n                          Recomendado\n                        </span>\n                      </div>\n                      <p className=\"text-xs text-gray-500 mt-0.5\">Multi-chain · AES-256 · WalletConnect v2</p>\n                    </div>\n                    <Zap className=\"w-4 h-4 text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                  </button>\n\n                  {/* Generic WalletConnect */}\n                  <button\n                    onClick={handleConnect}\n                    className=\"w-full flex items-center gap-4 p-4 rounded-xl bg-white/[0.02] border border-white/5 hover:border-white/15 transition-all group\"\n                  >\n                    <div className=\"w-12 h-12 rounded-xl bg-blue-500/10 flex items-center justify-center shrink-0\">\n                      <Link2 className=\"w-6 h-6 text-blue-400\" />\n                    </div>\n                    <div className=\"text-left flex-1\">\n                      <span className=\"font-semibold text-white group-hover:text-blue-300 transition-colors\">\n                        WalletConnect\n                      </span>\n                      <p className=\"text-xs text-gray-500 mt-0.5\">MetaMask, Trust Wallet, Rainbow y más</p>\n                    </div>\n                  </button>\n\n                  <div className=\"flex items-center gap-2 mt-3 px-1\">\n                    <Shield className=\"w-3.5 h-3.5 text-green-500/60\" />\n                    <p className=\"text-[11px] text-gray-600\">\n                      Tu clave privada nunca sale de tu wallet. Trade solo envía solicitudes de firma.\n                    </p>\n                  </div>\n                </motion.div>\n              )}\n\n              {/* ── GENERATING ── */}\n              {step === 'generating' && (\n                <motion.div key=\"generating\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n                  className=\"flex flex-col items-center py-8 gap-4\"\n                >\n                  <Loader2 className=\"w-10 h-10 text-blue-400 animate-spin\" />\n                  <p className=\"text-sm text-gray-400\">Generando conexión segura...</p>\n                </motion.div>\n              )}\n\n              {/* ── WAITING: Show URI for pairing ── */}\n              {step === 'waiting' && (\n                <motion.div key=\"waiting\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n                  className=\"flex flex-col items-center gap-4\"\n                >\n                  <QRDisplay value={wcUri} />\n\n                  {/* URI display + copy */}\n                  <div className=\"w-full flex items-center gap-2 bg-white/5 rounded-lg p-2\">\n                    <code className=\"flex-1 text-[10px] text-gray-400 truncate font-mono\">\n                      {wcUri}\n                    </code>\n                    <button\n                      onClick={handleCopy}\n                      className=\"shrink-0 p-1.5 rounded-md hover:bg-white/10 transition-colors\"\n                    >\n                      {copied ? <Check className=\"w-4 h-4 text-green-400\" /> : <Copy className=\"w-4 h-4 text-gray-400\" />}\n                    </button>\n                  </div>\n\n                  {/* Open Kairos Wallet button */}\n                  <button\n                    onClick={openKairosWallet}\n                    className=\"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-purple-600 hover:bg-purple-500 text-white font-medium transition-colors\"\n                  >\n                    <Smartphone className=\"w-4 h-4\" />\n                    Abrir Kairos Wallet\n                    <ExternalLink className=\"w-3.5 h-3.5 opacity-60\" />\n                  </button>\n\n                  <div className=\"flex items-center gap-2\">\n                    <Loader2 className=\"w-3.5 h-3.5 text-blue-400 animate-spin\" />\n                    <p className=\"text-xs text-gray-500\">Esperando aprobación en tu wallet...</p>\n                  </div>\n                </motion.div>\n              )}\n\n              {/* ── CONNECTED ── */}\n              {step === 'connected' && connectedInfo && (\n                <motion.div key=\"connected\" initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }}\n                  className=\"space-y-4\"\n                >\n                  {/* Success banner */}\n                  <div className=\"flex items-center gap-3 p-4 rounded-xl bg-green-500/10 border border-green-500/20\">\n                    <CheckCircle2 className=\"w-8 h-8 text-green-400 shrink-0\" />\n                    <div>\n                      <p className=\"text-sm font-semibold text-green-300\">Wallet Conectada</p>\n                      <p className=\"text-xs text-green-400/60 mt-0.5\">{connectedInfo.peerName}</p>\n                    </div>\n                  </div>\n\n                  {/* Address */}\n                  <div className=\"flex items-center gap-3 p-3 rounded-xl bg-white/[0.03] border border-white/5\">\n                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white font-bold text-sm\">\n                      {connectedInfo.address?.slice(2, 4).toUpperCase()}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-mono text-white truncate\">{connectedInfo.address}</p>\n                      <p className=\"text-xs text-gray-500\">\n                        {connectedInfo.chains?.length || 1} cadena{connectedInfo.chains?.length > 1 ? 's' : ''} conectada{connectedInfo.chains?.length > 1 ? 's' : ''}\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => handleCopy()}\n                      className=\"p-1.5 rounded-md hover:bg-white/10\"\n                    >\n                      <Copy className=\"w-4 h-4 text-gray-400\" />\n                    </button>\n                  </div>\n\n                  {/* Chain badges */}\n                  <div className=\"flex flex-wrap gap-1.5\">\n                    {connectedInfo.chains?.map(id => (\n                      <span key={id} className=\"text-[10px] px-2 py-0.5 rounded-full bg-white/5 text-gray-400\">\n                        {({ 56: 'BSC', 1: 'Ethereum', 137: 'Polygon', 42161: 'Arbitrum', 43114: 'Avalanche', 8453: 'Base' })[id] || `Chain ${id}`}\n                      </span>\n                    ))}\n                  </div>\n\n                  {/* Disconnect button */}\n                  <button\n                    onClick={handleDisconnect}\n                    className=\"w-full flex items-center justify-center gap-2 py-2.5 rounded-xl border border-red-500/20 text-red-400 hover:bg-red-500/10 transition-colors text-sm\"\n                  >\n                    <Unlink className=\"w-4 h-4\" />\n                    Desconectar\n                  </button>\n                </motion.div>\n              )}\n\n              {/* ── ERROR ── */}\n              {step === 'error' && (\n                <motion.div key=\"error\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n                  className=\"flex flex-col items-center gap-4 py-4\"\n                >\n                  <div className=\"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center\">\n                    <X className=\"w-8 h-8 text-red-400\" />\n                  </div>\n                  <p className=\"text-sm text-red-400 text-center\">{error}</p>\n                  <button\n                    onClick={() => { setStep('idle'); setError(''); }}\n                    className=\"px-6 py-2 rounded-lg bg-white/10 text-white text-sm hover:bg-white/15 transition-colors\"\n                  >\n                    Intentar de nuevo\n                  </button>\n                </motion.div>\n              )}\n\n            </AnimatePresence>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","// Kairos Trade — Wallet Integration Page (Multi-Chain KAIROS)\nimport { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Wallet, Send, Download, Copy, Check, ExternalLink, RefreshCw,\n  ChevronRight, ChevronDown, Shield, Globe, ArrowUpRight,\n  ArrowDownRight, AlertTriangle, Eye, EyeOff, QrCode, X, Loader2, Link2, Unlink\n} from 'lucide-react';\nimport { ethers } from 'ethers';\nimport useStore from '../../store/useStore';\nimport apiClient from '../../services/apiClient';\nimport { encrypt as vaultEncrypt } from '../../utils/keyVault';\nimport { getSessionKey, setSessionKey } from '../../utils/sessionVault';\nimport { KAIROS_COIN } from '../../constants';\nimport ConnectExternalWallet from './ConnectExternalWallet';\nimport { getConnectedAccount, isConnected as isWCConnected, disconnect as wcDisconnect, initWCClient } from '../../services/walletConnectDApp';\n\n/* ─── Chain Configurations ─── */\nconst CHAINS = [\n  {\n    id: 56, name: 'BNB Smart Chain', short: 'BSC', color: '#F0B90B',\n    rpc: 'https://bsc-dataseed1.binance.org',\n    rpcFallback: 'https://bsc-dataseed2.binance.org',\n    explorer: 'https://bscscan.com',\n    explorerApi: 'https://api.bscscan.com/api',\n    nativeSymbol: 'BNB', nativeDecimals: 18,\n    apiKey: '',\n  },\n  {\n    id: 8453, name: 'Base', short: 'Base', color: '#0052FF',\n    rpc: 'https://mainnet.base.org',\n    rpcFallback: 'https://base.publicnode.com',\n    explorer: 'https://basescan.org',\n    explorerApi: 'https://api.basescan.org/api',\n    nativeSymbol: 'ETH', nativeDecimals: 18,\n    apiKey: '',\n  },\n  {\n    id: 42161, name: 'Arbitrum One', short: 'ARB', color: '#28A0F0',\n    rpc: 'https://arb1.arbitrum.io/rpc',\n    rpcFallback: 'https://arbitrum.publicnode.com',\n    explorer: 'https://arbiscan.io',\n    explorerApi: 'https://api.arbiscan.io/api',\n    nativeSymbol: 'ETH', nativeDecimals: 18,\n    apiKey: '',\n  },\n  {\n    id: 137, name: 'Polygon', short: 'MATIC', color: '#8247E5',\n    rpc: 'https://polygon-rpc.com',\n    rpcFallback: 'https://polygon.publicnode.com',\n    explorer: 'https://polygonscan.com',\n    explorerApi: 'https://api.polygonscan.com/api',\n    nativeSymbol: 'POL', nativeDecimals: 18,\n    apiKey: '',\n  },\n];\n\n/* ─── ERC-20 minimal ABI ─── */\nconst ERC20_ABI = [\n  'function balanceOf(address) view returns (uint256)',\n  'function transfer(address to, uint256 amount) returns (bool)',\n  'function decimals() view returns (uint8)',\n  'function symbol() view returns (string)',\n];\n\n/* ─── Helpers ─── */\nconst shortenAddress = (addr) => addr ? `${addr.slice(0, 6)}...${addr.slice(-4)}` : '';\nconst formatBalance = (bal) => {\n  const n = parseFloat(bal);\n  if (n === 0) return '0.00';\n  if (n < 0.01) return n.toFixed(6);\n  if (n < 1) return n.toFixed(4);\n  if (n < 1000) return n.toFixed(2);\n  return n.toLocaleString(undefined, { maximumFractionDigits: 2 });\n};\n\n/* ─── Get provider with fallback ─── */\nconst getProvider = (chain) => {\n  try {\n    return new ethers.JsonRpcProvider(chain.rpc, chain.id);\n  } catch {\n    return new ethers.JsonRpcProvider(chain.rpcFallback, chain.id);\n  }\n};\n\n/* ─── Get KAIROS balance on a specific chain ─── */\nconst getKairosBalance = async (chain, address) => {\n  try {\n    const kairosAddr = KAIROS_COIN.addresses[chain.id];\n    if (!kairosAddr) return '0';\n    const provider = getProvider(chain);\n    const contract = new ethers.Contract(kairosAddr, ERC20_ABI, provider);\n    const bal = await contract.balanceOf(address);\n    return ethers.formatUnits(bal, KAIROS_COIN.decimals);\n  } catch (err) {\n    console.warn(`Failed to get KAIROS balance on ${chain.short}:`, err.message);\n    return '0';\n  }\n};\n\n/* ─── Get native balance ─── */\nconst getNativeBalance = async (chain, address) => {\n  try {\n    const provider = getProvider(chain);\n    const bal = await provider.getBalance(address);\n    return ethers.formatUnits(bal, chain.nativeDecimals);\n  } catch {\n    return '0';\n  }\n};\n\n/* ─── Send KAIROS transaction ─── */\nconst sendKairos = async (chain, privateKey, toAddress, amount) => {\n  const kairosAddr = KAIROS_COIN.addresses[chain.id];\n  if (!kairosAddr) throw new Error(`KAIROS no está desplegado en ${chain.name}`);\n\n  const provider = getProvider(chain);\n  const wallet = new ethers.Wallet(privateKey, provider);\n  const contract = new ethers.Contract(kairosAddr, ERC20_ABI, wallet);\n\n  const amountWei = ethers.parseUnits(amount.toString(), KAIROS_COIN.decimals);\n  const tx = await contract.transfer(toAddress, amountWei);\n  return tx;\n};\n\n/* ─── Get recent KAIROS transfers from explorer API ─── */\nconst getRecentTransfers = async (chain, address) => {\n  try {\n    const kairosAddr = KAIROS_COIN.addresses[chain.id];\n    if (!kairosAddr) return [];\n    const url = `${chain.explorerApi}?module=account&action=tokentx&contractaddress=${kairosAddr}&address=${address}&page=1&offset=10&sort=desc`;\n    const res = await fetch(url);\n    const data = await res.json();\n    if (data.status === '1' && Array.isArray(data.result)) {\n      return data.result.map(tx => ({\n        hash: tx.hash,\n        from: tx.from,\n        to: tx.to,\n        value: ethers.formatUnits(tx.value || '0', parseInt(tx.tokenDecimal) || 18),\n        timestamp: parseInt(tx.timeStamp) * 1000,\n        chainId: chain.id,\n        chainShort: chain.short,\n        chainColor: chain.color,\n        isIncoming: tx.to.toLowerCase() === address.toLowerCase(),\n      }));\n    }\n    return [];\n  } catch {\n    return [];\n  }\n};\n\n/* ══════════════════════════════════════════════════════════════\n   MAIN COMPONENT — WalletPage\n   ══════════════════════════════════════════════════════════════ */\nexport default function WalletPage() {\n  const { user } = useStore();\n  const walletAddress = user?.walletAddress || '';\n  const isAdmin = user?.role === 'admin';\n\n  // State\n  const [balances, setBalances] = useState({});       // { chainId: { kairos: '0', native: '0' } }\n  const [totalKairos, setTotalKairos] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [showSend, setShowSend] = useState(false);\n  const [showReceive, setShowReceive] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const [history, setHistory] = useState([]);\n  const [historyLoading, setHistoryLoading] = useState(false);\n  const [showPK, setShowPK] = useState(false);\n  const [showSecurityPanel, setShowSecurityPanel] = useState(false);\n  const [securityUnlocked, setSecurityUnlocked] = useState(false);\n  const [securityPassword, setSecurityPassword] = useState('');\n  const [securityError, setSecurityError] = useState('');\n  const [verifyingPassword, setVerifyingPassword] = useState(false);\n  const verifiedPasswordRef = useRef(null);\n  const [openingWallet, setOpeningWallet] = useState(false);\n  const [showImportPK, setShowImportPK] = useState(false);\n  const [importPKValue, setImportPKValue] = useState('');\n  const [importing, setImporting] = useState(false);\n  const [importError, setImportError] = useState('');\n  const [showWCConnect, setShowWCConnect] = useState(false);\n  const [wcAccount, setWcAccount] = useState(null);\n\n  // Check for existing WC session on mount\n  useEffect(() => {\n    initWCClient().then(() => {\n      const acct = getConnectedAccount();\n      if (acct) setWcAccount(acct);\n    }).catch(() => {});\n  }, []);\n\n  // Get private key from session memory (decrypted at login)\n  const privateKey = useMemo(() => {\n    try {\n      // Primary: in-memory vault (set during login, cleared on tab close)\n      const sessionPK = getSessionKey();\n      if (sessionPK && sessionPK.startsWith('0x')) return sessionPK;\n      // Fallback: legacy unencrypted keys (backward compat)\n      if (user?.encryptedKey && !user.encryptedKey.startsWith('v1:')) {\n        const decoded = atob(user.encryptedKey);\n        if (decoded.startsWith('0x')) return decoded;\n      }\n      const stored = localStorage.getItem('kairos_trade_wallet');\n      if (stored) {\n        const { encryptedKey } = JSON.parse(stored);\n        if (encryptedKey && !encryptedKey.startsWith('v1:')) {\n          const decoded = atob(encryptedKey);\n          if (decoded.startsWith('0x')) return decoded;\n        }\n      }\n    } catch {}\n    return null;\n  }, [user?.encryptedKey]);\n\n  /* ─── Load Balances ─── */\n  const loadBalances = useCallback(async () => {\n    if (!walletAddress) return;\n    setRefreshing(true);\n\n    const results = {};\n    let total = 0;\n\n    await Promise.all(\n      CHAINS.map(async (chain) => {\n        const [kairos, native] = await Promise.all([\n          getKairosBalance(chain, walletAddress),\n          getNativeBalance(chain, walletAddress),\n        ]);\n        results[chain.id] = { kairos, native };\n        total += parseFloat(kairos) || 0;\n      })\n    );\n\n    setBalances(results);\n    setTotalKairos(total);\n    setLoading(false);\n    setRefreshing(false);\n  }, [walletAddress]);\n\n  useEffect(() => { loadBalances(); }, [loadBalances]);\n\n  /* ─── Load History ─── */\n  const loadHistory = useCallback(async () => {\n    if (!walletAddress) return;\n    setHistoryLoading(true);\n    const allTx = [];\n    await Promise.all(\n      CHAINS.map(async (chain) => {\n        const txs = await getRecentTransfers(chain, walletAddress);\n        allTx.push(...txs);\n      })\n    );\n    allTx.sort((a, b) => b.timestamp - a.timestamp);\n    setHistory(allTx.slice(0, 20));\n    setHistoryLoading(false);\n  }, [walletAddress]);\n\n  /* ─── Copy to clipboard ─── */\n  const handleCopy = useCallback(async (text) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch {}\n  }, []);\n\n  /* ─── Verify password to unlock security panel ─── */\n  const handleSecurityUnlock = async () => {\n    if (!securityPassword) return;\n    setVerifyingPassword(true);\n    setSecurityError('');\n    try {\n      const res = await apiClient.post('/auth/login', {\n        email: user?.email,\n        password: securityPassword,\n      });\n      if (res.data?.success) {\n        verifiedPasswordRef.current = securityPassword;\n        setSecurityUnlocked(true);\n        setSecurityPassword('');\n        // Auto-lock after 60 seconds\n        setTimeout(() => {\n          setSecurityUnlocked(false);\n          setShowPK(false);\n          verifiedPasswordRef.current = null;\n        }, 60000);\n      } else {\n        setSecurityError('Contraseña incorrecta');\n      }\n    } catch (err) {\n      setSecurityError('Contraseña incorrecta');\n    } finally {\n      setVerifyingPassword(false);\n    }\n  };\n\n  /* ─── Import existing wallet (admin: paste PK to make it Kairos-native) ─── */\n  const importWallet = async () => {\n    setImportError('');\n    const pk = importPKValue.trim();\n    if (!pk.startsWith('0x') || pk.length !== 66) {\n      setImportError('Private key inválida. Debe empezar con 0x y tener 66 caracteres.');\n      return;\n    }\n    const pwd = verifiedPasswordRef.current;\n    if (!pwd) {\n      setImportError('Sesión de seguridad expirada. Desbloquea de nuevo.');\n      return;\n    }\n    setImporting(true);\n    try {\n      const imported = new ethers.Wallet(pk);\n      const encKey = await vaultEncrypt(pk, pwd);\n      localStorage.setItem('kairos_trade_wallet', JSON.stringify({ walletAddress: imported.address, encryptedKey: encKey }));\n      setSessionKey(pk);\n      // Update backend\n      const host = import.meta.env.DEV ? '' : 'https://kairos-api-u6k5.onrender.com';\n      await fetch(`${host}/api/auth/update-key`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user?.accessToken}`,\n        },\n        body: JSON.stringify({ walletAddress: imported.address, encryptedKey: encKey }),\n      });\n      const { login } = useStore.getState();\n      login({ ...user, walletAddress: imported.address, encryptedKey: encKey });\n      setShowImportPK(false);\n      setImportPKValue('');\n    } catch (err) {\n      setImportError('Error al importar: ' + err.message);\n    }\n    setImporting(false);\n  };\n\n  /* ─── Generate wallet for legacy accounts ─── */\n  const [generating, setGenerating] = useState(false);\n  const generateWallet = async () => {\n    const pwd = verifiedPasswordRef.current || prompt('Ingresa tu contraseña para cifrar la wallet:');\n    if (!pwd) return;\n    setGenerating(true);\n    try {\n      const wallet = ethers.Wallet.createRandom();\n      const newAddress = wallet.address;\n      const newPK = wallet.privateKey;\n      // Encrypt with AES-256-GCM (password-derived key)\n      const encKey = await vaultEncrypt(newPK, pwd);\n      localStorage.setItem('kairos_trade_wallet', JSON.stringify({ walletAddress: newAddress, encryptedKey: encKey }));\n      setSessionKey(newPK);\n      // Update backend\n      const host = import.meta.env.DEV ? '' : 'https://kairos-api-u6k5.onrender.com';\n      await fetch(`${host}/api/auth/update-key`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user?.accessToken}`,\n        },\n        body: JSON.stringify({ walletAddress: newAddress, encryptedKey: encKey }),\n      });\n      // Update store\n      const { login } = useStore.getState();\n      login({ ...user, walletAddress: newAddress, encryptedKey: encKey });\n    } catch (err) {\n      console.error('Failed to generate wallet:', err);\n    }\n    setGenerating(false);\n  };\n\n  /* ─── No wallet ─── */\n  if (!walletAddress) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center p-8 max-w-sm\">\n          <div className=\"w-16 h-16 rounded-2xl bg-[var(--gold)]/10 flex items-center justify-center mx-auto mb-4\">\n            <Wallet size={28} className=\"text-[var(--gold)]\" />\n          </div>\n          <h2 className=\"text-lg font-bold mb-2\">Configura tu Wallet</h2>\n          <p className=\"text-sm text-[var(--text-dim)] mb-6\">\n            Tu wallet KAIROS te permite recibir, enviar y operar con KAIROS en múltiples blockchains de forma segura.\n          </p>\n          <button\n            onClick={generateWallet}\n            disabled={generating}\n            className=\"w-full py-3 rounded-xl text-sm font-bold text-black transition-all hover:brightness-110 disabled:opacity-50 flex items-center justify-center gap-2\"\n            style={{ background: 'linear-gradient(135deg, #D4AF37, #B8972E)' }}\n          >\n            {generating ? (\n              <><Loader2 size={16} className=\"animate-spin\" /> Generando...</>\n            ) : (\n              <><Wallet size={16} /> Generar Mi Wallet</>\n            )}\n          </button>\n          <p className=\"text-[10px] text-[var(--text-dim)] mt-3\">\n            Se creará una wallet segura con clave privada encriptada en tu dispositivo.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 overflow-y-auto px-5 py-5 space-y-5\" style={{ maxWidth: '100%' }}>\n\n      {/* ─── Header ─── */}\n      <motion.div initial={{ opacity: 0, y: 8 }} animate={{ opacity: 1, y: 0 }}\n        className=\"flex items-center justify-between gap-3\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-2xl bg-[var(--gold)]/15 flex items-center justify-center\">\n            <Wallet size={22} className=\"text-[var(--gold)]\" />\n          </div>\n          <div>\n            <div className=\"flex items-center gap-2\">\n              <h1 className=\"text-xl font-bold\">Kairos Wallet</h1>\n              {isAdmin && (\n                <span className=\"px-2 py-0.5 rounded-full text-[9px] font-bold uppercase tracking-wider\"\n                  style={{ background: 'linear-gradient(135deg, #D4AF37, #B8972E)', color: '#0D0D0D' }}>\n                  Admin\n                </span>\n              )}\n            </div>\n            <button onClick={() => handleCopy(walletAddress)} className=\"flex items-center gap-1.5 text-xs text-[var(--text-dim)] hover:text-[var(--gold)] transition-colors\">\n              {shortenAddress(walletAddress)}\n              {copied ? <Check size={10} className=\"text-green-400\" /> : <Copy size={10} />}\n            </button>\n            {isAdmin && (\n              <p className=\"text-[9px] text-[var(--gold)]/60 mt-0.5\">Wallet de comisiones — Kairos 777 Inc</p>\n            )}\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button onClick={loadBalances} disabled={refreshing}\n            className=\"p-2 rounded-xl transition-all hover:bg-white/5\">\n            <RefreshCw size={16} className={`text-[var(--text-dim)] ${refreshing ? 'animate-spin' : ''}`} />\n          </button>\n          <button onClick={async () => {\n              setOpeningWallet(true);\n              try {\n                const res = await apiClient.post('/api/auth/cross-app-token', { target: 'wallet' });\n                if (res.success) {\n                  window.open(`https://kairos-wallet.netlify.app?cat=${res.data.crossAppToken}`, '_blank');\n                } else {\n                  window.open('https://kairos-wallet.netlify.app', '_blank');\n                }\n              } catch {\n                window.open('https://kairos-wallet.netlify.app', '_blank');\n              }\n              setOpeningWallet(false);\n            }}\n            disabled={openingWallet}\n            className=\"flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-semibold text-[var(--gold)] transition-all hover:bg-[var(--gold)]/10 disabled:opacity-50\"\n            style={{ border: '1px solid rgba(59,130,246,0.15)' }}>\n            {openingWallet ? <Loader2 size={12} className=\"animate-spin\" /> : <Link2 size={12} />}\n            Wallet Completa\n          </button>\n        </div>\n      </motion.div>\n\n      {/* ─── WalletConnect Status Banner ─── */}\n      {wcAccount && (\n        <motion.div initial={{ opacity: 0, y: 8 }} animate={{ opacity: 1, y: 0 }}\n          className=\"rounded-xl p-3.5 flex items-center justify-between\"\n          style={{ background: 'linear-gradient(135deg, rgba(168,85,247,0.08), rgba(59,130,246,0.04))', border: '1px solid rgba(168,85,247,0.15)' }}>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white text-[10px] font-bold\">\n              WC\n            </div>\n            <div>\n              <p className=\"text-xs font-bold text-purple-300 flex items-center gap-1.5\">\n                <span className=\"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse\" />\n                {wcAccount.peerName || 'Wallet Externa'}\n              </p>\n              <p className=\"text-[10px] font-mono text-gray-500\">\n                {wcAccount.address?.slice(0, 6)}...{wcAccount.address?.slice(-4)}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-1.5\">\n            <button onClick={() => setShowWCConnect(true)}\n              className=\"px-2.5 py-1 rounded-lg text-[10px] font-semibold text-purple-300 hover:bg-purple-500/10 transition-colors\">\n              Detalles\n            </button>\n            <button onClick={async () => { await wcDisconnect(); setWcAccount(null); }}\n              className=\"p-1.5 rounded-lg hover:bg-red-500/10 transition-colors\" title=\"Desconectar\">\n              <Unlink size={12} className=\"text-red-400\" />\n            </button>\n          </div>\n        </motion.div>\n      )}\n\n      {/* ─── Connect External Wallet Button (when no WC) ─── */}\n      {!wcAccount && (\n        <motion.div initial={{ opacity: 0, y: 8 }} animate={{ opacity: 1, y: 0 }}\n          className=\"rounded-xl overflow-hidden cursor-pointer group\"\n          style={{ border: '1px solid rgba(168,85,247,0.1)' }}\n          onClick={() => setShowWCConnect(true)}>\n          <div className=\"flex items-center gap-3 p-3.5 bg-white/[0.015] hover:bg-purple-500/5 transition-colors\">\n            <div className=\"w-8 h-8 rounded-full bg-purple-500/10 flex items-center justify-center\">\n              <Link2 size={14} className=\"text-purple-400\" />\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"text-xs font-semibold text-gray-300 group-hover:text-purple-300 transition-colors\">\n                Conectar Wallet Externa\n              </p>\n              <p className=\"text-[10px] text-gray-600\">Kairos Wallet, MetaMask, Trust Wallet via WalletConnect</p>\n            </div>\n            <ChevronRight size={14} className=\"text-gray-600 group-hover:text-purple-400 transition-colors\" />\n          </div>\n        </motion.div>\n      )}\n\n      {/* ─── WalletConnect Modal ─── */}\n      <ConnectExternalWallet\n        isOpen={showWCConnect}\n        onClose={() => setShowWCConnect(false)}\n        onConnected={(account) => {\n          setWcAccount(account);\n          if (account) setShowWCConnect(false);\n        }}\n      />\n\n      {/* ─── Total Balance Card ─── */}\n      <motion.div\n        initial={{ opacity: 0, y: 12 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.05 }}\n        className=\"rounded-2xl p-6 relative overflow-hidden\"\n        style={{\n          background: 'linear-gradient(135deg, rgba(59,130,246,0.08), rgba(59,130,246,0.02))',\n          border: '1px solid rgba(59,130,246,0.12)',\n        }}\n      >\n        <div className=\"absolute -top-20 -right-20 w-60 h-60 rounded-full pointer-events-none\"\n          style={{ background: 'radial-gradient(circle, rgba(59,130,246,0.06), transparent)' }} />\n\n        <p className=\"text-xs text-[var(--text-dim)] font-semibold uppercase tracking-wider mb-1\">Balance Total KAIROS</p>\n        {loading ? (\n          <div className=\"h-10 w-48 rounded-lg bg-white/5 animate-pulse\" />\n        ) : (\n          <div className=\"flex items-baseline gap-2\">\n            <h2 className=\"text-4xl font-black text-white\">{formatBalance(totalKairos)}</h2>\n            <span className=\"text-sm font-bold text-[var(--gold)]\">KAIROS</span>\n          </div>\n        )}\n        <p className=\"text-xs text-[var(--text-dim)] mt-1\">\n          ≈ ${formatBalance(totalKairos)} USD <span className=\"text-[var(--text-dim)]/50\">(1 KAIROS = 1 USD)</span>\n        </p>\n\n        {/* Action buttons */}\n        <div className=\"flex gap-3 mt-5\">\n          {isAdmin && !privateKey ? (\n            <button\n              onClick={() => setShowImportPK(true)}\n              className=\"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-bold text-black transition-all hover:scale-[1.02]\"\n              style={{ background: 'linear-gradient(135deg, #D4AF37, #B8972E)', boxShadow: '0 4px 20px rgba(212,175,55,0.3)' }}>\n              <Download size={16} />\n              Importar Wallet\n            </button>\n          ) : (\n            <button onClick={() => setShowSend(true)}\n              className=\"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-bold text-white transition-all hover:scale-[1.02]\"\n              style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 4px 20px rgba(59,130,246,0.2)' }}>\n              <Send size={16} />\n              Enviar\n            </button>\n          )}\n          <button onClick={() => setShowReceive(true)}\n            className=\"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-bold text-white transition-all hover:scale-[1.02]\"\n            style={{ background: 'rgba(0,220,130,0.15)', border: '1px solid rgba(0,220,130,0.2)' }}>\n            <Download size={16} className=\"text-[var(--green)]\" />\n            <span className=\"text-[var(--green)]\">Recibir</span>\n          </button>\n          <button onClick={() => { setShowHistory(true); loadHistory(); }}\n            className=\"flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-sm font-bold text-[var(--text-dim)] transition-all hover:scale-[1.02] hover:text-white\"\n            style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.06)' }}>\n            <Globe size={16} />\n            Historial\n          </button>\n        </div>\n      </motion.div>\n\n      {/* ─── Admin Fee Wallet Banner ─── */}\n      {isAdmin && (\n        <motion.div initial={{ opacity: 0, y: 8 }} animate={{ opacity: 1, y: 0 }}\n          className=\"rounded-xl p-4\" style={{ background: 'linear-gradient(135deg, rgba(212,175,55,0.08), rgba(212,175,55,0.03))', border: '1px solid rgba(212,175,55,0.15)' }}>\n          <div className=\"flex items-start gap-3\">\n            <Shield size={18} className=\"text-[var(--gold)] mt-0.5 flex-shrink-0\" />\n            <div>\n              <p className=\"text-xs font-bold text-[var(--gold)] mb-1\">Kairos Wallet — Administrador</p>\n              <p className=\"text-[10px] text-[var(--text-dim)] leading-relaxed\">\n                {!walletAddress && 'No tienes wallet vinculada. Genera una nueva o importa una existente para operar.'}\n                {walletAddress && !privateKey && 'Wallet vinculada. Importa tu clave privada para enviar transacciones.'}\n                {walletAddress && privateKey && 'Wallet activa — puedes enviar, recibir y operar directamente desde Kairos 777.'}\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* ─── Chain Balances ─── */}\n      <div className=\"space-y-2.5\">\n        <h3 className=\"text-sm font-bold flex items-center gap-2\">\n          <Shield size={14} className=\"text-[var(--gold)]\" />\n          Balances por Chain\n        </h3>\n        {CHAINS.map((chain, i) => {\n          const bal = balances[chain.id] || { kairos: '0', native: '0' };\n          const kairosVal = parseFloat(bal.kairos);\n          return (\n            <motion.div key={chain.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1 + i * 0.05 }}\n              className=\"rounded-xl p-4 flex items-center justify-between transition-all hover:scale-[1.005]\"\n              style={{\n                background: `linear-gradient(135deg, ${chain.color}06, ${chain.color}02)`,\n                border: `1px solid ${chain.color}15`,\n              }}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-xl flex items-center justify-center text-sm font-black\"\n                  style={{ background: `${chain.color}15`, color: chain.color }}>\n                  {chain.short.slice(0, 2)}\n                </div>\n                <div>\n                  <p className=\"text-sm font-bold\">{chain.name}</p>\n                  <p className=\"text-[10px] text-[var(--text-dim)]\">\n                    {formatBalance(bal.native)} {chain.nativeSymbol}\n                  </p>\n                </div>\n              </div>\n              <div className=\"text-right\">\n                {loading ? (\n                  <div className=\"h-5 w-20 rounded bg-white/5 animate-pulse\" />\n                ) : (\n                  <>\n                    <p className=\"text-sm font-bold\" style={{ color: kairosVal > 0 ? 'white' : 'var(--text-dim)' }}>\n                      {formatBalance(bal.kairos)} <span className=\"text-[10px] text-[var(--gold)]\">KAIROS</span>\n                    </p>\n                    <a href={`${chain.explorer}/token/${KAIROS_COIN.addresses[chain.id]}?a=${walletAddress}`}\n                      target=\"_blank\" rel=\"noopener noreferrer\"\n                      className=\"text-[10px] text-[var(--text-dim)] hover:text-[var(--gold)] transition-colors flex items-center gap-1 justify-end\">\n                      Ver en explorer <ExternalLink size={8} />\n                    </a>\n                  </>\n                )}\n              </div>\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {/* ─── Security Settings (Hidden by default) ─── */}\n      {privateKey && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.4 }}\n        >\n          {/* Toggle button — subtle, doesn't scream \"private key here\" */}\n          <button\n            onClick={() => { setShowSecurityPanel(!showSecurityPanel); setShowPK(false); setSecurityError(''); }}\n            className=\"w-full flex items-center justify-between rounded-xl px-4 py-3 transition-all hover:scale-[1.005]\"\n            style={{\n              background: 'rgba(255,255,255,0.02)',\n              border: '1px solid rgba(255,255,255,0.06)',\n            }}\n          >\n            <div className=\"flex items-center gap-2\">\n              <Shield size={14} className=\"text-[var(--text-dim)]\" />\n              <span className=\"text-xs font-medium text-[var(--text-dim)]\">Seguridad Avanzada</span>\n            </div>\n            <ChevronDown size={14} className={`text-[var(--text-dim)] transition-transform ${showSecurityPanel ? 'rotate-180' : ''}`} />\n          </button>\n\n          <AnimatePresence>\n            {showSecurityPanel && (\n              <motion.div\n                initial={{ height: 0, opacity: 0 }}\n                animate={{ height: 'auto', opacity: 1 }}\n                exit={{ height: 0, opacity: 0 }}\n                transition={{ duration: 0.2 }}\n                className=\"overflow-hidden\"\n              >\n                <div className=\"rounded-xl p-4 mt-2\" style={{\n                  background: 'linear-gradient(135deg, rgba(239,68,68,0.03), rgba(239,68,68,0.01))',\n                  border: '1px solid rgba(239,68,68,0.08)',\n                }}>\n                  {!securityUnlocked ? (\n                    /* ── Password gate ── */\n                    <div>\n                      <p className=\"text-[10px] text-[var(--text-dim)] mb-3\">\n                        Ingresa tu contraseña para acceder a la clave privada.\n                      </p>\n                      <div className=\"flex items-center gap-2\">\n                        <input\n                          type=\"password\"\n                          value={securityPassword}\n                          onChange={(e) => { setSecurityPassword(e.target.value); setSecurityError(''); }}\n                          onKeyDown={(e) => e.key === 'Enter' && handleSecurityUnlock()}\n                          placeholder=\"Contraseña\"\n                          className=\"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-xs text-white placeholder-white/20 focus:outline-none focus:border-[var(--gold)]/40\"\n                        />\n                        <button\n                          onClick={handleSecurityUnlock}\n                          disabled={verifyingPassword || !securityPassword}\n                          className=\"px-4 py-2 rounded-lg text-xs font-semibold transition-all disabled:opacity-30\"\n                          style={{ background: 'rgba(239,68,68,0.15)', color: 'rgba(239,68,68,0.8)' }}\n                        >\n                          {verifyingPassword ? <Loader2 size={12} className=\"animate-spin\" /> : 'Verificar'}\n                        </button>\n                      </div>\n                      {securityError && (\n                        <p className=\"text-[10px] text-red-400 mt-2\">{securityError}</p>\n                      )}\n                    </div>\n                  ) : (\n                    /* ── Unlocked: show PK toggle ── */\n                    <div>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <AlertTriangle size={14} className=\"text-red-400\" />\n                          <span className=\"text-xs font-bold text-red-400/80\">Clave Privada</span>\n                        </div>\n                        <button onClick={() => setShowPK(!showPK)}\n                          className=\"flex items-center gap-1.5 px-2 py-1 rounded-lg text-[10px] font-semibold text-red-400/60 hover:text-red-400 transition-colors\"\n                          style={{ background: 'rgba(239,68,68,0.06)' }}>\n                          {showPK ? <EyeOff size={10} /> : <Eye size={10} />}\n                          {showPK ? 'Ocultar' : 'Mostrar'}\n                        </button>\n                      </div>\n                      {showPK && (\n                        <div className=\"flex items-center gap-2\">\n                          <code className=\"flex-1 text-[10px] text-red-400/70 font-mono break-all bg-black/20 rounded-lg p-2\">\n                            {privateKey}\n                          </code>\n                          <button onClick={() => handleCopy(privateKey)} className=\"p-2 rounded-lg hover:bg-red-400/10\">\n                            <Copy size={12} className=\"text-red-400/50\" />\n                          </button>\n                        </div>\n                      )}\n                      <p className=\"text-[9px] text-red-400/30 mt-2\">\n                        ⚠️ Nunca compartas tu clave privada.\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </motion.div>\n      )}\n\n      {/* ─── Quick Links ─── */}\n      <div className=\"grid grid-cols-2 gap-2.5\">\n        <a href=\"https://kairos-wallet.netlify.app\" target=\"_blank\" rel=\"noopener noreferrer\"\n          className=\"rounded-xl p-4 text-left transition-all hover:scale-[1.02] block\"\n          style={{ background: 'rgba(59,130,246,0.05)', border: '1px solid rgba(59,130,246,0.1)' }}>\n          <Wallet size={20} className=\"text-[var(--gold)] mb-2\" />\n          <p className=\"text-xs font-bold\">Kairos Wallet</p>\n          <p className=\"text-[10px] text-[var(--text-dim)] mt-0.5\">Swap, Bridge, Staking, NFTs, WalletConnect</p>\n        </a>\n        <a href={`${CHAINS[0].explorer}/address/${walletAddress}`} target=\"_blank\" rel=\"noopener noreferrer\"\n          className=\"rounded-xl p-4 text-left transition-all hover:scale-[1.02] block\"\n          style={{ background: 'rgba(240,185,11,0.04)', border: '1px solid rgba(240,185,11,0.1)' }}>\n          <Globe size={20} className=\"text-amber-400 mb-2\" />\n          <p className=\"text-xs font-bold\">BSCScan</p>\n          <p className=\"text-[10px] text-[var(--text-dim)] mt-0.5\">Ver todas las transacciones on-chain</p>\n        </a>\n      </div>\n\n      {/* ══════════ MODALS ══════════ */}\n\n      {/* ─── Import PK Modal (Admin) ─── */}\n      <AnimatePresence>\n        {showImportPK && (\n          <motion.div\n            initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.95, opacity: 0 }}\n              className=\"w-full max-w-md rounded-2xl p-6\"\n              style={{ background: 'var(--bg-card)', border: '1px solid rgba(212,175,55,0.2)' }}>\n              <div className=\"flex items-center justify-between mb-5\">\n                <h3 className=\"text-lg font-bold flex items-center gap-2\">\n                  <Download size={18} className=\"text-[var(--gold)]\" />\n                  Importar Wallet a Kairos\n                </h3>\n                <button onClick={() => { setShowImportPK(false); setImportPKValue(''); setImportError(''); }}\n                  className=\"p-1 rounded-lg hover:bg-white/10\"><X size={18} /></button>\n              </div>\n              <p className=\"text-xs text-[var(--text-dim)] mb-4 leading-relaxed\">\n                Pega tu clave privada para vincular tu wallet existente como wallet nativa de Kairos.\n                La PK se encripta y almacena de forma segura en tu dispositivo.\n              </p>\n              <div className=\"mb-3\">\n                <label className=\"text-[10px] text-[var(--text-dim)] uppercase tracking-wider mb-1 block\">Private Key</label>\n                <input\n                  type=\"password\"\n                  value={importPKValue}\n                  onChange={e => { setImportPKValue(e.target.value); setImportError(''); }}\n                  placeholder=\"0x...\"\n                  className=\"w-full px-4 py-3 rounded-xl text-sm bg-white/5 border border-white/10 focus:border-[var(--gold)] focus:outline-none font-mono\"\n                />\n              </div>\n              {importError && (\n                <div className=\"flex items-center gap-2 text-xs text-red-400 mb-3\">\n                  <AlertTriangle size={12} /> {importError}\n                </div>\n              )}\n              <div className=\"flex items-center gap-2 text-[10px] text-amber-400/80 mb-4 p-2 rounded-lg\" style={{ background: 'rgba(255,191,0,0.06)' }}>\n                <Shield size={12} className=\"flex-shrink-0\" />\n                <span>Tu PK nunca se envía a ningún servidor. Se encripta localmente en tu navegador.</span>\n              </div>\n              <button\n                onClick={importWallet}\n                disabled={importing || !importPKValue.trim()}\n                className=\"w-full py-3 rounded-xl text-sm font-bold text-black transition-all hover:brightness-110 disabled:opacity-50 flex items-center justify-center gap-2\"\n                style={{ background: 'linear-gradient(135deg, #D4AF37, #B8972E)' }}>\n                {importing ? (\n                  <><Loader2 size={16} className=\"animate-spin\" /> Importando...</>\n                ) : (\n                  <><Wallet size={16} /> Importar y Vincular</>\n                )}\n              </button>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* ─── Send Modal ─── */}\n      <AnimatePresence>\n        {showSend && (\n          <SendModal\n            chains={CHAINS}\n            walletAddress={walletAddress}\n            privateKey={privateKey}\n            onClose={() => setShowSend(false)}\n            onSuccess={loadBalances}\n          />\n        )}\n      </AnimatePresence>\n\n      {/* ─── Receive Modal ─── */}\n      <AnimatePresence>\n        {showReceive && (\n          <ReceiveModal\n            walletAddress={walletAddress}\n            onClose={() => setShowReceive(false)}\n          />\n        )}\n      </AnimatePresence>\n\n      {/* ─── History Modal ─── */}\n      <AnimatePresence>\n        {showHistory && (\n          <HistoryModal\n            history={history}\n            loading={historyLoading}\n            walletAddress={walletAddress}\n            onClose={() => setShowHistory(false)}\n          />\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\n/* ══════════════════════════════════════════════════════════════\n   SEND MODAL\n   ══════════════════════════════════════════════════════════════ */\nfunction SendModal({ chains, walletAddress, privateKey, onClose, onSuccess }) {\n  const [selectedChain, setSelectedChain] = useState(chains[0]);\n  const [toAddress, setToAddress] = useState('');\n  const [amount, setAmount] = useState('');\n  const [sending, setSending] = useState(false);\n  const [txHash, setTxHash] = useState(null);\n  const [error, setError] = useState('');\n\n  const handleSend = async () => {\n    setError('');\n    if (!toAddress || !ethers.isAddress(toAddress)) {\n      setError('Dirección inválida');\n      return;\n    }\n    if (!amount || parseFloat(amount) <= 0) {\n      setError('Ingresa un monto válido');\n      return;\n    }\n    if (!privateKey) {\n      setError('No se encontró la clave privada');\n      return;\n    }\n\n    setSending(true);\n    try {\n      const tx = await sendKairos(selectedChain, privateKey, toAddress, amount);\n      setTxHash(tx.hash);\n      onSuccess?.();\n    } catch (err) {\n      setError(err.reason || err.message || 'Error al enviar transacción');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  return (\n    <motion.div className=\"fixed inset-0 z-[60] flex items-center justify-center px-4\"\n      style={{ background: 'rgba(0,0,0,0.7)', backdropFilter: 'blur(10px)' }}\n      initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\n      <motion.div className=\"w-full max-w-md rounded-2xl p-6\"\n        style={{ background: 'var(--surface)', border: '1px solid var(--border)' }}\n        initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.9, opacity: 0 }}>\n        <div className=\"flex items-center justify-between mb-5\">\n          <h3 className=\"text-lg font-bold flex items-center gap-2\">\n            <Send size={18} className=\"text-[var(--gold)]\" />\n            Enviar KAIROS\n          </h3>\n          <button onClick={onClose} className=\"p-1.5 rounded-lg hover:bg-white/5\"><X size={16} /></button>\n        </div>\n\n        {txHash ? (\n          /* Success state */\n          <div className=\"text-center py-6\">\n            <div className=\"w-16 h-16 rounded-full bg-green-500/15 flex items-center justify-center mx-auto mb-4\">\n              <Check size={28} className=\"text-green-400\" />\n            </div>\n            <h4 className=\"text-lg font-bold text-white mb-2\">¡Transacción Enviada!</h4>\n            <p className=\"text-xs text-[var(--text-dim)] mb-4\">Tu transacción está siendo procesada en {selectedChain.name}</p>\n            <a href={`${selectedChain.explorer}/tx/${txHash}`} target=\"_blank\" rel=\"noopener noreferrer\"\n              className=\"inline-flex items-center gap-1.5 px-4 py-2 rounded-xl text-xs font-semibold text-[var(--gold)] hover:bg-[var(--gold)]/10 transition-colors\"\n              style={{ border: '1px solid rgba(59,130,246,0.15)' }}>\n              Ver en Explorer <ExternalLink size={12} />\n            </a>\n            <button onClick={onClose}\n              className=\"block w-full mt-4 py-3 rounded-xl text-sm font-bold text-white\"\n              style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)' }}>\n              Cerrar\n            </button>\n          </div>\n        ) : (\n          /* Send form */\n          <div className=\"space-y-4\">\n            {/* Chain selector */}\n            <div>\n              <label className=\"text-[10px] font-bold text-[var(--text-dim)] uppercase tracking-wider mb-1.5 block\">Red</label>\n              <div className=\"grid grid-cols-4 gap-1.5\">\n                {chains.map(c => (\n                  <button key={c.id} onClick={() => setSelectedChain(c)}\n                    className=\"flex items-center justify-center gap-1 py-2 rounded-lg text-[11px] font-bold transition-all\"\n                    style={{\n                      background: selectedChain.id === c.id ? `${c.color}20` : 'rgba(255,255,255,0.03)',\n                      border: `1px solid ${selectedChain.id === c.id ? c.color + '40' : 'rgba(255,255,255,0.06)'}`,\n                      color: selectedChain.id === c.id ? c.color : 'var(--text-dim)',\n                    }}>\n                    {c.short}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* To address */}\n            <div>\n              <label className=\"text-[10px] font-bold text-[var(--text-dim)] uppercase tracking-wider mb-1.5 block\">Dirección destino</label>\n              <input type=\"text\" value={toAddress} onChange={e => setToAddress(e.target.value)}\n                placeholder=\"0x...\"\n                className=\"w-full px-4 py-3 rounded-xl text-sm font-mono outline-none transition-all focus:ring-2 focus:ring-[var(--gold)]/30\"\n                style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)' }} />\n            </div>\n\n            {/* Amount */}\n            <div>\n              <label className=\"text-[10px] font-bold text-[var(--text-dim)] uppercase tracking-wider mb-1.5 block\">Cantidad KAIROS</label>\n              <input type=\"number\" value={amount} onChange={e => setAmount(e.target.value)}\n                placeholder=\"0.00\"\n                className=\"w-full px-4 py-3 rounded-xl text-sm outline-none transition-all focus:ring-2 focus:ring-[var(--gold)]/30\"\n                style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)' }} />\n            </div>\n\n            {/* Error */}\n            {error && (\n              <div className=\"flex items-center gap-2 px-3 py-2 rounded-xl text-xs text-red-400\"\n                style={{ background: 'rgba(239,68,68,0.08)', border: '1px solid rgba(239,68,68,0.15)' }}>\n                <AlertTriangle size={12} />\n                {typeof error === 'string' ? error : String(error)}\n              </div>\n            )}\n\n            {/* Send button */}\n            <button onClick={handleSend} disabled={sending}\n              className=\"w-full py-3.5 rounded-xl text-sm font-bold text-white transition-all hover:scale-[1.01] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n              style={{ background: 'linear-gradient(135deg, #3B82F6, #2563EB)', boxShadow: '0 4px 20px rgba(59,130,246,0.2)' }}>\n              {sending ? (\n                <><Loader2 size={16} className=\"animate-spin\" /> Enviando...</>\n              ) : (\n                <><Send size={16} /> Enviar {amount ? `${amount} KAIROS` : 'KAIROS'}</>\n              )}\n            </button>\n\n            <p className=\"text-[9px] text-[var(--text-dim)]/50 text-center\">\n              Necesitas {selectedChain.nativeSymbol} en {selectedChain.name} para pagar el gas\n            </p>\n          </div>\n        )}\n      </motion.div>\n    </motion.div>\n  );\n}\n\n/* ══════════════════════════════════════════════════════════════\n   RECEIVE MODAL\n   ══════════════════════════════════════════════════════════════ */\nfunction ReceiveModal({ walletAddress, onClose }) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(walletAddress);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch {}\n  };\n\n  return (\n    <motion.div className=\"fixed inset-0 z-[60] flex items-center justify-center px-4\"\n      style={{ background: 'rgba(0,0,0,0.7)', backdropFilter: 'blur(10px)' }}\n      initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\n      <motion.div className=\"w-full max-w-sm rounded-2xl p-6 text-center\"\n        style={{ background: 'var(--surface)', border: '1px solid var(--border)' }}\n        initial={{ scale: 0.9 }} animate={{ scale: 1 }} exit={{ scale: 0.9 }}>\n        <div className=\"flex items-center justify-between mb-5\">\n          <h3 className=\"text-lg font-bold flex items-center gap-2\">\n            <Download size={18} className=\"text-green-400\" />\n            Recibir KAIROS\n          </h3>\n          <button onClick={onClose} className=\"p-1.5 rounded-lg hover:bg-white/5\"><X size={16} /></button>\n        </div>\n\n        {/* QR Code placeholder — using address visual */}\n        <div className=\"w-48 h-48 rounded-2xl mx-auto mb-4 flex items-center justify-center relative overflow-hidden\"\n          style={{ background: 'white' }}>\n          {/* Simple QR visual representation */}\n          <div className=\"absolute inset-2 grid grid-cols-8 gap-[2px]\">\n            {Array.from({ length: 64 }).map((_, i) => {\n              // Generate deterministic pattern from address\n              const charCode = walletAddress.charCodeAt((i * 3) % walletAddress.length) || 0;\n              const filled = (charCode + i) % 3 !== 0;\n              return (\n                <div key={i} className=\"rounded-[1px]\"\n                  style={{ background: filled ? '#000' : '#fff' }} />\n              );\n            })}\n          </div>\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"w-10 h-10 rounded-lg bg-white flex items-center justify-center shadow-md\">\n              <span className=\"text-sm font-black text-blue-600\">K</span>\n            </div>\n          </div>\n        </div>\n\n        <p className=\"text-[10px] text-[var(--text-dim)] mb-3\">\n          Envía KAIROS a esta dirección en cualquier chain soportada\n        </p>\n\n        {/* Address */}\n        <button onClick={handleCopy}\n          className=\"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-mono transition-all hover:bg-white/5\"\n          style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.08)' }}>\n          <span className=\"truncate\">{walletAddress}</span>\n          {copied ? <Check size={14} className=\"text-green-400 shrink-0\" /> : <Copy size={14} className=\"text-[var(--text-dim)] shrink-0\" />}\n        </button>\n\n        {/* Supported chains */}\n        <div className=\"flex justify-center gap-2 mt-4\">\n          {CHAINS.map(c => (\n            <div key={c.id} className=\"px-2 py-1 rounded-md text-[9px] font-bold\"\n              style={{ background: `${c.color}15`, color: c.color }}>\n              {c.short}\n            </div>\n          ))}\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n}\n\n/* ══════════════════════════════════════════════════════════════\n   HISTORY MODAL\n   ══════════════════════════════════════════════════════════════ */\nfunction HistoryModal({ history, loading, walletAddress, onClose }) {\n  return (\n    <motion.div className=\"fixed inset-0 z-[60] flex items-center justify-center px-4\"\n      style={{ background: 'rgba(0,0,0,0.7)', backdropFilter: 'blur(10px)' }}\n      initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\n      <motion.div className=\"w-full max-w-lg rounded-2xl overflow-hidden\"\n        style={{ background: 'var(--surface)', border: '1px solid var(--border)', maxHeight: '80vh' }}\n        initial={{ scale: 0.9 }} animate={{ scale: 1 }} exit={{ scale: 0.9 }}>\n        <div className=\"flex items-center justify-between p-5\" style={{ borderBottom: '1px solid var(--border)' }}>\n          <h3 className=\"text-lg font-bold flex items-center gap-2\">\n            <Globe size={18} className=\"text-[var(--gold)]\" />\n            Historial KAIROS\n          </h3>\n          <button onClick={onClose} className=\"p-1.5 rounded-lg hover:bg-white/5\"><X size={16} /></button>\n        </div>\n\n        <div className=\"overflow-y-auto p-4 space-y-2\" style={{ maxHeight: 'calc(80vh - 70px)' }}>\n          {loading && (\n            <div className=\"py-8 text-center\">\n              <Loader2 size={24} className=\"animate-spin text-[var(--gold)] mx-auto mb-2\" />\n              <p className=\"text-xs text-[var(--text-dim)]\">Cargando transacciones...</p>\n            </div>\n          )}\n\n          {!loading && history.length === 0 && (\n            <div className=\"py-8 text-center\">\n              <Globe size={32} className=\"text-[var(--text-dim)]/30 mx-auto mb-2\" />\n              <p className=\"text-sm text-[var(--text-dim)]\">No hay transacciones aún</p>\n            </div>\n          )}\n\n          {!loading && history.map((tx, i) => {\n            const chain = CHAINS.find(c => c.id === tx.chainId) || CHAINS[0];\n            return (\n              <a key={`${tx.hash}-${i}`}\n                href={`${chain.explorer}/tx/${tx.hash}`}\n                target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center justify-between p-3 rounded-xl transition-all hover:bg-white/[0.03]\"\n                style={{ border: '1px solid rgba(255,255,255,0.04)' }}>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-9 h-9 rounded-xl flex items-center justify-center\"\n                    style={{ background: tx.isIncoming ? 'rgba(0,220,130,0.1)' : 'rgba(59,130,246,0.1)' }}>\n                    {tx.isIncoming\n                      ? <ArrowDownRight size={16} className=\"text-green-400\" />\n                      : <ArrowUpRight size={16} className=\"text-blue-400\" />\n                    }\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-bold\">\n                      {tx.isIncoming ? 'Recibido' : 'Enviado'}\n                      <span className=\"ml-1.5 text-[9px] font-semibold px-1.5 py-0.5 rounded\"\n                        style={{ background: `${chain.color}15`, color: chain.color }}>\n                        {chain.short}\n                      </span>\n                    </p>\n                    <p className=\"text-[10px] text-[var(--text-dim)] font-mono\">\n                      {tx.isIncoming ? `de ${shortenAddress(tx.from)}` : `a ${shortenAddress(tx.to)}`}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <p className={`text-xs font-bold ${tx.isIncoming ? 'text-green-400' : 'text-white'}`}>\n                    {tx.isIncoming ? '+' : '-'}{formatBalance(tx.value)} KAIROS\n                  </p>\n                  <p className=\"text-[9px] text-[var(--text-dim)]\">\n                    {new Date(tx.timestamp).toLocaleDateString('es', { day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit' })}\n                  </p>\n                </div>\n              </a>\n            );\n          })}\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n}\n"],"names":["QRDisplay","value","size","jsxs","jsx","QrCode","ConnectExternalWallet","isOpen","onClose","onConnected","step","setStep","useState","wcUri","setWcUri","copied","setCopied","error","setError","connectedInfo","setConnectedInfo","approvalRef","useRef","useEffect","initWCClient","account","getConnectedAccount","setCallbacks","session","handleConnect","useCallback","uri","waitForApproval","connect","err","_a","_b","handleDisconnect","disconnect","handleCopy","openKairosWallet","url","AnimatePresence","motion","e","Link2","X","Wallet","Zap","Shield","Loader2","Check","Copy","Smartphone","ExternalLink","CheckCircle2","_c","_d","id","Unlink","CHAINS","ERC20_ABI","shortenAddress","addr","formatBalance","bal","n","getProvider","chain","ethers.JsonRpcProvider","getKairosBalance","address","kairosAddr","KAIROS_COIN","provider","ethers.Contract","ethers.formatUnits","getNativeBalance","sendKairos","privateKey","toAddress","amount","wallet","ethers.Wallet","contract","amountWei","ethers.parseUnits","getRecentTransfers","data","tx","WalletPage","user","useStore","walletAddress","isAdmin","balances","setBalances","totalKairos","setTotalKairos","loading","setLoading","refreshing","setRefreshing","showSend","setShowSend","showReceive","setShowReceive","showHistory","setShowHistory","history","setHistory","historyLoading","setHistoryLoading","showPK","setShowPK","showSecurityPanel","setShowSecurityPanel","securityUnlocked","setSecurityUnlocked","securityPassword","setSecurityPassword","securityError","setSecurityError","verifyingPassword","setVerifyingPassword","verifiedPasswordRef","openingWallet","setOpeningWallet","showImportPK","setShowImportPK","importPKValue","setImportPKValue","importing","setImporting","importError","setImportError","showWCConnect","setShowWCConnect","wcAccount","setWcAccount","acct","useMemo","sessionPK","getSessionKey","decoded","stored","encryptedKey","loadBalances","results","total","kairos","native","loadHistory","allTx","txs","a","b","text","handleSecurityUnlock","apiClient","importWallet","pk","pwd","imported","encKey","vaultEncrypt","setSessionKey","login","generating","setGenerating","generateWallet","newAddress","newPK","RefreshCw","res","wcDisconnect","ChevronRight","Download","Send","Globe","i","kairosVal","Fragment","ChevronDown","AlertTriangle","EyeOff","Eye","SendModal","ReceiveModal","HistoryModal","chains","onSuccess","selectedChain","setSelectedChain","setToAddress","setAmount","sending","setSending","txHash","setTxHash","handleSend","ethers.isAddress","c","_","filled","ArrowDownRight","ArrowUpRight"],"mappings":"8kBAgBA,SAASA,GAAU,CAAE,MAAAC,EAAO,KAAAC,EAAO,KAAO,CAGxC,OACEC,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,UAAU,sEACV,MAAO,CAAE,WAAY,gDAAA,EAErB,SAAAA,EAAAA,IAACC,GAAA,CAAO,UAAU,yBAAA,CAA0B,CAAA,CAAA,EAE9CD,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,wDAAA,CAE/D,CAAA,EACF,CAEJ,CAGA,SAAwBE,GAAsB,CAAE,OAAAC,EAAQ,QAAAC,EAAS,YAAAC,GAAe,eAC9E,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAS,MAAM,EACjC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAC/B,CAACG,EAAQC,CAAS,EAAIJ,EAAAA,SAAS,EAAK,EACpC,CAACK,EAAOC,CAAQ,EAAIN,EAAAA,SAAS,EAAE,EAC/B,CAACO,EAAeC,CAAgB,EAAIR,EAAAA,SAAS,IAAI,EACjDS,EAAcC,EAAAA,OAAO,IAAI,EAG/BC,EAAAA,UAAU,IAAM,CACThB,IAELiB,GAAA,EAAe,KAAK,IAAM,CAExB,MAAMC,EAAUC,GAAA,EACZD,IACFL,EAAiBK,CAAO,EACxBd,EAAQ,WAAW,EAEvB,CAAC,EAAE,MAAM,IAAM,CAAC,CAAC,EAGjBgB,GAAa,CACX,aAAc,IAAM,CAClBP,EAAiB,IAAI,EACrBT,EAAQ,MAAM,EACVF,KAAyB,IAAI,CACnC,EACA,YAAcmB,GAAY,CACxB,MAAMH,EAAUC,GAAA,EACZD,IACFL,EAAiBK,CAAO,EACxBd,EAAQ,WAAW,EACfF,KAAyBgB,CAAO,EAExC,CAAA,CACD,EACH,EAAG,CAAClB,CAAM,CAAC,EAGX,MAAMsB,EAAgBC,EAAAA,YAAY,SAAY,SAC5CnB,EAAQ,YAAY,EACpBO,EAAS,EAAE,EACX,GAAI,CACF,KAAM,CAAE,IAAAa,EAAK,gBAAAC,CAAA,EAAoB,MAAMC,GAAA,EACvCnB,EAASiB,CAAG,EACZpB,EAAQ,SAAS,EACjBU,EAAY,QAAUW,EAGtB,MAAMJ,GAAU,MAAMI,EAAA,EAChBP,EAAUC,GAAA,EAChBN,EAAiBK,CAAO,EACxBd,EAAQ,WAAW,EACfF,KAAyBgB,CAAO,CACtC,OAASS,EAAK,EACRC,EAAAD,GAAA,YAAAA,EAAK,UAAL,MAAAC,EAAc,SAAS,cAAeC,EAAAF,GAAA,YAAAA,EAAK,UAAL,MAAAE,EAAc,SAAS,WAC/DlB,EAAS,kDAAkD,EAE3DA,GAASgB,GAAA,YAAAA,EAAK,UAAW,mBAAmB,EAE9CvB,EAAQ,OAAO,CACjB,CACF,EAAG,CAACF,CAAW,CAAC,EAGV4B,EAAmBP,EAAAA,YAAY,SAAY,CAC/C,MAAMQ,GAAA,EACNlB,EAAiB,IAAI,EACrBT,EAAQ,MAAM,EACVF,KAAyB,IAAI,CACnC,EAAG,CAACA,CAAW,CAAC,EAGV8B,EAAaT,EAAAA,YAAY,SAAY,CACzC,GAAI,CACF,MAAM,UAAU,UAAU,UAAUjB,CAAK,EACzCG,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,MAAQ,CAAC,CACX,EAAG,CAACH,CAAK,CAAC,EAGJ2B,EAAmBV,EAAAA,YAAY,IAAM,CAEzC,MAAMW,EAAM5B,EACR,wCAAwC,mBAAmBA,CAAK,CAAC,GACjE,oCACJ,OAAO,KAAK4B,EAAK,QAAQ,CAC3B,EAAG,CAAC5B,CAAK,CAAC,EAEV,OAAKN,QAGFmC,EAAA,CACC,SAAAtC,EAAAA,IAACuC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,KAAM,CAAE,QAAS,CAAA,EACjB,UAAU,0FACV,QAASnC,EAET,SAAAL,EAAAA,KAACwC,EAAO,IAAP,CACC,QAAS,CAAE,MAAO,GAAK,QAAS,EAAG,EAAG,EAAA,EACtC,QAAS,CAAE,MAAO,EAAG,QAAS,EAAG,EAAG,CAAA,EACpC,KAAM,CAAE,MAAO,GAAK,QAAS,EAAG,EAAG,EAAA,EACnC,WAAY,CAAE,KAAM,SAAU,QAAS,EAAA,EACvC,UAAU,kFACV,QAASC,GAAKA,EAAE,gBAAA,EAGhB,SAAA,CAAAzC,EAAAA,KAAC,MAAA,CAAI,UAAU,sEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACyC,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCzC,EAAAA,IAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,iBAAA,CAAe,CAAA,EAC9D,EACAA,EAAAA,IAAC,SAAA,CAAO,QAASI,EAAS,UAAU,uDAClC,SAAAJ,EAAAA,IAAC0C,EAAA,CAAE,UAAU,uBAAA,CAAwB,CAAA,CACvC,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,MACb,SAAA3C,EAAAA,KAACuC,EAAA,CAAgB,KAAK,OAGnB,SAAA,CAAAhC,IAAS,eACPiC,EAAO,IAAP,CAAsB,QAAS,CAAE,QAAS,GAAK,QAAS,CAAE,QAAS,GAAK,KAAM,CAAE,QAAS,GAAK,UAAU,YACvG,SAAA,CAAAvC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,wGAE1C,EAGAD,EAAAA,KAAC,SAAA,CACC,QAAS0B,EACT,UAAU,+KAEV,SAAA,CAAA1B,EAAAA,KAAC,MAAA,CAAI,UAAU,kFACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAI,uDACJ,IAAI,gBACJ,UAAU,qBACV,QAASwC,GAAK,CAAEA,EAAE,OAAO,MAAM,QAAU,OAAQA,EAAE,OAAO,YAAY,MAAM,QAAU,MAAQ,CAAA,CAAA,EAEhGxC,EAAAA,IAAC,OAAI,UAAU,yEACb,eAAC2C,EAAA,CAAO,UAAU,0BAA0B,CAAA,CAC9C,CAAA,EACF,EACA5C,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,yEAAyE,SAAA,gBAEzF,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,sFAAsF,SAAA,aAAA,CAEtG,CAAA,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,0CAAA,CAAwC,CAAA,EACtF,EACAA,EAAAA,IAAC4C,GAAA,CAAI,UAAU,8EAAA,CAA+E,CAAA,CAAA,CAAA,EAIhG7C,EAAAA,KAAC,SAAA,CACC,QAAS0B,EACT,UAAU,iIAEV,SAAA,CAAAzB,EAAAA,IAAC,OAAI,UAAU,gFACb,eAACyC,GAAA,CAAM,UAAU,wBAAwB,CAAA,CAC3C,EACA1C,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,uEAAuE,SAAA,gBAEvF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,uCAAA,CAAqC,CAAA,CAAA,CACnF,CAAA,CAAA,CAAA,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC6C,EAAA,CAAO,UAAU,+BAAA,CAAgC,EAClD7C,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA4B,SAAA,kFAAA,CAEzC,CAAA,CAAA,CACF,CAAA,CAAA,EAxDc,MAyDhB,EAIDM,IAAS,cACRP,EAAAA,KAACwC,EAAO,IAAP,CAA4B,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EAC9F,UAAU,wCAEV,SAAA,CAAAvC,EAAAA,IAAC8C,EAAA,CAAQ,UAAU,sCAAA,CAAuC,EAC1D9C,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8BAAA,CAA4B,CAAA,CAAA,EAJnD,YAAA,EASjBM,IAAS,WACRP,EAAAA,KAACwC,EAAO,IAAP,CAAyB,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EAC3F,UAAU,mCAEV,SAAA,CAAAvC,EAAAA,IAACJ,GAAA,CAAU,MAAOa,CAAA,CAAO,EAGzBV,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,sDACb,SAAAS,EACH,EACAT,EAAAA,IAAC,SAAA,CACC,QAASmC,EACT,UAAU,gEAET,SAAAxB,QAAUoC,GAAA,CAAM,UAAU,yBAAyB,EAAK/C,EAAAA,IAACgD,EAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACnG,EACF,EAGAjD,EAAAA,KAAC,SAAA,CACC,QAASqC,EACT,UAAU,2IAEV,SAAA,CAAApC,EAAAA,IAACiD,GAAA,CAAW,UAAU,SAAA,CAAU,EAAE,sBAElCjD,EAAAA,IAACkD,GAAA,CAAa,UAAU,wBAAA,CAAyB,CAAA,CAAA,CAAA,EAGnDnD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC8C,EAAA,CAAQ,UAAU,wCAAA,CAAyC,EAC5D9C,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sCAAA,CAAoC,CAAA,CAAA,CAC3E,CAAA,CAAA,EA/Bc,SAAA,EAoCjBM,IAAS,aAAeS,GACvBhB,EAAAA,KAACwC,EAAO,IAAP,CAA2B,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAAM,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EAC1G,UAAU,YAGV,SAAA,CAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,oFACb,SAAA,CAAAC,EAAAA,IAACmD,GAAA,CAAa,UAAU,iCAAA,CAAkC,SACzD,MAAA,CACC,SAAA,CAAAnD,EAAAA,IAAC,IAAA,CAAE,UAAU,uCAAuC,SAAA,mBAAgB,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,WAAc,QAAA,CAAS,CAAA,CAAA,CAC1E,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+EACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qIACZ,UAAA+B,EAAAhB,EAAc,UAAd,YAAAgB,EAAuB,MAAM,EAAG,GAAG,aAAY,CAClD,EACAhC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAyC,SAAAe,EAAc,QAAQ,EAC5EhB,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,GAAAiC,EAAAjB,EAAc,SAAd,YAAAiB,EAAsB,SAAU,EAAE,YAAQoB,EAAArC,EAAc,SAAd,YAAAqC,EAAsB,QAAS,EAAI,IAAM,GAAG,eAAWC,EAAAtC,EAAc,SAAd,YAAAsC,EAAsB,QAAS,EAAI,IAAM,EAAA,CAAA,CAC7I,CAAA,EACF,EACArD,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAA,EACf,UAAU,qCAEV,SAAAnC,EAAAA,IAACgD,EAAA,CAAK,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAC1C,EACF,EAGAhD,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACZ,cAAc,uBAAQ,IAAIsD,GACzBtD,EAAAA,IAAC,OAAA,CAAc,UAAU,gEACrB,SAAA,CAAE,GAAI,MAAO,EAAG,WAAY,IAAK,UAAW,MAAO,WAAY,MAAO,YAAa,KAAM,MAAA,EAAUsD,CAAE,GAAK,SAASA,CAAE,IAD9GA,CAEX,GAEJ,EAGAvD,EAAAA,KAAC,SAAA,CACC,QAASkC,EACT,UAAU,sJAEV,SAAA,CAAAjC,EAAAA,IAACuD,GAAA,CAAO,UAAU,SAAA,CAAU,EAAE,aAAA,CAAA,CAAA,CAEhC,CAAA,EA/Cc,WAAA,EAoDjBjD,IAAS,SACRP,EAAAA,KAACwC,EAAO,IAAP,CAAuB,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EACzF,UAAU,wCAEV,SAAA,CAAAvC,EAAAA,IAAC,OAAI,UAAU,wEACb,eAAC0C,EAAA,CAAE,UAAU,uBAAuB,CAAA,CACtC,EACA1C,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,SAAAa,EAAM,EACvDb,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CAAEO,EAAQ,MAAM,EAAGO,EAAS,EAAE,CAAG,EAChD,UAAU,0FACX,SAAA,mBAAA,CAAA,CAED,CAAA,EAZc,OAAA,CAahB,CAAA,CAGJ,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CAAA,EAEJ,EA1NkB,IA4NtB,CCxUA,MAAM0C,EAAS,CACb,CACE,GAAI,GAAI,KAAM,kBAAmB,MAAO,MAAO,MAAO,UACtD,IAAK,oCACL,YAAa,oCACb,SAAU,sBACV,YAAa,8BACb,aAAc,MAAO,eAAgB,GACrC,OAAQ,EAAA,EAEV,CACE,GAAI,KAAM,KAAM,OAAQ,MAAO,OAAQ,MAAO,UAC9C,IAAK,2BACL,YAAa,8BACb,SAAU,uBACV,YAAa,+BACb,aAAc,MAAO,eAAgB,GACrC,OAAQ,EAAA,EAEV,CACE,GAAI,MAAO,KAAM,eAAgB,MAAO,MAAO,MAAO,UACtD,IAAK,+BACL,YAAa,kCACb,SAAU,sBACV,YAAa,8BACb,aAAc,MAAO,eAAgB,GACrC,OAAQ,EAAA,EAEV,CACE,GAAI,IAAK,KAAM,UAAW,MAAO,QAAS,MAAO,UACjD,IAAK,0BACL,YAAa,iCACb,SAAU,0BACV,YAAa,kCACb,aAAc,MAAO,eAAgB,GACrC,OAAQ,EAAA,CAEZ,EAGMC,GAAY,CAChB,qDACA,+DACA,2CACA,yCACF,EAGMC,GAAkBC,GAASA,EAAO,GAAGA,EAAK,MAAM,EAAG,CAAC,CAAC,MAAMA,EAAK,MAAM,EAAE,CAAC,GAAK,GAC9EC,EAAiBC,GAAQ,CAC7B,MAAMC,EAAI,WAAWD,CAAG,EACxB,OAAIC,IAAM,EAAU,OAChBA,EAAI,IAAaA,EAAE,QAAQ,CAAC,EAC5BA,EAAI,EAAUA,EAAE,QAAQ,CAAC,EACzBA,EAAI,IAAaA,EAAE,QAAQ,CAAC,EACzBA,EAAE,eAAe,OAAW,CAAE,sBAAuB,EAAG,CACjE,EAGMC,GAAeC,GAAU,CAC7B,GAAI,CACF,OAAO,IAAIC,GAAuBD,EAAM,IAAKA,EAAM,EAAE,CACvD,MAAQ,CACN,OAAO,IAAIC,GAAuBD,EAAM,YAAaA,EAAM,EAAE,CAC/D,CACF,EAGME,GAAmB,MAAOF,EAAOG,IAAY,CACjD,GAAI,CACF,MAAMC,EAAaC,EAAY,UAAUL,EAAM,EAAE,EACjD,GAAI,CAACI,EAAY,MAAO,IACxB,MAAME,EAAWP,GAAYC,CAAK,EAE5BH,EAAM,MADK,IAAIU,GAAgBH,EAAYX,GAAWa,CAAQ,EACzC,UAAUH,CAAO,EAC5C,OAAOK,GAAmBX,EAAKQ,EAAY,QAAQ,CACrD,OAASvC,EAAK,CACZ,eAAQ,KAAK,mCAAmCkC,EAAM,KAAK,IAAKlC,EAAI,OAAO,EACpE,GACT,CACF,EAGM2C,GAAmB,MAAOT,EAAOG,IAAY,CACjD,GAAI,CAEF,MAAMN,EAAM,MADKE,GAAYC,CAAK,EACP,WAAWG,CAAO,EAC7C,OAAOK,GAAmBX,EAAKG,EAAM,cAAc,CACrD,MAAQ,CACN,MAAO,GACT,CACF,EAGMU,GAAa,MAAOV,EAAOW,EAAYC,EAAWC,IAAW,CACjE,MAAMT,EAAaC,EAAY,UAAUL,EAAM,EAAE,EACjD,GAAI,CAACI,EAAY,MAAM,IAAI,MAAM,gCAAgCJ,EAAM,IAAI,EAAE,EAE7E,MAAMM,EAAWP,GAAYC,CAAK,EAC5Bc,EAAS,IAAIC,GAAcJ,EAAYL,CAAQ,EAC/CU,EAAW,IAAIT,GAAgBH,EAAYX,GAAWqB,CAAM,EAE5DG,EAAYC,GAAkBL,EAAO,SAAA,EAAYR,EAAY,QAAQ,EAE3E,OADW,MAAMW,EAAS,SAASJ,EAAWK,CAAS,CAEzD,EAGME,GAAqB,MAAOnB,EAAOG,IAAY,CACnD,GAAI,CACF,MAAMC,EAAaC,EAAY,UAAUL,EAAM,EAAE,EACjD,GAAI,CAACI,EAAY,MAAO,CAAA,EACxB,MAAM/B,EAAM,GAAG2B,EAAM,WAAW,kDAAkDI,CAAU,YAAYD,CAAO,8BAEzGiB,EAAO,MADD,MAAM,MAAM/C,CAAG,GACJ,KAAA,EACvB,OAAI+C,EAAK,SAAW,KAAO,MAAM,QAAQA,EAAK,MAAM,EAC3CA,EAAK,OAAO,IAAIC,IAAO,CAC5B,KAAMA,EAAG,KACT,KAAMA,EAAG,KACT,GAAIA,EAAG,GACP,MAAOb,GAAmBa,EAAG,OAAS,IAAK,SAASA,EAAG,YAAY,GAAK,EAAE,EAC1E,UAAW,SAASA,EAAG,SAAS,EAAI,IACpC,QAASrB,EAAM,GACf,WAAYA,EAAM,MAClB,WAAYA,EAAM,MAClB,WAAYqB,EAAG,GAAG,YAAA,IAAkBlB,EAAQ,YAAA,CAAY,EACxD,EAEG,CAAA,CACT,MAAQ,CACN,MAAO,CAAA,CACT,CACF,EAKA,SAAwBmB,IAAa,WACnC,KAAM,CAAE,KAAAC,CAAA,EAASC,GAAA,EACXC,GAAgBF,GAAA,YAAAA,EAAM,gBAAiB,GACvCG,GAAUH,GAAA,YAAAA,EAAM,QAAS,QAGzB,CAACI,EAAUC,CAAW,EAAIpF,EAAAA,SAAS,CAAA,CAAE,EACrC,CAACqF,EAAaC,CAAc,EAAItF,EAAAA,SAAS,CAAC,EAC1C,CAACuF,EAASC,CAAU,EAAIxF,EAAAA,SAAS,EAAI,EACrC,CAACyF,EAAYC,CAAa,EAAI1F,EAAAA,SAAS,EAAK,EAC5C,CAACG,EAAQC,CAAS,EAAIJ,EAAAA,SAAS,EAAK,EACpC,CAAC2F,EAAUC,CAAW,EAAI5F,EAAAA,SAAS,EAAK,EACxC,CAAC6F,EAAaC,CAAc,EAAI9F,EAAAA,SAAS,EAAK,EAC9C,CAAC+F,EAAaC,CAAc,EAAIhG,EAAAA,SAAS,EAAK,EAC9C,CAACiG,EAASC,CAAU,EAAIlG,EAAAA,SAAS,CAAA,CAAE,EACnC,CAACmG,EAAgBC,CAAiB,EAAIpG,EAAAA,SAAS,EAAK,EACpD,CAACqG,EAAQC,CAAS,EAAItG,EAAAA,SAAS,EAAK,EACpC,CAACuG,EAAmBC,CAAoB,EAAIxG,EAAAA,SAAS,EAAK,EAC1D,CAACyG,GAAkBC,CAAmB,EAAI1G,EAAAA,SAAS,EAAK,EACxD,CAAC2G,EAAkBC,EAAmB,EAAI5G,EAAAA,SAAS,EAAE,EACrD,CAAC6G,GAAeC,CAAgB,EAAI9G,EAAAA,SAAS,EAAE,EAC/C,CAAC+G,GAAmBC,EAAoB,EAAIhH,EAAAA,SAAS,EAAK,EAC1DiH,EAAsBvG,EAAAA,OAAO,IAAI,EACjC,CAACwG,GAAeC,EAAgB,EAAInH,EAAAA,SAAS,EAAK,EAClD,CAACoH,GAAcC,EAAe,EAAIrH,EAAAA,SAAS,EAAK,EAChD,CAACsH,GAAeC,EAAgB,EAAIvH,EAAAA,SAAS,EAAE,EAC/C,CAACwH,GAAWC,EAAY,EAAIzH,EAAAA,SAAS,EAAK,EAC1C,CAAC0H,GAAaC,CAAc,EAAI3H,EAAAA,SAAS,EAAE,EAC3C,CAAC4H,GAAeC,CAAgB,EAAI7H,EAAAA,SAAS,EAAK,EAClD,CAAC8H,EAAWC,EAAY,EAAI/H,EAAAA,SAAS,IAAI,EAG/CW,EAAAA,UAAU,IAAM,CACdC,GAAA,EAAe,KAAK,IAAM,CACxB,MAAMoH,EAAOlH,GAAA,EACTkH,MAAmBA,CAAI,CAC7B,CAAC,EAAE,MAAM,IAAM,CAAC,CAAC,CACnB,EAAG,CAAA,CAAE,EAGL,MAAM7D,EAAa8D,EAAAA,QAAQ,IAAM,CAC/B,GAAI,CAEF,MAAMC,EAAYC,GAAA,EAClB,GAAID,GAAaA,EAAU,WAAW,IAAI,EAAG,OAAOA,EAEpD,GAAInD,GAAA,MAAAA,EAAM,cAAgB,CAACA,EAAK,aAAa,WAAW,KAAK,EAAG,CAC9D,MAAMqD,EAAU,KAAKrD,EAAK,YAAY,EACtC,GAAIqD,EAAQ,WAAW,IAAI,EAAG,OAAOA,CACvC,CACA,MAAMC,EAAS,aAAa,QAAQ,qBAAqB,EACzD,GAAIA,EAAQ,CACV,KAAM,CAAE,aAAAC,CAAA,EAAiB,KAAK,MAAMD,CAAM,EAC1C,GAAIC,GAAgB,CAACA,EAAa,WAAW,KAAK,EAAG,CACnD,MAAMF,EAAU,KAAKE,CAAY,EACjC,GAAIF,EAAQ,WAAW,IAAI,EAAG,OAAOA,CACvC,CACF,CACF,MAAQ,CAAC,CACT,OAAO,IACT,EAAG,CAACrD,GAAA,YAAAA,EAAM,YAAY,CAAC,EAGjBwD,EAAerH,EAAAA,YAAY,SAAY,CAC3C,GAAI,CAAC+D,EAAe,OACpBS,EAAc,EAAI,EAElB,MAAM8C,EAAU,CAAA,EAChB,IAAIC,EAAQ,EAEZ,MAAM,QAAQ,IACZzF,EAAO,IAAI,MAAOQ,GAAU,CAC1B,KAAM,CAACkF,EAAQC,CAAM,EAAI,MAAM,QAAQ,IAAI,CACzCjF,GAAiBF,EAAOyB,CAAa,EACrChB,GAAiBT,EAAOyB,CAAa,CAAA,CACtC,EACDuD,EAAQhF,EAAM,EAAE,EAAI,CAAE,OAAAkF,EAAQ,OAAAC,CAAA,EAC9BF,GAAS,WAAWC,CAAM,GAAK,CACjC,CAAC,CAAA,EAGHtD,EAAYoD,CAAO,EACnBlD,EAAemD,CAAK,EACpBjD,EAAW,EAAK,EAChBE,EAAc,EAAK,CACrB,EAAG,CAACT,CAAa,CAAC,EAElBtE,EAAAA,UAAU,IAAM,CAAE4H,EAAA,CAAgB,EAAG,CAACA,CAAY,CAAC,EAGnD,MAAMK,GAAc1H,EAAAA,YAAY,SAAY,CAC1C,GAAI,CAAC+D,EAAe,OACpBmB,EAAkB,EAAI,EACtB,MAAMyC,EAAQ,CAAA,EACd,MAAM,QAAQ,IACZ7F,EAAO,IAAI,MAAOQ,GAAU,CAC1B,MAAMsF,EAAM,MAAMnE,GAAmBnB,EAAOyB,CAAa,EACzD4D,EAAM,KAAK,GAAGC,CAAG,CACnB,CAAC,CAAA,EAEHD,EAAM,KAAK,CAACE,EAAGC,IAAMA,EAAE,UAAYD,EAAE,SAAS,EAC9C7C,EAAW2C,EAAM,MAAM,EAAG,EAAE,CAAC,EAC7BzC,EAAkB,EAAK,CACzB,EAAG,CAACnB,CAAa,CAAC,EAGZtD,GAAaT,cAAY,MAAO+H,GAAS,CAC7C,GAAI,CACF,MAAM,UAAU,UAAU,UAAUA,CAAI,EACxC7I,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,MAAQ,CAAC,CACX,EAAG,CAAA,CAAE,EAGC8I,GAAuB,SAAY,OACvC,GAAKvC,EACL,CAAAK,GAAqB,EAAI,EACzBF,EAAiB,EAAE,EACnB,GAAI,EAKEvF,GAJQ,MAAM4H,GAAU,KAAK,cAAe,CAC9C,MAAOpE,GAAA,YAAAA,EAAM,MACb,SAAU4B,CAAA,CACX,GACO,OAAJ,MAAApF,EAAU,SACZ0F,EAAoB,QAAUN,EAC9BD,EAAoB,EAAI,EACxBE,GAAoB,EAAE,EAEtB,WAAW,IAAM,CACfF,EAAoB,EAAK,EACzBJ,EAAU,EAAK,EACfW,EAAoB,QAAU,IAChC,EAAG,GAAK,GAERH,EAAiB,uBAAuB,CAE5C,MAAc,CACZA,EAAiB,uBAAuB,CAC1C,QAAA,CACEE,GAAqB,EAAK,CAC5B,EACF,EAGMoC,GAAe,SAAY,CAC/BzB,EAAe,EAAE,EACjB,MAAM0B,EAAK/B,GAAc,KAAA,EACzB,GAAI,CAAC+B,EAAG,WAAW,IAAI,GAAKA,EAAG,SAAW,GAAI,CAC5C1B,EAAe,kEAAkE,EACjF,MACF,CACA,MAAM2B,EAAMrC,EAAoB,QAChC,GAAI,CAACqC,EAAK,CACR3B,EAAe,oDAAoD,EACnE,MACF,CACAF,GAAa,EAAI,EACjB,GAAI,CACF,MAAM8B,EAAW,IAAIhF,GAAc8E,CAAE,EAC/BG,EAAS,MAAMC,GAAaJ,EAAIC,CAAG,EACzC,aAAa,QAAQ,sBAAuB,KAAK,UAAU,CAAE,cAAeC,EAAS,QAAS,aAAcC,CAAA,CAAQ,CAAC,EACrHE,GAAcL,CAAE,EAGhB,MAAM,MAAM,2DAA+B,CACzC,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUtE,GAAA,YAAAA,EAAM,WAAW,EAAA,EAE9C,KAAM,KAAK,UAAU,CAAE,cAAewE,EAAS,QAAS,aAAcC,CAAA,CAAQ,CAAA,CAC/E,EACD,KAAM,CAAE,MAAAG,EAAA,EAAU3E,GAAS,SAAA,EAC3B2E,GAAM,CAAE,GAAG5E,EAAM,cAAewE,EAAS,QAAS,aAAcC,EAAQ,EACxEnC,GAAgB,EAAK,EACrBE,GAAiB,EAAE,CACrB,OAASjG,EAAK,CACZqG,EAAe,sBAAwBrG,EAAI,OAAO,CACpD,CACAmG,GAAa,EAAK,CACpB,EAGM,CAACmC,GAAYC,EAAa,EAAI7J,EAAAA,SAAS,EAAK,EAC5C8J,GAAiB,SAAY,CACjC,MAAMR,EAAMrC,EAAoB,SAAW,OAAO,8CAA8C,EAChG,GAAKqC,EACL,CAAAO,GAAc,EAAI,EAClB,GAAI,CACF,MAAMvF,EAASC,GAAc,aAAA,EACvBwF,EAAazF,EAAO,QACpB0F,EAAQ1F,EAAO,WAEfkF,EAAS,MAAMC,GAAaO,EAAOV,CAAG,EAC5C,aAAa,QAAQ,sBAAuB,KAAK,UAAU,CAAE,cAAeS,EAAY,aAAcP,CAAA,CAAQ,CAAC,EAC/GE,GAAcM,CAAK,EAGnB,MAAM,MAAM,2DAA+B,CACzC,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUjF,GAAA,YAAAA,EAAM,WAAW,EAAA,EAE9C,KAAM,KAAK,UAAU,CAAE,cAAegF,EAAY,aAAcP,EAAQ,CAAA,CACzE,EAED,KAAM,CAAE,MAAAG,EAAA,EAAU3E,GAAS,SAAA,EAC3B2E,GAAM,CAAE,GAAG5E,EAAM,cAAegF,EAAY,aAAcP,EAAQ,CACpE,OAASlI,EAAK,CACZ,QAAQ,MAAM,6BAA8BA,CAAG,CACjD,CACAuI,GAAc,EAAK,EACrB,EAGA,OAAK5E,EAgCH1F,EAAAA,KAAC,OAAI,UAAU,6CAA6C,MAAO,CAAE,SAAU,MAAA,EAG7E,SAAA,CAAAA,EAAAA,KAACwC,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAAK,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EACnE,UAAU,0CACV,SAAA,CAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6EACb,SAAAA,EAAAA,IAAC2C,GAAO,KAAM,GAAI,UAAU,oBAAA,CAAqB,EACnD,SACC,MAAA,CACC,SAAA,CAAA5C,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,OAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,gBAAa,EAC9C2F,GACC1F,EAAAA,IAAC,OAAA,CAAK,UAAU,yEACd,MAAO,CAAE,WAAY,4CAA6C,MAAO,SAAA,EAAa,SAAA,OAAA,CAAA,CAExF,EAEJ,EACAD,OAAC,UAAO,QAAS,IAAMoC,GAAWsD,CAAa,EAAG,UAAU,sGACzD,SAAA,CAAA/B,GAAe+B,CAAa,EAC5B9E,EAASX,EAAAA,IAAC+C,GAAA,CAAM,KAAM,GAAI,UAAU,gBAAA,CAAiB,EAAK/C,EAAAA,IAACgD,EAAA,CAAK,KAAM,GAAI,CAAA,EAC7E,EACC0C,SACE,IAAA,CAAE,UAAU,0CAA0C,SAAA,wCAAqC,CAAA,EAEhG,CAAA,EACF,EACA3F,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,QAAS+I,EAAc,SAAU9C,EACvC,UAAU,iDACV,SAAAjG,EAAAA,IAACyK,IAAU,KAAM,GAAI,UAAW,0BAA0BxE,EAAa,eAAiB,EAAE,EAAA,CAAI,CAAA,CAAA,EAEhGlG,EAAAA,KAAC,SAAA,CAAO,QAAS,SAAY,CACzB4H,GAAiB,EAAI,EACrB,GAAI,CACF,MAAM+C,EAAM,MAAMf,GAAU,KAAK,4BAA6B,CAAE,OAAQ,SAAU,EAC9Ee,EAAI,QACN,OAAO,KAAK,yCAAyCA,EAAI,KAAK,aAAa,GAAI,QAAQ,EAEvF,OAAO,KAAK,oCAAqC,QAAQ,CAE7D,MAAQ,CACN,OAAO,KAAK,oCAAqC,QAAQ,CAC3D,CACA/C,GAAiB,EAAK,CACxB,EACA,SAAUD,GACV,UAAU,uJACV,MAAO,CAAE,OAAQ,iCAAA,EAChB,SAAA,CAAAA,GAAgB1H,EAAAA,IAAC8C,EAAA,CAAQ,KAAM,GAAI,UAAU,cAAA,CAAe,EAAK9C,EAAAA,IAACyC,GAAA,CAAM,KAAM,GAAI,EAAG,iBAAA,CAAA,CAAA,CAExF,EACF,CAAA,CAAA,CAAA,EAID6F,GACCvI,EAAAA,KAACwC,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAAK,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EACnE,UAAU,qDACV,MAAO,CAAE,WAAY,wEAAyE,OAAQ,iCAAA,EACtG,SAAA,CAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,OAAC,MAAA,CAAI,UAAU,uIAAuI,SAAA,KAEtJ,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,8DACX,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,sDAAsD,EACrEsI,EAAU,UAAY,gBAAA,EACzB,EACAvI,EAAAA,KAAC,IAAA,CAAE,UAAU,sCACV,SAAA,EAAAgC,GAAAuG,EAAU,UAAV,YAAAvG,GAAmB,MAAM,EAAG,GAAG,OAAIC,GAAAsG,EAAU,UAAV,YAAAtG,GAAmB,MAAM,GAAE,EACjE,CAAA,EACF,CAAA,EACF,EACAjC,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMqI,EAAiB,EAAI,EAC1C,UAAU,4GAA4G,SAAA,UAAA,CAAA,EAGxHrI,EAAAA,IAAC,SAAA,CAAO,QAAS,SAAY,CAAE,MAAM2K,GAAA,EAAgBpC,GAAa,IAAI,CAAG,EACvE,UAAU,yDAAyD,MAAM,cACzE,eAAChF,GAAA,CAAO,KAAM,GAAI,UAAU,eAAe,CAAA,CAAA,CAC7C,EACF,CAAA,CAAA,CAAA,EAKH,CAAC+E,GACAtI,EAAAA,IAACuC,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAAK,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EACnE,UAAU,kDACV,MAAO,CAAE,OAAQ,gCAAA,EACjB,QAAS,IAAM8F,EAAiB,EAAI,EACpC,SAAAtI,EAAAA,KAAC,MAAA,CAAI,UAAU,yFACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACb,SAAAA,EAAAA,IAACyC,IAAM,KAAM,GAAI,UAAU,iBAAA,CAAkB,EAC/C,EACA1C,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,OAAC,IAAA,CAAE,UAAU,oFAAoF,SAAA,0BAEjG,QACC,IAAA,CAAE,UAAU,4BAA4B,SAAA,0DAAuD,CAAA,EAClG,QACC6K,GAAA,CAAa,KAAM,GAAI,UAAU,8DAA8D,CAAA,EAClG,CAAA,CAAA,EAKJ5K,EAAAA,IAACE,GAAA,CACC,OAAQkI,GACR,QAAS,IAAMC,EAAiB,EAAK,EACrC,YAAchH,GAAY,CACxBkH,GAAalH,CAAO,EAChBA,KAA0B,EAAK,CACrC,CAAA,CAAA,EAIFtB,EAAAA,KAACwC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,WAAY,CAAE,MAAO,GAAA,EACrB,UAAU,2CACV,MAAO,CACL,WAAY,wEACZ,OAAQ,iCAAA,EAGV,SAAA,CAAAvC,EAAAA,IAAC,MAAA,CAAI,UAAU,wEACb,MAAO,CAAE,WAAY,6DAAA,CAA8D,CAAA,QAEpF,IAAA,CAAE,UAAU,6EAA6E,SAAA,uBAAoB,EAC7G+F,QACE,MAAA,CAAI,UAAU,+CAAA,CAAgD,EAE/DhG,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,iCAAkC,SAAA4D,EAAciC,CAAW,EAAE,QAC1E,OAAA,CAAK,UAAU,uCAAuC,SAAA,SAAM,CAAA,EAC/D,EAEF9F,EAAAA,KAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,CAAA,MAC7C6D,EAAciC,CAAW,EAAE,cAAM,OAAA,CAAK,UAAU,4BAA4B,SAAA,qBAAkB,CAAA,EACpG,EAGA9F,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACZ,SAAA,CAAA2F,GAAW,CAACf,EACX5E,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM8H,GAAgB,EAAI,EACnC,UAAU,+HACV,MAAO,CAAE,WAAY,4CAA6C,UAAW,iCAAA,EAC7E,SAAA,CAAA7H,EAAAA,IAAC6K,EAAA,CAAS,KAAM,GAAI,EAAE,iBAAA,CAAA,CAAA,EAIxB9K,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMqG,EAAY,EAAI,EACrC,UAAU,+HACV,MAAO,CAAE,WAAY,4CAA6C,UAAW,iCAAA,EAC7E,SAAA,CAAApG,EAAAA,IAAC8K,GAAA,CAAK,KAAM,GAAI,EAAE,QAAA,CAAA,CAAA,EAItB/K,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMuG,EAAe,EAAI,EACxC,UAAU,+HACV,MAAO,CAAE,WAAY,uBAAwB,OAAQ,+BAAA,EACrD,SAAA,OAACuE,EAAA,CAAS,KAAM,GAAI,UAAU,sBAAsB,QACnD,OAAA,CAAK,UAAU,sBAAsB,SAAA,UAAO,CAAA,CAAA,CAAA,EAE/C9K,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAM,CAAEyG,EAAe,EAAI,EAAG4C,GAAA,CAAe,EAC5D,UAAU,4JACV,MAAO,CAAE,WAAY,yBAA0B,OAAQ,kCAAA,EACvD,SAAA,CAAApJ,EAAAA,IAAC+K,GAAA,CAAM,KAAM,GAAI,EAAE,WAAA,CAAA,CAAA,CAErB,EACF,CAAA,CAAA,CAAA,EAIDrF,GACC1F,EAAAA,IAACuC,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAAK,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EACnE,UAAU,iBAAiB,MAAO,CAAE,WAAY,wEAAyE,OAAQ,iCAAA,EACjI,SAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,OAAC8C,EAAA,CAAO,KAAM,GAAI,UAAU,0CAA0C,SACrE,MAAA,CACC,SAAA,OAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,gCAA6B,EACtF9C,EAAAA,KAAC,IAAA,CAAE,UAAU,qDACV,SAAA,CAAA,CAAC0F,GAAiB,oFAClBA,GAAiB,CAACd,GAAc,wEAChCc,GAAiBd,GAAc,gFAAA,EAClC,CAAA,EACF,CAAA,EACF,CAAA,CAAA,EAKJ5E,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,4CACZ,SAAA,OAAC8C,EAAA,CAAO,KAAM,GAAI,UAAU,qBAAqB,EAAE,oBAAA,EAErD,EACCW,EAAO,IAAI,CAACQ,EAAOgH,IAAM,CACxB,MAAMnH,EAAM8B,EAAS3B,EAAM,EAAE,GAAK,CAAE,OAAQ,IAAK,OAAQ,GAAA,EACnDiH,EAAY,WAAWpH,EAAI,MAAM,EACvC,OACE9D,EAAAA,KAACwC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,WAAY,CAAE,MAAO,GAAMyI,EAAI,GAAA,EAC/B,UAAU,sFACV,MAAO,CACL,WAAY,2BAA2BhH,EAAM,KAAK,OAAOA,EAAM,KAAK,MACpE,OAAQ,aAAaA,EAAM,KAAK,IAAA,EAGlC,SAAA,CAAAjE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2EACb,MAAO,CAAE,WAAY,GAAGgE,EAAM,KAAK,KAAM,MAAOA,EAAM,KAAA,EACrD,SAAAA,EAAM,MAAM,MAAM,EAAG,CAAC,CAAA,CAAA,SAExB,MAAA,CACC,SAAA,CAAAhE,EAAAA,IAAC,IAAA,CAAE,UAAU,oBAAqB,SAAAgE,EAAM,KAAK,EAC7CjE,EAAAA,KAAC,IAAA,CAAE,UAAU,qCACV,SAAA,CAAA6D,EAAcC,EAAI,MAAM,EAAE,IAAEG,EAAM,YAAA,EACrC,CAAA,EACF,CAAA,EACF,QACC,MAAA,CAAI,UAAU,aACZ,SAAA+B,QACE,MAAA,CAAI,UAAU,2CAAA,CAA4C,EAE3DhG,EAAAA,KAAAmL,EAAAA,SAAA,CACE,SAAA,CAAAnL,EAAAA,KAAC,IAAA,CAAE,UAAU,oBAAoB,MAAO,CAAE,MAAOkL,EAAY,EAAI,QAAU,iBAAA,EACxE,SAAA,CAAArH,EAAcC,EAAI,MAAM,EAAE,UAAE,OAAA,CAAK,UAAU,iCAAiC,SAAA,SAAM,CAAA,EACrF,EACA9D,EAAAA,KAAC,IAAA,CAAE,KAAM,GAAGiE,EAAM,QAAQ,UAAUK,EAAY,UAAUL,EAAM,EAAE,CAAC,MAAMyB,CAAa,GACpF,OAAO,SAAS,IAAI,sBACpB,UAAU,oHAAoH,SAAA,CAAA,mBAC9GzF,EAAAA,IAACkD,GAAA,CAAa,KAAM,EAAG,CAAA,CAAA,CAAA,CACzC,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,EArCec,EAAM,EAAA,CAwC3B,CAAC,CAAA,EACH,EAGCW,GACC5E,EAAAA,KAACwC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,WAAY,CAAE,MAAO,EAAA,EAGrB,SAAA,CAAAxC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CAAEiH,EAAqB,CAACD,CAAiB,EAAGD,EAAU,EAAK,EAAGQ,EAAiB,EAAE,CAAG,EACnG,UAAU,mGACV,MAAO,CACL,WAAY,yBACZ,OAAQ,kCAAA,EAGV,SAAA,CAAAvH,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,OAAC8C,EAAA,CAAO,KAAM,GAAI,UAAU,yBAAyB,QACpD,OAAA,CAAK,UAAU,6CAA6C,SAAA,qBAAkB,CAAA,EACjF,EACA7C,EAAAA,IAACmL,IAAY,KAAM,GAAI,UAAW,+CAA+CpE,EAAoB,aAAe,EAAE,EAAA,CAAI,CAAA,CAAA,CAAA,EAG5H/G,EAAAA,IAACsC,GACE,SAAAyE,GACC/G,EAAAA,IAACuC,EAAO,IAAP,CACC,QAAS,CAAE,OAAQ,EAAG,QAAS,CAAA,EAC/B,QAAS,CAAE,OAAQ,OAAQ,QAAS,CAAA,EACpC,KAAM,CAAE,OAAQ,EAAG,QAAS,CAAA,EAC5B,WAAY,CAAE,SAAU,EAAA,EACxB,UAAU,kBAEV,SAAAvC,EAAAA,IAAC,MAAA,CAAI,UAAU,sBAAsB,MAAO,CAC1C,WAAY,sEACZ,OAAQ,gCAAA,EAEP,SAACiH,UA8BC,MAAA,CACC,SAAA,CAAAlH,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,OAACqL,GAAA,CAAc,KAAM,GAAI,UAAU,eAAe,QACjD,OAAA,CAAK,UAAU,oCAAoC,SAAA,gBAAa,CAAA,EACnE,EACArL,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAM+G,EAAU,CAACD,CAAM,EACtC,UAAU,gIACV,MAAO,CAAE,WAAY,sBAAA,EACpB,SAAA,CAAAA,EAAS7G,EAAAA,IAACqL,IAAO,KAAM,EAAA,CAAI,EAAKrL,EAAAA,IAACsL,GAAA,CAAI,KAAM,GAAI,EAC/CzE,EAAS,UAAY,SAAA,CAAA,CAAA,CACxB,EACF,EACCA,GACC9G,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,OAAC,OAAA,CAAK,UAAU,oFACb,SAAA4E,EACH,EACA3E,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMmC,GAAWwC,CAAU,EAAG,UAAU,qCACvD,eAAC3B,EAAA,CAAK,KAAM,GAAI,UAAU,iBAAA,CAAkB,EAC9C,CAAA,EACF,QAED,IAAA,CAAE,UAAU,kCAAkC,SAAA,uCAE/C,CAAA,EACF,SAtDC,MAAA,CACC,SAAA,OAAC,IAAA,CAAE,UAAU,0CAA0C,SAAA,yDAEvD,EACAjD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,MAAOmH,EACP,SAAW3E,GAAM,CAAE4E,GAAoB5E,EAAE,OAAO,KAAK,EAAG8E,EAAiB,EAAE,CAAG,EAC9E,UAAY9E,GAAMA,EAAE,MAAQ,SAAWkH,GAAA,EACvC,YAAY,aACZ,UAAU,yJAAA,CAAA,EAEZ1J,EAAAA,IAAC,SAAA,CACC,QAAS0J,GACT,SAAUnC,IAAqB,CAACJ,EAChC,UAAU,gFACV,MAAO,CAAE,WAAY,uBAAwB,MAAO,qBAAA,EAEnD,YAAoBnH,EAAAA,IAAC8C,EAAA,CAAQ,KAAM,GAAI,UAAU,cAAA,CAAe,EAAK,WAAA,CAAA,CACxE,EACF,EACCuE,UACE,IAAA,CAAE,UAAU,gCAAiC,SAAAA,GAAc,CAAA,EAEhE,CA6BA,CAEJ,CAAA,CAAA,EAGN,CAAA,CAAA,CAAA,EAKJtH,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,KAAK,oCAAoC,OAAO,SAAS,IAAI,sBAC9D,UAAU,mEACV,MAAO,CAAE,WAAY,wBAAyB,OAAQ,gCAAA,EACtD,SAAA,OAAC4C,EAAA,CAAO,KAAM,GAAI,UAAU,0BAA0B,QACrD,IAAA,CAAE,UAAU,oBAAoB,SAAA,gBAAa,QAC7C,IAAA,CAAE,UAAU,4CAA4C,SAAA,6CAA0C,CAAA,CAAA,CAAA,EAErG5C,EAAAA,KAAC,IAAA,CAAE,KAAM,GAAGyD,EAAO,CAAC,EAAE,QAAQ,YAAYiC,CAAa,GAAI,OAAO,SAAS,IAAI,sBAC7E,UAAU,mEACV,MAAO,CAAE,WAAY,wBAAyB,OAAQ,gCAAA,EACtD,SAAA,OAACsF,GAAA,CAAM,KAAM,GAAI,UAAU,sBAAsB,QAChD,IAAA,CAAE,UAAU,oBAAoB,SAAA,UAAO,QACvC,IAAA,CAAE,UAAU,4CAA4C,SAAA,uCAAoC,CAAA,CAAA,CAAA,CAC/F,EACF,EAKA/K,EAAAA,IAACsC,GACE,SAAAsF,IACC5H,EAAAA,IAACuC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EACnE,UAAU,uFACV,SAAAxC,EAAAA,KAACwC,EAAO,IAAP,CACC,QAAS,CAAE,MAAO,IAAM,QAAS,CAAA,EAAK,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAAK,KAAM,CAAE,MAAO,IAAM,QAAS,CAAA,EACvG,UAAU,kCACV,MAAO,CAAE,WAAY,iBAAkB,OAAQ,gCAAA,EAC/C,SAAA,CAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,4CACZ,SAAA,OAAC8K,EAAA,CAAS,KAAM,GAAI,UAAU,qBAAqB,EAAE,0BAAA,EAEvD,EACA7K,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAM,CAAE6H,GAAgB,EAAK,EAAGE,GAAiB,EAAE,EAAGI,EAAe,EAAE,CAAG,EACzF,UAAU,mCAAmC,SAAAnI,EAAAA,IAAC0C,EAAA,CAAE,KAAM,GAAI,CAAA,CAAA,CAAE,EAChE,QACC,IAAA,CAAE,UAAU,sDAAsD,SAAA,wJAGnE,EACA3C,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,OAAC,QAAA,CAAM,UAAU,yEAAyE,SAAA,cAAW,EACrGC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,MAAO8H,GACP,SAAUtF,GAAK,CAAEuF,GAAiBvF,EAAE,OAAO,KAAK,EAAG2F,EAAe,EAAE,CAAG,EACvE,YAAY,QACZ,UAAU,+HAAA,CAAA,CACZ,EACF,EACCD,IACCnI,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAACoL,GAAA,CAAc,KAAM,GAAI,EAAE,IAAElD,EAAA,EAC/B,EAEFnI,OAAC,OAAI,UAAU,4EAA4E,MAAO,CAAE,WAAY,sBAAA,EAC9G,SAAA,OAAC8C,EAAA,CAAO,KAAM,GAAI,UAAU,gBAAgB,EAC5C7C,EAAAA,IAAC,QAAK,SAAA,kFAA+E,CAAA,EACvF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS4J,GACT,SAAU5B,IAAa,CAACF,GAAc,KAAA,EACtC,UAAU,qJACV,MAAO,CAAE,WAAY,2CAAA,EACpB,YACC/H,EAAAA,KAAAmL,EAAAA,SAAA,CAAE,SAAA,OAACpI,EAAA,CAAQ,KAAM,GAAI,UAAU,eAAe,EAAE,gBAAA,EAAc,EAE9D/C,EAAAA,KAAAmL,EAAAA,SAAA,CAAE,SAAA,CAAAlL,EAAAA,IAAC2C,EAAA,CAAO,KAAM,GAAI,EAAE,sBAAA,EAAoB,CAAA,CAAA,CAE9C,CAAA,CAAA,CACF,CAAA,EAGN,EAGA3C,EAAAA,IAACsC,GACE,SAAA6D,GACCnG,EAAAA,IAACuL,GAAA,CACC,OAAQ/H,EACR,cAAAiC,EACA,WAAAd,EACA,QAAS,IAAMyB,EAAY,EAAK,EAChC,UAAW2C,CAAA,CAAA,EAGjB,EAGA/I,EAAAA,IAACsC,GACE,SAAA+D,GACCrG,EAAAA,IAACwL,GAAA,CACC,cAAA/F,EACA,QAAS,IAAMa,EAAe,EAAK,CAAA,CAAA,EAGzC,EAGAtG,EAAAA,IAACsC,GACE,SAAAiE,GACCvG,EAAAA,IAACyL,GAAA,CACC,QAAAhF,EACA,QAASE,EACT,cAAAlB,EACA,QAAS,IAAMe,EAAe,EAAK,CAAA,CAAA,EAGzC,CAAA,EACF,QA5eG,MAAA,CAAI,UAAU,0CACb,SAAAzG,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,0FACb,SAAAA,EAAAA,IAAC2C,GAAO,KAAM,GAAI,UAAU,oBAAA,CAAqB,EACnD,QACC,KAAA,CAAG,UAAU,yBAAyB,SAAA,sBAAmB,QACzD,IAAA,CAAE,UAAU,sCAAsC,SAAA,4GAEnD,EACA3C,EAAAA,IAAC,SAAA,CACC,QAASsK,GACT,SAAUF,GACV,UAAU,qJACV,MAAO,CAAE,WAAY,2CAAA,EAEpB,YACCrK,EAAAA,KAAAmL,EAAAA,SAAA,CAAE,SAAA,OAACpI,EAAA,CAAQ,KAAM,GAAI,UAAU,eAAe,EAAE,eAAA,EAAa,EAE7D/C,EAAAA,KAAAmL,EAAAA,SAAA,CAAE,SAAA,CAAAlL,EAAAA,IAAC2C,EAAA,CAAO,KAAM,GAAI,EAAE,oBAAA,EAAkB,CAAA,CAAA,QAG3C,IAAA,CAAE,UAAU,0CAA0C,SAAA,8EAEvD,CAAA,CAAA,CACF,CAAA,CACF,CAqdN,CAKA,SAAS4I,GAAU,CAAE,OAAAG,EAAQ,cAAAjG,EAAe,WAAAd,EAAY,QAAAvE,EAAS,UAAAuL,GAAa,CAC5E,KAAM,CAACC,EAAeC,CAAgB,EAAIrL,EAAAA,SAASkL,EAAO,CAAC,CAAC,EACtD,CAAC9G,EAAWkH,CAAY,EAAItL,EAAAA,SAAS,EAAE,EACvC,CAACqE,EAAQkH,CAAS,EAAIvL,EAAAA,SAAS,EAAE,EACjC,CAACwL,EAASC,CAAU,EAAIzL,EAAAA,SAAS,EAAK,EACtC,CAAC0L,EAAQC,CAAS,EAAI3L,EAAAA,SAAS,IAAI,EACnC,CAACK,EAAOC,CAAQ,EAAIN,EAAAA,SAAS,EAAE,EAE/B4L,EAAa,SAAY,CAE7B,GADAtL,EAAS,EAAE,EACP,CAAC8D,GAAa,CAACyH,GAAiBzH,CAAS,EAAG,CAC9C9D,EAAS,oBAAoB,EAC7B,MACF,CACA,GAAI,CAAC+D,GAAU,WAAWA,CAAM,GAAK,EAAG,CACtC/D,EAAS,yBAAyB,EAClC,MACF,CACA,GAAI,CAAC6D,EAAY,CACf7D,EAAS,iCAAiC,EAC1C,MACF,CAEAmL,EAAW,EAAI,EACf,GAAI,CACF,MAAM5G,EAAK,MAAMX,GAAWkH,EAAejH,EAAYC,EAAWC,CAAM,EACxEsH,EAAU9G,EAAG,IAAI,EACjBsG,GAAA,MAAAA,GACF,OAAS7J,EAAK,CACZhB,EAASgB,EAAI,QAAUA,EAAI,SAAW,6BAA6B,CACrE,QAAA,CACEmK,EAAW,EAAK,CAClB,CACF,EAEA,OACEjM,EAAAA,IAACuC,EAAO,IAAP,CAAW,UAAU,6DACpB,MAAO,CAAE,WAAY,kBAAmB,eAAgB,YAAA,EACxD,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EACnE,SAAAxC,EAAAA,KAACwC,EAAO,IAAP,CAAW,UAAU,kCACpB,MAAO,CAAE,WAAY,iBAAkB,OAAQ,yBAAA,EAC/C,QAAS,CAAE,MAAO,GAAK,QAAS,CAAA,EAAK,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAAK,KAAM,CAAE,MAAO,GAAK,QAAS,CAAA,EACrG,SAAA,CAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,4CACZ,SAAA,OAAC+K,GAAA,CAAK,KAAM,GAAI,UAAU,qBAAqB,EAAE,eAAA,EAEnD,EACA9K,EAAAA,IAAC,SAAA,CAAO,QAASI,EAAS,UAAU,oCAAoC,SAAAJ,EAAAA,IAAC0C,EAAA,CAAE,KAAM,EAAA,CAAI,EAAE,CAAA,EACzF,EAECwJ,EAECnM,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,uFACb,SAAAA,EAAAA,IAAC+C,IAAM,KAAM,GAAI,UAAU,gBAAA,CAAiB,EAC9C,QACC,KAAA,CAAG,UAAU,oCAAoC,SAAA,wBAAqB,EACvEhD,EAAAA,KAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,CAAA,2CAAyC6L,EAAc,IAAA,EAAK,EAC/G7L,EAAAA,KAAC,IAAA,CAAE,KAAM,GAAG6L,EAAc,QAAQ,OAAOM,CAAM,GAAI,OAAO,SAAS,IAAI,sBACrE,UAAU,6IACV,MAAO,CAAE,OAAQ,iCAAA,EAAqC,SAAA,CAAA,mBACtClM,EAAAA,IAACkD,GAAA,CAAa,KAAM,GAAI,CAAA,CAAA,CAAA,EAE1ClD,EAAAA,IAAC,SAAA,CAAO,QAASI,EACf,UAAU,iEACV,MAAO,CAAE,WAAY,2CAAA,EAA+C,SAAA,QAAA,CAAA,CAEtE,EACF,EAGAL,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,OAAC,QAAA,CAAM,UAAU,qFAAqF,SAAA,MAAG,QACxG,MAAA,CAAI,UAAU,2BACZ,SAAA2L,EAAO,IAAIY,GACVtM,EAAAA,IAAC,SAAA,CAAkB,QAAS,IAAM6L,EAAiBS,CAAC,EAClD,UAAU,8FACV,MAAO,CACL,WAAYV,EAAc,KAAOU,EAAE,GAAK,GAAGA,EAAE,KAAK,KAAO,yBACzD,OAAQ,aAAaV,EAAc,KAAOU,EAAE,GAAKA,EAAE,MAAQ,KAAO,wBAAwB,GAC1F,MAAOV,EAAc,KAAOU,EAAE,GAAKA,EAAE,MAAQ,iBAAA,EAE9C,SAAAA,EAAE,KAAA,EAPQA,EAAE,EAAA,CAShB,EACH,CAAA,EACF,SAGC,MAAA,CACC,SAAA,OAAC,QAAA,CAAM,UAAU,qFAAqF,SAAA,oBAAiB,EACvHtM,EAAAA,IAAC,QAAA,CAAM,KAAK,OAAO,MAAO4E,EAAW,SAAUpC,GAAKsJ,EAAatJ,EAAE,OAAO,KAAK,EAC7E,YAAY,QACZ,UAAU,qHACV,MAAO,CAAE,WAAY,yBAA0B,OAAQ,kCAAA,CAAmC,CAAA,CAAG,EACjG,SAGC,MAAA,CACC,SAAA,OAAC,QAAA,CAAM,UAAU,qFAAqF,SAAA,kBAAe,EACrHxC,EAAAA,IAAC,QAAA,CAAM,KAAK,SAAS,MAAO6E,EAAQ,SAAUrC,GAAKuJ,EAAUvJ,EAAE,OAAO,KAAK,EACzE,YAAY,OACZ,UAAU,2GACV,MAAO,CAAE,WAAY,yBAA0B,OAAQ,kCAAA,CAAmC,CAAA,CAAG,EACjG,EAGC3B,GACCd,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,MAAO,CAAE,WAAY,uBAAwB,OAAQ,gCAAA,EACrD,SAAA,CAAAC,EAAAA,IAACoL,GAAA,CAAc,KAAM,GAAI,EACxB,OAAOvK,GAAU,SAAWA,EAAQ,OAAOA,CAAK,CAAA,CAAA,CAAA,EAKrDb,EAAAA,IAAC,SAAA,CAAO,QAASoM,EAAY,SAAUJ,EACrC,UAAU,iLACV,MAAO,CAAE,WAAY,4CAA6C,UAAW,iCAAA,EAC5E,WACCjM,EAAAA,KAAAmL,EAAAA,SAAA,CAAE,SAAA,OAACpI,EAAA,CAAQ,KAAM,GAAI,UAAU,eAAe,EAAE,cAAA,EAAY,EAE5D/C,EAAAA,KAAAmL,EAAAA,SAAA,CAAE,SAAA,CAAAlL,EAAAA,IAAC8K,GAAA,CAAK,KAAM,GAAI,EAAE,WAASjG,EAAS,GAAGA,CAAM,UAAY,QAAA,EAAS,CAAA,CAAA,EAIxE9E,EAAAA,KAAC,IAAA,CAAE,UAAU,mDAAmD,SAAA,CAAA,aACnD6L,EAAc,aAAa,OAAKA,EAAc,KAAK,oBAAA,EAChE,CAAA,EACF,CAAA,CAAA,CAAA,CAEJ,CAAA,CAGN,CAKA,SAASJ,GAAa,CAAE,cAAA/F,EAAe,QAAArF,GAAW,CAChD,KAAM,CAACO,EAAQC,CAAS,EAAIJ,EAAAA,SAAS,EAAK,EAEpC2B,EAAa,SAAY,CAC7B,GAAI,CACF,MAAM,UAAU,UAAU,UAAUsD,CAAa,EACjD7E,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,MAAQ,CAAC,CACX,EAEA,OACEZ,EAAAA,IAACuC,EAAO,IAAP,CAAW,UAAU,6DACpB,MAAO,CAAE,WAAY,kBAAmB,eAAgB,YAAA,EACxD,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EACnE,SAAAxC,EAAAA,KAACwC,EAAO,IAAP,CAAW,UAAU,8CACpB,MAAO,CAAE,WAAY,iBAAkB,OAAQ,yBAAA,EAC/C,QAAS,CAAE,MAAO,EAAA,EAAO,QAAS,CAAE,MAAO,CAAA,EAAK,KAAM,CAAE,MAAO,EAAA,EAC/D,SAAA,CAAAxC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,4CACZ,SAAA,OAAC8K,EAAA,CAAS,KAAM,GAAI,UAAU,iBAAiB,EAAE,gBAAA,EAEnD,EACA7K,EAAAA,IAAC,SAAA,CAAO,QAASI,EAAS,UAAU,oCAAoC,SAAAJ,EAAAA,IAAC0C,EAAA,CAAE,KAAM,EAAA,CAAI,EAAE,CAAA,EACzF,EAGA3C,EAAAA,KAAC,MAAA,CAAI,UAAU,+FACb,MAAO,CAAE,WAAY,OAAA,EAErB,SAAA,OAAC,MAAA,CAAI,UAAU,8CACZ,SAAA,MAAM,KAAK,CAAE,OAAQ,GAAI,EAAE,IAAI,CAACwM,EAAGvB,IAAM,CAGxC,MAAMwB,IADW/G,EAAc,WAAYuF,EAAI,EAAKvF,EAAc,MAAM,GAAK,GAClDuF,GAAK,IAAM,EACtC,OACEhL,EAAAA,IAAC,MAAA,CAAY,UAAU,gBACrB,MAAO,CAAE,WAAYwM,EAAS,OAAS,MAAA,CAAO,EADtCxB,CAAA,CAGd,CAAC,EACH,EACAhL,MAAC,MAAA,CAAI,UAAU,oDACb,eAAC,MAAA,CAAI,UAAU,2EACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAmC,SAAA,IAAC,CAAA,CACtD,CAAA,CACF,CAAA,CAAA,CAAA,QAGD,IAAA,CAAE,UAAU,0CAA0C,SAAA,6DAEvD,EAGAD,EAAAA,KAAC,SAAA,CAAO,QAASoC,EACf,UAAU,uHACV,MAAO,CAAE,WAAY,yBAA0B,OAAQ,kCAAA,EACvD,SAAA,OAAC,OAAA,CAAK,UAAU,WAAY,SAAAsD,EAAc,EACzC9E,EAASX,EAAAA,IAAC+C,GAAA,CAAM,KAAM,GAAI,UAAU,yBAAA,CAA0B,QAAMC,EAAA,CAAK,KAAM,GAAI,UAAU,kCAAkC,CAAA,CAAA,CAAA,QAIjI,MAAA,CAAI,UAAU,iCACZ,SAAAQ,EAAO,IAAI8I,GACVtM,EAAAA,IAAC,MAAA,CAAe,UAAU,4CACxB,MAAO,CAAE,WAAY,GAAGsM,EAAE,KAAK,KAAM,MAAOA,EAAE,KAAA,EAC7C,SAAAA,EAAE,KAAA,EAFKA,EAAE,EAAA,CAIb,EACH,CAAA,CAAA,CAAA,CACF,CAAA,CAGN,CAKA,SAASb,GAAa,CAAE,QAAAhF,EAAS,QAAAV,EAAS,cAAAN,EAAe,QAAArF,GAAW,CAClE,OACEJ,EAAAA,IAACuC,EAAO,IAAP,CAAW,UAAU,6DACpB,MAAO,CAAE,WAAY,kBAAmB,eAAgB,YAAA,EACxD,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,KAAM,CAAE,QAAS,CAAA,EACnE,SAAAxC,EAAAA,KAACwC,EAAO,IAAP,CAAW,UAAU,8CACpB,MAAO,CAAE,WAAY,iBAAkB,OAAQ,0BAA2B,UAAW,MAAA,EACrF,QAAS,CAAE,MAAO,EAAA,EAAO,QAAS,CAAE,MAAO,CAAA,EAAK,KAAM,CAAE,MAAO,EAAA,EAC/D,SAAA,CAAAxC,OAAC,OAAI,UAAU,wCAAwC,MAAO,CAAE,aAAc,yBAAA,EAC5E,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,4CACZ,SAAA,OAACgL,GAAA,CAAM,KAAM,GAAI,UAAU,qBAAqB,EAAE,kBAAA,EAEpD,EACA/K,EAAAA,IAAC,SAAA,CAAO,QAASI,EAAS,UAAU,oCAAoC,SAAAJ,EAAAA,IAAC0C,EAAA,CAAE,KAAM,EAAA,CAAI,EAAE,CAAA,EACzF,EAEA3C,OAAC,OAAI,UAAU,gCAAgC,MAAO,CAAE,UAAW,mBAAA,EAChE,SAAA,CAAAgG,GACChG,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,OAAC+C,EAAA,CAAQ,KAAM,GAAI,UAAU,+CAA+C,QAC3E,IAAA,CAAE,UAAU,iCAAiC,SAAA,4BAAyB,CAAA,EACzE,EAGD,CAACiD,GAAWU,EAAQ,SAAW,UAC7B,MAAA,CAAI,UAAU,mBACb,SAAA,OAACsE,GAAA,CAAM,KAAM,GAAI,UAAU,yCAAyC,QACnE,IAAA,CAAE,UAAU,iCAAiC,SAAA,2BAAwB,CAAA,EACxE,EAGD,CAAChF,GAAWU,EAAQ,IAAI,CAACpB,EAAI,IAAM,CAClC,MAAMrB,EAAQR,EAAO,KAAK8I,GAAKA,EAAE,KAAOjH,EAAG,OAAO,GAAK7B,EAAO,CAAC,EAC/D,OACEzD,EAAAA,KAAC,IAAA,CACC,KAAM,GAAGiE,EAAM,QAAQ,OAAOqB,EAAG,IAAI,GACrC,OAAO,SAAS,IAAI,sBACpB,UAAU,wFACV,MAAO,CAAE,OAAQ,kCAAA,EACjB,SAAA,CAAAtF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACb,MAAO,CAAE,WAAYqF,EAAG,WAAa,sBAAwB,sBAAA,EAC5D,SAAAA,EAAG,iBACCoH,GAAA,CAAe,KAAM,GAAI,UAAU,iBAAiB,QACpDC,GAAA,CAAa,KAAM,GAAI,UAAU,gBAAgB,CAAA,CAAA,SAGvD,MAAA,CACC,SAAA,CAAA3M,EAAAA,KAAC,IAAA,CAAE,UAAU,oBACV,SAAA,CAAAsF,EAAG,WAAa,WAAa,UAC9BrF,EAAAA,IAAC,OAAA,CAAK,UAAU,wDACd,MAAO,CAAE,WAAY,GAAGgE,EAAM,KAAK,KAAM,MAAOA,EAAM,KAAA,EACrD,SAAAA,EAAM,KAAA,CAAA,CACT,EACF,QACC,IAAA,CAAE,UAAU,+CACV,SAAAqB,EAAG,WAAa,MAAM3B,GAAe2B,EAAG,IAAI,CAAC,GAAK,KAAK3B,GAAe2B,EAAG,EAAE,CAAC,GAC/E,CAAA,EACF,CAAA,EACF,EACAtF,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,KAAE,UAAW,qBAAqBsF,EAAG,WAAa,iBAAmB,YAAY,GAC/E,SAAA,CAAAA,EAAG,WAAa,IAAM,IAAKzB,EAAcyB,EAAG,KAAK,EAAE,SAAA,EACtD,EACArF,MAAC,KAAE,UAAU,oCACV,aAAI,KAAKqF,EAAG,SAAS,EAAE,mBAAmB,KAAM,CAAE,IAAK,UAAW,MAAO,QAAS,KAAM,UAAW,OAAQ,SAAA,CAAW,CAAA,CACzH,CAAA,EACF,CAAA,CAAA,EAjCM,GAAGA,EAAG,IAAI,IAAI,CAAC,EAAA,CAoC3B,CAAC,CAAA,EACH,CAAA,CAAA,CAAA,CACF,CAAA,CAGN"}