{"version":3,"file":"AIChat-BQI-p7kQ.js","sources":["../../src/components/AI/AIChat.jsx"],"sourcesContent":["// Kairos Trade — AI Trading Expert Chat v2.0\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Send, Brain, Zap, BarChart3, Sparkles, Trash2, Code, Copy, Check, ArrowRightLeft, BookOpen, Target } from 'lucide-react';\nimport useStore from '../../store/useStore';\nimport aiService from '../../services/ai';\nimport { formatPair } from '../../utils/pairUtils';\n\nexport default function AIChat() {\n  const { aiMessages, addAiMessage, aiLoading, setAiLoading, clearAiMessages, currentPrice, selectedPair, priceChange24h, setSelectedPair, setPage } = useStore();\n  const [input, setInput] = useState('');\n  const [copiedIdx, setCopiedIdx] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [aiMessages]);\n\n  const handleSend = useCallback(async (overrideMsg) => {\n    const msg = overrideMsg || input.trim();\n    if (!msg || aiLoading) return;\n\n    addAiMessage({ role: 'user', content: msg, time: new Date().toLocaleTimeString() });\n    if (!overrideMsg) setInput('');\n    setAiLoading(true);\n\n    try {\n      const ctx = currentPrice ? {\n        symbol: selectedPair, price: currentPrice, changePercent: priceChange24h,\n        high: currentPrice * 1.02, low: currentPrice * 0.98, volume: 0, quoteVolume: 0,\n      } : null;\n\n      const response = await aiService.chat(msg, ctx);\n\n      // Handle pair change action\n      if (response.action?.type === 'changePair') {\n        setSelectedPair(response.action.pair);\n      }\n\n      addAiMessage({\n        role: 'assistant',\n        content: response.text,\n        strategy: response.strategy,\n        kairosScript: response.kairosScript,\n        action: response.action,\n        time: new Date().toLocaleTimeString(),\n      });\n    } catch (err) {\n      addAiMessage({ role: 'assistant', content: `❌ Error: ${err.message}`, time: new Date().toLocaleTimeString() });\n    }\n\n    setAiLoading(false);\n  }, [input, aiLoading, currentPrice, selectedPair, priceChange24h]);\n\n  const copyScript = (code, idx) => {\n    navigator.clipboard.writeText(code);\n    setCopiedIdx(idx);\n    setTimeout(() => setCopiedIdx(null), 2000);\n  };\n\n  const quickActions = [\n    { label: `Analiza ${formatPair(selectedPair)}`, icon: BarChart3, prompt: `Analiza ${selectedPair}` },\n    { label: 'Crea un Script Bot', icon: Code, prompt: `Crea un kairos script ganador para ${selectedPair}` },\n    { label: 'Estrategia ganadora', icon: Target, prompt: `Dame una estrategia para ${formatPair(selectedPair)} según el mercado` },\n    { label: '¿Qué es el RSI?', icon: BookOpen, prompt: '¿Qué es el RSI y cómo se usa?' },\n    { label: 'Muéstrame SOLUSDT', icon: ArrowRightLeft, prompt: 'Muéstrame SOLUSDT' },\n    { label: 'Ayuda', icon: Sparkles, prompt: '¿Qué puedes hacer?' },\n  ];\n\n  // ─── Render Markdown-like text ───\n  const renderText = (text) => {\n    return text.split('\\n').map((line, j) => {\n      // Bold\n      let parts = line.split(/(\\*\\*.*?\\*\\*)/g);\n      const rendered = parts.map((p, k) => {\n        if (p.startsWith('**') && p.endsWith('**')) {\n          return <strong key={k}>{p.slice(2, -2)}</strong>;\n        }\n        // Italic\n        if (p.startsWith('_') && p.endsWith('_')) {\n          return <em key={k} className=\"text-[var(--text-dim)]\">{p.slice(1, -1)}</em>;\n        }\n        return p;\n      });\n\n      if (line.startsWith('━━') || line.startsWith('──')) {\n        return <div key={j} className=\"border-t border-[var(--border)] my-1.5 pt-1\">{rendered}</div>;\n      }\n      if (line.startsWith('•') || line.startsWith('- ')) {\n        return <p key={j} className=\"ml-2 my-0.5\">{rendered}</p>;\n      }\n      if (line === '') return <div key={j} className=\"h-1\" />;\n      return <p key={j} className=\"my-0.5\">{rendered}</p>;\n    });\n  };\n\n  const renderMessage = (msg, i) => {\n    const isUser = msg.role === 'user';\n    return (\n      <motion.div\n        key={i}\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`flex ${isUser ? 'justify-end' : 'justify-start'}`}\n      >\n        <div className={`max-w-[90%] rounded-2xl p-3 ${isUser\n          ? 'bg-[var(--gold)] text-white rounded-br-md'\n          : 'bg-[var(--dark-3)] text-[var(--text)] rounded-bl-md'\n        }`}>\n          {!isUser && (\n            <div className=\"flex items-center gap-1 mb-1.5\">\n              <Brain size={12} className=\"text-[var(--gold)]\" />\n              <span className=\"text-[10px] text-[var(--gold)] font-bold\">Kairos AI</span>\n            </div>\n          )}\n\n          <div className=\"text-[13px] whitespace-pre-wrap leading-relaxed\">\n            {renderText(msg.content)}\n          </div>\n\n          {/* Pair change badge */}\n          {msg.action?.type === 'changePair' && (\n            <div className=\"mt-2 flex items-center gap-2\">\n              <div className=\"flex items-center gap-1.5 px-2.5 py-1 bg-[var(--gold)]/10 border border-[var(--gold)]/20 rounded-lg\">\n                <ArrowRightLeft size={12} className=\"text-[var(--gold)]\" />\n                <span className=\"text-xs text-[var(--gold)] font-semibold\">Gráfico: {msg.action.pair}</span>\n              </div>\n              <button\n                onClick={() => { setSelectedPair(msg.action.pair); setPage('chart'); }}\n                className=\"px-2 py-1 text-[11px] bg-[var(--dark-4)] text-[var(--text-dim)] hover:text-[var(--gold)] rounded-lg transition-colors\"\n              >\n                Ver gráfico →\n              </button>\n            </div>\n          )}\n\n          {/* Strategy card */}\n          {msg.strategy && (\n            <div className=\"mt-2 p-2.5 bg-[var(--dark-4)] rounded-xl border border-[var(--gold)]/20\">\n              <div className=\"flex items-center gap-1 mb-1\">\n                <Zap size={12} className=\"text-[var(--gold)]\" />\n                <span className=\"text-xs font-bold text-[var(--gold)]\">Estrategia</span>\n              </div>\n              <p className=\"text-xs mb-1\">{msg.strategy.name || 'Auto Strategy'}</p>\n              <div className=\"flex items-center gap-2 text-[10px] text-[var(--text-dim)]\">\n                <span>SL: {msg.strategy.stopLoss}</span>\n                <span>TP: {msg.strategy.takeProfit}</span>\n                <span>R:R: {msg.strategy.riskReward}</span>\n              </div>\n              <button\n                onClick={() => {\n                  useStore.getState().addStrategy(msg.strategy);\n                  addAiMessage({ role: 'assistant', content: '✅ Estrategia guardada. Actívala desde **Bots** → crear bot con esta estrategia.', time: new Date().toLocaleTimeString() });\n                }}\n                className=\"mt-1.5 px-3 py-1 bg-[var(--gold)] text-white text-xs font-bold rounded-lg hover:bg-[var(--gold-light)] transition-colors\"\n              >\n                Guardar Estrategia\n              </button>\n            </div>\n          )}\n\n          {/* Kairos Script code block */}\n          {msg.kairosScript && (\n            <div className=\"mt-2 rounded-xl overflow-hidden border border-[var(--gold)]/20\">\n              <div className=\"flex items-center justify-between px-3 py-1.5 bg-[var(--gold)]/10\">\n                <div className=\"flex items-center gap-1.5\">\n                  <Code size={12} className=\"text-[var(--gold)]\" />\n                  <span className=\"text-[11px] font-bold text-[var(--gold)]\">Kairos Script</span>\n                </div>\n                <button\n                  onClick={() => copyScript(msg.kairosScript, i)}\n                  className=\"flex items-center gap-1 px-2 py-0.5 text-[10px] bg-[var(--dark)] rounded-md text-[var(--text-dim)] hover:text-[var(--gold)] transition-colors\"\n                >\n                  {copiedIdx === i ? <><Check size={10} /> Copiado</> : <><Copy size={10} /> Copiar</>}\n                </button>\n              </div>\n              <pre className=\"p-3 bg-[#0B0E11] text-[11px] leading-relaxed overflow-x-auto max-h-64 overflow-y-auto\">\n                <code className=\"text-[var(--text-secondary)]\">{msg.kairosScript}</code>\n              </pre>\n              <div className=\"flex items-center gap-2 px-3 py-1.5 bg-[var(--dark-4)]\">\n                <button\n                  onClick={() => {\n                    navigator.clipboard.writeText(msg.kairosScript);\n                    setCopiedIdx(i);\n                    setTimeout(() => setCopiedIdx(null), 2000);\n                    setPage('bots');\n                  }}\n                  className=\"flex items-center gap-1 px-3 py-1 bg-[var(--gold)] text-white text-[11px] font-bold rounded-lg hover:bg-[var(--gold-light)] transition-colors\"\n                >\n                  <Zap size={11} /> Copiar e ir a Bots\n                </button>\n                <button\n                  onClick={() => setPage('strategies')}\n                  className=\"px-2 py-1 text-[11px] text-[var(--text-dim)] hover:text-[var(--gold)] transition-colors\"\n                >\n                  Ver Scripts →\n                </button>\n              </div>\n            </div>\n          )}\n\n          <p className={`text-[10px] mt-1.5 ${isUser ? 'text-white/60' : 'text-[var(--text-dim)]'}`}>{msg.time}</p>\n        </div>\n      </motion.div>\n    );\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col h-full overflow-hidden\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-[var(--border)] bg-[var(--dark-2)] shrink-0\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-[var(--gold)]/20 flex items-center justify-center\">\n              <Brain size={18} className=\"text-[var(--gold)]\" />\n            </div>\n            <div>\n              <h2 className=\"text-sm font-bold\">Kairos AI</h2>\n              <p className=\"text-[10px] text-[var(--text-dim)]\">Experto de trading • Análisis en tiempo real</p>\n            </div>\n          </div>\n          <button onClick={() => { clearAiMessages(); aiService.clearHistory(); }} className=\"p-1.5 text-[var(--text-dim)] hover:text-[var(--red)] transition-colors\">\n            <Trash2 size={14} />\n          </button>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n        {aiMessages.length === 0 && (\n          <div className=\"flex flex-col items-center justify-center h-full text-center\">\n            <Brain size={48} className=\"text-[var(--gold)] mb-4\" />\n            <h3 className=\"text-lg font-bold mb-1\">Kairos AI</h3>\n            <p className=\"text-sm text-[var(--text-dim)] mb-4 max-w-xs\">\n              Experto en trading. Analizo el mercado, genero estrategias y creo código para bots automáticos.\n            </p>\n            <div className=\"grid grid-cols-2 gap-2 w-full max-w-sm\">\n              {quickActions.map((qa, i) => {\n                const Icon = qa.icon;\n                return (\n                  <button\n                    key={i}\n                    onClick={() => handleSend(qa.prompt)}\n                    className=\"flex items-center gap-2 p-2.5 bg-[var(--dark-3)] border border-[var(--border)] rounded-xl text-[12px] hover:border-[var(--gold)]/30 transition-colors text-left\"\n                  >\n                    <Icon size={14} className=\"text-[var(--gold)] shrink-0\" />\n                    <span className=\"truncate\">{qa.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {aiMessages.map(renderMessage)}\n\n        {aiLoading && (\n          <div className=\"flex justify-start\">\n            <div className=\"bg-[var(--dark-3)] rounded-2xl rounded-bl-md p-3\">\n              <div className=\"flex items-center gap-1 mb-1\">\n                <Brain size={12} className=\"text-[var(--gold)]\" />\n                <span className=\"text-[10px] text-[var(--gold)] font-bold\">Kairos AI</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex gap-1\">\n                  <div className=\"w-2 h-2 rounded-full bg-[var(--gold)] animate-bounce\" style={{ animationDelay: '0ms' }} />\n                  <div className=\"w-2 h-2 rounded-full bg-[var(--gold)] animate-bounce\" style={{ animationDelay: '150ms' }} />\n                  <div className=\"w-2 h-2 rounded-full bg-[var(--gold)] animate-bounce\" style={{ animationDelay: '300ms' }} />\n                </div>\n                <span className=\"text-[10px] text-[var(--text-dim)]\">Analizando mercado...</span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <div className=\"p-3 border-t border-[var(--border)] bg-[var(--dark-2)] shrink-0\">\n        <div className=\"flex gap-2\">\n          <input\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && !e.shiftKey && handleSend()}\n            placeholder=\"Analiza BTC, crea un script, ¿qué es RSI?...\"\n            className=\"flex-1 text-sm\"\n          />\n          <button\n            onClick={() => handleSend()}\n            disabled={!input.trim() || aiLoading}\n            className=\"px-4 py-2 bg-[var(--gold)] text-white rounded-xl hover:bg-[var(--gold-light)] transition-colors disabled:opacity-50\"\n          >\n            <Send size={16} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["AIChat","aiMessages","addAiMessage","aiLoading","setAiLoading","clearAiMessages","currentPrice","selectedPair","priceChange24h","setSelectedPair","setPage","useStore","input","setInput","useState","copiedIdx","setCopiedIdx","messagesEndRef","useRef","useEffect","_a","handleSend","useCallback","overrideMsg","msg","ctx","response","aiService","err","copyScript","code","idx","quickActions","formatPair","BarChart3","Code","Target","BookOpen","ArrowRightLeft","Sparkles","renderText","text","line","j","rendered","p","jsx","renderMessage","i","isUser","motion","jsxs","Brain","Zap","Fragment","Check","Copy","Trash2","qa","Icon","e","Send"],"mappings":"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"}